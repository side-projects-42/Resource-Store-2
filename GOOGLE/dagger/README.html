<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>README</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
</head>
<body>
<h1 id="dagger">Dagger</h1>
<p><a href="https://search.maven.org/artifact/com.google.dagger/dagger"><img src="https://maven-badges.herokuapp.com/maven-central/com.google.dagger/dagger/badge.svg" alt="Maven Central" /></a></p>
<p>A fast dependency injector for Java and Android.</p>
<p>Dagger is a compile-time framework for dependency injection. It uses no reflection or runtime bytecode generation, does all its analysis at compile-time, and generates plain Java source code.</p>
<p>Dagger is actively maintained by the same team that works on <a href="https://github.com/google/guava">Guava</a>. Snapshot releases are auto-deployed to Sonatype’s central Maven repository on every clean build with the version <code>HEAD-SNAPSHOT</code>. The current version builds upon previous work done at <a href="http://github.com/square/dagger/">Square</a>.</p>
<h2 id="documentation">Documentation</h2>
<p>You can <a href="https://dagger.dev">find the dagger documentation here</a> which has extended usage instructions and other useful information. More detailed information can be found in the <a href="https://dagger.dev/api/latest/">API documentation</a>.</p>
<p>You can also learn more from <a href="https://github.com/square/dagger/issues/366">the original proposal</a>, <a href="https://www.youtube.com/watch?v=oK_XtfXPkqw">this talk by Greg Kick</a>, and on the dagger-discuss@googlegroups.com mailing list.</p>
<h2 id="installation">Installation</h2>
<h3 id="bazel">Bazel</h3>
<p>First, import the Dagger repository into your <code>WORKSPACE</code> file using <a href="https://docs.bazel.build/versions/master/external.html#depending-on-other-bazel-projects"><code>http_archive</code></a>.</p>
<p>Note: The <code>http_archive</code> must point to a tagged release of Dagger, not just any commit. The version of the Dagger artifacts will match the version of the tagged release.</p>
<pre><code># Top-level WORKSPACE file

load(&quot;@bazel_tools//tools/build_defs/repo:http.bzl&quot;, &quot;http_archive&quot;)

DAGGER_TAG = &quot;2.28.1&quot;
DAGGER_SHA = &quot;9e69ab2f9a47e0f74e71fe49098bea908c528aa02fa0c5995334447b310d0cdd&quot;
http_archive(
    name = &quot;dagger&quot;,
    strip_prefix = &quot;dagger-dagger-%s&quot; % DAGGER_TAG,
    sha256 = DAGGER_SHA,
    urls = [&quot;https://github.com/google/dagger/archive/dagger-%s.zip&quot; % DAGGER_TAG],
)</code></pre>
<p>Next you will need to setup targets that export the proper dependencies and plugins. Follow the sections below to setup the dependencies you need.</p>
<h4 id="dagger-setup">Dagger Setup</h4>
<p>First, load the Dagger artifacts and repositories, and add them to your list of <a href="https://github.com/bazelbuild/rules_jvm_external#exporting-and-consuming-artifacts-from-external-repositories"><code>maven_install</code></a> artifacts.</p>
<pre><code># Top-level WORKSPACE file

load(&quot;@dagger//:workspace_defs.bzl&quot;, &quot;DAGGER_ARTIFACTS&quot;, &quot;DAGGER_REPOSITORIES&quot;)

maven_install(
    artifacts = DAGGER_ARTIFACTS + [...],
    repositories = DAGGER_REPOSITORIES + [...],
)</code></pre>
<p>Next, load and call <a href="https://github.com/google/dagger/blob/master/workspace_defs.bzl"><code>dagger_rules</code></a> in your top-level <code>BUILD</code> file:</p>
<pre><code># Top-level BUILD file

load(&quot;@dagger//:workspace_defs.bzl&quot;, &quot;dagger_rules&quot;)

dagger_rules()</code></pre>
<p>This will add the following Dagger build targets: (Note that these targets already export all of the dependencies and processors they need).</p>
<pre><code>deps = [
    &quot;:dagger&quot;,                  # For Dagger
    &quot;:dagger-spi&quot;,              # For Dagger SPI
    &quot;:dagger-producers&quot;,        # For Dagger Producers
]</code></pre>
<h4 id="dagger-android-setup">Dagger Android Setup</h4>
<p>First, load the Dagger Android artifacts and repositories, and add them to your list of <a href="https://github.com/bazelbuild/rules_jvm_external#exporting-and-consuming-artifacts-from-external-repositories"><code>maven_install</code></a> artifacts.</p>
<pre><code># Top-level WORKSPACE file

load(
    &quot;@dagger//:workspace_defs.bzl&quot;,
    &quot;DAGGER_ANDROID_ARTIFACTS&quot;,
    &quot;DAGGER_ANDROID_REPOSITORIES&quot;
)

maven_install(
    artifacts = DAGGER_ANDROID_ARTIFACTS + [...],
    repositories = DAGGER_ANDROID_REPOSITORIES + [...],
)</code></pre>
<p>Next, load and call <a href="https://github.com/google/dagger/blob/master/workspace_defs.bzl"><code>dagger_android_rules</code></a> in your top-level <code>BUILD</code> file:</p>
<pre><code># Top-level BUILD file

load(&quot;@dagger//:workspace_defs.bzl&quot;, &quot;dagger_android_rules&quot;)

dagger_android_rules()</code></pre>
<p>This will add the following Dagger Android build targets: (Note that these targets already export all of the dependencies and processors they need).</p>
<pre><code>deps = [
    &quot;:dagger-android&quot;,          # For Dagger Android
    &quot;:dagger-android-support&quot;,  # For Dagger Android (Support)
]</code></pre>
<h4 id="hilt-android-setup">Hilt Android Setup</h4>
<p>First, load the Hilt Android artifacts and repositories, and add them to your list of <a href="https://github.com/bazelbuild/rules_jvm_external#exporting-and-consuming-artifacts-from-external-repositories"><code>maven_install</code></a> artifacts.</p>
<pre><code># Top-level WORKSPACE file

load(
    &quot;@dagger//:workspace_defs.bzl&quot;,
    &quot;HILT_ANDROID_ARTIFACTS&quot;,
    &quot;HILT_ANDROID_REPOSITORIES&quot;
)

maven_install(
    artifacts = HILT_ANDROID_ARTIFACTS + [...],
    repositories = HILT_ANDROID_REPOSITORIES + [...],
)</code></pre>
<p>Next, load and call <a href="https://github.com/google/dagger/blob/master/workspace_defs.bzl"><code>hilt_android_rules</code></a> in your top-level <code>BUILD</code> file:</p>
<pre><code># Top-level BUILD file

load(&quot;@dagger//:workspace_defs.bzl&quot;, &quot;hilt_android_rules&quot;)

hilt_android_rules()</code></pre>
<p>This will add the following Hilt Android build targets: (Note that these targets already export all of the dependencies and processors they need).</p>
<pre><code>deps = [
    &quot;:hilt-android&quot;,            # For Hilt Android
    &quot;:hilt-android-testing&quot;,    # For Hilt Android Testing
]</code></pre>
<h3 id="other-build-systems">Other build systems</h3>
<p>You will need to include the <code>dagger-2.x.jar</code> in your application’s runtime. In order to activate code generation and generate implementations to manage your graph you will need to include <code>dagger-compiler-2.x.jar</code> in your build at compile time.</p>
<h4 id="maven">Maven</h4>
<p>In a Maven project, include the <code>dagger</code> artifact in the dependencies section of your <code>pom.xml</code> and the <code>dagger-compiler</code> artifact as an <code>annotationProcessorPaths</code> value of the <code>maven-compiler-plugin</code>:</p>
<pre><code>&lt;dependencies&gt;
  &lt;dependency&gt;
    &lt;groupId&gt;com.google.dagger&lt;/groupId&gt;
    &lt;artifactId&gt;dagger&lt;/artifactId&gt;
    &lt;version&gt;2.x&lt;/version&gt;
  &lt;/dependency&gt;
&lt;/dependencies&gt;
&lt;build&gt;
  &lt;plugins&gt;
    &lt;plugin&gt;
      &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
      &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
      &lt;version&gt;3.6.1&lt;/version&gt;
      &lt;configuration&gt;
        &lt;annotationProcessorPaths&gt;
          &lt;path&gt;
            &lt;groupId&gt;com.google.dagger&lt;/groupId&gt;
            &lt;artifactId&gt;dagger-compiler&lt;/artifactId&gt;
            &lt;version&gt;2.x&lt;/version&gt;
          &lt;/path&gt;
        &lt;/annotationProcessorPaths&gt;
      &lt;/configuration&gt;
    &lt;/plugin&gt;
  &lt;/plugins&gt;
&lt;/build&gt;</code></pre>
<p>If you are using a version of the <code>maven-compiler-plugin</code> lower than <code>3.5</code>, add the <code>dagger-compiler</code> artifact with the <code>provided</code> scope:</p>
<pre><code>&lt;dependencies&gt;
  &lt;dependency&gt;
    &lt;groupId&gt;com.google.dagger&lt;/groupId&gt;
    &lt;artifactId&gt;dagger&lt;/artifactId&gt;
    &lt;version&gt;2.x&lt;/version&gt;
  &lt;/dependency&gt;
  &lt;dependency&gt;
    &lt;groupId&gt;com.google.dagger&lt;/groupId&gt;
    &lt;artifactId&gt;dagger-compiler&lt;/artifactId&gt;
    &lt;version&gt;2.x&lt;/version&gt;
    &lt;scope&gt;provided&lt;/scope&gt;
  &lt;/dependency&gt;
&lt;/dependencies&gt;</code></pre>
<p>If you use the beta <code>dagger-producers</code> extension (which supplies parallelizable execution graphs), then add this to your maven configuration:</p>
<pre><code>&lt;dependencies&gt;
  &lt;dependency&gt;
    &lt;groupId&gt;com.google.dagger&lt;/groupId&gt;
    &lt;artifactId&gt;dagger-producers&lt;/artifactId&gt;
    &lt;version&gt;2.x&lt;/version&gt;
  &lt;/dependency&gt;
&lt;/dependencies&gt;</code></pre>
<h4 id="gradle">Gradle</h4>
<pre><code>// Add Dagger dependencies
dependencies {
  implementation &#39;com.google.dagger:dagger:2.x&#39;
  annotationProcessor &#39;com.google.dagger:dagger-compiler:2.x&#39;
}</code></pre>
<p>If you’re using classes in <code>dagger.android</code> you’ll also want to include:</p>
<pre><code>implementation &#39;com.google.dagger:dagger-android:2.x&#39;
implementation &#39;com.google.dagger:dagger-android-support:2.x&#39; // if you use the support libraries
annotationProcessor &#39;com.google.dagger:dagger-android-processor:2.x&#39;</code></pre>
<p>Notes:</p>
<ul>
<li>We use <code>implementation</code> instead of <code>api</code> for better compilation performance.
<ul>
<li>See the <a href="https://docs.gradle.org/current/userguide/java_library_plugin.html#sec:java_library_separation">Gradle documentation</a> for more information on how to select appropriately, and the <a href="https://developer.android.com/studio/build/dependencies#dependency_configurations">Android Gradle plugin documentation</a> for Android projects.</li>
</ul></li>
<li>For Kotlin projects, use <a href="https://kotlinlang.org/docs/reference/kapt.html"><code>kapt</code></a> in place of <code>annotationProcessor</code>.</li>
</ul>
<p>If you’re using the <a href="https://developer.android.com/topic/libraries/data-binding/">Android Databinding library</a>, you may want to increase the number of errors that <code>javac</code> will print. When Dagger prints an error, databinding compilation will halt and sometimes print more than 100 errors, which is the default amount for <code>javac</code>. For more information, see <a href="https://github.com/google/dagger/issues/306">Issue 306</a>.</p>
<pre><code>gradle.projectsEvaluated {
  tasks.withType(JavaCompile) {
    options.compilerArgs &lt;&lt; &quot;-Xmaxerrs&quot; &lt;&lt; &quot;500&quot; // or whatever number you want
  }
}</code></pre>
<h3 id="resources">Resources</h3>
<ul>
<li><a href="https://dagger.dev">Documentation</a></li>
<li><a href="https://dagger.dev/api/latest/">Javadocs</a></li>
<li><a href="https://github.com/google/dagger/issues">GitHub Issues</a></li>
</ul>
<p>If you do not use maven, gradle, ivy, or other build systems that consume maven-style binary artifacts, they can be downloaded directly via the <a href="https://search.maven.org/artifact/com.google.dagger/dagger">Maven Central Repository</a>.</p>
<p>Developer snapshots are available from Sonatype’s <a href="https://oss.sonatype.org/content/repositories/snapshots/com/google/dagger/">snapshot repository</a>, and are built on a clean build of the GitHub project’s master branch.</p>
<h2 id="building-dagger">Building Dagger</h2>
<p>See <a href="CONTRIBUTING.md#building-dagger">the CONTRIBUTING.md docs</a>.</p>
<h2 id="license">License</h2>
<pre><code>Copyright 2012 The Dagger Authors

Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</code></pre>
</body>
</html>
