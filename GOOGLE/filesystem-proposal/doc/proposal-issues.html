<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>proposal-issues</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
</head>
<body>
<h2 id="issues-list"><span id="Issues-List">Issues List</span></h2>
<hr />
<h3 id="issue-1-what-is-the-appropriate-namespace-status-tentatively-resolved">Issue 1: What is the appropriate namespace?    Status: Tentatively resolved</h3>
<h4 id="discussion">Discussion</h4>
<p>The N3335 proposal places the library in namespace <code>std::tr2::files</code>. Rationale for a sub-namespace is that the library uses several names that don’t seem appropriate for namespace <code>tr2</code> since full standardization would then put the names into <code>std</code>. The function names <code>remove</code> and <code>rename</code> are of particular concern because these functions differ in behavior from current standard library functions with those names. It also doesn’t seem desirable to preempt names like <code>equivalent</code> and <code>status</code>.</p>
<h4 id="resolution">Resolution</h4>
<p><em>Kona: Strong support for <code>filesystem</code> as the library’s namespace. Strong support for a technical specification namespace that alerts uses that contents are likely to change if and when they later get moved into the standard.</em></p>
<p><em>No decision yet on a TR namespace; <code>tbs</code> being used as a placeholder. Thus the full namespace is changed to <code>std::tbs::filesystem.</code></em></p>
<hr />
<h3 id="issue-2-excessive-use-of-const-codecvt_type-arguments-status-closed">Issue 2: Excessive use of <code>const codecvt_type&amp;</code> arguments    Status: Closed</h3>
<h4 id="discussion-1">Discussion</h4>
<p>Users sometimes need to do path conversions that use something other than the imbued codecvt facet. The need is particularly acute in multi-threaded applications where changing the imbued facet would introduce a data race. That said, providing an optional <code>const codecvt_type&amp;</code> argument for every function where the need might possibly arise is excessive because its use is so rare and it adds considerable interface clutter.</p>
<h4 id="resolution-1">Resolution</h4>
<p><em>Kona:</em></p>
<p><em>Remove all existing class path <code>const codecvt_type&amp;</code> arguments.</em></p>
<p><em>Beman to pursue separate encoding conversion functionality, per Thursday N3336 “Adapting standard library strings and IO to a Unicode World” discussion. See Kona wiki.</em></p>
<p><em>If a separate encoding conversion facility isn’t possible, then some form of minimal class path encoding conversion facility will be needed. But…, the LWG would like to see use cases and clearer explanation of motivation before deciding on specifics, and be very sure that there is no way to achieve with existing std library functionality, albeit with some loss of efficiency.</em></p>
<hr />
<h3 id="issue-3-possible-implicit-cast-to-native-type-status-open">Issue 3: Possible “implicit cast to native type”?     Status: Open</h3>
<h4 id="discussion-2">Discussion</h4>
<p>In Bloomington there was discussion of “implicit cast to implicit cast to native OS type to inter operate with existing iostream library and native functions instead of modifying fstream”.</p>
<h4 id="proposed-resolution">Proposed resolution</h4>
<p><em>Kona: The Dinkumware/Microsoft implementation has added an implicit conversion to the string type, eliminating any need to modify fstream. (Discussion: might be safer to make the implicit conversion protected, then make fstream classes friends).</em></p>
<p><em>Action: Beman to investigate, test, as avoiding modification of existing header and classes is much desired.</em></p>
<hr />
<h3 id="issue-4-given-move-semantics-it-is-best-not-to-return-const-strings.-status-closed">Issue 4: Given move semantics, it is best not to return const strings.     Status: Closed</h3>
<h4 id="discussion-3">Discussion</h4>
<p>The issue title pretty much says it all.</p>
<h4 id="resolution-2">Resolution</h4>
<p><em>Kona: Return plain strings. Remove the permission for implementations to return const refs, since uses are not in performace critical code and subtle portability bugs may occur.</em></p>
<p><em>Action: Beman to apply to proposed wording.</em></p>
<p><em>Version 3: Resolution applied.</em></p>
<hr />
<h3 id="issue-5-is-there-a-way-to-handle-characters-that-are-illegal-for-particular-os-status-nad">Issue 5: Is there a way to handle characters that are illegal for particular OS?     Status: NAD</h3>
<h4 id="discussion-4">Discussion</h4>
<p>Question raised by Pablo in Bloomington.</p>
<h4 id="proposed-resolution-1">Proposed resolution</h4>
<p>Beman suggests NAD, Future. I’ve done some work on this, including looking at systems like OpenVMS that have an escape mechanism to handle otherwise unrepresentable characters. There was a comment to that effect in N3239. I believe it should be deferred to some future release since (1) it is complex enough that I’d like to see actual implementation and use experience (presumably via Boost), and (2) I can’t recall a user ever requesting such a feature.</p>
<p><em>Kona: No consensus for change, since there doesn’t appear to be any compelling use case.</em></p>
<hr />
<h3 id="issue-6-could-allocator-support-be-added-to-class-path-status-open">Issue 6: Could allocator support be added to class path?     Status: Open</h3>
<h4 id="discussion-5">Discussion</h4>
<p>Question raised by a committee member in private email.</p>
<p><em>Kona: Much discussion.</em></p>
<p><em>Action: Alisdair to write paper, based on a real implementation, so that it is possible to assess the impact on interface, performance, etc.</em></p>
<p><em>Post-Kona: Alisdair will defer paper until after TR.</em></p>
<hr />
<h3 id="issue-7-how-should-class-path-inserter-and-extractor-be-specified-status-resolved">Issue 7: How should class path inserter and extractor be specified?       Status: Resolved</h3>
<h4 id="discussion-6">Discussion</h4>
<p>Class <code>path</code> currently is specified to used the Boost detail <code>quoted</code> stream manipulator. A path object is inserted delimited by quotes, and extracted accordingly, ensuring that paths containing spaces are round-tripped correctly.  Quotes in the path itself are escaped, and io state is saved and restored.</p>
<p>See <a href="http://www.boost.org/doc/libs/1_48_0/libs/io/doc/quoted_manip.html" class="uri">http://www.boost.org/doc/libs/1_48_0/libs/io/doc/quoted_manip.html</a></p>
<p>Since the standard can’t specify behavior in terms of something in Boost, we have to change the specification. Since the <code>quoted</code> stream manipulator is a handy little component, the issue is raised as to whether it should go in TR2.</p>
<h4 id="resolution-3">Resolution</h4>
<p><em>Kona: Specify the path inserter and extractor to have the desired behavior without reference to how it is achieved. (If someone wants to propose a quoted manipulator, that’s a separate proposal for a different TR.)</em></p>
<p><em>Action:  Beman to apply to proposed wording.</em></p>
<p><em>Version 3: Resolution applied.</em></p>
<hr />
<h3 id="issue-8-rename-rename-status-new">Issue 8: Rename <code>rename</code>       Status: New</h3>
<h4 id="discussion-7">Discussion</h4>
<p>There are minor problems with the name of the <code>rename()</code> function:</p>
<ul>
<li>There is already a “rename” function, albeit in namespace std, and it has different semantics as regards error handling. Thus giving the function a different name might reduce the chance of user error.</li>
<li>The name “move” would  better reflect the actual semantics, particularly for moves between directories., and this is the name used by some API’s, console commands, and GUI file managers for that functionality.</li>
</ul>
<h4 id="proposed-resolution-2">Proposed resolution</h4>
<p>Change the name of the <code>rename()</code> function to <code>move()</code>.</p>
<hr />
</body>
</html>
