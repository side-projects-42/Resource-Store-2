<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>closebrackets</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
</head>
<body>
<h1 id="codemirror-closebrackets-demo">CodeMirror: Closebrackets Demo</h1>
<p>Type a bracket like ‘[’, ‘(’, ‘{’, ‘"’, or ’’’ and <a href="../doc/manual.html#addon_closebrackets">the addon</a> will auto-close it. Type the closing variant when directly in front of a matching character and it will overwrite it.</p>
<p>If you backspace over a starting bracket while inside empty brackets (e.g. <code>{|}</code>), it will delete the closing bracket for you.</p>
<p>(function() { var DEFAULT_BRACKETS = “()[]{}’’\”\"“; CodeMirror.defineOption(”autoCloseBrackets“, false, function(cm, val, old) { var wasOn = old &amp;&amp; old != CodeMirror.Init; if (val &amp;&amp; !wasOn) cm.addKeyMap(buildKeymap(typeof val ==”string" ? val : DEFAULT_BRACKETS)); else if (!val &amp;&amp; wasOn) cm.removeKeyMap(“autoCloseBrackets”); }); function buildKeymap(pairs) { var map = {name : “autoCloseBrackets”}; for (var i = 0; i &lt; pairs.length; i += 2) (function(left, right) { function maybeOverwrite(cm) { var cur = cm.getCursor(), ahead = cm.getRange(cur, CodeMirror.Pos(cur.line, cur.ch + 1)); if (ahead != right) return CodeMirror.Pass; else cm.execCommand(“goCharRight”); } map[“’” + left + “‘“] = function(cm) { if (left == right &amp;&amp; maybeOverwrite(cm) != CodeMirror.Pass) return; var cur = cm.getCursor(), ahead = CodeMirror.Pos(cur.line, cur.ch + 1); cm.replaceSelection(left + right, {head: ahead, anchor: ahead}); }; if (left != right) map[”’” + right + “’”] = maybeOverwrite; })(pairs.charAt(i), pairs.charAt(i + 1)); return map; } })();</p>
</body>
</html>
