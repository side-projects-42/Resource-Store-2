<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>index</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
</head>
<body>
<h1 id="codemirror-c-like-mode">CodeMirror: C-like mode</h1>
<p>/* C demo code */ #include #include #include #include #include #include #include typedef struct { void* arg_socket; zmq_msg_t* arg_msg; char* arg_string; unsigned long arg_len; int arg_int, arg_command; int signal_fd; int pad; void* context; sem_t sem; } acl_zmq_context; #define p(X) (context-&gt;arg_##X) void* zmq_thread(void* context_pointer) { acl_zmq_context* context = (acl_zmq_context*)context_pointer; char ok = ‘K’, err = ‘X’; int res; while (1) { while ((res = sem_wait(&amp;context-&gt;sem)) == EINTR); if (res) {write(context-&gt;signal_fd, &amp;err, 1); goto cleanup;} switch(p(command)) { case 0: goto cleanup; case 1: p(socket) = zmq_socket(context-&gt;context, p(int)); break; case 2: p(int) = zmq_close(p(socket)); break; case 3: p(int) = zmq_bind(p(socket), p(string)); break; case 4: p(int) = zmq_connect(p(socket), p(string)); break; case 5: p(int) = zmq_getsockopt(p(socket), p(int), (void*)p(string), &amp;p(len)); break; case 6: p(int) = zmq_setsockopt(p(socket), p(int), (void*)p(string), p(len)); break; case 7: p(int) = zmq_send(p(socket), p(msg), p(int)); break; case 8: p(int) = zmq_recv(p(socket), p(msg), p(int)); break; case 9: p(int) = zmq_poll(p(socket), p(int), p(len)); break; } p(command) = errno; write(context-&gt;signal_fd, &amp;ok, 1); } cleanup: close(context-&gt;signal_fd); free(context_pointer); return 0; } void* zmq_thread_init(void* zmq_context, int signal_fd) { acl_zmq_context* context = malloc(sizeof(acl_zmq_context)); pthread_t thread; context-&gt;context = zmq_context; context-&gt;signal_fd = signal_fd; sem_init(&amp;context-&gt;sem, 1, 0); pthread_create(&amp;thread, 0, &amp;zmq_thread, context); pthread_detach(thread); return context; }</p>
<p>Simple mode that tries to handle C-like languages as well as it can. Takes two configuration parameters: <code>keywords</code>, an object whose property names are the keywords in the language, and <code>useCPP</code>, which determines whether C preprocessor directives are recognized.</p>
<p><strong>MIME types defined:</strong> <code>text/x-csrc</code> (C code), <code>text/x-c++src</code> (C++ code), <code>text/x-java</code> (Java code), <code>text/x-csharp</code> (C#).</p>
</body>
</html>
