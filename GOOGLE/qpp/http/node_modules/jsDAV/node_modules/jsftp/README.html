<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>README</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
</head>
<body>
<h1 id="jsftp-build-status">jsftp <a href="http://travis-ci.org/sergi/jsftp"><img src="https://secure.travis-ci.org/sergi/jsftp.png" alt="Build Status" /></a></h1>
<p>jsftp is a client FTP library for NodeJS that focuses on correctness, clarity and conciseness. It doesn’t get in the middle of the user intentions.</p>
<p>jsftp gives the user access to all the raw commands of FTP in form of methods in the <code>Ftp</code> object. It also provides several convenience methods for actions that require complex chains of commands (e.g. uploading and retrieving files). When commands succeed they always pass the response of the server to the callback, in the form of an object that contains two properties: <code>code</code>, which is the response code of the FTP operation, and <code>text</code>, which is the complete text of the response.</p>
<p>Raw (or native) commands are accessible in the form <code>Ftp.raw["desired_command"](params, callback)</code></p>
<p>Thus, a command like <code>QUIT</code> will be called like</p>
<pre><code>Ftp.raw.quit(function(err, data) {
    if (err)
        return console.error(err);

    console.log(&quot;Bye!&quot;);
});</code></pre>
<p>and a command like <code>MKD</code>, which accepts parameters, will look like</p>
<pre><code>Ftp.raw.mkd(&quot;/new_dir&quot;, function(err, data) {
    if (err)
        return console.error(err);

    console.log(data.text); // Presenting the FTP response text to the user
});</code></pre>
<h2 id="usage-examples">Usage examples</h2>
<pre><code>var Ftp = require(&quot;jsftp&quot;);

var ftp = new Ftp({
    host: &quot;myhost.com&quot;,
    user: &quot;johndoe&quot;,
    port: 3334, // Defaults to 21
    pass: &quot;12345&quot;
});


// Retrieve a file in the remote server. When the file has been retrieved,
// the callback will be called with `data` being the Buffer with the
// contents of the file.

// `ftp.get` is a convenience method. In this case, it hides the actual
// complexity of setting up passive mode and retrieving files.
ftp.get(&quot;/folder/file.ext&quot;, function(err, data) {
    if (err)
        return console.error(err);

    // Do something with the buffer
    doSomething(data);

    // We can use raw FTP commands directly as well. In this case we use FTP
    // &#39;QUIT&#39; method, which accepts no parameters and returns the farewell
    // message from the server
    ftp.raw.quit(function(err, res) {
        if (err)
            return console.error(err);

        console.log(&quot;FTP session finalized! See you soon!&quot;);
    });
});

// Create a directory
ftp.raw.mkd(&quot;/example_dir&quot;, function(err, data) {
    if (err)
        return console.error(err);

    console.log(data.text);
});

// Delete a directory
ftp.raw.rmd(&quot;/example_dir&quot;, function(err, data) {
    if (err)
        return console.error(err);

    console.log(data.text);
});</code></pre>
<p>You can find more usage examples in the <a href="https://github.com/sergi/jsftp/blob/master/test/jsftp_test.js">unit tests</a>. This documentation will grow as jsftp evolves.</p>
<h2 id="api">API</h2>
<h3 id="properties">Properties</h3>
<h4 id="ftp.host">Ftp.host</h4>
<p>Host name for the current FTP server.</p>
<h4 id="ftp.port">Ftp.port</h4>
<p>Port number for the current FTP server (defaults to 21).</p>
<h4 id="ftp.socket">Ftp.socket</h4>
<p>NodeJS socket for the current FTP server.</p>
<h4 id="ftp.features">Ftp.features</h4>
<p><code>features</code> is an array of feature names for the current FTP server. It is generated when the user authenticates with the <code>auth</code> method.</p>
<h3 id="methods">Methods</h3>
<h4 id="ftp.raw.ftp_commandparams-callback">Ftp.raw.FTP_COMMAND([params], callback)</h4>
<p>All the standard FTP commands are available under the <code>raw</code> namespace. These commands might accept parameters or not, but they always accept a callback with the signature <code>err, data</code>, in which <code>err</code> is the error response coming from the server (usually a 4xx or 5xx error code) and the data is an object that contains two properties: <code>code</code> and <code>text</code>. <code>code</code> is an integer indicating the response code of the response and <code>text</code> is the response string itself.</p>
<h4 id="ftp.authusername-password-callback">Ftp.auth(username, password, callback)</h4>
<p>Authenticates the user with the given username and password. If null or empty values are passed for those, <code>auth</code> will use anonymous credentials. <code>callback</code> will be called with the response text in case of successful login or with an error as a first parameter, in normal Node fashion.</p>
<h4 id="ftp.listfilepath-callback">Ftp.list(filePath, callback)</h4>
<p>Lists <code>filePath</code> contents using a passive connection.</p>
<h4 id="ftp.getfilepath-callback">Ftp.get(filePath, callback)</h4>
<p>Downloads <code>filePath</code> from the server.</p>
<h4 id="ftp.putfilepath-buffer-callback">Ftp.put(filePath, buffer, callback)</h4>
<p>Uploads a file to <code>filePath</code>. It accepts a <code>buffer</code> parameter that will be written in the remote file.</p>
<h4 id="ftp.renamefrom-to-callback">Ftp.rename(from, to, callback)</h4>
<p>Renames a file in the server. <code>from</code> and <code>to</code> are both filepaths.</p>
<h4 id="ftp.lsfilepath-callback">Ftp.ls(filePath, callback)</h4>
<p>Lists information about files or directories and yields an array of file objects with parsed file properties to the callback. You should use this function instead of <code>stat</code> or <code>list</code> in case you need to do something with the individual file properties.</p>
<h4 id="ftp.keepalive">Ftp.keepAlive()</h4>
<p>Refreshes the interval thats keep the server connection active. There is no need to call this method since it is taken care internally</p>
<h2 id="installation">Installation</h2>
<p>With NPM:</p>
<pre><code>npm install jsftp</code></pre>
<p>From GitHub:</p>
<pre><code>git clone https://github.com/sergi/jsftp.git</code></pre>
<h2 id="tests">Tests</h2>
<p>To run the tests:</p>
<pre><code>npm test</code></pre>
<p>Please note that for now the unit tests require python because the FTP server used is written in python.</p>
<h2 id="license">License</h2>
<p>See LICENSE.</p>
</body>
</html>
