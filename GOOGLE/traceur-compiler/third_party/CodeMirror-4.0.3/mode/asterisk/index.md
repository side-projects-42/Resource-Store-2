CodeMirror: Asterisk dialplan mode

[<img src="../../doc/logo.png" id="logo" />](http://codemirror.net)

-   [Home](../../index.html)
-   [Manual](../../doc/manual.html)
-   [Code](https://github.com/marijnh/codemirror)

<!-- -->

-   [Language modes](../index.html)
-   <a href="#" class="active">Asterisk dialplan</a>

Asterisk dialplan mode
----------------------

; extensions.conf - the Asterisk dial plan ; \[general\] ; ; If static is set to no, or omitted, then the pbx\_config will rewrite ; this file when extensions are modified. Remember that all comments ; made in the file will be lost when that happens. static=yes \#include "/etc/asterisk/additional\_general.conf \[iaxprovider\] switch =&gt; IAX2/user:\[key\]<span class="citation" data-cites="myserver/mycontext">@myserver/mycontext</span> \[dynamic\] \#exec /usr/bin/dynamic-peers.pl \[trunkint\] ; ; International long distance through trunk ; exten =&gt; \_9011.,1,Macro(dundi-e164,<span class="math inline">${EXTEN:4}) exten =&gt; \\\_9011.,n,Dial($</span>{GLOBAL(TRUNK)}/<span class="math inline">${FILTER(0-9,$</span>{EXTEN:<span class="math inline">${GLOBAL(TRUNKMSD)}})}) \\\[local\\\] ; ; Master context for local, toll-free, and iaxtel calls only ; ignorepat =&gt; 9 include =&gt; default \\\[demo\\\] include =&gt; stdexten ; ; We start with what to do when a call first comes in. ; exten =&gt; s,1,Wait(1) ; Wait a second, just for fun same =&gt; n,Answer ; Answer the line same =&gt; n,Set(TIMEOUT(digit)=5) ; Set Digit Timeout to 5 seconds same =&gt; n,Set(TIMEOUT(response)=10) ; Set Response Timeout to 10 seconds same =&gt; n(restart),BackGround(demo-congrats) ; Play a congratulatory message same =&gt; n(instruct),BackGround(demo-instruct) ; Play some instructions same =&gt; n,WaitExten ; Wait for an extension to be dialed. exten =&gt; 2,1,BackGround(demo-moreinfo) ; Give some more information. exten =&gt; 2,n,Goto(s,instruct) exten =&gt; 3,1,Set(LANGUAGE()=fr) ; Set language to french exten =&gt; 3,n,Goto(s,restart) ; Start with the congratulations exten =&gt; 1000,1,Goto(default,s,1) ; ; We also create an example user, 1234, who is on the console and has ; voicemail, etc. ; exten =&gt; 1234,1,Playback(transfer,skip) ; "Please hold while..." ; (but skip if channel is not up) exten =&gt; 1234,n,Gosub($</span>{EXTEN},stdexten(<span class="math inline">${GLOBAL(CONSOLE)})) exten =&gt; 1234,n,Goto(default,s,1) ; exited Voicemail exten =&gt; 1235,1,Voicemail(1234,u) ; Right to voicemail exten =&gt; 1236,1,Dial(Console/dsp) ; Ring forever exten =&gt; 1236,n,Voicemail(1234,b) ; Unless busy ; ; \\\# for when they're done with the demo ; exten =&gt; \\\#,1,Playback(demo-thanks) ; "Thanks for trying the demo" exten =&gt; \\\#,n,Hangup ; Hang them up. ; ; A timeout and "invalid extension rule" ; exten =&gt; t,1,Goto(\\\#,1) ; If they take too long, give up exten =&gt; i,1,Playback(invalid) ; "That's not valid, try again" ; ; Create an extension, 500, for dialing the ; Asterisk demo. ; exten =&gt; 500,1,Playback(demo-abouttotry); Let them know what's going on exten =&gt; 500,n,Dial(IAX2/guest@pbx.digium.com/s@default) ; Call the Asterisk demo exten =&gt; 500,n,Playback(demo-nogo) ; Couldn't connect to the demo site exten =&gt; 500,n,Goto(s,6) ; Return to the start over message. ; ; Create an extension, 600, for evaluating echo latency. ; exten =&gt; 600,1,Playback(demo-echotest) ; Let them know what's going on exten =&gt; 600,n,Echo ; Do the echo test exten =&gt; 600,n,Playback(demo-echodone) ; Let them know it's over exten =&gt; 600,n,Goto(s,6) ; Start over ; ; You can use the Macro Page to intercom a individual user exten =&gt; 76245,1,Macro(page,SIP/Grandstream1) ; or if your peernames are the same as extensions exten =&gt; \\\_7XXX,1,Macro(page,SIP/$</span>{EXTEN}) ; ; ; System Wide Page at extension 7999 ; exten =&gt; 7999,1,Set(TIMEOUT(absolute)=60) exten =&gt; 7999,2,Page(Local/Grandstream1@page&Local/Xlite1@page&Local/1234@page/n,d) ; Give voicemail at extension 8500 ; exten =&gt; 8500,1,VoicemailMain exten =&gt; 8500,n,Goto(s,6)

**MIME types defined:** `text/x-asterisk`.
