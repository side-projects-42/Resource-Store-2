<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>index</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
</head>
<body>
<p>CodeMirror: Puppet mode</p>
<p><a href="http://codemirror.net"><img src="../../doc/logo.png" id="logo" /></a></p>
<ul>
<li><a href="../../index.html">Home</a></li>
<li><a href="../../doc/manual.html">Manual</a></li>
<li><a href="https://github.com/marijnh/codemirror">Code</a></li>
</ul>
<!-- -->
<ul>
<li><a href="../index.html">Language modes</a></li>
<li><a href="#" class="active">Puppet</a></li>
</ul>
<h2 id="puppet-mode">Puppet mode</h2>
<p># == Class: automysqlbackup # # Puppet module to install AutoMySQLBackup for periodic MySQL backups. # # class { ‘automysqlbackup’: # backup_dir =&gt; ‘/mnt/backups’, # } # class automysqlbackup ( $bin_dir = $automysqlbackup::params::bin_dir, $etc_dir = $automysqlbackup::params::etc_dir, $backup_dir = $automysqlbackup::params::backup_dir, $install_multicore = undef, $config = {}, <span class="math inline">$config\_defaults = {}, ) inherits automysqlbackup::params { \# Ensure valid paths are assigned validate\_absolute\_path($</span>bin_dir) validate_absolute_path(<span class="math inline"><em>e</em><em>t</em><em>c</em>_<em>d</em><em>i</em><em>r</em>)<em>v</em><em>a</em><em>l</em><em>i</em><em>d</em><em>a</em><em>t</em><em>e</em>_<em>a</em><em>b</em><em>s</em><em>o</em><em>l</em><em>u</em><em>t</em><em>e</em>_<em>p</em><em>a</em><em>t</em><em>h</em>(</span>backup_dir) # Create a subdirectory in /etc for config files file { <span class="math inline">$etc\_dir: ensure =&amp;gt; directory, owner =&amp;gt; 'root', group =&amp;gt; 'root', mode =&amp;gt; '0750', } \# Create an example backup file, useful for reference file { "$</span>{etc_dir}/automysqlbackup.conf.example“: ensure =&gt; file, owner =&gt; ‘root’, group =&gt; ‘root’, mode =&gt; ‘0660’, source =&gt; ‘puppet:///modules/automysqlbackup/automysqlbackup.conf’, } # Add files from the developer file {”<span class="math inline">${etc\_dir}/AMB\_README": ensure =&amp;gt; file, source =&amp;gt; 'puppet:///modules/automysqlbackup/AMB\_README', } file { "$</span>{etc_dir}/AMB_LICENSE“: ensure =&gt; file, source =&gt; ‘puppet:///modules/automysqlbackup/AMB_LICENSE’, } # Install the actual binary file file {”${bin_dir}/automysqlbackup": ensure =&gt; file, owner =&gt; ‘root’, group =&gt; ‘root’, mode =&gt; ‘0755’, source =&gt; ‘puppet:///modules/automysqlbackup/automysqlbackup’, } # Create the base backup directory file { <span class="math inline">$backup\_dir: ensure =&amp;gt; directory, owner =&amp;gt; 'root', group =&amp;gt; 'root', mode =&amp;gt; '0755', } \# If you'd like to keep your config in hiera and pass it to this class if !empty($</span>config) { create_resources(‘automysqlbackup::backup’, $config, $config_defaults) } # If using RedHat family, must have the RPMforge repo’s enabled if $install_multicore { package { [‘pigz’, ‘pbzip2’]: ensure =&gt; installed } } }</p>
<p><strong>MIME types defined:</strong> <code>text/x-puppet</code>.</p>
</body>
</html>
