<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>building</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
</head>
<body>
<h1 id="building">Building</h1>
<h2 id="setup">Setup</h2>
<pre><code># You may need to do this on Linux
umask 0022
# Clone the project
git clone git@github.com:google/tracing-framework.git
cd tracing-framework/
# Run one-time setup of dependencies
./scripts/setup.sh # or setup.bat on Windows

# Source the utility script to get the nice bash aliases
# You&#39;ll want to do this every time you start up a new prompt
source wtfrc
# Start a dev server on port 8080
anvil serve -p 8080 &amp;
# Do a full build
anvil build :debug :release

# When updating goog.require/provide or soy/gss you must do:
anvil build :fast</code></pre>
<h2 id="building-the-chrome-extension">Building the Chrome Extension</h2>
<p>The only way to use the injector is to compile a release build. This is because of all the namespace conflicts and other issues that would come about if you tried to run it uncompiled in a page with its own content.</p>
<h3 id="local-unpacked">Local Unpacked</h3>
<p>If you want to do debugging/use the extension unpacked on a local machine, deploy it to a local directory:</p>
<pre><code># Build a release build and get all of the files in a folder
anvil deploy -o build-bin/ extensions/wtf-injector-chrome:deploy
# Alternatively, use an alias:
deployext</code></pre>
<p>Then, use ‘Load Unpacked Extension’ from <code>chrome://extensions</code>. Any time you update the code you’ll have to rerun this step and then reload the extension.</p>
<h3 id="chrome-web-store-.zip">Chrome Web Store .zip</h3>
<p>The Web Store requires a zip file:</p>
<pre><code># Build release and deploy a zip
anvil deploy -o build-bin/ :injector
# Load build-bin/wtf-injector-chrome/wtf-injector-chrome.zip as an unpacked extension in Chrome or upload to the CWS</code></pre>
<h2 id="platform-notes">Platform Notes</h2>
<h3 id="os-x">OS X</h3>
<p>On the first build attempt (<code>anvil build :debug :release</code>) you will be prompted to install Java if it is not already present. Follow the dialogs and try again and it should work.</p>
<h3 id="windows">Windows</h3>
<p>Although it’s (somewhat) possible to use things from Cygwin, some stuff fails randomly. I recommend using the normal Windows command prompt.</p>
<p>You’ll need to install git, python, and node 0.8+. Once setup, clone the repo and run <code>scripts\setup.bat</code> - everything should happen automatically.</p>
<p>Keep your working directory in the root tracing-framework path and use the <code>anvil</code> commands as described above. Builds may be a little slower than on *nix systems but should still work!</p>
</body>
</html>
