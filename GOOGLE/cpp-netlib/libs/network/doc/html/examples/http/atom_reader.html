<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>atom_reader</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
</head>
<body>
<h3 id="navigation">Navigation</h3>
<ul>
<li><a href="twitter_search.html" title="Twitter search">next</a></li>
<li><a href="hello_world_client.html" title="“Hello world” HTTP client">previous</a> |</li>
<li><a href="../../contents.html">cpp-netlib v0.11.2</a> »</li>
<li><a href="../../examples.html">Examples</a> »</li>
</ul>
<p><span id="atom-reader"></span></p>
<h1 id="atom-feed-reader">Atom feed reader<a href="#atom-feed-reader" class="headerlink" title="Permalink to this headline">¶</a></h1>
<p>The next examples show some simple, more practical applications using the HTTP client. The first one reads a simple <a href="http://en.wikipedia.org/wiki/Atom_(standard)" class="reference external">Atom</a> feed and prints the titles of each entry to the console.</p>
<h2 id="the-code">The code<a href="#the-code" class="headerlink" title="Permalink to this headline">¶</a></h2>
<pre><code>#include &quot;atom.hpp&quot;
#include &lt;boost/network/protocol/http/client.hpp&gt;
#include &lt;boost/foreach.hpp&gt;
#include &lt;iostream&gt;

int main(int argc, char * argv[]) {
    using namespace boost::network;

    if (argc != 2) {
        std::cout &lt;&lt; &quot;Usage: &quot; &lt;&lt; argv[0] &lt;&lt; &quot; &lt;url&gt;&quot; &lt;&lt; std::endl;
        return 1;
    }

    try {
        http::client client;
        http::client::request request(argv[1]);
        request &lt;&lt; header(&quot;Connection&quot;, &quot;close&quot;);
        http::client::response response = client.get(request);
        atom::feed feed(response);

        std::cout &lt;&lt; &quot;Feed: &quot; &lt;&lt; feed.title()
                  &lt;&lt; &quot; (&quot; &lt;&lt; feed.subtitle() &lt;&lt; &quot;)&quot; &lt;&lt; std::endl;
        BOOST_FOREACH(const atom::entry &amp;entry, feed) {
            std::cout &lt;&lt; entry.title()
                      &lt;&lt; &quot; (&quot; &lt;&lt; entry.published() &lt;&lt; &quot;)&quot; &lt;&lt; std::endl;
        }
    }
    catch (std::exception &amp;e) {
        std::cerr &lt;&lt; e.what() &lt;&lt; std::endl;
    }

    return 0;
}</code></pre>
<h2 id="building-and-running-atom_reader">Building and running <code>atom_reader</code><a href="#building-and-running-atom-reader" class="headerlink" title="Permalink to this headline">¶</a></h2>
<pre><code>$ cd ~/cpp-netlib-build
$ make atom_reader</code></pre>
<p>And to run the example from the command line to access the feed that lists of all the commits on cpp-netlib’s master branch:</p>
<pre><code>$ ./example/atom_reader https://github.com/cpp-netlib/cpp-netlib/commits/master.atom</code></pre>
<h2 id="diving-into-the-code">Diving into the code<a href="#diving-into-the-code" class="headerlink" title="Permalink to this headline">¶</a></h2>
<p>Most of this will now be familiar. The response is passed to the constructor to the <code>atom::feed</code> class, which parses the resultant XML. To keep this example as simple as possible, <a href="http://rapidxml.sourceforge.net/" class="reference external">rapidxml</a>, a header-only XML parser library, was used to parse the response.</p>
<p>A similar example using RSS feeds exists in <code>libs/network/example/rss</code>.</p>
<h3 id="table-of-contents"><a href="../../contents.html">Table Of Contents</a></h3>
<ul>
<li><a href="#" class="reference internal">Atom feed reader</a>
<ul>
<li><a href="#the-code" class="reference internal">The code</a></li>
<li><a href="#building-and-running-atom-reader" class="reference internal">Building and running <code class="docutils literal">atom_reader</code></a></li>
<li><a href="#diving-into-the-code" class="reference internal">Diving into the code</a></li>
</ul></li>
</ul>
<h4 id="previous-topic">Previous topic</h4>
<p><a href="hello_world_client.html" title="previous chapter">“Hello world” HTTP client</a></p>
<h4 id="next-topic">Next topic</h4>
<p><a href="twitter_search.html" title="next chapter">Twitter search</a></p>
<h3 id="quick-search">Quick search</h3>
<p>Enter search terms or a module, class or function name.</p>
<h3 id="navigation-1">Navigation</h3>
<ul>
<li><a href="twitter_search.html" title="Twitter search">next</a></li>
<li><a href="hello_world_client.html" title="“Hello world” HTTP client">previous</a> |</li>
<li><a href="../../contents.html">cpp-netlib v0.11.2</a> »</li>
<li><a href="../../examples.html">Examples</a> »</li>
</ul>
<p>© Copyright 2008-2014, Glyn Matthews, Dean Michael Berris; 2013 Google, Inc.. Last updated on Mar 29, 2016. Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.6.</p>
</body>
</html>
