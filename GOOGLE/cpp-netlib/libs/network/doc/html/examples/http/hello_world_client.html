<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>hello_world_client</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
</head>
<body>
<h3 id="navigation">Navigation</h3>
<ul>
<li><a href="atom_reader.html" title="Atom feed reader">next</a></li>
<li><a href="hello_world_server.html" title="“Hello world” HTTP server">previous</a> |</li>
<li><a href="../../contents.html">cpp-netlib v0.11.2</a> »</li>
<li><a href="../../examples.html">Examples</a> »</li>
</ul>
<p><span id="id1"></span></p>
<h1 id="hello-world-http-client">“Hello world” HTTP client<a href="#hello-world-http-client" class="headerlink" title="Permalink to this headline">¶</a></h1>
<p>Since we have a “Hello World” HTTP server, let’s then create an HTTP client to access that server. This client will be similar to the HTTP client we made earlier in the documentation.</p>
<h2 id="the-code">The code<a href="#the-code" class="headerlink" title="Permalink to this headline">¶</a></h2>
<p>We want to create a simple HTTP client that just makes a request to the HTTP server that we created earlier. This really simple client will look like this:</p>
<pre><code>#include &lt;boost/network/protocol/http/client.hpp&gt;
#include &lt;string&gt;
#include &lt;sstream&gt;
#include &lt;iostream&gt;

namespace http = boost::network::http;

int main(int argc, char * argv[]) {
    if (argc != 3) {
        std::cerr &lt;&lt; &quot;Usage: &quot; &lt;&lt; argv[0] &lt;&lt; &quot; address port&quot; &lt;&lt; std::endl;
        return 1;
    }

    try {
        http::client client;
        std::ostringstream url;
        url &lt;&lt; &quot;http://&quot; &lt;&lt; argv[1] &lt;&lt; &quot;:&quot; &lt;&lt; argv[2] &lt;&lt; &quot;/&quot;;
        http::client::request request(url.str());
        http::client::response response =
            client.get(request);
        std::cout &lt;&lt; body(response) &lt;&lt; std::endl;
    } catch (std::exception &amp; e) {
        std::cerr &lt;&lt; e.what() &lt;&lt; std::endl;
        return 1;
    }
    return 0;
}</code></pre>
<h2 id="building-and-running-the-client">Building and running the client<a href="#building-and-running-the-client" class="headerlink" title="Permalink to this headline">¶</a></h2>
<p>Just like with the HTTP Server and HTTP client example before, we can build this example by doing the following on the shell:</p>
<pre><code>$ cd ~/cpp-netlib-build
$ make hello_world_client</code></pre>
<p>This example can be run from the command line as follows:</p>
<pre><code>$ ./example/hello_world_client http://127.0.0.1:8000</code></pre>
<p>Note</p>
<p>This assumes that you have the <code>hello_world_server</code> running on localhost port 8000.</p>
<h2 id="diving-into-the-code">Diving into the code<a href="#diving-into-the-code" class="headerlink" title="Permalink to this headline">¶</a></h2>
<p>All this example shows is how easy it is to write an HTTP client that connects to an HTTP server, and gets the body of the response. The relevant lines are:</p>
<pre><code>http::client client;
http::client::request request(url.str());
http::client::response response =
    client.get(request);
std::cout &lt;&lt; body(response) &lt;&lt; std::endl;</code></pre>
<p>You can then imagine using this in an XML-RPC client, where you can craft the XML-RPC request as payload which you can pass as the body to a request, then perform the request via HTTP:</p>
<pre><code>http::client client;
http::client::request request(&quot;http://my.webservice.com/&quot;);
http::client::response =
    client.post(request, some_xml_string, &quot;application/xml&quot;);
std::data = body(response);</code></pre>
<p>The next set of examples show some more practical applications using the <code>cpp-netlib</code> HTTP client.</p>
<h3 id="table-of-contents"><a href="../../contents.html">Table Of Contents</a></h3>
<ul>
<li><a href="#" class="reference internal">“Hello world” HTTP client</a>
<ul>
<li><a href="#the-code" class="reference internal">The code</a></li>
<li><a href="#building-and-running-the-client" class="reference internal">Building and running the client</a></li>
<li><a href="#diving-into-the-code" class="reference internal">Diving into the code</a></li>
</ul></li>
</ul>
<h4 id="previous-topic">Previous topic</h4>
<p><a href="hello_world_server.html" title="previous chapter">“Hello world” HTTP server</a></p>
<h4 id="next-topic">Next topic</h4>
<p><a href="atom_reader.html" title="next chapter">Atom feed reader</a></p>
<h3 id="quick-search">Quick search</h3>
<p>Enter search terms or a module, class or function name.</p>
<h3 id="navigation-1">Navigation</h3>
<ul>
<li><a href="atom_reader.html" title="Atom feed reader">next</a></li>
<li><a href="hello_world_server.html" title="“Hello world” HTTP server">previous</a> |</li>
<li><a href="../../contents.html">cpp-netlib v0.11.2</a> »</li>
<li><a href="../../examples.html">Examples</a> »</li>
</ul>
<p>© Copyright 2008-2014, Glyn Matthews, Dean Michael Berris; 2013 Google, Inc.. Last updated on Mar 29, 2016. Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.6.</p>
</body>
</html>
