<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>README</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
</head>
<body>
<h1 id="performance-test-data-convertor">Performance Test Data Convertor</h1>
<h2 id="overview">Overview</h2>
<p>Performance Test Data Convertor is used for converting the json files to excel files. The json files are generated from project <code>tests/performance-tests</code>.</p>
<h2 id="requirement">Requirement</h2>
<ul>
<li>Python 2.7 is required. (Python 2.7.5 is well tested)</li>
<li><a href="https://pypi.python.org/pypi/xlwt/">xlwt</a> for python to write excel files.</li>
</ul>
<h2 id="generate-test-data">Generate test data</h2>
<ol type="1">
<li><p>Change the device name in the tests source code.<br />
Now you should modify the device name in <code>tests/performance-tests/Classes/Profile.cpp</code> before running the tests. Sample code:</p>
<pre><code>// For different device &amp; os, change these values
// TODO : get device info automatically
#define DEVICE_NAME         &quot;TheDeviceName&quot;
#define OS_VERSION          &quot;SystemVersion&quot;</code></pre></li>
<li><p>Run the performance-tests project on devices.<br />
Once the project started, you will see a scene like this: <img src="http://i60.tinypic.com/ou86bs.jpg" alt="test-scene" /></p></li>
<li><p>Click the menu <code>Start AutoTest</code>. Then the performance tests will running automatically. Once the scene stopped at the scene again. It’s mean the autotesting is end.</p></li>
</ol>
<h2 id="get-the-generated-json-files">Get the generated json files</h2>
<p>After the test data generated, you can get the json file from the device.<br />
The json file will be named with format : <code>PerformanceLog-[DEVICE_NAME]-[TIMESTAMP].json</code>.</p>
<p>For different OS, you can get the json files by different steps:</p>
<h3 id="from-ios-devices">From iOS devices</h3>
<p>The json files will generated in the <code>Document</code> folder of the app. So you can get the json files by iTunes by steps: <img src="http://i60.tinypic.com/33z4r53.jpg" alt="itunes" /></p>
<h3 id="from-android-devices">From Android devices</h3>
<p>The json files will be generated in the path <code>/mnt/sdcard/PerfTest</code>. So you can get the json files by commands like this:</p>
<ul>
<li><p>Windows System</p>
<p>Run the command in cmd:<br />
<code>%ANDROID_SDK_ROOT%\platform-tools\adb pull /mnt/sdcard/PerfTest C:\Users\USER_NAME\MY_LOG_FOLDER</code></p></li>
<li><p>Mac System</p>
<p>Run the command in terminal:<br />
<code>$ANDROID_SDK_ROOT/platform-tools/adb pull /mnt/sdcard/PerfTest ~/MY_LOG_FOLDER</code></p></li>
</ul>
<h3 id="from-mac-devices">From Mac devices</h3>
<p>The json files will be generated in the path <code>~/Document</code>.</p>
<h3 id="from-win32-devices">From Win32 devices</h3>
<p>The json files will be generated in the AppData path. For different system versions, it will be different path.<br />
The path will be <code>C:\Users\USER_NAME\AppData\Local\performance-tests</code> on Win8.1.</p>
<h2 id="convert-json-files-to-excel-files">Convert json files to excel files</h2>
<p>When the json files are ready, you can convert the json files to excel files by <code>tools/performance-analyze/convertor.py</code>.<br />
The usage of the tool:</p>
<pre><code>usage: convertor.py [-h] -s SRC_PATH [-o OUTPUT_PATH]

Performance test data convertor.

optional arguments:
  -h, --help      show this help message and exit
  -s SRC_PATH     Specify the json file path or the folder path of json files.
  -o OUTPUT_PATH  Specify the output path of excel files.</code></pre>
<p>Tips:</p>
<ul>
<li><p>The value of <code>-s</code> can be a json file or a folder which contains many json files. If it’s a folder, then the json files in the folder will be converted to excel files one by one.</p></li>
<li><p>You can specify the output path by <code>-o</code>. If it’s not specified, the excel files will be placed in the same folder of json files.</p></li>
<li><p>Each json file will generate an excel file. The excel file name will be same with the json file. For example:<br />
<code>python convertor.py -s PerformanceLog-iphone4s-2015-09-11-1745.json</code> will generate a <code>PerformanceLog-iphone4s-2015-09-11-1745.xls</code> file.</p></li>
<li><p>The format of the excel file will be looks like this:</p>
<figure>
<img src="http://i57.tinypic.com/wvx500.jpg" alt="excel format" /><figcaption>excel format</figcaption>
</figure>
<ol type="1">
<li>Each sheet shows the result of a test case.</li>
<li>The cells with GREEN background color are the conditions of the test case.</li>
<li>The cells with YELLOW background color are the result data of the test case.</li>
</ol></li>
</ul>
</body>
</html>
