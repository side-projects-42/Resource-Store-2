<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <meta charset="utf-8" />
    <meta name="generator" content="pandoc" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=yes"
    />
    <title>README</title>
    <style type="text/css">
      code {
        white-space: pre-wrap;
      }
      span.smallcaps {
        font-variant: small-caps;
      }
      span.underline {
        text-decoration: underline;
      }
      div.column {
        display: inline-block;
        vertical-align: top;
        width: 50%;
      }
    </style>
  </head>
  <body>
    <h1 id="the-utilization-tests">The Utilization Tests</h1>
    <p>
      The Utilization tests ensure that the appropriate information is being
      gathered for pricing. It is centered around ensuring that the JSON
      generated by all agents is correct. Each JSON block is a test case, with
      potentially the following fields:
    </p>
    <ul>
      <li><code>testname</code>: The name of the test.</li>
      <li>
        <code>input_total_ram_mib</code>: The total ram number calculated by the
        agent.
      </li>
      <li>
        <code>input_logical_processors</code>: The number of logical processors
        calculated by the agent.
      </li>
      <li>
        <code>input_hostname</code>: The <code>hostname</code> calculated by the
        agent.
      </li>
      <li>
        <code>input_aws_id</code>: The aws <code>id</code> determined by the
        agent.
      </li>
      <li>
        <code>input_aws_type</code>: The aws <code>type</code> determined by the
        agent.
      </li>
      <li>
        <code>input_aws_zone</code>: The aws <code>zone</code> determined by the
        agent.
      </li>
      <li>
        <code>input_environment_variables</code>: Any environment variables
        which have been set.
      </li>
      <li>
        <code>expected_output_json</code>: The expected JSON output from the
        agent for the <code>utilization</code> hash.
      </li>
    </ul>
    <p>
      New fields for Google Cloud Platform (gcp), Pivotal Cloud Foundry (pcf),
      and Azure added as of
      <a
        href="https://source.datanerd.us/agents/agent-specs/blob/c78cddeaa5fa23dce892b8c6da95b9f900636c35/Utilization.md"
        >Utilization spec version 7</a
      >:
    </p>
    <ul>
      <li>
        <code>input_gcp_id</code>: The gcp <code>id</code> determined by the
        agent.
      </li>
      <li>
        <code>input_gcp_type</code>: The gcp <code>machineType</code> determined
        by the agent.
      </li>
      <li>
        <code>input_gcp_name</code>: The gcp <code>name</code> determined by the
        agent.
      </li>
      <li>
        <code>input_gcp_zone</code>: The gcp <code>zone</code> determined by the
        agent.
      </li>
      <li>
        <code>input_pcf_guid</code>: The pcf
        <code>cf_instance_guid</code> determined by the agent.
      </li>
      <li>
        <code>input_pcf_ip</code>: The pcf
        <code>cf_instance_ip</code> determined by the agent.
      </li>
      <li>
        <code>input_pcf_mem_limit</code>: The pcf
        <code>memory_limit</code> determined by the agent.
      </li>
      <li>
        <code>input_azure_location</code>: The azure
        <code>location</code> determined by the agent.
      </li>
      <li>
        <code>input_azure_name</code>: The azure <code>name</code> determined by
        the agent.
      </li>
      <li>
        <code>input_azure_id</code>: The azure <code>vmId</code> determined by
        the agent.
      </li>
      <li>
        <code>input_azure_size</code>: The azure <code>vmSize</code> determined
        by the agent.
      </li>
    </ul>
    <p>
      Test cases for <code>boot_id.json</code> added as of
      <a
        href="https://source.datanerd.us/agents/agent-specs/blob/c78cddeaa5fa23dce892b8c6da95b9f900636c35/Utilization.md"
        >Utilization spec version 7</a
      >:
    </p>
    <ul>
      <li><code>testname</code>: The name of the test.</li>
      <li>
        <code>input_total_ram_mib</code>: The total ram number calculated by the
        agent.
      </li>
      <li>
        <code>input_logical_processors</code>: The number of logical processors
        calculated by the agent.
      </li>
      <li>
        <code>input_hostname</code>: The hostname calculated by the agent.
      </li>
      <li>
        <code>input_boot_id</code>: The <code>boot_id</code> determined by the
        agent.
      </li>
      <li>
        <code>expected_output_json</code>: The expected JSON output from the
        agent for the utilization hash.
      </li>
      <li>
        <code>expected_metrics</code>: Supportability metrics that are either
        expected or unexpected in a given case. If the
        <code>call_count</code> is 0 it should be asserted that the
        Supportability metric was not sent.
      </li>
    </ul>
  </body>
</html>
