<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>README</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<h1 id="use-dark-mode">use-dark-mode</h1>
<p>A custom <a href="https://reactjs.org/docs/hooks-overview.html">React Hook</a> to help you implement a “dark mode” component for your application. The user setting persists to <code>localStorage</code>.</p>
<p>❤️ it? ⭐️ it on <a href="https://github.com/donavon/use-dark-mode/stargazers">GitHub</a> or <a href="https://twitter.com/intent/tweet?text=Check%20out%20the%20useDarkMode%20custom%20React%20Hook%20that%20simplifies%20adding%20a%20persistent%20dark%20mode%20setting%20to%20your%20app.&amp;url=https%3A%2F%2Fgithub.com%2Fdonavon%2Fuse-dark-mode&amp;via=donavon&amp;hashtags=reactjs,hooks,darkmode">Tweet</a> about it.</p>
<p><a href="https://badge.fury.io/js/use-dark-mode"><img src="https://badge.fury.io/js/use-dark-mode.svg" alt="npm version" /></a> <a href="https://travis-ci.com/donavon/use-dark-mode"><img src="https://travis-ci.com/donavon/use-dark-mode.svg?branch=master" alt="Build Status" /></a> <a href="#contributors"><img src="https://img.shields.io/badge/all_contributors-5-orange.svg?style=flat-square" alt="All Contributors" /></a> <a href="https://twitter.com/intent/tweet?text=Check%20out%20the%20useDarkMode%20custom%20React%20Hook%20that%20simplifies%20adding%20a%20persistent%20dark%20mode%20setting%20to%20your%20app.&amp;url=https%3A%2F%2Fgithub.com%2Fdonavon%2Fuse-dark-mode&amp;via=donavon&amp;hashtags=reactjs,hooks,darkmode"><img src="https://img.shields.io/twitter/url/http/shields.io.svg?style=social" alt="Tweet" /></a></p>
<figure>
<img src="https://user-images.githubusercontent.com/887639/51113468-079ee100-17d0-11e9-8a35-e29b12b74740.gif" alt="usedarkmode-small" /><figcaption>usedarkmode-small</figcaption>
</figure>
<p><code>useDarkMode</code> works in one of two ways:</p>
<ol type="1">
<li><p>By toggling a CSS class on whatever element you specify (defaults to <code>document.body</code>). You then setup your CSS to display different views based on the presence of the selector. For example, the following CSS is used in the demo app to ease the background color in/out of dark mode.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode css"><code class="sourceCode css"><a class="sourceLine" id="cb1-1" title="1">body<span class="fu">.light-mode</span> {</a>
<a class="sourceLine" id="cb1-2" title="2">  <span class="kw">background-color</span>: <span class="cn">#fff</span><span class="op">;</span></a>
<a class="sourceLine" id="cb1-3" title="3">  <span class="kw">color</span>: <span class="cn">#333</span><span class="op">;</span></a>
<a class="sourceLine" id="cb1-4" title="4">  <span class="kw">transition</span>: background-color <span class="dv">0.3</span><span class="dt">s</span> <span class="dv">ease</span><span class="op">;</span></a>
<a class="sourceLine" id="cb1-5" title="5">}</a>
<a class="sourceLine" id="cb1-6" title="6">body<span class="fu">.dark-mode</span> {</a>
<a class="sourceLine" id="cb1-7" title="7">  <span class="kw">background-color</span>: <span class="cn">#1a1919</span><span class="op">;</span></a>
<a class="sourceLine" id="cb1-8" title="8">  <span class="kw">color</span>: <span class="cn">#999</span><span class="op">;</span></a>
<a class="sourceLine" id="cb1-9" title="9">}</a></code></pre></div></li>
<li><p>If you don’t use global classes, you can specify an <code>onChange</code> handler and take care of the implementation of switching to dark mode yourself.</p></li>
</ol>
<h2 id="new-in-version-2.x">New in Version 2.x</h2>
<ul>
<li><p><code>useDarkMode</code> now persists between sessions. It stores the user setting in <code>localStorage</code>.</p></li>
<li><p>It shares dark mode state with all other <code>useDarkMode</code> components on the page.</p></li>
<li><p>It shares dark mode state with all other tabs/browser windows.</p></li>
<li><p>The initial dark mode is queried from the system. Note: this requires a browser that supports the <code>prefers-color-scheme: dark</code> media query (currently only <a href="https://developer.apple.com/safari/technology-preview/release-notes/">Safari Technology Preview</a>) and a system that supports dark mode, such as macOS Mojave.</p></li>
<li><p>Changing the system dark mode state will also change the state of <code>useDarkMode</code> (i.e, change to light mode in the system will change to light mode in your app).</p></li>
<li><p>Support for Server Side Rendering (SSR) in version 2.2 and above.</p></li>
</ul>
<h2 id="requirement">Requirement</h2>
<p>To use <code>use-dark-mode</code>, you must use <code>react@16.8.0</code> or greater which includes Hooks.</p>
<h2 id="installation">Installation</h2>
<div class="sourceCode" id="cb2"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb2-1" title="1">$ <span class="ex">npm</span> i use-dark-mode</a></code></pre></div>
<h2 id="usage">Usage</h2>
<div class="sourceCode" id="cb3"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="kw">const</span> darkMode <span class="op">=</span> <span class="at">useDarkMode</span>(initialState<span class="op">,</span> darkModeConfig)<span class="op">;</span></a></code></pre></div>
<h3 id="parameters">Parameters</h3>
<p>You pass <code>useDarkMode</code> an <code>initialState</code> (a boolean specifying whether it should be in dark mode by default) and an optional <code>darkModeConfig</code> object. The configuration object may contain the following keys.</p>
<table>
<colgroup>
<col style="width: 5%" />
<col style="width: 94%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Key</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>classNameDark</code></td>
<td style="text-align: left;">The class to apply. Default = <code>dark-mode</code>.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>classNameLight</code></td>
<td style="text-align: left;">The class to apply. Default = <code>light-mode</code>.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>element</code></td>
<td style="text-align: left;">The element to apply the class name. Default = <code>document.body</code>.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>onChange</code></td>
<td style="text-align: left;">A function that will be called when the dark mode value changes and it is safe to access the DOM (i.e. it is called from within a <code>useEffect</code>). If you specify <code>onChange</code> then <code>classNameDark</code>, <code>classNameLight</code>, and <code>element</code> are ignored (i.e. no classes are automatically placed on the DOM). You have full control!</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>storageKey</code></td>
<td style="text-align: left;">A string that will be used by the <code>storageProvider</code> to persist the dark mode value. If you specify a value of <code>null</code>, nothing will not be persisted. Default = <code>darkMode</code>.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>storageProvider</code></td>
<td style="text-align: left;">A storage provider. Default = <code>localStorage</code>. You will generally never need to change this value.</td>
</tr>
</tbody>
</table>
<h3 id="return-object">Return object</h3>
<p>A <code>darkMode</code> object is returned with the following properties.</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Key</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>value</code></td>
<td style="text-align: left;">A boolean containing the current state of dark mode.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>enable()</code></td>
<td style="text-align: left;">A function that allows you to set dark mode to <code>true</code>.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>disable()</code></td>
<td style="text-align: left;">A function that allows you to set dark mode to <code>false</code>.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>toggle()</code></td>
<td style="text-align: left;">A function that allows you to toggle dark mode.</td>
</tr>
</tbody>
</table>
<p>Note that because the methods don’t require any parameters, you can call them direcly from an <code>onClick</code> handler from a button, for example (i.e., no lambda function is required).</p>
<h2 id="example">Example</h2>
<p>Here is a simple component that uses <code>useDarkMode</code> to provide a dark mode toggle control. If dark mode is selected, the CSS class <code>dark-mode</code> is applied to <code>document.body</code> and is removed when de-selected.</p>
<pre class="jsx"><code>import React from &#39;react&#39;;
import useDarkMode from &#39;use-dark-mode&#39;;

import Toggle from &#39;./Toggle&#39;;

const DarkModeToggle = () =&gt; {
  const darkMode = useDarkMode(false);

  return (
    &lt;div&gt;
      &lt;button type=&quot;button&quot; onClick={darkMode.disable}&gt;
        ☀
      &lt;/button&gt;
      &lt;Toggle checked={darkMode.value} onChange={darkMode.toggle} /&gt;
      &lt;button type=&quot;button&quot; onClick={darkMode.enable}&gt;
        ☾
      &lt;/button&gt;
    &lt;/div&gt;
  );
};

export default DarkModeToggle;</code></pre>
<h2 id="that-flash">That flash!</h2>
<p>If your CSS is setup to default to light mode, but the user selects dark mode, the next time they visit your app, they will be in dark mode. However, the user will see a flash of light mode before the app is spun up and <code>useDarkMode</code> is called.</p>
<p>To prevent this, I’ve included some vanilla JavaScript that you can insert in your <code>index.html</code> just after the <code>&lt;body&gt;</code> tag. It is in a file named <a href="https://github.com/donavon/use-dark-mode/blob/develop/noflash.js.txt">noflash.js.txt</a>. You can either insert the contents of this file in a <code>&lt;script&gt;</code> tag or automate the step in your build process.</p>
<p>Note that if you change any of the default—such as <code>storageKey</code> or <code>classNameDark</code> for example—the <code>noflash.js</code> file will need to be modified with the same values.</p>
<h2 id="sample-apps">Sample Apps</h2>
<p>Here is a list of apps build with <code>use-dark-mode</code>. If you have an app you would like to include on this list, open a PR.</p>
<ul>
<li><a href="https://codesandbox.io/s/mzj64x80ny">Demo App on CodeSandbox</a> - by <span class="citation" data-cites="donavon">[@donavon]</span>(https://twitter.com/donavon)</li>
</ul>
<h2 id="license">License</h2>
<p><strong><a href="LICENSE">MIT</a></strong> Licensed</p>
<h2 id="contributors">Contributors</h2>
<p>Thanks goes to these wonderful people (<a href="https://github.com/all-contributors/all-contributors#emoji-key">emoji key</a>):</p>
<!-- ALL-CONTRIBUTORS-LIST:START - Do not remove or modify this section -->
<!-- prettier-ignore -->
<table>
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;"><a href="http://donavon.com"><img src="https://avatars3.githubusercontent.com/u/887639?v=4" width="100px;" alt="Donavon West"/><br /><sub><b>Donavon West</b></sub></a><br /><a href="#infra-donavon" title="Infrastructure (Hosting, Build-Tools, etc)">🚇</a> <a href="https://github.com/donavon/use-dark-mode/commits?author=donavon" title="Tests">⚠️</a> <a href="#example-donavon" title="Examples">💡</a> <a href="#ideas-donavon" title="Ideas, Planning, &amp; Feedback">🤔</a> <a href="#maintenance-donavon" title="Maintenance">🚧</a> <a href="#review-donavon" title="Reviewed Pull Requests">👀</a> <a href="#tool-donavon" title="Tools">🔧</a> <a href="https://github.com/donavon/use-dark-mode/commits?author=donavon" title="Code">💻</a></th>
<th style="text-align: center;"><a href="https://github.com/revelcw"><img src="https://avatars2.githubusercontent.com/u/29359616?v=4" width="100px;" alt="Revel Carlberg West"/><br /><sub><b>Revel Carlberg West</b></sub></a><br /><a href="#ideas-revelcw" title="Ideas, Planning, &amp; Feedback">🤔</a></th>
<th style="text-align: center;"><a href="https://github.com/Andarist"><img src="https://avatars2.githubusercontent.com/u/9800850?v=4" width="100px;" alt="Mateusz Burzyński"/><br /><sub><b>Mateusz Burzyński</b></sub></a><br /><a href="https://github.com/donavon/use-dark-mode/commits?author=Andarist" title="Code">💻</a></th>
<th style="text-align: center;"><a href="https://github.com/wKovacs64"><img src="https://avatars1.githubusercontent.com/u/1288694?v=4" width="100px;" alt="Justin Hall"/><br /><sub><b>Justin Hall</b></sub></a><br /><a href="https://github.com/donavon/use-dark-mode/commits?author=wKovacs64" title="Code">💻</a></th>
<th style="text-align: center;"><a href="https://github.com/fxbabys"><img src="https://avatars1.githubusercontent.com/u/24556921?v=4" width="100px;" alt="Jeremy"/><br /><sub><b>Jeremy</b></sub></a><br /><a href="#userTesting-fxbabys" title="User Testing">📓</a> <a href="https://github.com/donavon/use-dark-mode/issues?q=author%3Afxbabys" title="Bug reports">🐛</a></th>
</tr>
</thead>
<tbody>
</tbody>
</table>
<!-- ALL-CONTRIBUTORS-LIST:END -->
<p>This project follows the <a href="https://github.com/all-contributors/all-contributors">all-contributors</a> specification. Contributions of any kind welcome!</p>
</body>
</html>
