<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>readme</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<div data-align="center">
<pre><code>&lt;br&gt;
&lt;br&gt;
&lt;img width=&quot;360&quot; src=&quot;media/logo.svg&quot; alt=&quot;Got&quot;&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;p align=&quot;center&quot;&gt;Huge thanks to &lt;a href=&quot;https://moxy.studio&quot;&gt;&lt;img src=&quot;https://sindresorhus.com/assets/thanks/moxy-logo.svg&quot; width=&quot;150&quot;&gt;&lt;/a&gt; for sponsoring Sindre Sorhus!
&lt;/p&gt;
&lt;br&gt;
&lt;br&gt;</code></pre>
</div>
<blockquote>
<p>Human-friendly and powerful HTTP request library for Node.js</p>
</blockquote>
<p><a href="https://travis-ci.org/sindresorhus/got"><img src="https://travis-ci.org/sindresorhus/got.svg?branch=master" alt="Build Status: Linux" /></a> <a href="https://coveralls.io/github/sindresorhus/got?branch=master"><img src="https://coveralls.io/repos/github/sindresorhus/got/badge.svg?branch=master" alt="Coverage Status" /></a> <a href="https://npmjs.com/got"><img src="https://img.shields.io/npm/dm/got.svg" alt="Downloads" /></a> <a href="https://packagephobia.now.sh/result?p=got"><img src="https://packagephobia.now.sh/badge?p=got" alt="Install size" /></a></p>
<p><a href="documentation/migration-guides.md">Moving from Request?</a> <a href="https://github.com/request/request/issues/3142"><em>(Note that Request is unmaintained)</em></a></p>
<p><a href="#comparison">See how Got compares to other HTTP libraries</a></p>
<p>For browser usage, we recommend <a href="https://github.com/sindresorhus/ky">Ky</a> by the same people.</p>
<h2 id="highlights">Highlights</h2>
<ul>
<li><a href="#api">Promise API</a></li>
<li><a href="#streams">Stream API</a></li>
<li><a href="#pagination">Pagination API (experimental)</a></li>
<li><a href="#aborting-the-request">Request cancelation</a></li>
<li><a href="#cache-adapters">RFC compliant caching</a></li>
<li><a href="#followredirect">Follows redirects</a></li>
<li><a href="#retry">Retries on failure</a></li>
<li><a href="#onuploadprogress-progress">Progress events</a></li>
<li><a href="#decompress">Handles gzip/deflate/brotli</a></li>
<li><a href="#timeout">Timeout handling</a></li>
<li><a href="#errors">Errors with metadata</a></li>
<li><a href="#json-mode">JSON mode</a></li>
<li><a href="#url">WHATWG URL support</a></li>
<li><a href="#hooks">Hooks</a></li>
<li><a href="#instances">Instances with custom defaults</a></li>
<li><a href="#types">Types</a></li>
<li><a href="documentation/advanced-creation.md#merging-instances">Composable</a></li>
<li><a href="documentation/lets-make-a-plugin.md">Plugins</a></li>
<li><a href="https://github.com/sindresorhus/got/network/dependents">Used by 3000+ packages and 1.6M+ repos</a></li>
<li>Actively maintained</li>
</ul>
<h2 id="install">Install</h2>
<pre><code>$ npm install got</code></pre>
<h2 id="usage">Usage</h2>
<div class="sourceCode" id="cb3"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="kw">const</span> got <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;got&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-2" title="2"></a>
<a class="sourceLine" id="cb3-3" title="3">(<span class="kw">async</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb3-4" title="4">    <span class="cf">try</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb3-5" title="5">        <span class="kw">const</span> response <span class="op">=</span> <span class="cf">await</span> <span class="at">got</span>(<span class="st">&#39;https://sindresorhus.com&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-6" title="6">        <span class="va">console</span>.<span class="at">log</span>(<span class="va">response</span>.<span class="at">body</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-7" title="7">        <span class="co">//=&gt; &#39;&lt;!doctype html&gt; ...&#39;</span></a>
<a class="sourceLine" id="cb3-8" title="8">    <span class="op">}</span> <span class="cf">catch</span> (error) <span class="op">{</span></a>
<a class="sourceLine" id="cb3-9" title="9">        <span class="va">console</span>.<span class="at">log</span>(<span class="va">error</span>.<span class="va">response</span>.<span class="at">body</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-10" title="10">        <span class="co">//=&gt; &#39;Internal server error ...&#39;</span></a>
<a class="sourceLine" id="cb3-11" title="11">    <span class="op">}</span></a>
<a class="sourceLine" id="cb3-12" title="12"><span class="op">}</span>)()<span class="op">;</span></a></code></pre></div>
<h6 id="streams">Streams</h6>
<div class="sourceCode" id="cb4"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1"><span class="kw">const</span> stream <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;stream&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-2" title="2"><span class="kw">const</span> <span class="op">{</span>promisify<span class="op">}</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;util&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-3" title="3"><span class="kw">const</span> fs <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;fs&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-4" title="4"><span class="kw">const</span> got <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;got&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-5" title="5"></a>
<a class="sourceLine" id="cb4-6" title="6"><span class="kw">const</span> pipeline <span class="op">=</span> <span class="at">promisify</span>(<span class="va">stream</span>.<span class="at">pipeline</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-7" title="7"></a>
<a class="sourceLine" id="cb4-8" title="8">(<span class="kw">async</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb4-9" title="9">    <span class="cf">await</span> <span class="at">pipeline</span>(</a>
<a class="sourceLine" id="cb4-10" title="10">        <span class="va">got</span>.<span class="at">stream</span>(<span class="st">&#39;https://sindresorhus.com&#39;</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb4-11" title="11">        <span class="va">fs</span>.<span class="at">createWriteStream</span>(<span class="st">&#39;index.html&#39;</span>)</a>
<a class="sourceLine" id="cb4-12" title="12">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb4-13" title="13"></a>
<a class="sourceLine" id="cb4-14" title="14">    <span class="co">// For POST, PUT, and PATCH methods `got.stream` returns a `stream.Writable`</span></a>
<a class="sourceLine" id="cb4-15" title="15">    <span class="cf">await</span> <span class="at">pipeline</span>(</a>
<a class="sourceLine" id="cb4-16" title="16">        <span class="va">fs</span>.<span class="at">createReadStream</span>(<span class="st">&#39;index.html&#39;</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb4-17" title="17">        <span class="va">got</span>.<span class="va">stream</span>.<span class="at">post</span>(<span class="st">&#39;https://sindresorhus.com&#39;</span>)</a>
<a class="sourceLine" id="cb4-18" title="18">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb4-19" title="19"><span class="op">}</span>)()<span class="op">;</span></a></code></pre></div>
<p><strong>Tip:</strong> Using <code>from.pipe(to)</code> doesn’t forward errors. If you use it, switch to <a href="https://nodejs.org/api/stream.html#stream_stream_pipeline_streams_callback"><code>Stream.pipeline(from, ..., to, callback)</code></a> instead (available from Node v10).</p>
<h3 id="api">API</h3>
<p>It’s a <code>GET</code> request by default, but can be changed by using different methods or via <code>options.method</code>.</p>
<p><strong>By default, Got will retry on failure. To disable this option, set <a href="#retry"><code>options.retry</code></a> to <code>0</code>.</strong></p>
<h4 id="goturl-options">got(url?, options?)</h4>
<p>Returns a Promise for a <a href="#response"><code>response</code> object</a> or a <a href="#streams-1">stream</a> if <code>options.isStream</code> is set to true.</p>
<h5 id="url">url</h5>
<p>Type: <code>string | object</code></p>
<p>The URL to request, as a string, a <a href="https://nodejs.org/api/https.html#https_https_request_options_callback"><code>https.request</code> options object</a>, or a <a href="https://nodejs.org/api/url.html#url_class_url">WHATWG <code>URL</code></a>.</p>
<p>Properties from <code>options</code> will override properties in the parsed <code>url</code>.</p>
<p>If no protocol is specified, it will throw a <code>TypeError</code>.</p>
<p><strong>Note:</strong> this can also be an option.</p>
<h5 id="options">options</h5>
<p>Type: <code>object</code></p>
<p>Any of the <a href="https://nodejs.org/api/https.html#https_https_request_options_callback"><code>https.request</code></a> options.</p>
<p><strong>Note:</strong> Legacy URL support is disabled. <code>options.path</code> is supported only for backwards compatibility. Use <code>options.pathname</code> and <code>options.searchParams</code> instead. <code>options.auth</code> has been replaced with <code>options.username</code> &amp; <code>options.password</code>.</p>
<h6 id="prefixurl">prefixUrl</h6>
<p>Type: <code>string | URL</code></p>
<p>When specified, <code>prefixUrl</code> will be prepended to <code>url</code>. The prefix can be any valid URL, either relative or absolute. A trailing slash <code>/</code> is optional - one will be added automatically.</p>
<p><strong>Note:</strong> <code>prefixUrl</code> will be ignored if the <code>url</code> argument is a URL instance.</p>
<p><strong>Note:</strong> Leading slashes in <code>input</code> are disallowed when using this option to enforce consistency and avoid confusion. For example, when the prefix URL is <code>https://example.com/foo</code> and the input is <code>/bar</code>, there’s ambiguity whether the resulting URL would become <code>https://example.com/foo/bar</code> or <code>https://example.com/bar</code>. The latter is used by browsers.</p>
<p><strong>Tip:</strong> Useful when used with <a href="#custom-endpoints"><code>got.extend()</code></a> to create niche-specific Got-instances.</p>
<p><strong>Tip:</strong> You can change <code>prefixUrl</code> using hooks as long as the URL still includes the <code>prefixUrl</code>. If the URL doesn’t include it anymore, it will throw.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb5-1" title="1"><span class="kw">const</span> got <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;got&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb5-2" title="2"></a>
<a class="sourceLine" id="cb5-3" title="3">(<span class="kw">async</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb5-4" title="4">    <span class="cf">await</span> <span class="at">got</span>(<span class="st">&#39;unicorn&#39;</span><span class="op">,</span> <span class="op">{</span><span class="dt">prefixUrl</span><span class="op">:</span> <span class="st">&#39;https://cats.com&#39;</span><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb5-5" title="5">    <span class="co">//=&gt; &#39;https://cats.com/unicorn&#39;</span></a>
<a class="sourceLine" id="cb5-6" title="6"></a>
<a class="sourceLine" id="cb5-7" title="7">    <span class="kw">const</span> instance <span class="op">=</span> <span class="va">got</span>.<span class="at">extend</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb5-8" title="8">        <span class="dt">prefixUrl</span><span class="op">:</span> <span class="st">&#39;https://google.com&#39;</span></a>
<a class="sourceLine" id="cb5-9" title="9">    <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb5-10" title="10"></a>
<a class="sourceLine" id="cb5-11" title="11">    <span class="cf">await</span> <span class="at">instance</span>(<span class="st">&#39;unicorn&#39;</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb5-12" title="12">        <span class="dt">hooks</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb5-13" title="13">            <span class="dt">beforeRequest</span><span class="op">:</span> [</a>
<a class="sourceLine" id="cb5-14" title="14">                options <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb5-15" title="15">                    <span class="va">options</span>.<span class="at">prefixUrl</span> <span class="op">=</span> <span class="st">&#39;https://cats.com&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb5-16" title="16">                <span class="op">}</span></a>
<a class="sourceLine" id="cb5-17" title="17">            ]</a>
<a class="sourceLine" id="cb5-18" title="18">        <span class="op">}</span></a>
<a class="sourceLine" id="cb5-19" title="19">    <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb5-20" title="20">    <span class="co">//=&gt; &#39;https://cats.com/unicorn&#39;</span></a>
<a class="sourceLine" id="cb5-21" title="21"><span class="op">}</span>)()<span class="op">;</span></a></code></pre></div>
<h6 id="headers">headers</h6>
<p>Type: <code>object</code><br />
Default: <code>{}</code></p>
<p>Request headers.</p>
<p>Existing headers will be overwritten. Headers set to <code>undefined</code> will be omitted.</p>
<h6 id="isstream">isStream</h6>
<p>Type: <code>boolean</code><br />
Default: <code>false</code></p>
<p>Returns a <code>Stream</code> instead of a <code>Promise</code>. This is equivalent to calling <code>got.stream(url, options?)</code>.</p>
<h6 id="body">body</h6>
<p>Type: <code>string | Buffer | stream.Readable</code> or <a href="https://github.com/form-data/form-data"><code>form-data</code> instance</a></p>
<p><strong>Note #1:</strong> The <code>body</code> option cannot be used with the <code>json</code> or <code>form</code> option.</p>
<p><strong>Note #2:</strong> If you provide this option, <code>got.stream()</code> will be read-only.</p>
<p><strong>Note #3:</strong> If you provide a payload with the <code>GET</code> or <code>HEAD</code> method, it will throw a <code>TypeError</code> unless the method is <code>GET</code> and the <code>allowGetBody</code> option is set to <code>true</code>.</p>
<p><strong>Note #4:</strong> This option is not enumerable and will not be merged with the instance defaults.</p>
<p>The <code>content-length</code> header will be automatically set if <code>body</code> is a <code>string</code> / <code>Buffer</code> / <code>fs.createReadStream</code> instance / <a href="https://github.com/form-data/form-data"><code>form-data</code> instance</a>, and <code>content-length</code> and <code>transfer-encoding</code> are not manually set in <code>options.headers</code>.</p>
<h6 id="json">json</h6>
<p>Type: <code>object | Array | number | string | boolean | null</code> <em>(JSON-serializable values)</em></p>
<p><strong>Note #1:</strong> If you provide this option, <code>got.stream()</code> will be read-only. <strong>Note #2:</strong> This option is not enumerable and will not be merged with the instance defaults.</p>
<p>JSON body. If the <code>Content-Type</code> header is not set, it will be set to <code>application/json</code>.</p>
<h6 id="context">context</h6>
<p>Type: <code>object</code></p>
<p>User data. In contrast to other options, <code>context</code> is not enumerable.</p>
<p><strong>Note:</strong> The object is never merged, it’s just passed through. Got will not modify the object in any way.</p>
<p>It’s very useful for storing auth tokens:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb6-1" title="1"><span class="kw">const</span> got <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;got&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-2" title="2"></a>
<a class="sourceLine" id="cb6-3" title="3"><span class="kw">const</span> instance <span class="op">=</span> <span class="va">got</span>.<span class="at">extend</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb6-4" title="4">    <span class="dt">hooks</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb6-5" title="5">        <span class="dt">beforeRequest</span><span class="op">:</span> [</a>
<a class="sourceLine" id="cb6-6" title="6">            options <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb6-7" title="7">                <span class="cf">if</span> (<span class="op">!</span><span class="va">options</span>.<span class="at">context</span> <span class="op">||</span> <span class="op">!</span><span class="va">options</span>.<span class="va">context</span>.<span class="at">token</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb6-8" title="8">                    <span class="cf">throw</span> <span class="kw">new</span> <span class="at">Error</span>(<span class="st">&#39;Token required&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-9" title="9">                <span class="op">}</span></a>
<a class="sourceLine" id="cb6-10" title="10"></a>
<a class="sourceLine" id="cb6-11" title="11">                <span class="va">options</span>.<span class="va">headers</span>.<span class="at">token</span> <span class="op">=</span> <span class="va">options</span>.<span class="va">context</span>.<span class="at">token</span><span class="op">;</span></a>
<a class="sourceLine" id="cb6-12" title="12">            <span class="op">}</span></a>
<a class="sourceLine" id="cb6-13" title="13">        ]</a>
<a class="sourceLine" id="cb6-14" title="14">    <span class="op">}</span></a>
<a class="sourceLine" id="cb6-15" title="15"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-16" title="16"></a>
<a class="sourceLine" id="cb6-17" title="17">(<span class="kw">async</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb6-18" title="18">    <span class="kw">const</span> context <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb6-19" title="19">        <span class="dt">token</span><span class="op">:</span> <span class="st">&#39;secret&#39;</span></a>
<a class="sourceLine" id="cb6-20" title="20">    <span class="op">};</span></a>
<a class="sourceLine" id="cb6-21" title="21"></a>
<a class="sourceLine" id="cb6-22" title="22">    <span class="kw">const</span> response <span class="op">=</span> <span class="cf">await</span> <span class="at">instance</span>(<span class="st">&#39;https://httpbin.org/headers&#39;</span><span class="op">,</span> <span class="op">{</span>context<span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-23" title="23"></a>
<a class="sourceLine" id="cb6-24" title="24">    <span class="co">// Let&#39;s see the headers</span></a>
<a class="sourceLine" id="cb6-25" title="25">    <span class="va">console</span>.<span class="at">log</span>(<span class="va">response</span>.<span class="at">body</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-26" title="26"><span class="op">}</span>)()<span class="op">;</span></a></code></pre></div>
<h6 id="responsetype">responseType</h6>
<p>Type: <code>string</code><br />
Default: <code>'text'</code></p>
<p><strong>Note:</strong> When using streams, this option is ignored.</p>
<p>The parsing method. Can be <code>'text'</code>, <code>'json'</code> or <code>'buffer'</code>.</p>
<p>The promise also has <code>.text()</code>, <code>.json()</code> and <code>.buffer()</code> methods which return another Got promise for the parsed body.<br />
It’s like setting the options to <code>{responseType: 'json', resolveBodyOnly: true}</code> but without affecting the main Got promise.</p>
<p>Example:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb7-1" title="1">(<span class="kw">async</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb7-2" title="2">    <span class="kw">const</span> responsePromise <span class="op">=</span> <span class="at">got</span>(url)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-3" title="3">    <span class="kw">const</span> bufferPromise <span class="op">=</span> <span class="va">responsePromise</span>.<span class="at">buffer</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb7-4" title="4">    <span class="kw">const</span> jsonPromise <span class="op">=</span> <span class="va">responsePromise</span>.<span class="at">json</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb7-5" title="5"></a>
<a class="sourceLine" id="cb7-6" title="6">    <span class="kw">const</span> [response<span class="op">,</span> buffer<span class="op">,</span> json] <span class="op">=</span> <span class="va">Promise</span>.<span class="at">all</span>([responsePromise<span class="op">,</span> bufferPromise<span class="op">,</span> jsonPromise])<span class="op">;</span></a>
<a class="sourceLine" id="cb7-7" title="7">    <span class="co">// `response` is an instance of Got Response</span></a>
<a class="sourceLine" id="cb7-8" title="8">    <span class="co">// `buffer` is an instance of Buffer</span></a>
<a class="sourceLine" id="cb7-9" title="9">    <span class="co">// `json` is an object</span></a>
<a class="sourceLine" id="cb7-10" title="10"><span class="op">}</span>)()<span class="op">;</span></a></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb8-1" title="1"><span class="co">// This</span></a>
<a class="sourceLine" id="cb8-2" title="2"><span class="kw">const</span> body <span class="op">=</span> <span class="cf">await</span> <span class="at">got</span>(url).<span class="at">json</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb8-3" title="3"></a>
<a class="sourceLine" id="cb8-4" title="4"><span class="co">// is semantically the same as this</span></a>
<a class="sourceLine" id="cb8-5" title="5"><span class="kw">const</span> body <span class="op">=</span> <span class="cf">await</span> <span class="at">got</span>(url<span class="op">,</span> <span class="op">{</span><span class="dt">responseType</span><span class="op">:</span> <span class="st">&#39;json&#39;</span><span class="op">,</span> <span class="dt">resolveBodyOnly</span><span class="op">:</span> <span class="kw">true</span><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h6 id="resolvebodyonly">resolveBodyOnly</h6>
<p>Type: <code>boolean</code><br />
Default: <code>false</code></p>
<p>When set to <code>true</code> the promise will return the <a href="#body-1">Response body</a> instead of the <a href="#response">Response</a> object.</p>
<h6 id="cookiejar">cookieJar</h6>
<p>Type: <code>object</code> | <a href="https://github.com/salesforce/tough-cookie#cookiejar"><code>tough.CookieJar</code> instance</a></p>
<p><strong>Note:</strong> If you provide this option, <code>options.headers.cookie</code> will be overridden.</p>
<p>Cookie support. You don’t have to care about parsing or how to store them. <a href="#cookies">Example</a>.</p>
<h6 id="cookiejar.setcookie">cookieJar.setCookie</h6>
<p>Type: <code>Function&lt;Promise&gt;</code></p>
<p>The function takes two arguments: <code>rawCookie</code> (<code>string</code>) and <code>url</code> (<code>string</code>).</p>
<h6 id="cookiejar.getcookiestring">cookieJar.getCookieString</h6>
<p>Type: <code>Function&lt;Promise&gt;</code></p>
<p>The function takes one argument: <code>url</code> (<code>string</code>).</p>
<h6 id="ignoreinvalidcookies">ignoreInvalidCookies</h6>
<p>Type: <code>boolean</code><br />
Default: <code>false</code></p>
<p>Ignore invalid cookies instead of throwing an error. Only useful when the <code>cookieJar</code> option has been set. Not recommended.</p>
<h6 id="encoding">encoding</h6>
<p>Type: <code>string</code><br />
Default: <code>'utf8'</code></p>
<p><a href="https://nodejs.org/api/buffer.html#buffer_buffers_and_character_encodings">Encoding</a> to be used on <code>setEncoding</code> of the response data.</p>
<p>To get a <a href="https://nodejs.org/api/buffer.html"><code>Buffer</code></a>, you need to set <a href="#responseType"><code>responseType</code></a> to <code>buffer</code> instead.</p>
<h6 id="form">form</h6>
<p>Type: <code>object | true</code></p>
<p><strong>Note #1:</strong> If you provide this option, <code>got.stream()</code> will be read-only. <strong>Note #2:</strong> This option is not enumerable and will not be merged with the instance defaults.</p>
<p>The form body is converted to query string using <a href="https://nodejs.org/api/url.html#url_constructor_new_urlsearchparams_obj"><code>(new URLSearchParams(object)).toString()</code></a>.</p>
<p>If set to <code>true</code> and the <code>Content-Type</code> header is not set, it will be set to <code>application/x-www-form-urlencoded</code>.</p>
<h6 id="searchparams">searchParams</h6>
<p>Type: <code>string | object&lt;string, string | number&gt; | URLSearchParams</code></p>
<p>Query string that will be added to the request URL. This will override the query string in <code>url</code>.</p>
<p>If you need to pass in an array, you can do it using a <code>URLSearchParams</code> instance:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb9-1" title="1"><span class="kw">const</span> got <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;got&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb9-2" title="2"></a>
<a class="sourceLine" id="cb9-3" title="3"><span class="kw">const</span> searchParams <span class="op">=</span> <span class="kw">new</span> <span class="at">URLSearchParams</span>([[<span class="st">&#39;key&#39;</span><span class="op">,</span> <span class="st">&#39;a&#39;</span>]<span class="op">,</span> [<span class="st">&#39;key&#39;</span><span class="op">,</span> <span class="st">&#39;b&#39;</span>]])<span class="op">;</span></a>
<a class="sourceLine" id="cb9-4" title="4"></a>
<a class="sourceLine" id="cb9-5" title="5"><span class="at">got</span>(<span class="st">&#39;https://example.com&#39;</span><span class="op">,</span> <span class="op">{</span>searchParams<span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb9-6" title="6"></a>
<a class="sourceLine" id="cb9-7" title="7"><span class="va">console</span>.<span class="at">log</span>(<span class="va">searchParams</span>.<span class="at">toString</span>())<span class="op">;</span></a>
<a class="sourceLine" id="cb9-8" title="8"><span class="co">//=&gt; &#39;key=a&amp;key=b&#39;</span></a></code></pre></div>
<p>And if you need a different array format, you could use the <a href="https://github.com/sindresorhus/query-string"><code>query-string</code></a> package:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb10-1" title="1"><span class="kw">const</span> got <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;got&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb10-2" title="2"><span class="kw">const</span> queryString <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;query-string&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb10-3" title="3"></a>
<a class="sourceLine" id="cb10-4" title="4"><span class="kw">const</span> searchParams <span class="op">=</span> <span class="va">queryString</span>.<span class="at">stringify</span>(<span class="op">{</span><span class="dt">key</span><span class="op">:</span> [<span class="st">&#39;a&#39;</span><span class="op">,</span> <span class="st">&#39;b&#39;</span>]<span class="op">},</span> <span class="op">{</span><span class="dt">arrayFormat</span><span class="op">:</span> <span class="st">&#39;bracket&#39;</span><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb10-5" title="5"></a>
<a class="sourceLine" id="cb10-6" title="6"><span class="at">got</span>(<span class="st">&#39;https://example.com&#39;</span><span class="op">,</span> <span class="op">{</span>searchParams<span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb10-7" title="7"></a>
<a class="sourceLine" id="cb10-8" title="8"><span class="va">console</span>.<span class="at">log</span>(searchParams)<span class="op">;</span></a>
<a class="sourceLine" id="cb10-9" title="9"><span class="co">//=&gt; &#39;key[]=a&amp;key[]=b&#39;</span></a></code></pre></div>
<h6 id="timeout">timeout</h6>
<p>Type: <code>number | object</code></p>
<p>Milliseconds to wait for the server to end the response before aborting the request with <a href="#gottimeouterror"><code>got.TimeoutError</code></a> error (a.k.a. <code>request</code> property). By default, there’s no timeout.</p>
<p>This also accepts an <code>object</code> with the following fields to constrain the duration of each phase of the request lifecycle:</p>
<ul>
<li><code>lookup</code> starts when a socket is assigned and ends when the hostname has been resolved. Does not apply when using a Unix domain socket.</li>
<li><code>connect</code> starts when <code>lookup</code> completes (or when the socket is assigned if lookup does not apply to the request) and ends when the socket is connected.</li>
<li><code>secureConnect</code> starts when <code>connect</code> completes and ends when the handshaking process completes (HTTPS only).</li>
<li><code>socket</code> starts when the socket is connected. See <a href="https://nodejs.org/api/http.html#http_request_settimeout_timeout_callback">request.setTimeout</a>.</li>
<li><code>response</code> starts when the request has been written to the socket and ends when the response headers are received.</li>
<li><code>send</code> starts when the socket is connected and ends with the request has been written to the socket.</li>
<li><code>request</code> starts when the request is initiated and ends when the response’s end event fires.</li>
</ul>
<h6 id="retry">retry</h6>
<p>Type: <code>number | object</code><br />
Default: - limit: <code>2</code> - calculateDelay: <code>({attemptCount, retryOptions, error, computedValue}) =&gt; computedValue</code> - methods: <code>GET</code> <code>PUT</code> <code>HEAD</code> <code>DELETE</code> <code>OPTIONS</code> <code>TRACE</code> - statusCodes: <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/408"><code>408</code></a> <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/413"><code>413</code></a> <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/429"><code>429</code></a> <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/500"><code>500</code></a> <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/502"><code>502</code></a> <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/503"><code>503</code></a> <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/504"><code>504</code></a> <a href="https://support.cloudflare.com/hc/en-us/articles/115003011431#521error"><code>521</code></a> <a href="https://support.cloudflare.com/hc/en-us/articles/115003011431#522error"><code>522</code></a> <a href="https://support.cloudflare.com/hc/en-us/articles/115003011431#524error"><code>524</code></a> - maxRetryAfter: <code>undefined</code> - errorCodes: <code>ETIMEDOUT</code> <code>ECONNRESET</code> <code>EADDRINUSE</code> <code>ECONNREFUSED</code> <code>EPIPE</code> <code>ENOTFOUND</code> <code>ENETUNREACH</code> <code>EAI_AGAIN</code></p>
<p>An object representing <code>limit</code>, <code>calculateDelay</code>, <code>methods</code>, <code>statusCodes</code>, <code>maxRetryAfter</code> and <code>errorCodes</code> fields for maximum retry count, retry handler, allowed methods, allowed status codes, maximum <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Retry-After"><code>Retry-After</code></a> time and allowed error codes.</p>
<p><strong>Note:</strong> When using streams, this option is ignored. If the connection is reset when downloading, you need to catch the error and clear the file you were writing into to prevent duplicated content.</p>
<p>If <code>maxRetryAfter</code> is set to <code>undefined</code>, it will use <code>options.timeout</code>.<br />
If <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Retry-After"><code>Retry-After</code></a> header is greater than <code>maxRetryAfter</code>, it will cancel the request.</p>
<p>Delays between retries counts with function <code>1000 * Math.pow(2, retry) + Math.random() * 100</code>, where <code>retry</code> is attempt number (starts from 1).</p>
<p>The <code>calculateDelay</code> property is a <code>function</code> that receives an object with <code>attemptCount</code>, <code>retryOptions</code>, <code>error</code> and <code>computedValue</code> properties for current retry count, the retry options, error and default computed value. The function must return a delay in milliseconds (<code>0</code> return value cancels retry).</p>
<p>By default, it retries <em>only</em> on the specified methods, status codes, and on these network errors: - <code>ETIMEDOUT</code>: One of the <a href="#timeout">timeout</a> limits were reached. - <code>ECONNRESET</code>: Connection was forcibly closed by a peer. - <code>EADDRINUSE</code>: Could not bind to any free port. - <code>ECONNREFUSED</code>: Connection was refused by the server. - <code>EPIPE</code>: The remote side of the stream being written has been closed. - <code>ENOTFOUND</code>: Couldn’t resolve the hostname to an IP address. - <code>ENETUNREACH</code>: No internet connection. - <code>EAI_AGAIN</code>: DNS lookup timed out.</p>
<h6 id="followredirect">followRedirect</h6>
<p>Type: <code>boolean</code><br />
Default: <code>true</code></p>
<p>Defines if redirect responses should be followed automatically.</p>
<p>Note that if a <code>303</code> is sent by the server in response to any request type (<code>POST</code>, <code>DELETE</code>, etc.), Got will automatically request the resource pointed to in the location header via <code>GET</code>. This is in accordance with <a href="https://tools.ietf.org/html/rfc7231#section-6.4.4">the spec</a>.</p>
<h6 id="methodrewriting">methodRewriting</h6>
<p>Type: <code>boolean</code><br />
Default: <code>true</code></p>
<p>By default, redirects will use <a href="https://tools.ietf.org/html/rfc7231#section-6.4">method rewriting</a>. For example, when sending a POST request and receiving a <code>302</code>, it will resend the body to the new location using the same HTTP method (<code>POST</code> in this case).</p>
<h6 id="allowgetbody">allowGetBody</h6>
<p>Type: <code>boolean</code><br />
Default: <code>false</code></p>
<p><strong>Note:</strong> The <a href="https://tools.ietf.org/html/rfc7231#section-4.3.1">RFC 7321</a> doesn’t specify any particular behavior for the GET method having a payload, therefore <strong>it’s considered an <a href="https://en.wikipedia.org/wiki/Anti-pattern">anti-pattern</a></strong>.</p>
<p>Set this to <code>true</code> to allow sending body for the <code>GET</code> method. However, the <a href="https://tools.ietf.org/html/rfc7540#section-8.1.3">HTTP/2 specification</a> says that <code>An HTTP GET request includes request header fields and no payload body</code>, therefore when using the HTTP/2 protocol this option will have no effect. This option is only meant to interact with non-compliant servers when you have no other choice.</p>
<h6 id="maxredirects">maxRedirects</h6>
<p>Type: <code>number</code><br />
Default: <code>10</code></p>
<p>If exceeded, the request will be aborted and a <code>MaxRedirectsError</code> will be thrown.</p>
<h6 id="decompress">decompress</h6>
<p>Type: <code>boolean</code><br />
Default: <code>true</code></p>
<p>Decompress the response automatically. This will set the <code>accept-encoding</code> header to <code>gzip, deflate, br</code> on Node.js 11.7.0+ or <code>gzip, deflate</code> for older Node.js versions, unless you set it yourself.</p>
<p>Brotli (<code>br</code>) support requires Node.js 11.7.0 or later.</p>
<p>If this is disabled, a compressed response is returned as a <code>Buffer</code>. This may be useful if you want to handle decompression yourself or stream the raw compressed data.</p>
<h6 id="cache">cache</h6>
<p>Type: <code>object</code><br />
Default: <code>false</code></p>
<p><a href="#cache-adapters">Cache adapter instance</a> for storing cached response data.</p>
<h6 id="dnscache">dnsCache</h6>
<p>Type: <code>object</code><br />
Default: <code>false</code></p>
<p><a href="#cache-adapters">Cache adapter instance</a> for storing cached DNS data.</p>
<h6 id="request">request</h6>
<p>Type: <code>Function</code><br />
Default: <code>http.request | https.request</code> <em>(Depending on the protocol)</em></p>
<p>Custom request function. The main purpose of this is to <a href="#experimental-http2-support">support HTTP2 using a wrapper</a>.</p>
<h6 id="useelectronnet">useElectronNet</h6>
<p>Type: <code>boolean</code><br />
Default: <code>false</code></p>
<p><a href="https://github.com/sindresorhus/got#electron-support-has-been-deprecated"><strong>Deprecated</strong></a></p>
<p>When used in Electron, Got will use <a href="https://electronjs.org/docs/api/net/"><code>electron.net</code></a> instead of the Node.js <code>http</code> module. According to the Electron docs, it should be fully compatible, but it’s not entirely. See <a href="https://github.com/sindresorhus/got/issues/443">#443</a> and <a href="https://github.com/sindresorhus/got/issues/461">#461</a>.</p>
<h6 id="throwhttperrors">throwHttpErrors</h6>
<p>Type: <code>boolean</code><br />
Default: <code>true</code></p>
<p>Determines if a <code>got.HTTPError</code> is thrown for error responses (non-2xx status codes).</p>
<p>If this is disabled, requests that encounter an error status code will be resolved with the <code>response</code> instead of throwing. This may be useful if you are checking for resource availability and are expecting error responses.</p>
<h6 id="agent">agent</h6>
<p>Same as the <a href="https://nodejs.org/api/http.html#http_http_request_url_options_callback"><code>agent</code> option</a> for <code>http.request</code>, but with an extra feature:</p>
<p>If you require different agents for different protocols, you can pass a map of agents to the <code>agent</code> option. This is necessary because a request to one protocol might redirect to another. In such a scenario, Got will switch over to the right protocol agent for you.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb11-1" title="1"><span class="kw">const</span> got <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;got&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb11-2" title="2"><span class="kw">const</span> HttpAgent <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;agentkeepalive&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb11-3" title="3"><span class="kw">const</span> <span class="op">{</span>HttpsAgent<span class="op">}</span> <span class="op">=</span> HttpAgent<span class="op">;</span></a>
<a class="sourceLine" id="cb11-4" title="4"></a>
<a class="sourceLine" id="cb11-5" title="5"><span class="at">got</span>(<span class="st">&#39;https://sindresorhus.com&#39;</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb11-6" title="6">    <span class="dt">agent</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb11-7" title="7">        <span class="dt">http</span><span class="op">:</span> <span class="kw">new</span> <span class="at">HttpAgent</span>()<span class="op">,</span></a>
<a class="sourceLine" id="cb11-8" title="8">        <span class="dt">https</span><span class="op">:</span> <span class="kw">new</span> <span class="at">HttpsAgent</span>()</a>
<a class="sourceLine" id="cb11-9" title="9">    <span class="op">}</span></a>
<a class="sourceLine" id="cb11-10" title="10"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h6 id="hooks">hooks</h6>
<p>Type: <code>object&lt;string, Function[]&gt;</code></p>
<p>Hooks allow modifications during the request lifecycle. Hook functions may be async and are run serially.</p>
<h6 id="hooks.init">hooks.init</h6>
<p>Type: <code>Function[]</code><br />
Default: <code>[]</code></p>
<p>Called with plain <a href="#options">request options</a>, right before their normalization. This is especially useful in conjunction with <a href="#instances"><code>got.extend()</code></a> when the input needs custom handling.</p>
<p>See the <a href="documentation/migration-guides.md#breaking-changes">Request migration guide</a> for an example.</p>
<p><strong>Note:</strong> This hook must be synchronous!</p>
<h6 id="hooks.beforerequest">hooks.beforeRequest</h6>
<p>Type: <code>Function[]</code><br />
Default: <code>[]</code></p>
<p>Called with <a href="source/normalize-arguments.ts">normalized</a> <a href="#options">request options</a>. Got will make no further changes to the request before it is sent (except the body serialization). This is especially useful in conjunction with <a href="#instances"><code>got.extend()</code></a> when you want to create an API client that, for example, uses HMAC-signing.</p>
<p>See the <a href="#aws">AWS section</a> for an example.</p>
<h6 id="hooks.beforeredirect">hooks.beforeRedirect</h6>
<p>Type: <code>Function[]</code><br />
Default: <code>[]</code></p>
<p>Called with <a href="source/normalize-arguments.ts">normalized</a> <a href="#options">request options</a> and the redirect <a href="#response">response</a>. Got will make no further changes to the request. This is especially useful when you want to avoid dead sites. Example:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb12-1" title="1"><span class="kw">const</span> got <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;got&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb12-2" title="2"></a>
<a class="sourceLine" id="cb12-3" title="3"><span class="at">got</span>(<span class="st">&#39;https://example.com&#39;</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb12-4" title="4">    <span class="dt">hooks</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb12-5" title="5">        <span class="dt">beforeRedirect</span><span class="op">:</span> [</a>
<a class="sourceLine" id="cb12-6" title="6">            (options<span class="op">,</span> response) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb12-7" title="7">                <span class="cf">if</span> (<span class="va">options</span>.<span class="at">hostname</span> <span class="op">===</span> <span class="st">&#39;deadSite&#39;</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb12-8" title="8">                    <span class="va">options</span>.<span class="at">hostname</span> <span class="op">=</span> <span class="st">&#39;fallbackSite&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb12-9" title="9">                <span class="op">}</span></a>
<a class="sourceLine" id="cb12-10" title="10">            <span class="op">}</span></a>
<a class="sourceLine" id="cb12-11" title="11">        ]</a>
<a class="sourceLine" id="cb12-12" title="12">    <span class="op">}</span></a>
<a class="sourceLine" id="cb12-13" title="13"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h6 id="hooks.beforeretry">hooks.beforeRetry</h6>
<p>Type: <code>Function[]</code><br />
Default: <code>[]</code></p>
<p><strong>Note:</strong> When using streams, this hook is ignored.</p>
<p>Called with <a href="source/normalize-arguments.ts">normalized</a> <a href="#options">request options</a>, the error and the retry count. Got will make no further changes to the request. This is especially useful when some extra work is required before the next try. Example:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb13-1" title="1"><span class="kw">const</span> got <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;got&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb13-2" title="2"></a>
<a class="sourceLine" id="cb13-3" title="3"><span class="va">got</span>.<span class="at">post</span>(<span class="st">&#39;https://example.com&#39;</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb13-4" title="4">    <span class="dt">hooks</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb13-5" title="5">        <span class="dt">beforeRetry</span><span class="op">:</span> [</a>
<a class="sourceLine" id="cb13-6" title="6">            (options<span class="op">,</span> error<span class="op">,</span> retryCount) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb13-7" title="7">                <span class="cf">if</span> (<span class="va">error</span>.<span class="va">response</span>.<span class="at">statusCode</span> <span class="op">===</span> <span class="dv">413</span>) <span class="op">{</span> <span class="co">// Payload too large</span></a>
<a class="sourceLine" id="cb13-8" title="8">                    <span class="va">options</span>.<span class="at">body</span> <span class="op">=</span> <span class="at">getNewBody</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb13-9" title="9">                <span class="op">}</span></a>
<a class="sourceLine" id="cb13-10" title="10">            <span class="op">}</span></a>
<a class="sourceLine" id="cb13-11" title="11">        ]</a>
<a class="sourceLine" id="cb13-12" title="12">    <span class="op">}</span></a>
<a class="sourceLine" id="cb13-13" title="13"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p><strong>Note:</strong> When retrying in a <code>afterResponse</code> hook, all remaining <code>beforeRetry</code> hooks will be called without the <code>error</code> and <code>retryCount</code> arguments.</p>
<h6 id="hooks.afterresponse">hooks.afterResponse</h6>
<p>Type: <code>Function[]</code><br />
Default: <code>[]</code></p>
<p><strong>Note:</strong> When using streams, this hook is ignored.</p>
<p>Called with <a href="#response">response object</a> and a retry function. Calling the retry function will trigger <code>beforeRetry</code> hooks.</p>
<p>Each function should return the response. This is especially useful when you want to refresh an access token. Example:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb14-1" title="1"><span class="kw">const</span> got <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;got&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb14-2" title="2"></a>
<a class="sourceLine" id="cb14-3" title="3"><span class="kw">const</span> instance <span class="op">=</span> <span class="va">got</span>.<span class="at">extend</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb14-4" title="4">    <span class="dt">hooks</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb14-5" title="5">        <span class="dt">afterResponse</span><span class="op">:</span> [</a>
<a class="sourceLine" id="cb14-6" title="6">            (response<span class="op">,</span> retryWithMergedOptions) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb14-7" title="7">                <span class="cf">if</span> (<span class="va">response</span>.<span class="at">statusCode</span> <span class="op">===</span> <span class="dv">401</span>) <span class="op">{</span> <span class="co">// Unauthorized</span></a>
<a class="sourceLine" id="cb14-8" title="8">                    <span class="kw">const</span> updatedOptions <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb14-9" title="9">                        <span class="dt">headers</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb14-10" title="10">                            <span class="dt">token</span><span class="op">:</span> <span class="at">getNewToken</span>() <span class="co">// Refresh the access token</span></a>
<a class="sourceLine" id="cb14-11" title="11">                        <span class="op">}</span></a>
<a class="sourceLine" id="cb14-12" title="12">                    <span class="op">};</span></a>
<a class="sourceLine" id="cb14-13" title="13"></a>
<a class="sourceLine" id="cb14-14" title="14">                    <span class="co">// Save for further requests</span></a>
<a class="sourceLine" id="cb14-15" title="15">                    <span class="va">instance</span>.<span class="va">defaults</span>.<span class="at">options</span> <span class="op">=</span> <span class="va">got</span>.<span class="at">mergeOptions</span>(<span class="va">instance</span>.<span class="va">defaults</span>.<span class="at">options</span><span class="op">,</span> updatedOptions)<span class="op">;</span></a>
<a class="sourceLine" id="cb14-16" title="16"></a>
<a class="sourceLine" id="cb14-17" title="17">                    <span class="co">// Make a new retry</span></a>
<a class="sourceLine" id="cb14-18" title="18">                    <span class="cf">return</span> <span class="at">retryWithMergedOptions</span>(updatedOptions)<span class="op">;</span></a>
<a class="sourceLine" id="cb14-19" title="19">                <span class="op">}</span></a>
<a class="sourceLine" id="cb14-20" title="20"></a>
<a class="sourceLine" id="cb14-21" title="21">                <span class="co">// No changes otherwise</span></a>
<a class="sourceLine" id="cb14-22" title="22">                <span class="cf">return</span> response<span class="op">;</span></a>
<a class="sourceLine" id="cb14-23" title="23">            <span class="op">}</span></a>
<a class="sourceLine" id="cb14-24" title="24">        ]<span class="op">,</span></a>
<a class="sourceLine" id="cb14-25" title="25">        <span class="dt">beforeRetry</span><span class="op">:</span> [</a>
<a class="sourceLine" id="cb14-26" title="26">            (options<span class="op">,</span> error<span class="op">,</span> retryCount) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb14-27" title="27">                <span class="co">// This will be called on `retryWithMergedOptions(...)`</span></a>
<a class="sourceLine" id="cb14-28" title="28">            <span class="op">}</span></a>
<a class="sourceLine" id="cb14-29" title="29">        ]</a>
<a class="sourceLine" id="cb14-30" title="30">    <span class="op">},</span></a>
<a class="sourceLine" id="cb14-31" title="31">    <span class="dt">mutableDefaults</span><span class="op">:</span> <span class="kw">true</span></a>
<a class="sourceLine" id="cb14-32" title="32"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h6 id="hooks.beforeerror">hooks.beforeError</h6>
<p>Type: <code>Function[]</code><br />
Default: <code>[]</code></p>
<p>Called with an <code>Error</code> instance. The error is passed to the hook right before it’s thrown. This is especially useful when you want to have more detailed errors.</p>
<p><strong>Note:</strong> Errors thrown while normalizing input options are thrown directly and not part of this hook.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb15-1" title="1"><span class="kw">const</span> got <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;got&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb15-2" title="2"></a>
<a class="sourceLine" id="cb15-3" title="3"><span class="at">got</span>(<span class="st">&#39;https://api.github.com/some-endpoint&#39;</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb15-4" title="4">    <span class="dt">hooks</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb15-5" title="5">        <span class="dt">beforeError</span><span class="op">:</span> [</a>
<a class="sourceLine" id="cb15-6" title="6">            error <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb15-7" title="7">                <span class="kw">const</span> <span class="op">{</span>response<span class="op">}</span> <span class="op">=</span> error<span class="op">;</span></a>
<a class="sourceLine" id="cb15-8" title="8">                <span class="cf">if</span> (response <span class="op">&amp;&amp;</span> <span class="va">response</span>.<span class="at">body</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb15-9" title="9">                    <span class="va">error</span>.<span class="at">name</span> <span class="op">=</span> <span class="st">&#39;GitHubError&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb15-10" title="10">                    <span class="va">error</span>.<span class="at">message</span> <span class="op">=</span> <span class="vs">`</span><span class="sc">${</span><span class="va">response</span>.<span class="va">body</span>.<span class="at">message</span><span class="sc">}</span><span class="vs"> (</span><span class="sc">${</span><span class="va">response</span>.<span class="at">statusCode</span><span class="sc">}</span><span class="vs">)`</span><span class="op">;</span></a>
<a class="sourceLine" id="cb15-11" title="11">                <span class="op">}</span></a>
<a class="sourceLine" id="cb15-12" title="12"></a>
<a class="sourceLine" id="cb15-13" title="13">                <span class="cf">return</span> error<span class="op">;</span></a>
<a class="sourceLine" id="cb15-14" title="14">            <span class="op">}</span></a>
<a class="sourceLine" id="cb15-15" title="15">        ]</a>
<a class="sourceLine" id="cb15-16" title="16">    <span class="op">}</span></a>
<a class="sourceLine" id="cb15-17" title="17"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h5 id="pagination">_pagination</h5>
<p>Type: <code>object</code></p>
<p><strong>Note:</strong> This feature is marked as experimental as we’re <a href="https://github.com/sindresorhus/got/issues/1052">looking for feedback</a> on the API and how it works. The feature itself is stable, but the API may change based on feedback. So if you decide to try it out, we suggest locking down the <code>got</code> dependency semver range or use a lockfile.</p>
<h6 id="pagination.transform">_pagination.transform</h6>
<p>Type: <code>Function</code><br />
Default: <code>response =&gt; JSON.parse(response.body)</code></p>
<p>A function that transform <a href="#response"><code>Response</code></a> into an array of items. This is where you should do the parsing.</p>
<h6 id="pagination.paginate">_pagination.paginate</h6>
<p>Type: <code>Function</code><br />
Default: <a href="source/index.ts"><code>Link</code> header logic</a></p>
<p>The function takes three arguments: - <code>response</code> - The current response object. - <code>allItems</code> - An array of the emitted items. - <code>currentItems</code> - Items from the current response.</p>
<p>It should return an object representing Got options pointing to the next page. If there are no more pages, <code>false</code> should be returned.</p>
<p>For example, if you want to stop when the response contains less items than expected, you can use something like this:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb16-1" title="1"><span class="kw">const</span> got <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;got&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb16-2" title="2"></a>
<a class="sourceLine" id="cb16-3" title="3">(<span class="kw">async</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb16-4" title="4">    <span class="kw">const</span> limit <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></a>
<a class="sourceLine" id="cb16-5" title="5"></a>
<a class="sourceLine" id="cb16-6" title="6">    <span class="kw">const</span> items <span class="op">=</span> <span class="va">got</span>.<span class="at">paginate</span>(<span class="st">&#39;https://example.com/items&#39;</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb16-7" title="7">        <span class="dt">searchParams</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb16-8" title="8">            limit<span class="op">,</span></a>
<a class="sourceLine" id="cb16-9" title="9">            <span class="dt">offset</span><span class="op">:</span> <span class="dv">0</span></a>
<a class="sourceLine" id="cb16-10" title="10">        <span class="op">},</span></a>
<a class="sourceLine" id="cb16-11" title="11">        <span class="dt">_pagination</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb16-12" title="12">            <span class="dt">paginate</span><span class="op">:</span> (response<span class="op">,</span> allItems<span class="op">,</span> currentItems) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb16-13" title="13">                <span class="kw">const</span> previousSearchParams <span class="op">=</span> <span class="va">response</span>.<span class="va">request</span>.<span class="va">options</span>.<span class="at">searchParams</span><span class="op">;</span></a>
<a class="sourceLine" id="cb16-14" title="14">                <span class="kw">const</span> <span class="op">{</span><span class="dt">offset</span><span class="op">:</span> previousOffset<span class="op">}</span> <span class="op">=</span> previousSearchParams<span class="op">;</span></a>
<a class="sourceLine" id="cb16-15" title="15"></a>
<a class="sourceLine" id="cb16-16" title="16">                <span class="cf">if</span> (<span class="va">currentItems</span>.<span class="at">length</span> <span class="op">&lt;</span> limit) <span class="op">{</span></a>
<a class="sourceLine" id="cb16-17" title="17">                    <span class="cf">return</span> <span class="kw">false</span><span class="op">;</span></a>
<a class="sourceLine" id="cb16-18" title="18">                <span class="op">}</span></a>
<a class="sourceLine" id="cb16-19" title="19"></a>
<a class="sourceLine" id="cb16-20" title="20">                <span class="cf">return</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb16-21" title="21">                    <span class="dt">searchParams</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb16-22" title="22">                        ...<span class="at">previousSearchParams</span><span class="op">,</span></a>
<a class="sourceLine" id="cb16-23" title="23">                        <span class="dt">offset</span><span class="op">:</span> previousOffset <span class="op">+</span> limit<span class="op">,</span></a>
<a class="sourceLine" id="cb16-24" title="24">                    <span class="op">}</span></a>
<a class="sourceLine" id="cb16-25" title="25">                <span class="op">};</span></a>
<a class="sourceLine" id="cb16-26" title="26">            <span class="op">}</span></a>
<a class="sourceLine" id="cb16-27" title="27">        <span class="op">}</span></a>
<a class="sourceLine" id="cb16-28" title="28">    <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb16-29" title="29"></a>
<a class="sourceLine" id="cb16-30" title="30">    <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;Items from all pages:&#39;</span><span class="op">,</span> items)<span class="op">;</span></a>
<a class="sourceLine" id="cb16-31" title="31"><span class="op">}</span>)()<span class="op">;</span></a></code></pre></div>
<h6 id="pagination.filter">_pagination.filter</h6>
<p>Type: <code>Function</code><br />
Default: <code>(item, allItems, currentItems) =&gt; true</code></p>
<p>Checks whether the item should be emitted or not.</p>
<h6 id="pagination.shouldcontinue">_pagination.shouldContinue</h6>
<p>Type: <code>Function</code><br />
Default: <code>(item, allItems, currentItems) =&gt; true</code></p>
<p>Checks whether the pagination should continue.</p>
<p>For example, if you need to stop <strong>before</strong> emitting an entry with some flag, you should use <code>(item, allItems, currentItems) =&gt; !item.flag</code>. If you want to stop <strong>after</strong> emitting the entry, you should use <code>(item, allItems, currentItems) =&gt; allItems.some(entry =&gt; entry.flag)</code> instead.</p>
<h6 id="pagination.countlimit">_pagination.countLimit</h6>
<p>Type: <code>number</code><br />
Default: <code>Infinity</code></p>
<p>The maximum amount of items that should be emitted.</p>
<h4 id="response">Response</h4>
<p>The response object will typically be a <a href="https://nodejs.org/api/http.html#http_class_http_incomingmessage">Node.js HTTP response stream</a>, however, if returned from the cache it will be a <a href="https://github.com/lukechilds/responselike">response-like object</a> which behaves in the same way.</p>
<h5 id="request-1">request</h5>
<p>Type: <code>object</code></p>
<p><strong>Note:</strong> This is not a <a href="https://nodejs.org/api/http.html#http_class_http_clientrequest">http.ClientRequest</a>.</p>
<ul>
<li><code>options</code> - The Got options that were set on this request.</li>
</ul>
<h5 id="body-1">body</h5>
<p>Type: <code>string | object | Buffer</code> <em>(Depending on <code>options.responseType</code>)</em></p>
<p>The result of the request.</p>
<h5 id="url-1">url</h5>
<p>Type: <code>string</code></p>
<p>The request URL or the final URL after redirects.</p>
<h5 id="ip">ip</h5>
<p>Type: <code>string</code></p>
<p>The remote IP address.</p>
<p><strong>Note:</strong> Not available when the response is cached. This is hopefully a temporary limitation, see <a href="https://github.com/lukechilds/cacheable-request/issues/86">lukechilds/cacheable-request#86</a>.</p>
<h5 id="requesturl">requestUrl</h5>
<p>Type: <code>string</code></p>
<p>The original request URL.</p>
<h5 id="timings">timings</h5>
<p>Type: <code>object</code></p>
<p>The object contains the following properties:</p>
<ul>
<li><code>start</code> - Time when the request started.</li>
<li><code>socket</code> - Time when a socket was assigned to the request.</li>
<li><code>lookup</code> - Time when the DNS lookup finished.</li>
<li><code>connect</code> - Time when the socket successfully connected.</li>
<li><code>secureConnect</code> - Time when the socket securely connected.</li>
<li><code>upload</code> - Time when the request finished uploading.</li>
<li><code>response</code> - Time when the request fired <code>response</code> event.</li>
<li><code>end</code> - Time when the response fired <code>end</code> event.</li>
<li><code>error</code> - Time when the request fired <code>error</code> event.</li>
<li><code>abort</code> - Time when the request fired <code>abort</code> event.</li>
<li><code>phases</code>
<ul>
<li><code>wait</code> - <code>timings.socket - timings.start</code></li>
<li><code>dns</code> - <code>timings.lookup - timings.socket</code></li>
<li><code>tcp</code> - <code>timings.connect - timings.lookup</code></li>
<li><code>tls</code> - <code>timings.secureConnect - timings.connect</code></li>
<li><code>request</code> - <code>timings.upload - (timings.secureConnect || timings.connect)</code></li>
<li><code>firstByte</code> - <code>timings.response - timings.upload</code></li>
<li><code>download</code> - <code>timings.end - timings.response</code></li>
<li><code>total</code> - <code>(timings.end || timings.error || timings.abort) - timings.start</code></li>
</ul></li>
</ul>
<p>If something has not been measured yet, it will be <code>undefined</code>.</p>
<p><strong>Note:</strong> The time is a <code>number</code> representing the milliseconds elapsed since the UNIX epoch.</p>
<h5 id="isfromcache">isFromCache</h5>
<p>Type: <code>boolean</code></p>
<p>Whether the response was retrieved from the cache.</p>
<h5 id="redirecturls">redirectUrls</h5>
<p>Type: <code>string[]</code></p>
<p>The redirect URLs.</p>
<h5 id="retrycount">retryCount</h5>
<p>Type: <code>number</code></p>
<p>The number of times the request was retried.</p>
<h4 id="streams-1">Streams</h4>
<p><strong>Note:</strong> Progress events, redirect events and request/response events can also be used with promises.</p>
<p><strong>Note:</strong> To access <code>response.isFromCache</code> you need to use <code>got.stream(url, options).isFromCache</code>. The value will be undefined until the <code>response</code> event.</p>
<h4 id="got.streamurl-options">got.stream(url, options?)</h4>
<p>Sets <code>options.isStream</code> to <code>true</code>.</p>
<p>Returns a <a href="https://nodejs.org/api/stream.html#stream_class_stream_duplex">duplex stream</a> with additional events:</p>
<h5 id="onrequest-request">.on(‘request’, request)</h5>
<p><code>request</code> event to get the request object of the request.</p>
<p><strong>Tip:</strong> You can use <code>request</code> event to abort request:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb17-1" title="1"><span class="va">got</span>.<span class="at">stream</span>(<span class="st">&#39;https://github.com&#39;</span>)</a>
<a class="sourceLine" id="cb17-2" title="2">    .<span class="at">on</span>(<span class="st">&#39;request&#39;</span><span class="op">,</span> request <span class="kw">=&gt;</span> <span class="at">setTimeout</span>(() <span class="kw">=&gt;</span> <span class="va">request</span>.<span class="at">abort</span>()<span class="op">,</span> <span class="dv">50</span>))<span class="op">;</span></a></code></pre></div>
<h5 id="onresponse-response">.on(‘response’, response)</h5>
<p>The <code>response</code> event to get the response object of the final request.</p>
<h5 id="onredirect-response-nextoptions">.on(‘redirect’, response, nextOptions)</h5>
<p>The <code>redirect</code> event to get the response object of a redirect. The second argument is options for the next request to the redirect location.</p>
<h5 id="onuploadprogress-progress">.on(‘uploadProgress’, progress)</h5>
<h5 id="ondownloadprogress-progress">.on(‘downloadProgress’, progress)</h5>
<p>Progress events for uploading (sending a request) and downloading (receiving a response). The <code>progress</code> argument is an object like:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb18-1" title="1"><span class="op">{</span></a>
<a class="sourceLine" id="cb18-2" title="2">    <span class="dt">percent</span><span class="op">:</span> <span class="fl">0.1</span><span class="op">,</span></a>
<a class="sourceLine" id="cb18-3" title="3">    <span class="dt">transferred</span><span class="op">:</span> <span class="dv">1024</span><span class="op">,</span></a>
<a class="sourceLine" id="cb18-4" title="4">    <span class="dt">total</span><span class="op">:</span> <span class="dv">10240</span></a>
<a class="sourceLine" id="cb18-5" title="5"><span class="op">}</span></a></code></pre></div>
<p>If the <code>content-length</code> header is missing, <code>total</code> will be <code>undefined</code>.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb19-1" title="1">(<span class="kw">async</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb19-2" title="2">    <span class="kw">const</span> response <span class="op">=</span> <span class="cf">await</span> <span class="at">got</span>(<span class="st">&#39;https://sindresorhus.com&#39;</span>)</a>
<a class="sourceLine" id="cb19-3" title="3">        .<span class="at">on</span>(<span class="st">&#39;downloadProgress&#39;</span><span class="op">,</span> progress <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb19-4" title="4">            <span class="co">// Report download progress</span></a>
<a class="sourceLine" id="cb19-5" title="5">        <span class="op">}</span>)</a>
<a class="sourceLine" id="cb19-6" title="6">        .<span class="at">on</span>(<span class="st">&#39;uploadProgress&#39;</span><span class="op">,</span> progress <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb19-7" title="7">            <span class="co">// Report upload progress</span></a>
<a class="sourceLine" id="cb19-8" title="8">        <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb19-9" title="9"></a>
<a class="sourceLine" id="cb19-10" title="10">    <span class="va">console</span>.<span class="at">log</span>(response)<span class="op">;</span></a>
<a class="sourceLine" id="cb19-11" title="11"><span class="op">}</span>)()<span class="op">;</span></a></code></pre></div>
<h5 id="onerror-error-body-response">.on(‘error’, error, body, response)</h5>
<p>The <code>error</code> event emitted in case of a protocol error (like <code>ENOTFOUND</code> etc.) or status error (4xx or 5xx). The second argument is the body of the server response in case of status error. The third argument is a response object.</p>
<h4 id="pagination-1">Pagination</h4>
<h4 id="got.paginateurl-options">got.paginate(url, options?)</h4>
<p>Returns an async iterator:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb20-1" title="1">(<span class="kw">async</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb20-2" title="2">    <span class="kw">const</span> countLimit <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></a>
<a class="sourceLine" id="cb20-3" title="3"></a>
<a class="sourceLine" id="cb20-4" title="4">    <span class="kw">const</span> pagination <span class="op">=</span> <span class="va">got</span>.<span class="at">paginate</span>(<span class="st">&#39;https://api.github.com/repos/sindresorhus/got/commits&#39;</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb20-5" title="5">        <span class="dt">_pagination</span><span class="op">:</span> <span class="op">{</span>countLimit<span class="op">}</span></a>
<a class="sourceLine" id="cb20-6" title="6">    <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb20-7" title="7"></a>
<a class="sourceLine" id="cb20-8" title="8">    <span class="va">console</span>.<span class="at">log</span>(<span class="vs">`Printing latest </span><span class="sc">${</span>countLimit<span class="sc">}</span><span class="vs"> Got commits (newest to oldest):`</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb20-9" title="9"></a>
<a class="sourceLine" id="cb20-10" title="10">    <span class="cf">for</span> <span class="cf">await</span> (<span class="kw">const</span> commitData <span class="kw">of</span> pagination) <span class="op">{</span></a>
<a class="sourceLine" id="cb20-11" title="11">        <span class="va">console</span>.<span class="at">log</span>(<span class="va">commitData</span>.<span class="va">commit</span>.<span class="at">message</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb20-12" title="12">    <span class="op">}</span></a>
<a class="sourceLine" id="cb20-13" title="13"><span class="op">}</span>)()<span class="op">;</span></a></code></pre></div>
<p>See <a href="#_pagination"><code>options._pagination</code></a> for more pagination options.</p>
<h4 id="got.geturl-options">got.get(url, options?)</h4>
<h4 id="got.posturl-options">got.post(url, options?)</h4>
<h4 id="got.puturl-options">got.put(url, options?)</h4>
<h4 id="got.patchurl-options">got.patch(url, options?)</h4>
<h4 id="got.headurl-options">got.head(url, options?)</h4>
<h4 id="got.deleteurl-options">got.delete(url, options?)</h4>
<p>Sets <code>options.method</code> to the method name and makes a request.</p>
<h3 id="instances">Instances</h3>
<h4 id="got.extendoptions">got.extend(…options)</h4>
<p>Configure a new <code>got</code> instance with default <code>options</code>. The <code>options</code> are merged with the parent instance’s <code>defaults.options</code> using <a href="#gotmergeoptionsparentoptions-newoptions"><code>got.mergeOptions</code></a>. You can access the resolved options with the <code>.defaults</code> property on the instance.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb21-1" title="1"><span class="kw">const</span> client <span class="op">=</span> <span class="va">got</span>.<span class="at">extend</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb21-2" title="2">    <span class="dt">prefixUrl</span><span class="op">:</span> <span class="st">&#39;https://example.com&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb21-3" title="3">    <span class="dt">headers</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb21-4" title="4">        <span class="st">&#39;x-unicorn&#39;</span><span class="op">:</span> <span class="st">&#39;rainbow&#39;</span></a>
<a class="sourceLine" id="cb21-5" title="5">    <span class="op">}</span></a>
<a class="sourceLine" id="cb21-6" title="6"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb21-7" title="7"></a>
<a class="sourceLine" id="cb21-8" title="8"><span class="va">client</span>.<span class="at">get</span>(<span class="st">&#39;demo&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb21-9" title="9"></a>
<a class="sourceLine" id="cb21-10" title="10"><span class="co">/* HTTP Request =&gt;</span></a>
<a class="sourceLine" id="cb21-11" title="11"><span class="co"> * GET /demo HTTP/1.1</span></a>
<a class="sourceLine" id="cb21-12" title="12"><span class="co"> * Host: example.com</span></a>
<a class="sourceLine" id="cb21-13" title="13"><span class="co"> * x-unicorn: rainbow</span></a>
<a class="sourceLine" id="cb21-14" title="14"><span class="co"> */</span></a></code></pre></div>
<div class="sourceCode" id="cb22"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb22-1" title="1">(<span class="kw">async</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb22-2" title="2">    <span class="kw">const</span> client <span class="op">=</span> <span class="va">got</span>.<span class="at">extend</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb22-3" title="3">        <span class="dt">prefixUrl</span><span class="op">:</span> <span class="st">&#39;httpbin.org&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb22-4" title="4">        <span class="dt">headers</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb22-5" title="5">            <span class="st">&#39;x-foo&#39;</span><span class="op">:</span> <span class="st">&#39;bar&#39;</span></a>
<a class="sourceLine" id="cb22-6" title="6">        <span class="op">}</span></a>
<a class="sourceLine" id="cb22-7" title="7">    <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb22-8" title="8">    <span class="kw">const</span> <span class="op">{</span>headers<span class="op">}</span> <span class="op">=</span> <span class="cf">await</span> <span class="va">client</span>.<span class="at">get</span>(<span class="st">&#39;headers&#39;</span>).<span class="at">json</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb22-9" title="9">    <span class="co">//=&gt; headers[&#39;x-foo&#39;] === &#39;bar&#39;</span></a>
<a class="sourceLine" id="cb22-10" title="10"></a>
<a class="sourceLine" id="cb22-11" title="11">    <span class="kw">const</span> jsonClient <span class="op">=</span> <span class="va">client</span>.<span class="at">extend</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb22-12" title="12">        <span class="dt">responseType</span><span class="op">:</span> <span class="st">&#39;json&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb22-13" title="13">        <span class="dt">resolveBodyOnly</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></a>
<a class="sourceLine" id="cb22-14" title="14">        <span class="dt">headers</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb22-15" title="15">            <span class="st">&#39;x-baz&#39;</span><span class="op">:</span> <span class="st">&#39;qux&#39;</span></a>
<a class="sourceLine" id="cb22-16" title="16">        <span class="op">}</span></a>
<a class="sourceLine" id="cb22-17" title="17">    <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb22-18" title="18">    <span class="kw">const</span> <span class="op">{</span><span class="dt">headers</span><span class="op">:</span> headers2<span class="op">}</span> <span class="op">=</span> <span class="cf">await</span> <span class="va">jsonClient</span>.<span class="at">get</span>(<span class="st">&#39;headers&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb22-19" title="19">    <span class="co">//=&gt; headers2[&#39;x-foo&#39;] === &#39;bar&#39;</span></a>
<a class="sourceLine" id="cb22-20" title="20">    <span class="co">//=&gt; headers2[&#39;x-baz&#39;] === &#39;qux&#39;</span></a>
<a class="sourceLine" id="cb22-21" title="21"><span class="op">}</span>)()<span class="op">;</span></a></code></pre></div>
<p>Additionally, <code>got.extend()</code> accepts two properties from the <code>defaults</code> object: <code>mutableDefaults</code> and <code>handlers</code>. Example:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb23-1" title="1"><span class="co">// You can now modify `mutableGot.defaults.options`.</span></a>
<a class="sourceLine" id="cb23-2" title="2"><span class="kw">const</span> mutableGot <span class="op">=</span> <span class="va">got</span>.<span class="at">extend</span>(<span class="op">{</span><span class="dt">mutableDefaults</span><span class="op">:</span> <span class="kw">true</span><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb23-3" title="3"></a>
<a class="sourceLine" id="cb23-4" title="4"><span class="kw">const</span> mergedHandlers <span class="op">=</span> <span class="va">got</span>.<span class="at">extend</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb23-5" title="5">    <span class="dt">handlers</span><span class="op">:</span> [</a>
<a class="sourceLine" id="cb23-6" title="6">        (options<span class="op">,</span> next) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb23-7" title="7">            <span class="kw">delete</span> <span class="va">options</span>.<span class="va">headers</span>.<span class="at">referer</span><span class="op">;</span></a>
<a class="sourceLine" id="cb23-8" title="8"></a>
<a class="sourceLine" id="cb23-9" title="9">            <span class="cf">return</span> <span class="at">next</span>(options)<span class="op">;</span></a>
<a class="sourceLine" id="cb23-10" title="10">        <span class="op">}</span></a>
<a class="sourceLine" id="cb23-11" title="11">    ]</a>
<a class="sourceLine" id="cb23-12" title="12"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p><strong>Note:</strong> Handlers can be asynchronous. The recommended approach is:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb24-1" title="1"><span class="kw">const</span> handler <span class="op">=</span> (options<span class="op">,</span> next) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb24-2" title="2">    <span class="cf">if</span> (<span class="va">options</span>.<span class="at">stream</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb24-3" title="3">        <span class="co">// It&#39;s a Stream</span></a>
<a class="sourceLine" id="cb24-4" title="4">        <span class="cf">return</span> <span class="at">next</span>(options)<span class="op">;</span></a>
<a class="sourceLine" id="cb24-5" title="5">    <span class="op">}</span></a>
<a class="sourceLine" id="cb24-6" title="6"></a>
<a class="sourceLine" id="cb24-7" title="7">    <span class="co">// It&#39;s a Promise</span></a>
<a class="sourceLine" id="cb24-8" title="8">    <span class="cf">return</span> (<span class="kw">async</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb24-9" title="9">        <span class="cf">try</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb24-10" title="10">            <span class="kw">const</span> response <span class="op">=</span> <span class="cf">await</span> <span class="at">next</span>(options)<span class="op">;</span></a>
<a class="sourceLine" id="cb24-11" title="11">            <span class="va">response</span>.<span class="at">yourOwnProperty</span> <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></a>
<a class="sourceLine" id="cb24-12" title="12">            <span class="cf">return</span> response<span class="op">;</span></a>
<a class="sourceLine" id="cb24-13" title="13">        <span class="op">}</span> <span class="cf">catch</span> (error) <span class="op">{</span></a>
<a class="sourceLine" id="cb24-14" title="14">            <span class="co">// Every error will be replaced by this one.</span></a>
<a class="sourceLine" id="cb24-15" title="15">            <span class="co">// Before you receive any error here,</span></a>
<a class="sourceLine" id="cb24-16" title="16">            <span class="co">// it will be passed to the `beforeError` hooks first.</span></a>
<a class="sourceLine" id="cb24-17" title="17">            <span class="co">// Note: this one won&#39;t be passed to `beforeError` hook. It&#39;s final.</span></a>
<a class="sourceLine" id="cb24-18" title="18">            <span class="cf">throw</span> <span class="kw">new</span> <span class="at">Error</span>(<span class="st">&#39;Your very own error.&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb24-19" title="19">        <span class="op">}</span></a>
<a class="sourceLine" id="cb24-20" title="20">    <span class="op">}</span>)()<span class="op">;</span></a>
<a class="sourceLine" id="cb24-21" title="21"><span class="op">};</span></a>
<a class="sourceLine" id="cb24-22" title="22"></a>
<a class="sourceLine" id="cb24-23" title="23"><span class="kw">const</span> instance <span class="op">=</span> <span class="va">got</span>.<span class="at">extend</span>(<span class="op">{</span><span class="dt">handlers</span><span class="op">:</span> [handler]<span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h4 id="got.extendinstances">got.extend(…instances)</h4>
<p>Merges many instances into a single one: - options are merged using <a href="#gotmergeoptionsparentoptions-newoptions"><code>got.mergeOptions()</code></a> (+ hooks are merged too), - handlers are stored in an array (you can access them through <code>instance.defaults.handlers</code>).</p>
<h4 id="got.extendoptions-instances">got.extend(…options, …instances, …)</h4>
<p>It’s possible to combine options and instances.<br />
It gives the same effect as <code>got.extend(...options).extend(...instances)</code>:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb25-1" title="1"><span class="kw">const</span> a <span class="op">=</span> <span class="op">{</span><span class="dt">headers</span><span class="op">:</span> <span class="op">{</span><span class="dt">cat</span><span class="op">:</span> <span class="st">&#39;meow&#39;</span><span class="op">}};</span></a>
<a class="sourceLine" id="cb25-2" title="2"><span class="kw">const</span> b <span class="op">=</span> <span class="va">got</span>.<span class="at">extend</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb25-3" title="3">    <span class="dt">options</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb25-4" title="4">        <span class="dt">headers</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb25-5" title="5">            <span class="dt">cow</span><span class="op">:</span> <span class="st">&#39;moo&#39;</span></a>
<a class="sourceLine" id="cb25-6" title="6">        <span class="op">}</span></a>
<a class="sourceLine" id="cb25-7" title="7">    <span class="op">}</span></a>
<a class="sourceLine" id="cb25-8" title="8"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb25-9" title="9"></a>
<a class="sourceLine" id="cb25-10" title="10"><span class="co">// The same as `got.extend(a).extend(b)`.</span></a>
<a class="sourceLine" id="cb25-11" title="11"><span class="co">// Note `a` is options and `b` is an instance.</span></a>
<a class="sourceLine" id="cb25-12" title="12"><span class="va">got</span>.<span class="at">extend</span>(a<span class="op">,</span> b)<span class="op">;</span></a>
<a class="sourceLine" id="cb25-13" title="13"><span class="co">//=&gt; {headers: {cat: &#39;meow&#39;, cow: &#39;moo&#39;}}</span></a></code></pre></div>
<h4 id="got.mergeoptionsparentoptions-newoptions">got.mergeOptions(parentOptions, newOptions)</h4>
<p>Extends parent options. Avoid using <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax#Spread_in_object_literals">object spread</a> as it doesn’t work recursively:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb26-1" title="1"><span class="kw">const</span> a <span class="op">=</span> <span class="op">{</span><span class="dt">headers</span><span class="op">:</span> <span class="op">{</span><span class="dt">cat</span><span class="op">:</span> <span class="st">&#39;meow&#39;</span><span class="op">,</span> <span class="dt">wolf</span><span class="op">:</span> [<span class="st">&#39;bark&#39;</span><span class="op">,</span> <span class="st">&#39;wrrr&#39;</span>]<span class="op">}};</span></a>
<a class="sourceLine" id="cb26-2" title="2"><span class="kw">const</span> b <span class="op">=</span> <span class="op">{</span><span class="dt">headers</span><span class="op">:</span> <span class="op">{</span><span class="dt">cow</span><span class="op">:</span> <span class="st">&#39;moo&#39;</span><span class="op">,</span> <span class="dt">wolf</span><span class="op">:</span> [<span class="st">&#39;auuu&#39;</span>]<span class="op">}};</span></a>
<a class="sourceLine" id="cb26-3" title="3"></a>
<a class="sourceLine" id="cb26-4" title="4"><span class="op">{</span>...<span class="at">a</span><span class="op">,</span> ...<span class="at">b</span><span class="op">}</span>            <span class="co">// =&gt; {headers: {cow: &#39;moo&#39;, wolf: [&#39;auuu&#39;]}}</span></a>
<a class="sourceLine" id="cb26-5" title="5"><span class="va">got</span>.<span class="at">mergeOptions</span>(a<span class="op">,</span> b)  <span class="co">// =&gt; {headers: {cat: &#39;meow&#39;, cow: &#39;moo&#39;, wolf: [&#39;auuu&#39;]}}</span></a></code></pre></div>
<p>Options are deeply merged to a new object. The value of each key is determined as follows:</p>
<ul>
<li>If the new property is set to <code>undefined</code>, it keeps the old one.</li>
<li>If both properties are an instances of <code>URLSearchParams</code>, a new URLSearchParams instance is created. The values are merged using <a href="https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams/append"><code>urlSearchParams.append(key, value)</code></a>.</li>
<li>If the parent property is an instance of <code>URL</code> and the new value is a <code>string</code> or <code>URL</code>, a new URL instance is created: <a href="https://developer.mozilla.org/en-US/docs/Web/API/URL/URL#Syntax"><code>new URL(new, parent)</code></a>.</li>
<li>If the new property is a plain <code>object</code>:
<ul>
<li>If the parent property is a plain <code>object</code> too, both values are merged recursively into a new <code>object</code>.</li>
<li>Otherwise, only the new value is deeply cloned.</li>
</ul></li>
<li>If the new property is an <code>Array</code>, it overwrites the old one with a deep clone of the new property.</li>
<li>Properties that are not enumerable, such as <code>context</code>, <code>body</code>, <code>json</code>, and <code>form</code>, will not be merged.</li>
</ul>
<div class="sourceCode" id="cb27"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb27-1" title="1"><span class="kw">const</span> a <span class="op">=</span> <span class="op">{</span><span class="dt">json</span><span class="op">:</span> <span class="op">{</span><span class="dt">cat</span><span class="op">:</span> <span class="st">&#39;meow&#39;</span><span class="op">}};</span></a>
<a class="sourceLine" id="cb27-2" title="2"><span class="kw">const</span> b <span class="op">=</span> <span class="op">{</span><span class="dt">json</span><span class="op">:</span> <span class="op">{</span><span class="dt">cow</span><span class="op">:</span> <span class="st">&#39;moo&#39;</span><span class="op">}};</span></a>
<a class="sourceLine" id="cb27-3" title="3"></a>
<a class="sourceLine" id="cb27-4" title="4"><span class="va">got</span>.<span class="at">mergeOptions</span>(a<span class="op">,</span> b)<span class="op">;</span></a>
<a class="sourceLine" id="cb27-5" title="5"><span class="co">//=&gt; {json: {cow: &#39;moo&#39;}}</span></a></code></pre></div>
<ul>
<li>Otherwise, the new value is assigned to the key.</li>
</ul>
<h4 id="got.defaults">got.defaults</h4>
<p>Type: <code>object</code></p>
<p>The Got defaults used in that instance.</p>
<h5 id="options-1"><a href="#options">options</a></h5>
<h5 id="handlers">handlers</h5>
<p>Type: <code>Function[]</code><br />
Default: <code>[]</code></p>
<p>An array of functions. You execute them directly by calling <code>got()</code>. They are some sort of “global hooks” - these functions are called first. The last handler (<em>it’s hidden</em>) is either <a href="source/as-promise.ts"><code>asPromise</code></a> or <a href="source/as-stream.ts"><code>asStream</code></a>, depending on the <code>options.isStream</code> property.</p>
<p>Each handler takes two arguments:</p>
<h6 id="options-2"><a href="#options">options</a></h6>
<h6 id="next">next()</h6>
<p>Returns a <code>Promise</code> or a <code>Stream</code> depending on <a href="#isstream"><code>options.isStream</code></a>.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb28-1" title="1"><span class="kw">const</span> settings <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb28-2" title="2">    <span class="dt">handlers</span><span class="op">:</span> [</a>
<a class="sourceLine" id="cb28-3" title="3">        (options<span class="op">,</span> next) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb28-4" title="4">            <span class="cf">if</span> (<span class="va">options</span>.<span class="at">isStream</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb28-5" title="5">                <span class="co">// It&#39;s a Stream, so we can perform stream-specific actions on it</span></a>
<a class="sourceLine" id="cb28-6" title="6">                <span class="cf">return</span> <span class="at">next</span>(options)</a>
<a class="sourceLine" id="cb28-7" title="7">                    .<span class="at">on</span>(<span class="st">&#39;request&#39;</span><span class="op">,</span> request <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb28-8" title="8">                        <span class="at">setTimeout</span>(() <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb28-9" title="9">                            <span class="va">request</span>.<span class="at">abort</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb28-10" title="10">                        <span class="op">},</span> <span class="dv">50</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb28-11" title="11">                    <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb28-12" title="12">            <span class="op">}</span></a>
<a class="sourceLine" id="cb28-13" title="13"></a>
<a class="sourceLine" id="cb28-14" title="14">            <span class="co">// It&#39;s a Promise</span></a>
<a class="sourceLine" id="cb28-15" title="15">            <span class="cf">return</span> <span class="at">next</span>(options)<span class="op">;</span></a>
<a class="sourceLine" id="cb28-16" title="16">        <span class="op">}</span></a>
<a class="sourceLine" id="cb28-17" title="17">    ]<span class="op">,</span></a>
<a class="sourceLine" id="cb28-18" title="18">    <span class="dt">options</span><span class="op">:</span> <span class="va">got</span>.<span class="at">mergeOptions</span>(<span class="va">got</span>.<span class="va">defaults</span>.<span class="at">options</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb28-19" title="19">        <span class="dt">responseType</span><span class="op">:</span> <span class="st">&#39;json&#39;</span></a>
<a class="sourceLine" id="cb28-20" title="20">    <span class="op">}</span>)</a>
<a class="sourceLine" id="cb28-21" title="21"><span class="op">};</span></a>
<a class="sourceLine" id="cb28-22" title="22"></a>
<a class="sourceLine" id="cb28-23" title="23"><span class="kw">const</span> jsonGot <span class="op">=</span> <span class="va">got</span>.<span class="at">extend</span>(settings)<span class="op">;</span></a></code></pre></div>
<h5 id="mutabledefaults">mutableDefaults</h5>
<p>Type: <code>boolean</code><br />
Default: <code>false</code></p>
<p>A read-only boolean describing whether the defaults are mutable or not. If set to <code>true</code>, you can <a href="#hooksafterresponse">update headers over time</a>, for example, update an access token when it expires.</p>
<h2 id="types">Types</h2>
<p>Got exports some handy TypeScript types and interfaces. See the type definition for all the exported types.</p>
<h3 id="got">Got</h3>
<p>TypeScript will automatically infer types for Got instances, but in case you want to define something like dependencies, you can import the available types directly from Got.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode ts"><code class="sourceCode typescript"><a class="sourceLine" id="cb29-1" title="1"><span class="im">import</span> <span class="op">{</span>GotRequestMethod<span class="op">}</span> <span class="im">from</span> <span class="st">&#39;got&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb29-2" title="2"></a>
<a class="sourceLine" id="cb29-3" title="3"><span class="kw">interface</span> Dependencies <span class="op">{</span></a>
<a class="sourceLine" id="cb29-4" title="4">    <span class="kw">readonly</span> post<span class="op">:</span> GotRequestMethod</a>
<a class="sourceLine" id="cb29-5" title="5"><span class="op">}</span></a></code></pre></div>
<h3 id="hooks-1">Hooks</h3>
<p>When writing hooks, you can refer to their types to keep your interfaces consistent.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode ts"><code class="sourceCode typescript"><a class="sourceLine" id="cb30-1" title="1"><span class="im">import</span> <span class="op">{</span>BeforeRequestHook<span class="op">}</span> <span class="im">from</span> <span class="st">&#39;got&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb30-2" title="2"></a>
<a class="sourceLine" id="cb30-3" title="3"><span class="kw">const</span> addAccessToken <span class="op">=</span> (accessToken<span class="op">:</span> <span class="dt">string</span>)<span class="op">:</span> BeforeRequestHook <span class="kw">=&gt;</span> options <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb30-4" title="4">    <span class="va">options</span><span class="op">.</span><span class="at">path</span> <span class="op">=</span> <span class="vs">`</span><span class="sc">${</span><span class="va">options</span><span class="op">.</span><span class="at">path</span><span class="sc">}</span><span class="vs">?access_token=</span><span class="sc">${</span>accessToken<span class="sc">}</span><span class="vs">`</span><span class="op">;</span></a>
<a class="sourceLine" id="cb30-5" title="5"><span class="op">}</span></a></code></pre></div>
<h2 id="errors">Errors</h2>
<p>Each error contains an <code>options</code> property which are the options Got used to create a request - just to make debugging easier.</p>
<h4 id="got.cacheerror">got.CacheError</h4>
<p>When a cache method fails, for example, if the database goes down or there’s a filesystem error.</p>
<h4 id="got.requesterror">got.RequestError</h4>
<p>When a request fails. Contains a <code>code</code> property with error class code, like <code>ECONNREFUSED</code>.</p>
<h4 id="got.readerror">got.ReadError</h4>
<p>When reading from response stream fails.</p>
<h4 id="got.parseerror">got.ParseError</h4>
<p>When server response code is 2xx, and parsing body fails. Includes a <code>response</code> property.</p>
<h4 id="got.httperror">got.HTTPError</h4>
<p>When the server response code is not 2xx. Includes a <code>response</code> property.</p>
<h4 id="got.maxredirectserror">got.MaxRedirectsError</h4>
<p>When the server redirects you more than ten times. Includes a <code>response</code> property.</p>
<h4 id="got.unsupportedprotocolerror">got.UnsupportedProtocolError</h4>
<p>When given an unsupported protocol.</p>
<h4 id="got.cancelerror">got.CancelError</h4>
<p>When the request is aborted with <code>.cancel()</code>.</p>
<h4 id="got.timeouterror">got.TimeoutError</h4>
<p>When the request is aborted due to a <a href="#timeout">timeout</a>. Includes an <code>event</code> and <code>timings</code> property.</p>
<h2 id="aborting-the-request">Aborting the request</h2>
<p>The promise returned by Got has a <a href="https://github.com/sindresorhus/p-cancelable"><code>.cancel()</code></a> method which when called, aborts the request.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb31-1" title="1">(<span class="kw">async</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb31-2" title="2">    <span class="kw">const</span> request <span class="op">=</span> <span class="at">got</span>(url<span class="op">,</span> options)<span class="op">;</span></a>
<a class="sourceLine" id="cb31-3" title="3"></a>
<a class="sourceLine" id="cb31-4" title="4">    <span class="co">// …</span></a>
<a class="sourceLine" id="cb31-5" title="5"></a>
<a class="sourceLine" id="cb31-6" title="6">    <span class="co">// In another part of the code</span></a>
<a class="sourceLine" id="cb31-7" title="7">    <span class="cf">if</span> (something) <span class="op">{</span></a>
<a class="sourceLine" id="cb31-8" title="8">        <span class="va">request</span>.<span class="at">cancel</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb31-9" title="9">    <span class="op">}</span></a>
<a class="sourceLine" id="cb31-10" title="10"></a>
<a class="sourceLine" id="cb31-11" title="11">    <span class="co">// …</span></a>
<a class="sourceLine" id="cb31-12" title="12"></a>
<a class="sourceLine" id="cb31-13" title="13">    <span class="cf">try</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb31-14" title="14">        <span class="cf">await</span> request<span class="op">;</span></a>
<a class="sourceLine" id="cb31-15" title="15">    <span class="op">}</span> <span class="cf">catch</span> (error) <span class="op">{</span></a>
<a class="sourceLine" id="cb31-16" title="16">        <span class="cf">if</span> (<span class="va">request</span>.<span class="at">isCanceled</span>) <span class="op">{</span> <span class="co">// Or `error instanceof got.CancelError`</span></a>
<a class="sourceLine" id="cb31-17" title="17">            <span class="co">// Handle cancelation</span></a>
<a class="sourceLine" id="cb31-18" title="18">        <span class="op">}</span></a>
<a class="sourceLine" id="cb31-19" title="19"></a>
<a class="sourceLine" id="cb31-20" title="20">        <span class="co">// Handle other errors</span></a>
<a class="sourceLine" id="cb31-21" title="21">    <span class="op">}</span></a>
<a class="sourceLine" id="cb31-22" title="22"><span class="op">}</span>)()<span class="op">;</span></a></code></pre></div>
<p>When using hooks, simply throw an error to abort the request.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb32-1" title="1"><span class="kw">const</span> got <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;got&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb32-2" title="2"></a>
<a class="sourceLine" id="cb32-3" title="3">(<span class="kw">async</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb32-4" title="4">    <span class="kw">const</span> request <span class="op">=</span> <span class="at">got</span>(url<span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb32-5" title="5">        <span class="dt">hooks</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb32-6" title="6">            <span class="dt">beforeRequest</span><span class="op">:</span> [</a>
<a class="sourceLine" id="cb32-7" title="7">                () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb32-8" title="8">                    <span class="cf">throw</span> <span class="kw">new</span> <span class="at">Error</span>(<span class="st">&#39;Oops. Request canceled.&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb32-9" title="9">                <span class="op">}</span></a>
<a class="sourceLine" id="cb32-10" title="10">            ]</a>
<a class="sourceLine" id="cb32-11" title="11">        <span class="op">}</span></a>
<a class="sourceLine" id="cb32-12" title="12">    <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb32-13" title="13"></a>
<a class="sourceLine" id="cb32-14" title="14">    <span class="cf">try</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb32-15" title="15">        <span class="cf">await</span> request<span class="op">;</span></a>
<a class="sourceLine" id="cb32-16" title="16">    <span class="op">}</span> <span class="cf">catch</span> (error) <span class="op">{</span></a>
<a class="sourceLine" id="cb32-17" title="17">        <span class="co">// …</span></a>
<a class="sourceLine" id="cb32-18" title="18">    <span class="op">}</span></a>
<a class="sourceLine" id="cb32-19" title="19"><span class="op">}</span>)()<span class="op">;</span></a></code></pre></div>
<p><a name="cache-adapters"></a> ## Cache</p>
<p>Got implements <a href="http://httpwg.org/specs/rfc7234.html">RFC 7234</a> compliant HTTP caching which works out of the box in-memory and is easily pluggable with a wide range of storage adapters. Fresh cache entries are served directly from the cache, and stale cache entries are revalidated with <code>If-None-Match</code>/<code>If-Modified-Since</code> headers. You can read more about the underlying cache behavior in the <a href="https://github.com/lukechilds/cacheable-request"><code>cacheable-request</code> documentation</a>. For DNS cache, Got uses <a href="https://github.com/szmarczak/cacheable-lookup"><code>cacheable-lookup</code></a>.</p>
<p>You can use the JavaScript <code>Map</code> type as an in-memory cache:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb33-1" title="1"><span class="kw">const</span> got <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;got&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb33-2" title="2"></a>
<a class="sourceLine" id="cb33-3" title="3"><span class="kw">const</span> map <span class="op">=</span> <span class="kw">new</span> <span class="at">Map</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb33-4" title="4"></a>
<a class="sourceLine" id="cb33-5" title="5">(<span class="kw">async</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb33-6" title="6">        <span class="kw">let</span> response <span class="op">=</span> <span class="cf">await</span> <span class="at">got</span>(<span class="st">&#39;https://sindresorhus.com&#39;</span><span class="op">,</span> <span class="op">{</span><span class="dt">cache</span><span class="op">:</span> map<span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb33-7" title="7">        <span class="va">console</span>.<span class="at">log</span>(<span class="va">response</span>.<span class="at">isFromCache</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb33-8" title="8">        <span class="co">//=&gt; false</span></a>
<a class="sourceLine" id="cb33-9" title="9"></a>
<a class="sourceLine" id="cb33-10" title="10">        response <span class="op">=</span> <span class="cf">await</span> <span class="at">got</span>(<span class="st">&#39;https://sindresorhus.com&#39;</span><span class="op">,</span> <span class="op">{</span><span class="dt">cache</span><span class="op">:</span> map<span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb33-11" title="11">        <span class="va">console</span>.<span class="at">log</span>(<span class="va">response</span>.<span class="at">isFromCache</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb33-12" title="12">        <span class="co">//=&gt; true</span></a>
<a class="sourceLine" id="cb33-13" title="13"><span class="op">}</span>)()<span class="op">;</span></a></code></pre></div>
<p>Got uses <a href="https://github.com/lukechilds/keyv">Keyv</a> internally to support a wide range of storage adapters. For something more scalable you could use an <a href="https://github.com/lukechilds/keyv#official-storage-adapters">official Keyv storage adapter</a>:</p>
<pre><code>$ npm install @keyv/redis</code></pre>
<div class="sourceCode" id="cb35"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb35-1" title="1"><span class="kw">const</span> got <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;got&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb35-2" title="2"><span class="kw">const</span> KeyvRedis <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;@keyv/redis&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb35-3" title="3"></a>
<a class="sourceLine" id="cb35-4" title="4"><span class="kw">const</span> redis <span class="op">=</span> <span class="kw">new</span> <span class="at">KeyvRedis</span>(<span class="st">&#39;redis://user:pass@localhost:6379&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb35-5" title="5"></a>
<a class="sourceLine" id="cb35-6" title="6"><span class="at">got</span>(<span class="st">&#39;https://sindresorhus.com&#39;</span><span class="op">,</span> <span class="op">{</span><span class="dt">cache</span><span class="op">:</span> redis<span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>Got supports anything that follows the Map API, so it’s easy to write your own storage adapter or use a third-party solution.</p>
<p>For example, the following are all valid storage adapters:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb36-1" title="1"><span class="kw">const</span> storageAdapter <span class="op">=</span> <span class="kw">new</span> <span class="at">Map</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb36-2" title="2"><span class="co">// Or</span></a>
<a class="sourceLine" id="cb36-3" title="3"><span class="kw">const</span> storageAdapter <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;./my-storage-adapter&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb36-4" title="4"><span class="co">// Or</span></a>
<a class="sourceLine" id="cb36-5" title="5"><span class="kw">const</span> QuickLRU <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;quick-lru&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb36-6" title="6"><span class="kw">const</span> storageAdapter <span class="op">=</span> <span class="kw">new</span> <span class="at">QuickLRU</span>(<span class="op">{</span><span class="dt">maxSize</span><span class="op">:</span> <span class="dv">1000</span><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb36-7" title="7"></a>
<a class="sourceLine" id="cb36-8" title="8"><span class="at">got</span>(<span class="st">&#39;https://sindresorhus.com&#39;</span><span class="op">,</span> <span class="op">{</span><span class="dt">cache</span><span class="op">:</span> storageAdapter<span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>View the <a href="https://github.com/lukechilds/keyv">Keyv docs</a> for more information on how to use storage adapters.</p>
<h2 id="proxies">Proxies</h2>
<p>You can use the <a href="https://github.com/koichik/node-tunnel"><code>tunnel</code></a> package with the <code>agent</code> option to work with proxies:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb37-1" title="1"><span class="kw">const</span> got <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;got&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb37-2" title="2"><span class="kw">const</span> tunnel <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;tunnel&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb37-3" title="3"></a>
<a class="sourceLine" id="cb37-4" title="4"><span class="at">got</span>(<span class="st">&#39;https://sindresorhus.com&#39;</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb37-5" title="5">    <span class="dt">agent</span><span class="op">:</span> <span class="va">tunnel</span>.<span class="at">httpOverHttp</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb37-6" title="6">        <span class="dt">proxy</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb37-7" title="7">            <span class="dt">host</span><span class="op">:</span> <span class="st">&#39;localhost&#39;</span></a>
<a class="sourceLine" id="cb37-8" title="8">        <span class="op">}</span></a>
<a class="sourceLine" id="cb37-9" title="9">    <span class="op">}</span>)</a>
<a class="sourceLine" id="cb37-10" title="10"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>Alternatively, use <a href="https://github.com/gajus/global-agent"><code>global-agent</code></a> to configure a global proxy for all HTTP/HTTPS traffic in your program.</p>
<h2 id="cookies">Cookies</h2>
<p>You can use the <a href="https://github.com/salesforce/tough-cookie"><code>tough-cookie</code></a> package:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb38-1" title="1"><span class="kw">const</span> <span class="op">{</span>promisify<span class="op">}</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;util&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb38-2" title="2"><span class="kw">const</span> got <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;got&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb38-3" title="3"><span class="kw">const</span> <span class="op">{</span>CookieJar<span class="op">}</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;tough-cookie&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb38-4" title="4"></a>
<a class="sourceLine" id="cb38-5" title="5">(<span class="kw">async</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb38-6" title="6">    <span class="kw">const</span> cookieJar <span class="op">=</span> <span class="kw">new</span> <span class="at">CookieJar</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb38-7" title="7">    <span class="kw">const</span> setCookie <span class="op">=</span> <span class="at">promisify</span>(<span class="va">cookieJar</span>.<span class="va">setCookie</span>.<span class="at">bind</span>(cookieJar))<span class="op">;</span></a>
<a class="sourceLine" id="cb38-8" title="8"></a>
<a class="sourceLine" id="cb38-9" title="9">    <span class="cf">await</span> <span class="at">setCookie</span>(<span class="st">&#39;foo=bar&#39;</span><span class="op">,</span> <span class="st">&#39;https://example.com&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb38-10" title="10">    <span class="cf">await</span> <span class="at">got</span>(<span class="st">&#39;https://example.com&#39;</span><span class="op">,</span> <span class="op">{</span>cookieJar<span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb38-11" title="11"><span class="op">}</span>)()<span class="op">;</span></a></code></pre></div>
<h2 id="form-data">Form data</h2>
<p>You can use the <a href="https://github.com/form-data/form-data"><code>form-data</code></a> package to create POST request with form data:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb39-1" title="1"><span class="kw">const</span> fs <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;fs&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb39-2" title="2"><span class="kw">const</span> got <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;got&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb39-3" title="3"><span class="kw">const</span> FormData <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;form-data&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb39-4" title="4"></a>
<a class="sourceLine" id="cb39-5" title="5"><span class="kw">const</span> form <span class="op">=</span> <span class="kw">new</span> <span class="at">FormData</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb39-6" title="6"></a>
<a class="sourceLine" id="cb39-7" title="7"><span class="va">form</span>.<span class="at">append</span>(<span class="st">&#39;my_file&#39;</span><span class="op">,</span> <span class="va">fs</span>.<span class="at">createReadStream</span>(<span class="st">&#39;/foo/bar.jpg&#39;</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb39-8" title="8"></a>
<a class="sourceLine" id="cb39-9" title="9"><span class="va">got</span>.<span class="at">post</span>(<span class="st">&#39;https://example.com&#39;</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb39-10" title="10">    <span class="dt">body</span><span class="op">:</span> form</a>
<a class="sourceLine" id="cb39-11" title="11"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h2 id="oauth">OAuth</h2>
<p>You can use the <a href="https://github.com/ddo/oauth-1.0a"><code>oauth-1.0a</code></a> package to create a signed OAuth request:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb40-1" title="1"><span class="kw">const</span> got <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;got&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb40-2" title="2"><span class="kw">const</span> crypto  <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;crypto&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb40-3" title="3"><span class="kw">const</span> OAuth <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;oauth-1.0a&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb40-4" title="4"></a>
<a class="sourceLine" id="cb40-5" title="5"><span class="kw">const</span> oauth <span class="op">=</span> <span class="at">OAuth</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb40-6" title="6">    <span class="dt">consumer</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb40-7" title="7">        <span class="dt">key</span><span class="op">:</span> <span class="va">process</span>.<span class="va">env</span>.<span class="at">CONSUMER_KEY</span><span class="op">,</span></a>
<a class="sourceLine" id="cb40-8" title="8">        <span class="dt">secret</span><span class="op">:</span> <span class="va">process</span>.<span class="va">env</span>.<span class="at">CONSUMER_SECRET</span></a>
<a class="sourceLine" id="cb40-9" title="9">    <span class="op">},</span></a>
<a class="sourceLine" id="cb40-10" title="10">    <span class="dt">signature_method</span><span class="op">:</span> <span class="st">&#39;HMAC-SHA1&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb40-11" title="11">    <span class="dt">hash_function</span><span class="op">:</span> (baseString<span class="op">,</span> key) <span class="kw">=&gt;</span> <span class="va">crypto</span>.<span class="at">createHmac</span>(<span class="st">&#39;sha1&#39;</span><span class="op">,</span> key).<span class="at">update</span>(baseString).<span class="at">digest</span>(<span class="st">&#39;base64&#39;</span>)</a>
<a class="sourceLine" id="cb40-12" title="12"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb40-13" title="13"></a>
<a class="sourceLine" id="cb40-14" title="14"><span class="kw">const</span> token <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb40-15" title="15">    <span class="dt">key</span><span class="op">:</span> <span class="va">process</span>.<span class="va">env</span>.<span class="at">ACCESS_TOKEN</span><span class="op">,</span></a>
<a class="sourceLine" id="cb40-16" title="16">    <span class="dt">secret</span><span class="op">:</span> <span class="va">process</span>.<span class="va">env</span>.<span class="at">ACCESS_TOKEN_SECRET</span></a>
<a class="sourceLine" id="cb40-17" title="17"><span class="op">};</span></a>
<a class="sourceLine" id="cb40-18" title="18"></a>
<a class="sourceLine" id="cb40-19" title="19"><span class="kw">const</span> url <span class="op">=</span> <span class="st">&#39;https://api.twitter.com/1.1/statuses/home_timeline.json&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb40-20" title="20"></a>
<a class="sourceLine" id="cb40-21" title="21"><span class="at">got</span>(url<span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb40-22" title="22">    <span class="dt">headers</span><span class="op">:</span> <span class="va">oauth</span>.<span class="at">toHeader</span>(<span class="va">oauth</span>.<span class="at">authorize</span>(<span class="op">{</span>url<span class="op">,</span> <span class="dt">method</span><span class="op">:</span> <span class="st">&#39;GET&#39;</span><span class="op">},</span> token))<span class="op">,</span></a>
<a class="sourceLine" id="cb40-23" title="23">    <span class="dt">responseType</span><span class="op">:</span> <span class="st">&#39;json&#39;</span></a>
<a class="sourceLine" id="cb40-24" title="24"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h2 id="unix-domain-sockets">Unix Domain Sockets</h2>
<p>Requests can also be sent via <a href="http://serverfault.com/questions/124517/whats-the-difference-between-unix-socket-and-tcp-ip-socket">unix domain sockets</a>. Use the following URL scheme: <code>PROTOCOL://unix:SOCKET:PATH</code>.</p>
<ul>
<li><code>PROTOCOL</code> - <code>http</code> or <code>https</code> <em>(optional)</em></li>
<li><code>SOCKET</code> - Absolute path to a unix domain socket, for example: <code>/var/run/docker.sock</code></li>
<li><code>PATH</code> - Request path, for example: <code>/v2/keys</code></li>
</ul>
<div class="sourceCode" id="cb41"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb41-1" title="1"><span class="kw">const</span> got <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;got&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb41-2" title="2"></a>
<a class="sourceLine" id="cb41-3" title="3"><span class="at">got</span>(<span class="st">&#39;http://unix:/var/run/docker.sock:/containers/json&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb41-4" title="4"></a>
<a class="sourceLine" id="cb41-5" title="5"><span class="co">// Or without protocol (HTTP by default)</span></a>
<a class="sourceLine" id="cb41-6" title="6"><span class="at">got</span>(<span class="st">&#39;unix:/var/run/docker.sock:/containers/json&#39;</span>)<span class="op">;</span></a></code></pre></div>
<h2 id="aws">AWS</h2>
<p>Requests to AWS services need to have their headers signed. This can be accomplished by using the <a href="https://www.npmjs.com/package/aws4"><code>aws4</code></a> package. This is an example for querying an <a href="https://docs.aws.amazon.com/apigateway/api-reference/signing-requests/">“API Gateway”</a> with a signed request.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb42-1" title="1"><span class="kw">const</span> got <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;got&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb42-2" title="2"><span class="kw">const</span> AWS <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;aws-sdk&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb42-3" title="3"><span class="kw">const</span> aws4 <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;aws4&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb42-4" title="4"></a>
<a class="sourceLine" id="cb42-5" title="5"><span class="kw">const</span> chain <span class="op">=</span> <span class="kw">new</span> <span class="va">AWS</span>.<span class="at">CredentialProviderChain</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb42-6" title="6"></a>
<a class="sourceLine" id="cb42-7" title="7"><span class="co">// Create a Got instance to use relative paths and signed requests</span></a>
<a class="sourceLine" id="cb42-8" title="8"><span class="kw">const</span> awsClient <span class="op">=</span> <span class="va">got</span>.<span class="at">extend</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb42-9" title="9">    <span class="dt">prefixUrl</span><span class="op">:</span> <span class="st">&#39;https://&lt;api-id&gt;.execute-api.&lt;api-region&gt;.amazonaws.com/&lt;stage&gt;/&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb42-10" title="10">    <span class="dt">hooks</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb42-11" title="11">        <span class="dt">beforeRequest</span><span class="op">:</span> [</a>
<a class="sourceLine" id="cb42-12" title="12">            <span class="kw">async</span> options <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb42-13" title="13">                <span class="kw">const</span> credentials <span class="op">=</span> <span class="cf">await</span> <span class="va">chain</span>.<span class="at">resolvePromise</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb42-14" title="14">                <span class="va">aws4</span>.<span class="at">sign</span>(options<span class="op">,</span> credentials)<span class="op">;</span></a>
<a class="sourceLine" id="cb42-15" title="15">            <span class="op">}</span></a>
<a class="sourceLine" id="cb42-16" title="16">        ]</a>
<a class="sourceLine" id="cb42-17" title="17">    <span class="op">}</span></a>
<a class="sourceLine" id="cb42-18" title="18"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb42-19" title="19"></a>
<a class="sourceLine" id="cb42-20" title="20"><span class="kw">const</span> response <span class="op">=</span> <span class="cf">await</span> <span class="at">awsClient</span>(<span class="st">&#39;endpoint/path&#39;</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb42-21" title="21">    <span class="co">// Request-specific options</span></a>
<a class="sourceLine" id="cb42-22" title="22"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h2 id="testing">Testing</h2>
<p>You can test your requests by using the <a href="https://github.com/node-nock/nock"><code>nock</code></a> package to mock an endpoint:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb43-1" title="1"><span class="kw">const</span> got <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;got&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb43-2" title="2"><span class="kw">const</span> nock <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;nock&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb43-3" title="3"></a>
<a class="sourceLine" id="cb43-4" title="4"><span class="at">nock</span>(<span class="st">&#39;https://sindresorhus.com&#39;</span>)</a>
<a class="sourceLine" id="cb43-5" title="5">    .<span class="at">get</span>(<span class="st">&#39;/&#39;</span>)</a>
<a class="sourceLine" id="cb43-6" title="6">    .<span class="at">reply</span>(<span class="dv">200</span><span class="op">,</span> <span class="st">&#39;Hello world!&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb43-7" title="7"></a>
<a class="sourceLine" id="cb43-8" title="8">(<span class="kw">async</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb43-9" title="9">    <span class="kw">const</span> response <span class="op">=</span> <span class="cf">await</span> <span class="at">got</span>(<span class="st">&#39;https://sindresorhus.com&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb43-10" title="10">    <span class="va">console</span>.<span class="at">log</span>(<span class="va">response</span>.<span class="at">body</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb43-11" title="11">    <span class="co">//=&gt; &#39;Hello world!&#39;</span></a>
<a class="sourceLine" id="cb43-12" title="12"><span class="op">}</span>)()<span class="op">;</span></a></code></pre></div>
<p>For real integration testing we recommend using <a href="https://github.com/avajs/ava"><code>ava</code></a> with <a href="https://github.com/lukechilds/create-test-server"><code>create-test-server</code></a>. We’re using a macro so we don’t have to <code>server.listen()</code> and <code>server.close()</code> every test. Take a look at one of our tests:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb44-1" title="1"><span class="at">test</span>(<span class="st">&#39;retry function gets iteration count&#39;</span><span class="op">,</span> withServer<span class="op">,</span> <span class="kw">async</span> (t<span class="op">,</span> server<span class="op">,</span> got) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb44-2" title="2">    <span class="kw">let</span> knocks <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></a>
<a class="sourceLine" id="cb44-3" title="3">    <span class="va">server</span>.<span class="at">get</span>(<span class="st">&#39;/&#39;</span><span class="op">,</span> (request<span class="op">,</span> response) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb44-4" title="4">        <span class="cf">if</span> (knocks<span class="op">++</span> <span class="op">===</span> <span class="dv">1</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb44-5" title="5">            <span class="va">response</span>.<span class="at">end</span>(<span class="st">&#39;who`s there?&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb44-6" title="6">        <span class="op">}</span></a>
<a class="sourceLine" id="cb44-7" title="7">    <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb44-8" title="8"></a>
<a class="sourceLine" id="cb44-9" title="9">    <span class="cf">await</span> <span class="at">got</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb44-10" title="10">        <span class="dt">retry</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb44-11" title="11">            <span class="dt">calculateDelay</span><span class="op">:</span> (<span class="op">{</span>attemptCount<span class="op">}</span>) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb44-12" title="12">                <span class="va">t</span>.<span class="at">true</span>(<span class="va">is</span>.<span class="at">number</span>(attemptCount))<span class="op">;</span></a>
<a class="sourceLine" id="cb44-13" title="13">                <span class="cf">return</span> attemptCount <span class="op">&lt;</span> <span class="dv">2</span> <span class="op">?</span> <span class="dv">1</span> : <span class="dv">0</span><span class="op">;</span></a>
<a class="sourceLine" id="cb44-14" title="14">            <span class="op">}</span></a>
<a class="sourceLine" id="cb44-15" title="15">        <span class="op">}</span></a>
<a class="sourceLine" id="cb44-16" title="16">    <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb44-17" title="17"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h2 id="tips">Tips</h2>
<h3 id="json-mode">JSON mode</h3>
<p>To pass an object as the body, you need to use the <code>json</code> option. It will be stringified using <code>JSON.stringify</code>. Example:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb45-1" title="1"><span class="kw">const</span> got <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;got&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb45-2" title="2"></a>
<a class="sourceLine" id="cb45-3" title="3">(<span class="kw">async</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb45-4" title="4">    <span class="kw">const</span> <span class="op">{</span>body<span class="op">}</span> <span class="op">=</span> <span class="cf">await</span> <span class="va">got</span>.<span class="at">post</span>(<span class="st">&#39;https://httpbin.org/anything&#39;</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb45-5" title="5">        <span class="dt">json</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb45-6" title="6">            <span class="dt">hello</span><span class="op">:</span> <span class="st">&#39;world&#39;</span></a>
<a class="sourceLine" id="cb45-7" title="7">        <span class="op">},</span></a>
<a class="sourceLine" id="cb45-8" title="8">        <span class="dt">responseType</span><span class="op">:</span> <span class="st">&#39;json&#39;</span></a>
<a class="sourceLine" id="cb45-9" title="9">    <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb45-10" title="10"></a>
<a class="sourceLine" id="cb45-11" title="11">    <span class="va">console</span>.<span class="at">log</span>(<span class="va">body</span>.<span class="at">data</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb45-12" title="12">    <span class="co">//=&gt; &#39;{&quot;hello&quot;:&quot;world&quot;}&#39;</span></a>
<a class="sourceLine" id="cb45-13" title="13"><span class="op">}</span>)()<span class="op">;</span></a></code></pre></div>
<p>To receive a JSON body you can either set <code>responseType</code> option to <code>json</code> or use <code>promise.json()</code>. Example:</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb46-1" title="1"><span class="kw">const</span> got <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;got&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb46-2" title="2"></a>
<a class="sourceLine" id="cb46-3" title="3">(<span class="kw">async</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb46-4" title="4">    <span class="kw">const</span> body <span class="op">=</span> <span class="cf">await</span> <span class="va">got</span>.<span class="at">post</span>(<span class="st">&#39;https://httpbin.org/anything&#39;</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb46-5" title="5">        <span class="dt">json</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb46-6" title="6">            <span class="dt">hello</span><span class="op">:</span> <span class="st">&#39;world&#39;</span></a>
<a class="sourceLine" id="cb46-7" title="7">        <span class="op">}</span></a>
<a class="sourceLine" id="cb46-8" title="8">    <span class="op">}</span>).<span class="at">json</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb46-9" title="9"></a>
<a class="sourceLine" id="cb46-10" title="10">    <span class="va">console</span>.<span class="at">log</span>(body)<span class="op">;</span></a>
<a class="sourceLine" id="cb46-11" title="11">    <span class="co">//=&gt; {…}</span></a>
<a class="sourceLine" id="cb46-12" title="12"><span class="op">}</span>)()<span class="op">;</span></a></code></pre></div>
<h3 id="user-agent">User Agent</h3>
<p>It’s a good idea to set the <code>'user-agent'</code> header so the provider can more easily see how their resource is used. By default, it’s the URL to this repo. You can omit this header by setting it to <code>undefined</code>.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb47-1" title="1"><span class="kw">const</span> got <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;got&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb47-2" title="2"><span class="kw">const</span> pkg <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;./package.json&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb47-3" title="3"></a>
<a class="sourceLine" id="cb47-4" title="4"><span class="at">got</span>(<span class="st">&#39;https://sindresorhus.com&#39;</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb47-5" title="5">    <span class="dt">headers</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb47-6" title="6">        <span class="st">&#39;user-agent&#39;</span><span class="op">:</span> <span class="vs">`my-package/</span><span class="sc">${</span><span class="va">pkg</span>.<span class="at">version</span><span class="sc">}</span><span class="vs"> (https://github.com/username/my-package)`</span></a>
<a class="sourceLine" id="cb47-7" title="7">    <span class="op">}</span></a>
<a class="sourceLine" id="cb47-8" title="8"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb47-9" title="9"></a>
<a class="sourceLine" id="cb47-10" title="10"><span class="at">got</span>(<span class="st">&#39;https://sindresorhus.com&#39;</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb47-11" title="11">    <span class="dt">headers</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb47-12" title="12">        <span class="st">&#39;user-agent&#39;</span><span class="op">:</span> <span class="kw">undefined</span></a>
<a class="sourceLine" id="cb47-13" title="13">    <span class="op">}</span></a>
<a class="sourceLine" id="cb47-14" title="14"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h3 id="responses">304 Responses</h3>
<p>Bear in mind; if you send an <code>if-modified-since</code> header and receive a <code>304 Not Modified</code> response, the body will be empty. It’s your responsibility to cache and retrieve the body contents.</p>
<h3 id="custom-endpoints">Custom endpoints</h3>
<p>Use <code>got.extend()</code> to make it nicer to work with REST APIs. Especially if you use the <code>prefixUrl</code> option.</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb48-1" title="1"><span class="kw">const</span> got <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;got&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb48-2" title="2"><span class="kw">const</span> pkg <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;./package.json&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb48-3" title="3"></a>
<a class="sourceLine" id="cb48-4" title="4"><span class="kw">const</span> custom <span class="op">=</span> <span class="va">got</span>.<span class="at">extend</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb48-5" title="5">    <span class="dt">prefixUrl</span><span class="op">:</span> <span class="st">&#39;example.com&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb48-6" title="6">    <span class="dt">responseType</span><span class="op">:</span> <span class="st">&#39;json&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb48-7" title="7">    <span class="dt">headers</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb48-8" title="8">        <span class="st">&#39;user-agent&#39;</span><span class="op">:</span> <span class="vs">`my-package/</span><span class="sc">${</span><span class="va">pkg</span>.<span class="at">version</span><span class="sc">}</span><span class="vs"> (https://github.com/username/my-package)`</span></a>
<a class="sourceLine" id="cb48-9" title="9">    <span class="op">}</span></a>
<a class="sourceLine" id="cb48-10" title="10"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb48-11" title="11"></a>
<a class="sourceLine" id="cb48-12" title="12"><span class="co">// Use `custom` exactly how you use `got`</span></a>
<a class="sourceLine" id="cb48-13" title="13">(<span class="kw">async</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb48-14" title="14">    <span class="kw">const</span> list <span class="op">=</span> <span class="cf">await</span> <span class="at">custom</span>(<span class="st">&#39;v1/users/list&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb48-15" title="15"><span class="op">}</span>)()<span class="op">;</span></a></code></pre></div>
<h3 id="experimental-http2-support">Experimental HTTP2 support</h3>
<p>Got provides an experimental support for HTTP2 using the <a href="https://github.com/szmarczak/http2-wrapper"><code>http2-wrapper</code></a> package:</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb49-1" title="1"><span class="kw">const</span> got <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;got&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb49-2" title="2"><span class="kw">const</span> <span class="op">{</span>request<span class="op">}</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;http2-wrapper&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb49-3" title="3"></a>
<a class="sourceLine" id="cb49-4" title="4"><span class="kw">const</span> h2got <span class="op">=</span> <span class="va">got</span>.<span class="at">extend</span>(<span class="op">{</span>request<span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb49-5" title="5"></a>
<a class="sourceLine" id="cb49-6" title="6">(<span class="kw">async</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb49-7" title="7">    <span class="kw">const</span> <span class="op">{</span>body<span class="op">}</span> <span class="op">=</span> <span class="cf">await</span> <span class="at">h2got</span>(<span class="st">&#39;https://nghttp2.org/httpbin/headers&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb49-8" title="8">    <span class="va">console</span>.<span class="at">log</span>(body)<span class="op">;</span></a>
<a class="sourceLine" id="cb49-9" title="9"><span class="op">}</span>)()<span class="op">;</span></a></code></pre></div>
<h2 id="faq">FAQ</h2>
<h3 id="why-yet-another-http-client">Why yet another HTTP client?</h3>
<p>Got was created because the popular <a href="https://github.com/request/request"><code>request</code></a> package is bloated: <a href="https://packagephobia.now.sh/result?p=request"><img src="https://packagephobia.now.sh/badge?p=request" alt="Install size" /></a><br />
Furthermore, Got is fully written in TypeScript.</p>
<h3 id="electron-support-has-been-deprecated">Electron support has been deprecated</h3>
<p>Some of the Got features may not work properly. See <a href="https://github.com/sindresorhus/got/issues/899">#899</a> for more info.</p>
<h2 id="comparison">Comparison</h2>
<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 12%" />
<col style="width: 12%" />
<col style="width: 14%" />
<col style="width: 16%" />
<col style="width: 12%" />
<col style="width: 15%" />
</colgroup>
<thead>
<tr class="header">
<th></th>
<th style="text-align: center;"><code>got</code></th>
<th style="text-align: center;"><a href="https://github.com/request/request"><code>request</code></a></th>
<th style="text-align: center;"><a href="https://github.com/bitinn/node-fetch"><code>node-fetch</code></a></th>
<th style="text-align: center;"><a href="https://github.com/sindresorhus/ky"><code>ky</code></a></th>
<th style="text-align: center;"><a href="https://github.com/axios/axios"><code>axios</code></a></th>
<th style="text-align: center;"><a href="https://github.com/visionmedia/superagent"><code>superagent</code></a></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>HTTP/2 support</td>
<td style="text-align: center;">:grey_question:</td>
<td style="text-align: center;">:x:</td>
<td style="text-align: center;">:x:</td>
<td style="text-align: center;">:x:</td>
<td style="text-align: center;">:x:</td>
<td style="text-align: center;">:heavy_check_mark:**</td>
</tr>
<tr class="even">
<td>Browser support</td>
<td style="text-align: center;">:x:</td>
<td style="text-align: center;">:x:</td>
<td style="text-align: center;">:heavy_check_mark:*</td>
<td style="text-align: center;">:heavy_check_mark:</td>
<td style="text-align: center;">:heavy_check_mark:</td>
<td style="text-align: center;">:heavy_check_mark:</td>
</tr>
<tr class="odd">
<td>Promise API</td>
<td style="text-align: center;">:heavy_check_mark:</td>
<td style="text-align: center;">:heavy_check_mark:</td>
<td style="text-align: center;">:heavy_check_mark:</td>
<td style="text-align: center;">:heavy_check_mark:</td>
<td style="text-align: center;">:heavy_check_mark:</td>
<td style="text-align: center;">:heavy_check_mark:</td>
</tr>
<tr class="even">
<td>Stream API</td>
<td style="text-align: center;">:heavy_check_mark:</td>
<td style="text-align: center;">:heavy_check_mark:</td>
<td style="text-align: center;">Node.js only</td>
<td style="text-align: center;">:x:</td>
<td style="text-align: center;">:x:</td>
<td style="text-align: center;">:heavy_check_mark:</td>
</tr>
<tr class="odd">
<td>Pagination API</td>
<td style="text-align: center;">:sparkle:</td>
<td style="text-align: center;">:x:</td>
<td style="text-align: center;">:x:</td>
<td style="text-align: center;">:x:</td>
<td style="text-align: center;">:x:</td>
<td style="text-align: center;">:x:</td>
</tr>
<tr class="even">
<td>Request cancelation</td>
<td style="text-align: center;">:heavy_check_mark:</td>
<td style="text-align: center;">:x:</td>
<td style="text-align: center;">:heavy_check_mark:</td>
<td style="text-align: center;">:heavy_check_mark:</td>
<td style="text-align: center;">:heavy_check_mark:</td>
<td style="text-align: center;">:heavy_check_mark:</td>
</tr>
<tr class="odd">
<td>RFC compliant caching</td>
<td style="text-align: center;">:heavy_check_mark:</td>
<td style="text-align: center;">:x:</td>
<td style="text-align: center;">:x:</td>
<td style="text-align: center;">:x:</td>
<td style="text-align: center;">:x:</td>
<td style="text-align: center;">:x:</td>
</tr>
<tr class="even">
<td>Cookies (out-of-box)</td>
<td style="text-align: center;">:heavy_check_mark:</td>
<td style="text-align: center;">:heavy_check_mark:</td>
<td style="text-align: center;">:x:</td>
<td style="text-align: center;">:x:</td>
<td style="text-align: center;">:x:</td>
<td style="text-align: center;">:x:</td>
</tr>
<tr class="odd">
<td>Follows redirects</td>
<td style="text-align: center;">:heavy_check_mark:</td>
<td style="text-align: center;">:heavy_check_mark:</td>
<td style="text-align: center;">:heavy_check_mark:</td>
<td style="text-align: center;">:heavy_check_mark:</td>
<td style="text-align: center;">:heavy_check_mark:</td>
<td style="text-align: center;">:heavy_check_mark:</td>
</tr>
<tr class="even">
<td>Retries on failure</td>
<td style="text-align: center;">:heavy_check_mark:</td>
<td style="text-align: center;">:x:</td>
<td style="text-align: center;">:x:</td>
<td style="text-align: center;">:heavy_check_mark:</td>
<td style="text-align: center;">:x:</td>
<td style="text-align: center;">:heavy_check_mark:</td>
</tr>
<tr class="odd">
<td>Progress events</td>
<td style="text-align: center;">:heavy_check_mark:</td>
<td style="text-align: center;">:x:</td>
<td style="text-align: center;">:x:</td>
<td style="text-align: center;">:heavy_check_mark:***</td>
<td style="text-align: center;">Browser only</td>
<td style="text-align: center;">:heavy_check_mark:</td>
</tr>
<tr class="even">
<td>Handles gzip/deflate</td>
<td style="text-align: center;">:heavy_check_mark:</td>
<td style="text-align: center;">:heavy_check_mark:</td>
<td style="text-align: center;">:heavy_check_mark:</td>
<td style="text-align: center;">:heavy_check_mark:</td>
<td style="text-align: center;">:heavy_check_mark:</td>
<td style="text-align: center;">:heavy_check_mark:</td>
</tr>
<tr class="odd">
<td>Advanced timeouts</td>
<td style="text-align: center;">:heavy_check_mark:</td>
<td style="text-align: center;">:x:</td>
<td style="text-align: center;">:x:</td>
<td style="text-align: center;">:x:</td>
<td style="text-align: center;">:x:</td>
<td style="text-align: center;">:x:</td>
</tr>
<tr class="even">
<td>Timings</td>
<td style="text-align: center;">:heavy_check_mark:</td>
<td style="text-align: center;">:heavy_check_mark:</td>
<td style="text-align: center;">:x:</td>
<td style="text-align: center;">:x:</td>
<td style="text-align: center;">:x:</td>
<td style="text-align: center;">:x:</td>
</tr>
<tr class="odd">
<td>Errors with metadata</td>
<td style="text-align: center;">:heavy_check_mark:</td>
<td style="text-align: center;">:x:</td>
<td style="text-align: center;">:x:</td>
<td style="text-align: center;">:heavy_check_mark:</td>
<td style="text-align: center;">:heavy_check_mark:</td>
<td style="text-align: center;">:x:</td>
</tr>
<tr class="even">
<td>JSON mode</td>
<td style="text-align: center;">:heavy_check_mark:</td>
<td style="text-align: center;">:heavy_check_mark:</td>
<td style="text-align: center;">:heavy_check_mark:</td>
<td style="text-align: center;">:heavy_check_mark:</td>
<td style="text-align: center;">:heavy_check_mark:</td>
<td style="text-align: center;">:heavy_check_mark:</td>
</tr>
<tr class="odd">
<td>Custom defaults</td>
<td style="text-align: center;">:heavy_check_mark:</td>
<td style="text-align: center;">:heavy_check_mark:</td>
<td style="text-align: center;">:x:</td>
<td style="text-align: center;">:heavy_check_mark:</td>
<td style="text-align: center;">:heavy_check_mark:</td>
<td style="text-align: center;">:x:</td>
</tr>
<tr class="even">
<td>Composable</td>
<td style="text-align: center;">:heavy_check_mark:</td>
<td style="text-align: center;">:x:</td>
<td style="text-align: center;">:x:</td>
<td style="text-align: center;">:x:</td>
<td style="text-align: center;">:x:</td>
<td style="text-align: center;">:heavy_check_mark:</td>
</tr>
<tr class="odd">
<td>Hooks</td>
<td style="text-align: center;">:heavy_check_mark:</td>
<td style="text-align: center;">:x:</td>
<td style="text-align: center;">:x:</td>
<td style="text-align: center;">:heavy_check_mark:</td>
<td style="text-align: center;">:heavy_check_mark:</td>
<td style="text-align: center;">:x:</td>
</tr>
<tr class="even">
<td>Issues open</td>
<td style="text-align: center;"><a href="https://github.com/sindresorhus/got/issues?q=is%3Aissue+is%3Aopen+sort%3Aupdated-desc"><img src="https://badgen.net/github/open-issues/sindresorhus/got?label" /></a></td>
<td style="text-align: center;"><a href="https://github.com/request/request/issues?q=is%3Aissue+is%3Aopen+sort%3Aupdated-desc"><img src="https://badgen.net/github/open-issues/request/request?label" /></a></td>
<td style="text-align: center;"><a href="https://github.com/bitinn/node-fetch/issues?q=is%3Aissue+is%3Aopen+sort%3Aupdated-desc"><img src="https://badgen.net/github/open-issues/bitinn/node-fetch?label" /></a></td>
<td style="text-align: center;"><a href="https://github.com/sindresorhus/ky/issues?q=is%3Aissue+is%3Aopen+sort%3Aupdated-desc"><img src="https://badgen.net/github/open-issues/sindresorhus/ky?label" /></a></td>
<td style="text-align: center;"><a href="https://github.com/axios/axios/issues?q=is%3Aissue+is%3Aopen+sort%3Aupdated-desc"><img src="https://badgen.net/github/open-issues/axios/axios?label" /></a></td>
<td style="text-align: center;"><a href="https://github.com/visionmedia/superagent/issues?q=is%3Aissue+is%3Aopen+sort%3Aupdated-desc"><img src="https://badgen.net/github/open-issues/visionmedia/superagent?label" /></a></td>
</tr>
<tr class="odd">
<td>Issues closed</td>
<td style="text-align: center;"><a href="https://github.com/sindresorhus/got/issues?q=is%3Aissue+is%3Aclosed+sort%3Aupdated-desc"><img src="https://badgen.net/github/closed-issues/sindresorhus/got?label" /></a></td>
<td style="text-align: center;"><a href="https://github.com/request/request/issues?q=is%3Aissue+is%3Aclosed+sort%3Aupdated-desc"><img src="https://badgen.net/github/closed-issues/request/request?label" /></a></td>
<td style="text-align: center;"><a href="https://github.com/bitinn/node-fetch/issues?q=is%3Aissue+is%3Aclosed+sort%3Aupdated-desc"><img src="https://badgen.net/github/closed-issues/bitinn/node-fetch?label" /></a></td>
<td style="text-align: center;"><a href="https://github.com/sindresorhus/ky/issues?q=is%3Aissue+is%3Aclosed+sort%3Aupdated-desc"><img src="https://badgen.net/github/closed-issues/sindresorhus/ky?label" /></a></td>
<td style="text-align: center;"><a href="https://github.com/axios/axios/issues?q=is%3Aissue+is%3Aclosed+sort%3Aupdated-desc"><img src="https://badgen.net/github/closed-issues/axios/axios?label" /></a></td>
<td style="text-align: center;"><a href="https://github.com/visionmedia/superagent/issues?q=is%3Aissue+is%3Aclosed+sort%3Aupdated-desc"><img src="https://badgen.net/github/closed-issues/visionmedia/superagent?label" /></a></td>
</tr>
<tr class="even">
<td>Downloads</td>
<td style="text-align: center;"><a href="https://www.npmjs.com/package/got"><img src="https://badgen.net/npm/dm/got?label" /></a></td>
<td style="text-align: center;"><a href="https://www.npmjs.com/package/request"><img src="https://badgen.net/npm/dm/request?label" /></a></td>
<td style="text-align: center;"><a href="https://www.npmjs.com/package/node-fetch"><img src="https://badgen.net/npm/dm/node-fetch?label" /></a></td>
<td style="text-align: center;"><a href="https://www.npmjs.com/package/ky"><img src="https://badgen.net/npm/dm/ky?label" /></a></td>
<td style="text-align: center;"><a href="https://www.npmjs.com/package/axios"><img src="https://badgen.net/npm/dm/axios?label" /></a></td>
<td style="text-align: center;"><a href="https://www.npmjs.com/package/superagent"><img src="https://badgen.net/npm/dm/superagent?label" /></a></td>
</tr>
<tr class="odd">
<td>Coverage</td>
<td style="text-align: center;"><a href="https://coveralls.io/github/sindresorhus/got"><img src="https://badgen.net/coveralls/c/github/sindresorhus/got?label" /></a></td>
<td style="text-align: center;"><a href="https://coveralls.io/github/request/request"><img src="https://badgen.net/coveralls/c/github/request/request?label" /></a></td>
<td style="text-align: center;"><a href="https://coveralls.io/github/bitinn/node-fetch"><img src="https://badgen.net/coveralls/c/github/bitinn/node-fetch?label" /></a></td>
<td style="text-align: center;"><a href="https://codecov.io/gh/sindresorhus/ky"><img src="https://badgen.net/codecov/c/github/sindresorhus/ky?label" /></a></td>
<td style="text-align: center;"><a href="https://coveralls.io/github/mzabriskie/axios"><img src="https://badgen.net/coveralls/c/github/mzabriskie/axios?label" /></a></td>
<td style="text-align: center;"><a href="https://codecov.io/gh/visionmedia/superagent"><img src="https://badgen.net/codecov/c/github/visionmedia/superagent?label" /></a></td>
</tr>
<tr class="even">
<td>Build</td>
<td style="text-align: center;"><a href="https://travis-ci.org/sindresorhus/got"><img src="https://badgen.net/travis/sindresorhus/got?label" /></a></td>
<td style="text-align: center;"><a href="https://travis-ci.org/request/request"><img src="https://badgen.net/travis/request/request?label" /></a></td>
<td style="text-align: center;"><a href="https://travis-ci.org/bitinn/node-fetch"><img src="https://badgen.net/travis/bitinn/node-fetch?label" /></a></td>
<td style="text-align: center;"><a href="https://travis-ci.org/sindresorhus/ky"><img src="https://badgen.net/travis/sindresorhus/ky?label" /></a></td>
<td style="text-align: center;"><a href="https://travis-ci.org/axios/axios"><img src="https://badgen.net/travis/axios/axios?label" /></a></td>
<td style="text-align: center;"><a href="https://travis-ci.org/visionmedia/superagent"><img src="https://badgen.net/travis/visionmedia/superagent?label" /></a></td>
</tr>
<tr class="odd">
<td>Bugs</td>
<td style="text-align: center;"><a href="https://github.com/sindresorhus/got/issues?q=is%3Aissue+is%3Aopen+sort%3Aupdated-desc+label%3Abug"><img src="https://badgen.net/github/label-issues/sindresorhus/got/bug/open?label" /></a></td>
<td style="text-align: center;"><a href="https://github.com/request/request/issues?q=is%3Aissue+is%3Aopen+sort%3Aupdated-desc+label%3A%22Needs+investigation%22"><img src="https://badgen.net/github/label-issues/request/request/Needs%20investigation/open?label" /></a></td>
<td style="text-align: center;"><a href="https://github.com/bitinn/node-fetch/issues?q=is%3Aissue+is%3Aopen+sort%3Aupdated-desc+label%3Abug"><img src="https://badgen.net/github/label-issues/bitinn/node-fetch/bug/open?label" /></a></td>
<td style="text-align: center;"><a href="https://github.com/sindresorhus/ky/issues?q=is%3Aissue+is%3Aopen+sort%3Aupdated-desc+label%3Abug"><img src="https://badgen.net/github/label-issues/sindresorhus/ky/bug/open?label" /></a></td>
<td style="text-align: center;"><a href="https://github.com/axios/axios/issues?q=is%3Aissue+is%3Aopen+sort%3Aupdated-desc+label%3Atype:bug"><img src="https://badgen.net/github/label-issues/axios/axios/type:bug/open?label" /></a></td>
<td style="text-align: center;"><a href="https://github.com/visionmedia/superagent/issues?q=is%3Aissue+is%3Aopen+sort%3Aupdated-desc+label%3ABug"><img src="https://badgen.net/github/label-issues/visionmedia/superagent/Bug/open?label" /></a></td>
</tr>
<tr class="even">
<td>Dependents</td>
<td style="text-align: center;"><a href="https://www.npmjs.com/package/got?activeTab=dependents"><img src="https://badgen.net/npm/dependents/got?label" /></a></td>
<td style="text-align: center;"><a href="https://www.npmjs.com/package/request?activeTab=dependents"><img src="https://badgen.net/npm/dependents/request?label" /></a></td>
<td style="text-align: center;"><a href="https://www.npmjs.com/package/node-fetch?activeTab=dependents"><img src="https://badgen.net/npm/dependents/node-fetch?label" /></a></td>
<td style="text-align: center;"><a href="https://www.npmjs.com/package/ky?activeTab=dependents"><img src="https://badgen.net/npm/dependents/ky?label" /></a></td>
<td style="text-align: center;"><a href="https://www.npmjs.com/package/axios?activeTab=dependents"><img src="https://badgen.net/npm/dependents/axios?label" /></a></td>
<td style="text-align: center;"><a href="https://www.npmjs.com/package/visionmedia?activeTab=dependents"><img src="https://badgen.net/npm/dependents/superagent?label" /></a></td>
</tr>
<tr class="odd">
<td>Install size</td>
<td style="text-align: center;"><a href="https://packagephobia.now.sh/result?p=got"><img src="https://badgen.net/packagephobia/install/got?label" /></a></td>
<td style="text-align: center;"><a href="https://packagephobia.now.sh/result?p=request"><img src="https://badgen.net/packagephobia/install/request?label" /></a></td>
<td style="text-align: center;"><a href="https://packagephobia.now.sh/result?p=node-fetch"><img src="https://badgen.net/packagephobia/install/node-fetch?label" /></a></td>
<td style="text-align: center;"><a href="https://packagephobia.now.sh/result?p=ky"><img src="https://badgen.net/packagephobia/install/ky?label" /></a></td>
<td style="text-align: center;"><a href="https://packagephobia.now.sh/result?p=axios"><img src="https://badgen.net/packagephobia/install/axios?label" /></a></td>
<td style="text-align: center;"><a href="https://packagephobia.now.sh/result?p=superagent"><img src="https://badgen.net/packagephobia/install/superagent?label" /></a></td>
</tr>
</tbody>
</table>
<p>* It’s almost API compatible with the browser <code>fetch</code> API.<br />
** Need to switch the protocol manually. Doesn’t accept PUSH streams and doesn’t reuse HTTP/2 sessions.<br />
*** Currently, only <code>DownloadProgress</code> event is supported, <code>UploadProgress</code> event is not supported.<br />
:sparkle: Almost-stable feature, but the API may change. Don’t hestitate to try it out!<br />
:grey_question: Feature in early stage of development. Very experimental.</p>
<!-- GITHUB -->
<!-- ISSUES OPEN -->
<!-- ISSUES CLOSED -->
<!-- DOWNLOADS -->
<!-- COVERAGE -->
<!-- BUILD -->
<!-- BUGS -->
<!-- DEPENDENTS -->
<!-- INSTALL SIZE -->
<p><a href="https://packagephobia.now.sh/result?p=@sindresorhus/is@1.0.0,@szmarczak/http-timer@3.1.0,@types/cacheable-request@6.0.1,cacheable-lookup@0.2.1,cacheable-request@7.0.0,decompress-response@5.0.0,duplexer3@0.1.4,get-stream@5.0.0,lowercase-keys@2.0.0,mimic-response@2.0.0,p-cancelable@2.0.0,responselike@2.0.0,to-readable-stream@2.0.0,type-fest@0.8.0">Click here</a> to see the install size of the Got dependencies.</p>
<h2 id="related">Related</h2>
<ul>
<li><a href="https://github.com/sindresorhus/gh-got">gh-got</a> - Got convenience wrapper to interact with the GitHub API</li>
<li><a href="https://github.com/singapore/gl-got">gl-got</a> - Got convenience wrapper to interact with the GitLab API</li>
<li><a href="https://github.com/samverschueren/travis-got">travis-got</a> - Got convenience wrapper to interact with the Travis API</li>
<li><a href="https://github.com/kevva/graphql-got">graphql-got</a> - Got convenience wrapper to interact with GraphQL</li>
<li><a href="https://github.com/khaosdoctor/gotql">GotQL</a> - Got convenience wrapper to interact with GraphQL using JSON-parsed queries instead of strings</li>
<li><a href="https://github.com/alexghr/got-fetch">got-fetch</a> - Got with a <code>fetch</code> interface</li>
</ul>
<h2 id="maintainers">Maintainers</h2>
<table>
<thead>
<tr class="header">
<th><a href="https://sindresorhus.com"><img src="https://github.com/sindresorhus.png?size=100" alt="Sindre Sorhus" /></a></th>
<th><a href="https://github.com/szmarczak"><img src="https://github.com/szmarczak.png?size=100" alt="Szymon Marczak" /></a></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><a href="https://sindresorhus.com">Sindre Sorhus</a></td>
<td><a href="https://github.com/szmarczak">Szymon Marczak</a></td>
</tr>
</tbody>
</table>
<h6 id="former">Former</h6>
<ul>
<li><a href="https://github.com/floatdrop">Vsevolod Strukchinsky</a></li>
<li><a href="https://github.com/alextes">Alexander Tesfamichael</a></li>
<li><a href="https://github.com/brandon93s">Brandon Smith</a></li>
<li><a href="https://github.com/lukechilds">Luke Childs</a></li>
</ul>
<hr />
<div data-align="center">
<pre><code>&lt;b&gt;
    &lt;a href=&quot;https://tidelift.com/subscription/pkg/npm-got?utm_source=npm-got&amp;utm_medium=referral&amp;utm_campaign=readme&quot;&gt;Get professional support for this package with a Tidelift subscription&lt;/a&gt;
&lt;/b&gt;
&lt;br&gt;
&lt;sub&gt;
    Tidelift helps make open source sustainable for maintainers while giving companies&lt;br&gt;assurances about security, maintenance, and licensing for their dependencies.
&lt;/sub&gt;</code></pre>
</div>
</body>
</html>
