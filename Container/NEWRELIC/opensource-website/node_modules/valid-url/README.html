<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>README</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<h1 id="uri-validation-functions">URI validation functions</h1>
<p><a href="https://travis-ci.org/ogt/valid-url"><img src="https://travis-ci.org/ogt/valid-url.png" alt="Build Status" /></a></p>
<h2 id="synopsis">Synopsis</h2>
<p>Common url validation methods</p>
<pre><code>    var validUrl = require(&#39;valid-url&#39;);
  
    if (validUrl.isUri(suspect)){
        console.log(&#39;Looks like an URI&#39;);
    } else {
        console.log(&#39;Not a URI&#39;);
    }</code></pre>
<p>Replicates the functionality of Richard Sonnen <a href="mailto:sonnen@richardsonnen.com" class="email">sonnen@richardsonnen.com</a> perl module : http://search.cpan.org/~sonnen/Data-Validate-URI-0.01/lib/Data/Validate/URI.pm <a href="http://anonscm.debian.org/gitweb/?p=users/dom/libdata-validate-uri-perl.git">full code here</a> into a nodejs module. Translated practically line by line from perl. It passes all the original tests.</p>
<h2 id="description">Description</h2>
<p>(copied from original perl module)</p>
<blockquote>
<p>This module collects common URI validation routines to make input validation, and untainting easier and more readable. All functions return an untainted value if the test passes, and undef if it fails. This means that you should always check for a defined status explicitly. Don’t assume the return will be true. The value to test is always the first (and often only) argument. There are a number of other URI validation modules out there as well (see below.) This one focuses on being fast, lightweight, and relatively ‘real-world’. i.e. it’s good if you want to check user input, and don’t need to parse out the URI/URL into chunks. Right now the module focuses on HTTP URIs, since they’re arguably the most common. If you have a specialized scheme you’d like to have supported, let me know.</p>
</blockquote>
<h2 id="installation">Installation</h2>
<pre><code>    npm install valid-url</code></pre>
<h2 id="methods">Methods</h2>
<div class="sourceCode" id="cb3"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="co">/*</span></a>
<a class="sourceLine" id="cb3-2" title="2"><span class="co"> * @Function isUri(value)</span></a>
<a class="sourceLine" id="cb3-3" title="3"><span class="co"> *</span></a>
<a class="sourceLine" id="cb3-4" title="4"><span class="co"> * @Synopsis  is the value a well-formed uri?</span></a>
<a class="sourceLine" id="cb3-5" title="5"><span class="co"> * @Description  </span></a>
<a class="sourceLine" id="cb3-6" title="6"><span class="co">        Returns the untainted URI if the test value appears to be well-formed.  Note that</span></a>
<a class="sourceLine" id="cb3-7" title="7"><span class="co">        you may really want one of the more practical methods like is_http_uri or is_https_uri,</span></a>
<a class="sourceLine" id="cb3-8" title="8"><span class="co">        since the URI standard (RFC 3986) allows a lot of things you probably don&#39;t want.</span></a>
<a class="sourceLine" id="cb3-9" title="9"><span class="co"> * @Arguments </span></a>
<a class="sourceLine" id="cb3-10" title="10"><span class="co"> *   value  The potential URI to test.</span></a>
<a class="sourceLine" id="cb3-11" title="11"><span class="co"> *</span></a>
<a class="sourceLine" id="cb3-12" title="12"><span class="co"> * @Returns The untainted RFC 3986 URI on success, undefined on failure.</span></a>
<a class="sourceLine" id="cb3-13" title="13"><span class="co"> * @Notes </span></a>
<a class="sourceLine" id="cb3-14" title="14"><span class="co">        This function does not make any attempt to check whether the URI is accessible</span></a>
<a class="sourceLine" id="cb3-15" title="15"><span class="co">        or &#39;makes sense&#39; in any meaningful way.  It just checks that it is formatted</span></a>
<a class="sourceLine" id="cb3-16" title="16"><span class="co">        correctly.</span></a>
<a class="sourceLine" id="cb3-17" title="17"><span class="co"> *</span></a>
<a class="sourceLine" id="cb3-18" title="18"><span class="co"> */</span></a>
<a class="sourceLine" id="cb3-19" title="19"></a>
<a class="sourceLine" id="cb3-20" title="20"></a>
<a class="sourceLine" id="cb3-21" title="21"><span class="co">/*</span></a>
<a class="sourceLine" id="cb3-22" title="22"><span class="co"> * @Function isHttpUri(value)</span></a>
<a class="sourceLine" id="cb3-23" title="23"><span class="co"> * @Synopsis   is the value a well-formed HTTP uri?</span></a>
<a class="sourceLine" id="cb3-24" title="24"><span class="co"> * @Description  </span></a>
<a class="sourceLine" id="cb3-25" title="25"><span class="co">        Specialized version of isUri() that only likes http:// urls.  As a result, it can</span></a>
<a class="sourceLine" id="cb3-26" title="26"><span class="co">        also do a much more thorough job validating.  Also, unlike isUri() it is more</span></a>
<a class="sourceLine" id="cb3-27" title="27"><span class="co">        concerned with only allowing real-world URIs through.  Things like relative</span></a>
<a class="sourceLine" id="cb3-28" title="28"><span class="co">        hostnames are allowed by the standards, but probably aren&#39;t wise.  Conversely,</span></a>
<a class="sourceLine" id="cb3-29" title="29"><span class="co">        null paths aren&#39;t allowed per RFC 2616 (should be &#39;/&#39; instead), but are allowed</span></a>
<a class="sourceLine" id="cb3-30" title="30"><span class="co">        by this function.</span></a>
<a class="sourceLine" id="cb3-31" title="31"><span class="co">        </span></a>
<a class="sourceLine" id="cb3-32" title="32"><span class="co">        This function only works for fully-qualified URIs.  /bob.html won&#39;t work.  </span></a>
<a class="sourceLine" id="cb3-33" title="33"><span class="co">        See RFC 3986 for the appropriate method to turn a relative URI into an absolute </span></a>
<a class="sourceLine" id="cb3-34" title="34"><span class="co">        one given its context.</span></a>
<a class="sourceLine" id="cb3-35" title="35"><span class="co">        </span></a>
<a class="sourceLine" id="cb3-36" title="36"><span class="co">        Returns the untainted URI if the test value appears to be well-formed.</span></a>
<a class="sourceLine" id="cb3-37" title="37"><span class="co">        </span></a>
<a class="sourceLine" id="cb3-38" title="38"><span class="co">        Note that you probably want to either call this in combo with is_https_uri(). i.e.</span></a>
<a class="sourceLine" id="cb3-39" title="39"><span class="co">        </span></a>
<a class="sourceLine" id="cb3-40" title="40"><span class="co">        if(isHttpUri(uri) || isHttpsUri(uri)) console.log(&#39;Good&#39;);</span></a>
<a class="sourceLine" id="cb3-41" title="41"><span class="co">        </span></a>
<a class="sourceLine" id="cb3-42" title="42"><span class="co">        or use the convenience method isWebUri which is equivalent.</span></a>
<a class="sourceLine" id="cb3-43" title="43"></a>
<a class="sourceLine" id="cb3-44" title="44"><span class="co"> * @Arguments </span></a>
<a class="sourceLine" id="cb3-45" title="45"><span class="co"> *   value  The potential URI to test.</span></a>
<a class="sourceLine" id="cb3-46" title="46"><span class="co"> *</span></a>
<a class="sourceLine" id="cb3-47" title="47"><span class="co"> * @Returns The untainted RFC 3986 URI on success, undefined on failure.</span></a>
<a class="sourceLine" id="cb3-48" title="48"><span class="co"> * @Notes </span></a>
<a class="sourceLine" id="cb3-49" title="49"><span class="co">        This function does not make any attempt to check whether the URI is accessible</span></a>
<a class="sourceLine" id="cb3-50" title="50"><span class="co">        or &#39;makes sense&#39; in any meaningful way.  It just checks that it is formatted</span></a>
<a class="sourceLine" id="cb3-51" title="51"><span class="co">        correctly.</span></a>
<a class="sourceLine" id="cb3-52" title="52"><span class="co"> */</span></a>
<a class="sourceLine" id="cb3-53" title="53"> </a>
<a class="sourceLine" id="cb3-54" title="54"></a>
<a class="sourceLine" id="cb3-55" title="55"></a>
<a class="sourceLine" id="cb3-56" title="56"><span class="co">/*</span></a>
<a class="sourceLine" id="cb3-57" title="57"><span class="co"> * @Function isHttpsUri(value)</span></a>
<a class="sourceLine" id="cb3-58" title="58"><span class="co"> * @Synopsis   is the value a well-formed HTTPS uri?</span></a>
<a class="sourceLine" id="cb3-59" title="59"><span class="co"> * @Description  </span></a>
<a class="sourceLine" id="cb3-60" title="60"><span class="co">        See is_http_uri() for details.  This version only likes the https URI scheme.</span></a>
<a class="sourceLine" id="cb3-61" title="61"><span class="co">        Otherwise it&#39;s identical to is_http_uri()</span></a>
<a class="sourceLine" id="cb3-62" title="62"><span class="co"> * @Arguments </span></a>
<a class="sourceLine" id="cb3-63" title="63"><span class="co"> *   value  The potential URI to test.</span></a>
<a class="sourceLine" id="cb3-64" title="64"><span class="co"> *</span></a>
<a class="sourceLine" id="cb3-65" title="65"><span class="co"> * @Returns The untainted RFC 3986 URI on success, undefined on failure.</span></a>
<a class="sourceLine" id="cb3-66" title="66"><span class="co"> * @Notes </span></a>
<a class="sourceLine" id="cb3-67" title="67"><span class="co">        This function does not make any attempt to check whether the URI is accessible</span></a>
<a class="sourceLine" id="cb3-68" title="68"><span class="co">        or &#39;makes sense&#39; in any meaningful way.  It just checks that it is formatted</span></a>
<a class="sourceLine" id="cb3-69" title="69"><span class="co">        correctly.</span></a>
<a class="sourceLine" id="cb3-70" title="70"><span class="co"> */</span></a>
<a class="sourceLine" id="cb3-71" title="71"> </a>
<a class="sourceLine" id="cb3-72" title="72"> </a>
<a class="sourceLine" id="cb3-73" title="73"> <span class="co">/*</span></a>
<a class="sourceLine" id="cb3-74" title="74"><span class="co"> * @Function isWebUri(value)</span></a>
<a class="sourceLine" id="cb3-75" title="75"><span class="co"> * @Synopsis   is the value a well-formed HTTP or HTTPS uri?</span></a>
<a class="sourceLine" id="cb3-76" title="76"><span class="co"> * @Description  </span></a>
<a class="sourceLine" id="cb3-77" title="77"><span class="co">        This is just a convenience method that combines isHttpUri and isHttpsUri</span></a>
<a class="sourceLine" id="cb3-78" title="78"><span class="co">        to accept most common real-world URLs.</span></a>
<a class="sourceLine" id="cb3-79" title="79"><span class="co"> * @Arguments </span></a>
<a class="sourceLine" id="cb3-80" title="80"><span class="co"> *   value  The potential URI to test.</span></a>
<a class="sourceLine" id="cb3-81" title="81"><span class="co"> *</span></a>
<a class="sourceLine" id="cb3-82" title="82"><span class="co"> * @Returns The untainted RFC 3986 URI on success, undefined on failure.</span></a>
<a class="sourceLine" id="cb3-83" title="83"><span class="co"> * @Notes </span></a>
<a class="sourceLine" id="cb3-84" title="84"><span class="co">        This function does not make any attempt to check whether the URI is accessible</span></a>
<a class="sourceLine" id="cb3-85" title="85"><span class="co">        or &#39;makes sense&#39; in any meaningful way.  It just checks that it is formatted</span></a>
<a class="sourceLine" id="cb3-86" title="86"><span class="co">        correctly.</span></a>
<a class="sourceLine" id="cb3-87" title="87"><span class="co"> */</span></a>
<a class="sourceLine" id="cb3-88" title="88"> </a></code></pre></div>
<h2 id="see-also">See also</h2>
<p>RFC 3986, RFC 3966, RFC 4694, RFC 4759, RFC 4904</p>
</body>
</html>
