<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>README</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
</head>
<body>
<h1 id="gatsby-recipes">Gatsby Recipes</h1>
<p>Recipes is an “infrastructure as code” system that lets users automatically manage and provision the technology stack for their Gatsby site/app through code rather than manual processes.</p>
<p>It’s powered by React &amp; MDX and a useful analogy is “React Native for Infrastructure”.</p>
<p>Recipes also provides a read/write API for Desktop/Admin to build lowcode tooling on top of Gatsby &amp; integrated services.</p>
<p>It’s designed to be extensible so new capabilities can be added which allow Recipes to automate more things.</p>
<p>We chose <a href="https://mdxjs.com/">MDX</a> to allow for a literate programming style of writing recipes which enables us to port our dozens of recipes from https://www.gatsbyjs.org/docs/recipes/ as well as in the future, entire tutorials.</p>
<p><a href="https://www.gatsbyjs.org/blog/2020-04-15-announcing-gatsby-recipes/">Read more about Recipes on the launch blog post</a></p>
<p>There’s an umbrella issue for testing / using Recipes during its incubation stage. Follow the issue for updates! https://github.com/gatsbyjs/gatsby/issues/22991</p>
<h2 id="get-set-up-for-running-recipes">Get set up for running Recipes</h2>
<p>Recipes is a new rapidly developing feature. To use it, upgrade your global gatsby-cli package to the latest.</p>
<pre class="shell"><code>npm install -g gatsby-cli@latest</code></pre>
<p>To confirm that this worked, run <code>gatsby --help</code> in your terminal. The output should show the recipes command.</p>
<h3 id="running-an-example-recipe">Running an example recipe</h3>
<p>Now you can test out recipes! Start with a recipe for installing <a href="https://emotion.sh/docs/introduction">Emotion</a> by following these steps:</p>
<ol type="1">
<li>Create a new Hello World Gatsby site:</li>
</ol>
<pre class="shell"><code>gatsby new try-emotion https://github.com/gatsbyjs/gatsby-starter-hello-world</code></pre>
<ol type="1">
<li>Go to the project directory you created:</li>
</ol>
<pre class="shell"><code>cd try-emotion</code></pre>
<ol type="1">
<li>Now you can run the <code>emotion</code> recipe with this command:</li>
</ol>
<pre class="shell"><code>gatsby recipes emotion</code></pre>
<figure>
<img src="https://user-images.githubusercontent.com/1424573/79452177-f3362f00-7fa4-11ea-903a-e28472bf95b6.png" alt="Terminal showing “gatsby recipes emotion” output" /><figcaption>Terminal showing “gatsby recipes emotion” output</figcaption>
</figure>
<p>You can see a list of other recipes to run by running <code>gatsby recipes</code></p>
<figure>
<img src="https://user-images.githubusercontent.com/1424573/79452254-14971b00-7fa5-11ea-9bdf-021c341afb10.png" alt="Terminal showing recipes list" /><figcaption>Terminal showing recipes list</figcaption>
</figure>
<h2 id="developing-recipes">Developing Recipes</h2>
<h3 id="an-example-mdx-recipe">An example MDX recipe</h3>
<p>Here’s how you would write the <code>gatsby recipes emotion</code> recipe you just ran:</p>
<pre class="mdx"><code># Setup Gatsby with Emotion

[Emotion](https://emotion.sh/) is a powerful CSS-in-JS library that supports both inline CSS styles and styled components. You can use each styling feature individually or together in the same file.

&lt;!-- use three dashes to separate steps of the recipe --&gt;

---

Install necessary NPM packages

&lt;!-- refer to the API in this doc to see what APIs are available, like `NPMPackage` --&gt;

&lt;NPMPackage name=&quot;gatsby-plugin-emotion&quot; /&gt;
&lt;NPMPackage name=&quot;@emotion/react&quot; /&gt;
&lt;NPMPackage name=&quot;@emotion/styled&quot; /&gt;

---

Install the Emotion plugin in gatsby-config.js

&lt;GatsbyPlugin name=&quot;gatsby-plugin-emotion&quot; /&gt;

---

Sweet, now it&#39;s ready to go.

Let&#39;s also write out an example page you can use to play
with Emotion.

&lt;File
  path=&quot;src/pages/emotion-example.js&quot;
  content=&quot;https://gist.githubusercontent.com/KyleAMathews/323bacd551df46e8e7b6146cbf827d0b/raw/5c60f168f30c505cff1ff2433e69dabe27ae9738/sample-emotion.js&quot;
/&gt;

---

Read more about Emotion on the official Emotion docs site:

https://emotion.sh/docs/introduction</code></pre>
<p>You can browse the <a href="https://github.com/gatsbyjs/gatsby/tree/master/packages/gatsby-recipes/recipes">source of the official recipes</a>. The <a href="https://github.com/gatsbyjs/gatsby/issues/22991">recipes umbrella issue</a> also has a number of recipes posted by community members.</p>
<h3 id="how-to-run-recipes">How to run recipes</h3>
<p>You can run built-in recipes, ones you write locally, and ones people have posted online.</p>
<p>To run a local recipe, make sure to start the path to the recipe with a period like:</p>
<pre class="shell"><code>gatsby recipes ./my-cool-recipe.mdx</code></pre>
<p>To run a remote recipe, copy the path to the recipe and run it e.g.</p>
<pre class="shell"><code>gatsby recipes https://example.com/sweet-recipe.mdx</code></pre>
<h2 id="external-learning-resources">External learning resources</h2>
<ul>
<li>A free 6 min eggheadio <a href="https://egghead.io/playlists/getting-started-with-gatsbyjs-recipes-c79a">collection</a> by <a href="https://twitter.com/khaled_garbaya">Khaled Garbaya</a></li>
</ul>
<h2 id="recipe-api">Recipe API</h2>
<h3 id="gatsbyplugin"><code>&lt;GatsbyPlugin&gt;</code></h3>
<p>Installs a Gatsby Plugin in the site’s <code>gatsby-config.js</code>.</p>
<pre class="jsx"><code>&lt;GatsbyPlugin
  name=&quot;gatsby-source-filesystem&quot;
  key=&quot;src/pages&quot;
  options={{
    name: `src pages directory`,
    path: `src/pages`,
  }}
/&gt;</code></pre>
<h4 id="props">props</h4>
<ul>
<li><strong>name</strong>: name of the plugin</li>
<li><strong>options</strong>: object with options to be added to the plugin declaration in <code>gatsby-config.js</code>. JavaScript code is not <em>yet</em> supported in options e.g. <code>process.env.API_TOKEN</code>. This is being worked on. For now only simple values like strings and numbers are supported.</li>
<li><strong>key</strong>: string used to distinguish between multiple plugin instances</li>
<li><strong>isLocal</strong>: boolean that indicates this is a local plugin. This lets recipes know it shouldn’t require an NPMPackage with the plugin name to be installed as well.</li>
</ul>
<h3 id="gatsbyshadowfile"><code>&lt;GatsbyShadowFile&gt;</code></h3>
<pre class="jsx"><code>&lt;GatsbyShadowFile theme=&quot;gatsby-theme-blog&quot; path=&quot;src/components/seo.js&quot; /&gt;</code></pre>
<h4 id="props-1">props</h4>
<ul>
<li><strong>theme</strong>: the name of the theme (or plugin) which provides the file you’d like to shadow</li>
<li><strong>path</strong>: the path to the file within the theme. E.g. the example file above lives at <code>node_modules/gatsby-theme-blog/src/components/seo.js</code></li>
</ul>
<h3 id="npmpackage"><code>&lt;NPMPackage&gt;</code></h3>
<pre class="jsx"><code>&lt;NPMPackage name=&quot;lodash&quot; version=&quot;latest&quot; /&gt;</code></pre>
<h4 id="props-2">props</h4>
<ul>
<li><strong>name</strong>: name of the package to install</li>
<li><strong>version</strong>: defaults to latest</li>
<li><strong>dependencyType</strong>: defaults to <code>production</code>. Other options include <code>development</code></li>
</ul>
<h3 id="npmpackagejson"><code>&lt;NPMPackageJson&gt;</code></h3>
<!-- prettier-ignore-start -->
<pre class="jsx"><code>&lt;NPMPackageJson
  name=&quot;lint-staged&quot;
  value={{
     &quot;src/**/*.js&quot;: [
      &quot;jest --findRelatedTests&quot;
    ],
  }}
/&gt;</code></pre>
<!-- prettier-ignore-end -->
<h4 id="props-3">props</h4>
<ul>
<li><strong>name</strong>: name of the property to add to the package.json</li>
<li><strong>value</strong>: the value assigned to the property. can be an object or a string.</li>
</ul>
<h3 id="npmscript"><code>&lt;NPMScript&gt;</code></h3>
<pre class="jsx"><code>&lt;NPMScript name=&quot;test&quot; command=&quot;jest&quot; /&gt;</code></pre>
<h4 id="props-4">props</h4>
<ul>
<li><strong>name</strong>: name of the command</li>
<li><strong>command</strong>: the command that’s run when the script is called</li>
</ul>
<h3 id="file"><code>&lt;File&gt;</code></h3>
<pre class="jsx"><code>&lt;File
  path=&quot;test.md&quot;
  content=&quot;https://raw.githubusercontent.com/KyleAMathews/test-recipes/master/gatsby-recipe-jest.mdx&quot;
/&gt;</code></pre>
<h4 id="props-5">props</h4>
<ul>
<li><strong>path</strong>: path to the file that should be created. The path is local to the root of the Node.js project (where the <code>package.json</code> is)</li>
<li><strong>content</strong>: URL to the content that should be written to the path. Eventually we’ll support directly putting content here after some fixes to MDX.</li>
</ul>
<blockquote>
<p>Note that this content is stored in a <a href="https://gist.github.com/">GitHub gist</a>. When linking to a gist you’ll want to click on the “Raw” button and copy the URL from that page.</p>
</blockquote>
<h3 id="directory"><code>&lt;Directory&gt;</code></h3>
<pre class="jsx"><code>&lt;Directory path=&quot;test&quot; /&gt;</code></pre>
<h4 id="props-6">props</h4>
<ul>
<li><strong>path</strong>: path to the directory that should be created. The path is local to the root of the Node.js project (where the <code>package.json</code> is)</li>
</ul>
<h2 id="how-to-set-up-your-development-environment-to-work-on-gatsby-recipes-core">How to set up your development environment to work on Gatsby Recipes core</h2>
<p>The Gatsby recipes codebase consists of the core framework, code for each resource, and the MDX source.</p>
<h3 id="official-recipes">Official recipes</h3>
<p>MDX source for the official recipes lives at <a href="https://github.com/gatsbyjs/gatsby/tree/master/packages/gatsby-recipes/recipes">https://github.com/gatsbyjs/gatsby/tree/master/packages/gatsby-recipes/recipes</a>.</p>
<p>We welcome PRs for new recipes and fixes/improvements to existing recipes.</p>
<p>When you add a new recipe, please also add it to the recipes list at <a href="https://github.com/gatsbyjs/gatsby/blob/05151c006974b7636b00f0cd608fac89ddaa1c08/packages/gatsby-recipes/src/cli.js#L60">https://github.com/gatsbyjs/gatsby/blob/05151c006974b7636b00f0cd608fac89ddaa1c08/packages/gatsby-recipes/src/cli.js#L60</a>.</p>
<h2 id="faq-common-issues">FAQ / common issues</h2>
<h3 id="q-my-recipe-is-combining-steps-instead-of-running-them-separately">Q) My recipe is combining steps instead of running them separately!</h3>
<p>We use the <code>---</code> break syntax from Markdown to separate steps.</p>
<p>One quirk with it is for it to work, it must have an empty line above it.</p>
<p>So this will work:</p>
<pre class="mdx"><code># Recipes

---

a step

&lt;File src=&quot;something.txt&quot; content=&quot;something&quot; /&gt;</code></pre>
<p>But this won’t</p>
<!-- prettier-ignore-start -->
<pre class="mdx"><code># Recipes
---

a step

&lt;File src=&quot;something.txt&quot; content=&quot;something&quot; /&gt;</code></pre>
<!-- prettier-ignore-end -->
<h3 id="q-what-kind-of-recipe-should-i-write">Q) What kind of recipe should I write?</h3>
<p>If you’d like to write a recipe, there are a few great places to get an idea:</p>
<ul>
<li>Think of a task that took you more time than other tasks in the last Gatsby site you built. Is there a way to automate any part of that task?</li>
<li>Look at this list of recipes in the Gatsby docs. Many of these can be partially or fully automated through creating a recipe <code>mdx</code> file. https://www.gatsbyjs.org/docs/recipes/</li>
<li>community members have posted a number of recipes in the <a href="https://github.com/gatsbyjs/gatsby/issues/22991">recipes umbrella issue</a>. You can browse their ideas to find inspiration for new recipes to write.</li>
</ul>
</body>
</html>
