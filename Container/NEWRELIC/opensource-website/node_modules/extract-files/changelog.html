<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>changelog</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<h1 id="extract-files-changelog">extract-files changelog</h1>
<h2 id="section">9.0.0</h2>
<h3 id="major">Major</h3>
<ul>
<li>Updated Node.js support to <code>^10.17.0 || ^12.0.0 || &gt;= 13.7.0</code>.</li>
<li>Updated dev dependencies, some of which require newer Node.js versions than previously supported.</li>
<li>Renamed the <code>lib</code> directory to <code>public</code>; existing deep import or require paths must be updated.</li>
<li>Removed the package <code>module</code> field.</li>
</ul>
<h3 id="patch">Patch</h3>
<ul>
<li>Removed Node.js v13 and added v14 to the versions tested in GitHub Actions.</li>
<li>Simplified the GitHub Actions CI config with the <a href="https://docs.npmjs.com/cli/install-test.html"><code>npm install-test</code></a> command.</li>
<li>Improved JSDoc code examples.</li>
<li>Updated EditorConfig.</li>
<li>No longer transpile tests with Babel, or test ESM.</li>
<li>Simplified the Babel config and scripts, ensuring <code>.js</code> files are parsed as scripts.</li>
<li>Removed unnecessary <code>.js</code> file extensions from <code>require</code> paths.</li>
<li>Documented all the ways to <code>import</code> and <code>require</code> the public API.</li>
<li>Tweaked the readme setup instructions.</li>
</ul>
<h2 id="section-1">8.1.0</h2>
<h3 id="minor">Minor</h3>
<ul>
<li><p>Updated the package <code>exports</code> field:</p>
<ul>
<li><p>Deep imports to specific files are now allowed, e.g.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb1-1" title="1"><span class="im">import</span> extractFiles <span class="im">from</span> <span class="st">&#39;extract-files/lib/extractFiles.js&#39;</span><span class="op">;</span></a></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1"><span class="kw">const</span> extractFiles <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;extract-files/lib/extractFiles&#39;</span>)<span class="op">;</span></a></code></pre></div></li>
<li><p>The <code>package.json</code> can now be required, e.g.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="kw">const</span> pkg <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;extract-files/package.json&#39;</span>)<span class="op">;</span></a></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1"><span class="co">// With Node.js --experimental-json-modules flag.</span></a>
<a class="sourceLine" id="cb4-2" title="2"><span class="im">import</span> pkg <span class="im">from</span> <span class="st">&#39;extract-files/package.json&#39;</span><span class="op">;</span></a></code></pre></div></li>
</ul></li>
</ul>
<h3 id="patch-1">Patch</h3>
<ul>
<li>Updated dev dependencies.</li>
<li>Updated the package <code>engines.node</code> field to <code>10 - 12 || &gt;= 13.7</code> to reflect the package <code>exports</code> related breaking changes in <code>extract-files@8.0.0</code>.</li>
<li>Improved the package <code>prepare:prettier</code> and <code>test:prettier</code> scripts.</li>
<li>Reordered the package <code>test:eslint</code> script args for consistency with <code>test:prettier</code>.</li>
<li>Configured Prettier option <code>semi</code> to the default, <code>true</code>.</li>
<li>Restructured the <code>src</code> directory so <code>lib</code> and <code>test</code> files are separate with their own <code>.babelrc.js</code> files.</li>
</ul>
<h2 id="section-2">8.0.0</h2>
<h3 id="major-1">Major</h3>
<ul>
<li>Added a <a href="https://nodejs.org/api/esm.html#esm_package_exports">package <code>exports</code> field</a> to support native ESM in Node.js.</li>
<li>Some source and published files are now <code>.js</code> (CJS) instead of <code>.mjs</code> (ESM), so undocumented deep imports may no longer work. <a href="https://nodejs.org/api/esm.html#esm_approach_1_use_an_es_module_wrapper">This approach avoids the dual package hazard</a>.</li>
</ul>
<h3 id="patch-2">Patch</h3>
<ul>
<li>Updated dependencies.</li>
<li>Removed <a href="https://npm.im/@babel/plugin-proposal-class-properties"><code>@babel/plugin-proposal-class-properties</code></a> from dev dependencies and the Babel config.</li>
<li>Lint fixes for <a href="https://npm.im/prettier"><code>prettier</code></a> v2.</li>
<li>Ensure GitHub Actions run on pull request.</li>
<li>Improved the <code>ExtractableFileMatcher</code> JSDoc typedef.</li>
<li>Size limit test the published CJS files as well as the ESM.</li>
</ul>
<h2 id="section-3">7.0.0</h2>
<h3 id="major-2">Major</h3>
<ul>
<li>Updated Node.js support from v8.10+ to v10+.</li>
<li>Replaced <a href="https://npm.im/tap"><code>tap</code></a> and <a href="https://npm.im/nyc"><code>nyc</code></a> with <a href="https://npm.im/test-director"><code>test-director</code></a>, <a href="https://npm.im/coverage-node"><code>coverage-node</code></a> and <a href="https://npm.im/hard-rejection"><code>hard-rejection</code></a> to improve the dev experience, test ESM natively with Node.js, and reduce the dev install size by ~78.8 MB. These new dev dependencies require Node.js v10+.</li>
</ul>
<h3 id="patch-3">Patch</h3>
<ul>
<li>Updated dev dependencies.</li>
<li>Removed the now redundant <a href="https://npm.im/eslint-plugin-import-order-alphabetical"><code>eslint-plugin-import-order-alphabetical</code></a> dev dependency.</li>
<li>Stop using <a href="https://npm.im/husky"><code>husky</code></a> and <a href="https://npm.im/lint-staged"><code>lint-staged</code></a>.</li>
<li>More thorough tests.</li>
<li>Use strict mode for scripts.</li>
<li>Renamed some package scripts.</li>
</ul>
<h2 id="section-4">6.0.0</h2>
<h3 id="major-3">Major</h3>
<ul>
<li>Updated Node.js support from v6+ to v8.10+.</li>
</ul>
<h3 id="minor-1">Minor</h3>
<ul>
<li>Added the ability to customize what are extractable files, fixing <a href="https://github.com/jaydenseric/extract-files/issues/10">#10</a> via <a href="https://github.com/jaydenseric/extract-files/pull/11">#11</a>:
<ul>
<li>Added a new third parameter to the <code>extractFiles</code> function, for specifying a custom extractable file matcher.</li>
<li>Export a new <code>isExtractableFile</code> function that is used as the default extractable file matcher for the <code>extractFiles</code> function. This can be used in a custom extractable file matcher implementation to match the default extractable files, along with additional custom files.</li>
</ul></li>
<li>Setup <a href="https://github.com/sponsors/jaydenseric">GitHub Sponsors funding</a>:
<ul>
<li>Added <code>.github/funding.yml</code> to display a sponsor button in GitHub.</li>
<li>Added a <code>package.json</code> <code>funding</code> field to enable npm CLI funding features.</li>
</ul></li>
</ul>
<h3 id="patch-4">Patch</h3>
<ul>
<li>Updated dev dependencies.</li>
<li>Replaced the <a href="https://npm.im/size-limit"><code>size-limit</code></a> dev dependency with <a href="https://npm.im/@size-limit/preset-small-lib"><code>@size-limit/preset-small-lib</code></a>.</li>
<li>Added a new <a href="https://npm.im/babel-plugin-transform-require-extensions"><code>babel-plugin-transform-require-extensions</code></a> dev dependency and ensured ESM import specifiers in both source and published <code>.mjs</code> files contain file names with extensions, which <a href="https://nodejs.org/api/esm.html#esm_mandatory_file_extensions">are mandatory in the final Node.js ESM implementation</a>. Published CJS <code>.js</code> files now also have file extensions in <code>require</code> paths.</li>
<li>Added a package <code>module</code> field.</li>
<li>Removed now redundant ESLint disable <code>require-jsdoc</code> comments.</li>
<li>Use GitHub Actions instead of Travis for CI.</li>
<li>Redid the test scripts and enforced 100% code coverage.</li>
<li>Run size limit tests last in the package <code>test</code> script as they are the slowest.</li>
<li>Only size limit test the ESM build.</li>
<li>Updated the package <code>test:tap</code> script to workaround a <a href="https://github.com/tapjs/node-tap/issues/624"><code>tap</code> bug</a>.</li>
<li>Simplified the <code>prepublishOnly</code> script.</li>
<li>Ordered <code>plugins</code> before <code>presets</code> in Babel config as they run first.</li>
<li>Reduced the size of the published <code>package.json</code> by moving dev tool config to files.</li>
<li>Only target the root <code>lib</code> directory in <code>.gitignore</code> and <code>.eslintignore</code>.</li>
<li>Removed <code>package-lock.json</code> from <code>.gitignore</code> and <code>.prettierignore</code> as it’s disabled in <code>.npmrc</code> anyway.</li>
<li>Prevented ESLint from ignoring dotfiles.</li>
<li>Clarified that Opera Mini isn’t supported in the Browserslist queries and readme “Support” section.</li>
</ul>
<h2 id="section-5">5.0.1</h2>
<h3 id="patch-5">Patch</h3>
<ul>
<li>Updated dev dependencies.</li>
<li>Instance (e.g. <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Date"><code>new Date()</code></a>) references are copied to the clone instead of recursed as objects; fixing <a href="https://github.com/jaydenseric/apollo-upload-client/issues/138">jaydenseric/apollo-upload-client#138</a> via <a href="https://github.com/jaydenseric/extract-files/pull/9">#9</a>.</li>
<li>Test more types of input.</li>
</ul>
<h2 id="section-6">5.0.0</h2>
<h3 id="major-4">Major</h3>
<ul>
<li><code>extractFiles</code> has a new return signature and no longer mutates the original input, fixing <a href="https://github.com/jaydenseric/extract-files/issues/8">#8</a>. It returns an object with <code>clone</code>, a clone of the original input value with files recursively replaced with <code>null</code>, and <code>files</code>, a <code>Map</code> instance keying each extracted file to an array of object paths.</li>
</ul>
<h3 id="minor-2">Minor</h3>
<ul>
<li>Files can now be used as the root value passed to <code>extractFiles</code>.</li>
</ul>
<h3 id="patch-6">Patch</h3>
<ul>
<li>Updated dev dependencies.</li>
<li>Updated package description.</li>
<li>Moved JSDoc type definitions into the index file.</li>
<li>Manually composed package exports instead of relying on <code>*</code>.</li>
<li>Improved tests.</li>
<li>Added a paragraph explaining the GraphQL use case to the readme.</li>
</ul>
<h2 id="section-7">4.1.0</h2>
<h3 id="minor-3">Minor</h3>
<ul>
<li>Support more browsers by changing the <a href="https://github.com/browserslist/browserslist">Browserslist</a> query from <a href="https://browserl.ist/?q=%3E+1%25"><code>&gt; 1%</code></a> to <a href="https://browserl.ist/?q=%3E+0.5%25%2C+not+dead"><code>&gt; 0.5%, not dead</code></a>.</li>
</ul>
<h3 id="patch-7">Patch</h3>
<ul>
<li>Updated dev dependencies.</li>
<li>Ensure Babel reads from the package <code>browserslist</code> field due to <a href="https://github.com/babel/babel/pull/8509">a sneaky <code>@babel/preset-env</code> breaking change</a>.</li>
<li>Updated package scripts and config for the new <a href="https://npm.im/husky"><code>husky</code></a> version.</li>
<li>Removed the package <code>module</code> field. Webpack by default resolves extensionless paths the same way Node.js in <code>--experimental-modules</code> mode does; <code>.mjs</code> files are preferred. Tools misconfigured or unable to resolve <code>.mjs</code> can get confused when <code>module</code> points to an <code>.mjs</code> ESM file and they attempt to resolve named imports from <code>.js</code> CJS files.</li>
<li>Added a <code>ReactNativeFileSubstitute</code> type example.</li>
<li>Move JSDoc typedefs to the end of files to make it quicker to find the code.</li>
<li>Regenerated the readme API docs using the latest <a href="https://npm.im/jsdoc-md"><code>jsdoc-md</code></a> version.</li>
<li>Tests now log if the environment is CJS or ESM (<code>--experimental-modules</code>) and the <code>NODE_ENV</code>.</li>
</ul>
<h2 id="section-8">4.0.0</h2>
<h3 id="major-5">Major</h3>
<ul>
<li><code>extractFiles</code> is a named export again, and there is no longer a default export; mixed named and default exports causes native ESM and CJS interoperability issues.</li>
<li><code>isObject</code> is no longer exported. It was not a documented API anyway.</li>
<li>Removed the <code>ReactNativeFile</code> static function <code>list</code>. It added surface area to the API and bundles and is simple to do manually.</li>
</ul>
<h3 id="minor-4">Minor</h3>
<ul>
<li>Updated Babel, removing the <code>@babel/runtime</code> dependency.</li>
<li>Refactored package scripts to use <code>prepare</code> to support installation via Git (e.g. <code>npm install jaydenseric/extract-files</code>).</li>
<li>Package <a href="https://webpack.js.org/guides/tree-shaking#mark-the-file-as-side-effect-free">marked side-effect free</a> for bundlers and tree-shaking.</li>
</ul>
<h3 id="patch-8">Patch</h3>
<ul>
<li>Use <a href="https://npm.im/jsdoc-md"><code>jsdoc-md</code></a> to generate readme API docs from source JSDoc, which has been much improved.</li>
<li>Use <a href="https://npm.im/tap"><code>tap</code></a> instead of <a href="https://npm.im/ava"><code>ava</code></a>. Tests no longer transpile on the fly, are faster and AVA no longer dictates the Babel version.</li>
<li>Tests run against the actual dist <code>.mjs</code> and <code>.js</code> files in both native ESM (<code>--experimental-modules</code>) and CJS environments.</li>
<li>Added a package <code>test:size</code> script, using <a href="https://npm.im/size-limit"><code>size-limit</code></a> to guarantee &lt; 500 byte ESM and CJS bundle sizes.</li>
<li>Removed the package clean script <code>rimraf</code> dev dependency in favour of native <code>rm -rf</code>.</li>
<li>Removed the package <code>fix</code> script.</li>
<li>Renamed the <code>MODULE</code> environment variable to <code>BABEL_ESM</code> to be more specific for the package <code>prepare:mjs</code> script.</li>
<li>Lint <code>.json</code>, <code>.yml</code> and <code>.md</code> files.</li>
<li>Use <code>.prettierignore</code> to leave <code>package.json</code> formatting to npm.</li>
<li>Use <a href="https://npm.im/eslint-config-env"><code>eslint-config-env</code></a>.</li>
<li>Compact package <code>repository</code> field.</li>
<li>Updated package description.</li>
<li>HTTPS package author URL.</li>
<li>Added package keywords.</li>
<li>Replaced <a href="https://shields.io">shields.io</a> readme badges with:
<ul>
<li>A <a href="https://badgen.net">Badgen</a> npm version badge.</li>
<li>An official Travis badge that only tracks <code>master</code> branch.</li>
</ul></li>
<li>Changelog version entries now have “Major”, “Minor” and “Patch” subheadings.</li>
</ul>
<h2 id="section-9">3.1.0</h2>
<h3 id="minor-5">Minor</h3>
<ul>
<li>Added support for <a href="https://developer.mozilla.org/en/docs/Web/API/Blob"><code>Blob</code></a> types, via <a href="https://github.com/jaydenseric/extract-files/pull/5">#5</a>.</li>
</ul>
<h3 id="patch-9">Patch</h3>
<ul>
<li>Updated dependencies.</li>
</ul>
<h2 id="section-10">3.0.0</h2>
<h3 id="major-6">Major</h3>
<ul>
<li>The <code>extractFiles</code> function is now the default export.</li>
<li>Replace extracted files with <code>null</code> instead of deletion, fixing <a href="https://github.com/jaydenseric/extract-files/issues/4">#4</a>.</li>
</ul>
<h3 id="patch-10">Patch</h3>
<ul>
<li>Updated dev dependencies.</li>
<li>Simplified npm scripts.</li>
</ul>
<h2 id="section-11">2.1.1</h2>
<h3 id="patch-11">Patch</h3>
<ul>
<li>Setup Travis to test using the latest stable Node.js version and the oldest supported in <code>package.json</code> <code>engines</code> (v6.10).</li>
<li>Added a Travis readme badge.</li>
</ul>
<h2 id="section-12">2.1.0</h2>
<h3 id="minor-6">Minor</h3>
<ul>
<li>Support <a href="http://browserl.ist/?q=%3E1%25">browsers with &gt;1% global usage</a> (was &gt;2%).</li>
<li>Target Node.js v6.10+ for transpilation and polyfills via <code>package.json</code> <code>engines</code>.</li>
<li>Support Node.js native ESM via <code>--experimental-modules</code>:
<ul>
<li>Module files now have <code>.mjs</code> extension.</li>
<li>Modular project structure that works better for native ESM.</li>
</ul></li>
<li>Reduced bundle size, fixing <a href="https://github.com/jaydenseric/extract-files/issues/3">#3</a>:
<ul>
<li>Using <code>babel-preset-env</code> to handle polyfills so only required ones are included for supported environments.</li>
<li>Using <code>Array.prototype.slice.call</code> to convert <code>FileList</code> instances to arrays instead of <code>Array.from</code> which requires a lot of polyfills.</li>
</ul></li>
</ul>
<h3 id="patch-12">Patch</h3>
<ul>
<li>Updated dependencies.</li>
<li>Updated Prettier and ESLint config.</li>
<li>Prettier formats distribution code as well as source code, along with the readme and changelog.</li>
<li>No more source maps; Prettier does not support them.</li>
<li>Added a clean step to builds.</li>
<li>Renamed <code>dist</code> directory to <code>lib</code>.</li>
<li>Using Babel directly instead of Rollup.</li>
<li>Smarter Babel config with <code>.babelrc.js</code>.</li>
<li>Added links to readme badges.</li>
<li>Updated the readme support section.</li>
</ul>
<h2 id="section-13">2.0.1</h2>
<h3 id="patch-13">Patch</h3>
<ul>
<li>Updated dependencies.</li>
<li>Fixed incorrect usage example code for <code>ReactNativeFile.list</code>, via <a href="https://github.com/jaydenseric/extract-files/pull/1">#1</a>.</li>
</ul>
<h2 id="section-14">2.0.0</h2>
<h3 id="major-7">Major</h3>
<ul>
<li>Extracted file paths no longer begin with <code>.</code> when no tree path is passed to <code>extractFiles</code>.</li>
</ul>
<h3 id="patch-14">Patch</h3>
<ul>
<li>Updated dev dependencies.</li>
</ul>
<h2 id="section-15">1.1.0</h2>
<h3 id="minor-7">Minor</h3>
<ul>
<li>Added tests.</li>
</ul>
<h3 id="patch-15">Patch</h3>
<ul>
<li>Updated dev dependencies.</li>
<li>Removed <code>lint-staged</code>, linting and tests now run on commit.</li>
<li>Fixed <code>extractFiles</code> bugs by using logic that worked in <a href="https://github.com/jaydenseric/apollo-upload-client/tree/v5.0.0"><code>apollo-upload-client@5</code></a>.</li>
</ul>
<h2 id="section-16">1.0.0</h2>
<p>Initial release.</p>
</body>
</html>
