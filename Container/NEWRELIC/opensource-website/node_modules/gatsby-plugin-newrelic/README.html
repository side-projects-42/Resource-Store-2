<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>README</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<p><a href="https://github.com/newrelic/open-source-office/blob/master/examples/categories/index.md#community-project"><img src="https://github.com/newrelic/open-source-office/raw/master/examples/categories/images/Community_Project.png" alt="Community Project header" /></a></p>
<h1 id="new-relic-gatsby-plugin">New Relic Gatsby Plugin</h1>
<p><a href="https://snyk.io/test/github/newrelic/gatsby-plugin-newrelic?targetFile=package.json"><img src="https://snyk.io/test/github/newrelic/gatsby-plugin-newrelic/badge.svg?targetFile=package.json" alt="Known Vulnerabilities" /></a> <a href="https://nodei.co/npm/gatsby-plugin-newrelic"><img src="https://nodei.co/npm/gatsby-plugin-newrelic.png" alt="npm status badge" /></a></p>
<p>The New Relic Gatsby Plugin provides a simple to use configuration option for instrumenting your Gatsby site with <a href="https://newrelic.com/products/browser-monitoring">New Relic’s Browser Agent</a>.</p>
<h2 id="installation">Installation</h2>
<ol type="1">
<li>If you don’t already have a New Relic account, <a href="https://newrelic.com/signup">sign-up for our free forever tier - no credit-card required!</a></li>
<li>Go to <a href="https://rpm.newrelic.com">https://rpm.newrelic.com</a></li>
<li>Select the “Browser” product from the navigation</li>
<li>Click on “Add more” to add your website</li>
<li>Select “Copy/Paste Javascript code” and copy the code</li>
<li>Under “Choose your instrumentation” select Lite, Pro, or Pro + SPA</li>
<li>Enter your app name</li>
<li>Click “Enable”</li>
<li>Paste the JS snippet provided into a text editor</li>
<li>Open your <code>gatsby-config.js</code> file for your project</li>
<li><p>You’ll need to copy information from the JS snippet, which looks like this:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb1-1" title="1"><span class="op">;</span><span class="va">NREUM</span>.<span class="at">loader_config</span><span class="op">={</span><span class="dt">accountID</span><span class="op">:</span><span class="st">&quot;&lt;your account id&gt;&quot;</span><span class="op">,</span><span class="dt">trustKey</span><span class="op">:</span><span class="st">&quot;&lt;some integer&gt;&quot;</span><span class="op">,</span><span class="dt">agentID</span><span class="op">:</span><span class="st">&quot;&lt;some integer&gt;&quot;</span><span class="op">,</span><span class="dt">licenseKey</span><span class="op">:</span><span class="st">&quot;&lt;your license key&gt;&quot;</span><span class="op">,</span><span class="dt">applicationID</span><span class="op">:</span><span class="st">&quot;&lt;some integer&gt;&quot;</span><span class="op">}</span></a>
<a class="sourceLine" id="cb1-2" title="2"><span class="op">;</span><span class="va">NREUM</span>.<span class="at">info</span><span class="op">={</span><span class="dt">beacon</span><span class="op">:</span><span class="st">&quot;bam.nr-data.net&quot;</span><span class="op">,</span><span class="dt">errorBeacon</span><span class="op">:</span><span class="st">&quot;bam.nr-data.net&quot;</span><span class="op">,</span><span class="dt">licenseKey</span><span class="op">:</span><span class="st">&quot;&lt;your license key&gt;&quot;</span><span class="op">,</span><span class="dt">applicationID</span><span class="op">:</span><span class="st">&quot;&lt;some integer&gt;&quot;</span><span class="op">,</span><span class="dt">sa</span><span class="op">:</span><span class="dv">1</span><span class="op">}</span></a></code></pre></div>
<p>and turn it into a <code>gatsby-config</code>, adding it to <code>gatsby-config.js</code> as a plugin</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1"><span class="op">{</span></a>
<a class="sourceLine" id="cb2-2" title="2">  <span class="dt">resolve</span><span class="op">:</span> <span class="st">&#39;gatsby-plugin-newrelic&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-3" title="3">  <span class="dt">options</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb2-4" title="4">    <span class="dt">configs</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb2-5" title="5">      <span class="dt">dev</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb2-6" title="6">        <span class="dt">instrumentationType</span><span class="op">:</span> <span class="st">&#39;proAndSPA&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-7" title="7">        <span class="dt">accountId</span><span class="op">:</span> <span class="st">&#39;&lt;some integer&gt;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-8" title="8">        <span class="dt">trustKey</span><span class="op">:</span> <span class="st">&#39;&lt;some integer&gt;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-9" title="9">        <span class="dt">agentID</span><span class="op">:</span> <span class="st">&#39;&lt;some integer&gt;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-10" title="10">        <span class="dt">licenseKey</span><span class="op">:</span> <span class="st">&#39;&lt;the license key&gt;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-11" title="11">        <span class="dt">applicationID</span><span class="op">:</span> <span class="st">&#39;&lt;some integer&gt;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-12" title="12">        <span class="dt">beacon</span><span class="op">:</span> <span class="st">&#39;bam.nr-data.net&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-13" title="13">        <span class="dt">errorBeacon</span><span class="op">:</span> <span class="st">&#39;bam.nr-data.net&#39;</span></a>
<a class="sourceLine" id="cb2-14" title="14">      <span class="op">},</span></a>
<a class="sourceLine" id="cb2-15" title="15">      <span class="dt">staging</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb2-16" title="16">        <span class="dt">instrumentationType</span><span class="op">:</span> <span class="st">&#39;proAndSPA&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-17" title="17">        <span class="dt">accountId</span><span class="op">:</span> <span class="st">&#39;&lt;some integer&gt;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-18" title="18">        <span class="dt">trustKey</span><span class="op">:</span> <span class="st">&#39;&lt;some integer&gt;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-19" title="19">        <span class="dt">agentID</span><span class="op">:</span> <span class="st">&#39;&lt;some integer&gt;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-20" title="20">        <span class="dt">licenseKey</span><span class="op">:</span> <span class="st">&#39;&lt;the license key&gt;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-21" title="21">        <span class="dt">applicationID</span><span class="op">:</span> <span class="st">&#39;&lt;some integer&gt;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-22" title="22">        <span class="dt">beacon</span><span class="op">:</span> <span class="st">&#39;bam.nr-data.net&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-23" title="23">        <span class="dt">errorBeacon</span><span class="op">:</span> <span class="st">&#39;bam.nr-data.net&#39;</span></a>
<a class="sourceLine" id="cb2-24" title="24">      <span class="op">},</span></a>
<a class="sourceLine" id="cb2-25" title="25">      <span class="dt">production</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb2-26" title="26">        <span class="dt">instrumentationType</span><span class="op">:</span> <span class="st">&#39;proAndSPA&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-27" title="27">        <span class="dt">accountId</span><span class="op">:</span> <span class="st">&#39;&lt;some integer&gt;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-28" title="28">        <span class="dt">trustKey</span><span class="op">:</span> <span class="st">&#39;&lt;some integer&gt;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-29" title="29">        <span class="dt">agentID</span><span class="op">:</span> <span class="st">&#39;&lt;some integer&gt;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-30" title="30">        <span class="dt">licenseKey</span><span class="op">:</span> <span class="st">&#39;&lt;the license key&gt;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-31" title="31">        <span class="dt">applicationID</span><span class="op">:</span> <span class="st">&#39;&lt;some integer&gt;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-32" title="32">        <span class="dt">beacon</span><span class="op">:</span> <span class="st">&#39;bam.nr-data.net&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-33" title="33">        <span class="dt">errorBeacon</span><span class="op">:</span> <span class="st">&#39;bam.nr-data.net&#39;</span></a>
<a class="sourceLine" id="cb2-34" title="34">      <span class="op">}</span></a>
<a class="sourceLine" id="cb2-35" title="35">    <span class="op">}</span></a>
<a class="sourceLine" id="cb2-36" title="36">  <span class="op">}</span></a>
<a class="sourceLine" id="cb2-37" title="37"><span class="op">}</span></a></code></pre></div>
<p>If you have no need for multiple environments, you can simply pass a single object like:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="op">{</span></a>
<a class="sourceLine" id="cb3-2" title="2">  <span class="dt">resolve</span><span class="op">:</span> <span class="st">&#39;gatsby-plugin-newrelic&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb3-3" title="3">  <span class="dt">options</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb3-4" title="4">    <span class="dt">configs</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb3-5" title="5">      <span class="dt">instrumentationType</span><span class="op">:</span> <span class="st">&#39;proAndSPA&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb3-6" title="6">        <span class="dt">accountId</span><span class="op">:</span> <span class="st">&#39;&lt;some integer&gt;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb3-7" title="7">        <span class="dt">trustKey</span><span class="op">:</span> <span class="st">&#39;&lt;some integer&gt;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb3-8" title="8">        <span class="dt">agentID</span><span class="op">:</span> <span class="st">&#39;&lt;some integer&gt;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb3-9" title="9">        <span class="dt">licenseKey</span><span class="op">:</span> <span class="st">&#39;&lt;the license key&gt;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb3-10" title="10">        <span class="dt">applicationID</span><span class="op">:</span> <span class="st">&#39;&lt;some integer&gt;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb3-11" title="11">        <span class="dt">beacon</span><span class="op">:</span> <span class="st">&#39;bam.nr-data.net&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb3-12" title="12">        <span class="dt">errorBeacon</span><span class="op">:</span> <span class="st">&#39;bam.nr-data.net&#39;</span></a>
<a class="sourceLine" id="cb3-13" title="13">    <span class="op">}</span></a>
<a class="sourceLine" id="cb3-14" title="14">  <span class="op">}</span></a>
<a class="sourceLine" id="cb3-15" title="15"><span class="op">}</span></a></code></pre></div>
<p>Note - <code>instrumentationType</code> can be <code>lite</code>, <code>pro</code>, <code>proAndSPA</code>, corresponding with levels of our browser agent.</p></li>
<li><p>Set the <code>GATSBY_NEWRELIC_ENV</code> to point at the appropriate config. For local dev you would add <code>GATSBY_NEWRELIC_ENV=dev</code> to the front of your “develop” script in your project’s <code>package.json</code>. For “production” you would add <code>GATSBY_NEWRELIC_ENV=production</code> to the front of the Gatsby “build” command. Ex. <code>package.json</code>:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1">  <span class="st">&quot;scripts&quot;</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb4-2" title="2">    <span class="st">&quot;build&quot;</span><span class="op">:</span> <span class="st">&quot;GATSBY_NEWRELIC_ENV=production gatsby build&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb4-3" title="3">    <span class="st">&quot;build:dev&quot;</span><span class="op">:</span> <span class="st">&quot;GATSBY_NEWRELIC_ENV=dev npm run build&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb4-4" title="4">  <span class="op">}</span></a></code></pre></div></li>
</ol>
<h2 id="getting-started">Getting Started</h2>
<p>Navigate to <a href="https://one.newrelic.com">https://one.newrelic.com</a>, select the <em>Entity Explorer</em> and then select your browser application to monitor metrics of your site.</p>
<h2 id="support">Support</h2>
<p>New Relic hosts and moderates an online forum where customers can interact with New Relic employees as well as other customers to get help and share best practices. Like all official New Relic open source projects, there’s a related Community topic in the New Relic Explorers Hub. You can find this project’s topic/threads here:</p>
<blockquote>
<p>Add the url for the support thread here</p>
</blockquote>
<h2 id="contributing">Contributing</h2>
<p>Full details about how to contribute to Contributions to improve [Project Name] are encouraged! Keep in mind when you submit your pull request, you’ll need to sign the CLA via the click-through using CLA-Assistant. You only have to sign the CLA one time per project. To execute our corporate CLA, which is required if your contribution is on behalf of a company, or if you have any questions, please drop us an email at opensource@newrelic.com.</p>
<h2 id="license">License</h2>
<p><code>gatsby-plugin-newrelic</code> is licensed under the <a href="http://apache.org/licenses/LICENSE-2.0.txt">Apache 2.0</a> License. <code>gatsby-plugin-newrelic</code> also uses source code from third party libraries. Full details on which libraries are used and the terms under which they are licensed can be found in the third party notices document.</p>
</body>
</html>
