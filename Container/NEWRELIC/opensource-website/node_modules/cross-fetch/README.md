cross-fetch  
[![NPM Version](https://img.shields.io/npm/v/cross-fetch.svg?branch=main)](https://www.npmjs.com/package/cross-fetch) [![Downloads Per Week](https://img.shields.io/npm/dw/cross-fetch.svg?color=blue)](https://www.npmjs.com/package/cross-fetch) [![License: MIT](https://img.shields.io/badge/License-MIT-blue.svg)](https://opensource.org/licenses/MIT) ![CI](https://github.com/lquixada/cross-fetch/workflows/CI/badge.svg) [![codecov](https://codecov.io/gh/lquixada/cross-fetch/branch/main/graph/badge.svg)](https://codecov.io/gh/lquixada/cross-fetch) ================

Universal WHATWG Fetch API for Node, Browsers and React Native. The scenario that cross-fetch really shines is when the same JavaScript codebase needs to run on different platforms.

-   **Platform agnostic**: browsers, Node or React Native
-   **Optional polyfill**: it’s up to you if something is going to be added to the global object or not
-   **Simple interface**: no instantiation, no configuration and no extra dependency
-   **WHATWG compliant**: it works the same way wherever your code runs
-   **TypeScript support**: better development experience with types.

------------------------------------------------------------------------

Table of Contents
-----------------

-   [Install](#install)
-   [Usage](#usage)
-   [Demo & API](#demo--api)
-   [FAQ](#faq)
-   [Thanks](#thanks)
-   [License](#license)
-   [Author](#author)

------------------------------------------------------------------------

Install
-------

    npm install --save cross-fetch

As a [ponyfill](https://github.com/sindresorhus/ponyfill):

    // Using ES6 modules with Babel or TypeScript
    import fetch from 'cross-fetch';

    // Using CommonJS modules
    const fetch = require('cross-fetch');

As a polyfill:

    // Using ES6 modules
    import 'cross-fetch/polyfill';

    // Using CommonJS modules
    require('cross-fetch/polyfill');

The CDN build is also available on unpkg:

    <script src="//unpkg.com/cross-fetch/dist/cross-fetch.js"></script>

This adds the fetch function to the window object. Note that this is not UMD compatible.

------------------------------------------------------------------------

Usage
-----

With [promises](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise):

    import fetch from 'cross-fetch';
    // Or just: import 'cross-fetch/polyfill';

    fetch('//api.github.com/users/lquixada')
      .then(res => {
        if (res.status >= 400) {
          throw new Error("Bad response from server");
        }
        return res.json();
      })
      .then(user => {
        console.log(user);
      })
      .catch(err => {
        console.error(err);
      });

With [async/await](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function):

    import fetch from 'cross-fetch';
    // Or just: import 'cross-fetch/polyfill';

    (async () => {
      try {
        const res = await fetch('//api.github.com/users/lquixada');
        
        if (res.status >= 400) {
          throw new Error("Bad response from server");
        }
        
        const user = await res.json();
      
        console.log(user);
      } catch (err) {
        console.error(err);
      }
    })();

> ⚠️ **Warning**: If you’re in an environment that doesn’t support Promises such as Internet Explorer, you must install an ES6 Promise compatible polyfill. [es6-promise](https://github.com/jakearchibald/es6-promise) is suggested.

Demo & API
----------

You can find a comprehensive doc at [Github’s fetch](https://github.github.io/fetch/) page. If you want to play with cross-fetch, check our [**JSFiddle playground**](https://jsfiddle.net/lquixada/3ypqgacp/).

> **Tip**: Run the fiddle on various browsers and with different settings (for instance: cross-domain requests, wrong urls or text requests). Don’t forget to open the console in the test suite page and play around.

FAQ
---

#### Yet another fetch library?

I did a lot of research in order to find a fetch library that could be simple, cross-platform and provide polyfill as an option. There’s a plethora of libs out there but none could match those requirements.

#### Why not isomorphic-fetch?

My preferred library used to be [isomorphic-fetch](https://github.com/matthew-andrews/isomorphic-fetch) but it has this [bug](https://github.com/matthew-andrews/isomorphic-fetch/issues/125) that prevents it from running in a react native environment. It seems unlikely to be fixed since there haven’t been any new commits to it since 2016. That means dependencies are outdated as well.

#### Why polyfill might not be a good idea?

In a word? Risk. If the spec changes in the future, it might be problematic to debug. Read more about it on [sindresorhus’s ponyfill](https://github.com/sindresorhus/ponyfill#how-are-ponyfills-better-than-polyfills) page. It’s up to you if you’re fine with it or not.

#### How does cross-fetch work?

Just like isomorphic-fetch, it is just a proxy. If you’re in node, it delivers you the [node-fetch](https://github.com/bitinn/node-fetch/) library, if you’re in a browser or React Native, it delivers you the github’s [whatwg-fetch](https://github.com/github/fetch/). The same strategy applies whether you’re using polyfill or ponyfill.

Who’s Using It?
---------------

<table><thead><tr class="header"><th style="text-align: center;"><a href="https://www.nytimes.com/"><img src="./docs/images/logo-nytimes.png" alt="The New York Times" /></a></th><th style="text-align: center;"><a href="https://github.com/apollographql/apollo-client/"><img src="./docs/images/logo-apollo.png" alt="Apollo GraphQL" /></a></th><th style="text-align: center;"><a href="https://github.com/facebook/fbjs/"><img src="./docs/images/logo-facebook.png" alt="Facebook" /></a></th><th style="text-align: center;"><a href="https://swagger.io/"><img src="./docs/images/logo-swagger.png" alt="Swagger" /></a></th><th style="text-align: center;"><a href="http://vulcanjs.org"><img src="./docs/images/logo-vulcanjs.png" alt="VulcanJS" /></a></th><th style="text-align: center;"><a href="https://github.com/prisma/graphql-request"><img src="./docs/images/logo-graphql-request.png" alt="graphql-request" /></a></th></tr></thead><tbody><tr class="odd"><td style="text-align: center;">The New York Times</td><td style="text-align: center;">Apollo GraphQL</td><td style="text-align: center;">Facebook</td><td style="text-align: center;">Swagger</td><td style="text-align: center;">VulcanJS</td><td style="text-align: center;">graphql-request</td></tr></tbody></table>

Thanks
------

Heavily inspired by the works of [matthew-andrews](https://github.com/matthew-andrews). Kudos to him!

License
-------

cross-fetch is licensed under the [MIT license](https://github.com/lquixada/cross-fetch/blob/main/LICENSE) © [Leonardo Quixadá](https://twitter.com/lquixada/)

Author
------

<table><thead><tr class="header"><th style="text-align: center;"><a href="https://github.com/lquixada">!<span class="citation" data-cites="lquixada">[@lquixada]</span>(https://avatars0.githubusercontent.com/u/195494?v=4&amp;s=96)</a></th></tr></thead><tbody><tr class="odd"><td style="text-align: center;"><span class="citation" data-cites="lquixada">[@lquixada]</span>(http://www.github.com/lquixada)</td></tr></tbody></table>
