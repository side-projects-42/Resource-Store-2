<span class="citation" data-cites="use-it/event-listener">@use-it/event-listener</span>
=======================================================================================

A custom React Hook that provides a declarative useEventListener.

[![npm version](https://badge.fury.io/js/%40use-it%2Fevent-listener.svg)](https://badge.fury.io/js/%40use-it%2Fevent-listener) [![All Contributors](https://img.shields.io/badge/all_contributors-3-orange.svg?style=flat-square)](#contributors)

This hook was inspired by [Dan Abramov](https://github.com/gaearon)’s blog post [“Making setInterval Declarative with React Hooks”](https://overreacted.io/making-setinterval-declarative-with-react-hooks/).

I needed a way to simplify the plumbing around adding and removing an event listener in a custom hook. That lead to a [chain of tweets](https://twitter.com/donavon/status/1093612936621379584) between Dan and myself.

Installation
------------

    $ npm i @use-it/event-listener

or

    $ yarn add @use-it/event-listener

Usage
-----

Here is a basic setup.

    useEventListener(eventName, handler, element, options);

### Parameters

Here are the parameters that you can use. (\* = optional)

<table style="width:99%;"><colgroup><col style="width: 4%" /><col style="width: 95%" /></colgroup><thead><tr class="header"><th style="text-align: left;">Parameter</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;"><code>eventName</code></td><td style="text-align: left;">The event name (string). Here is a list of <a href="https://developer.mozilla.org/en-US/docs/Web/Events">common events</a>.</td></tr><tr class="even"><td style="text-align: left;"><code>handler</code></td><td style="text-align: left;">A function that will be called whenever <code>eventName</code> fires on <code>element</code>.</td></tr><tr class="odd"><td style="text-align: left;"><code>element</code>*</td><td style="text-align: left;">An optional element to listen on. Defaults to <code>global</code> (i.e., <code>window</code>).</td></tr><tr class="even"><td style="text-align: left;"><code>options</code>*</td><td style="text-align: left;">An object <code>{ capture?: boolean, passive?: boolean, once?: boolean }</code> to be passed to <code>addEventListener</code>. For advanced use cases. See <a href="https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener">MDN</a> for details.</td></tr></tbody></table>

### Return

This hook returns nothing.

Example
-------

Let’s look at some sample code. Suppose you would like to track the mouse position. You *could* subscribe to mouse move events with like this.

    const useMouseMove = () => {
      const [coords, setCoords] = useState([0, 0]);

      useEffect(() => {
        const handler = ({ clientX, clientY }) => {
          setCoords([clientX, clientY]);
        };
        window.addEventListener('mousemove', handler);
        return () => {
          window.removeEventListener('mousemove', handler);
        };
      }, []);

      return coords;
    };

Here we’re using `useEffect` to roll our own handler add/remove event listener.

`useEventListener` abstracts this away. You only need to care about the event name and the handler function.

    const useMouseMove = () => {
      const [coords, setCoords] = useState([0, 0]);

      useEventListener('mousemove', ({ clientX, clientY }) => {
        setCoords([clientX, clientY]);
      });

      return coords;
    };

Live demo
---------

You can view/edit the sample code above on CodeSandbox.

[![Edit demo app on CodeSandbox](https://codesandbox.io/static/img/play-codesandbox.svg)](https://codesandbox.io/s/k38lyx2q9o)

License
-------

**[MIT](LICENSE)** Licensed

Contributors
------------

Thanks goes to these wonderful people ([emoji key](https://github.com/all-contributors/all-contributors#emoji-key)):

<table><tbody><tr class="odd"><td style="text-align: center;"><a href="http://donavon.com"><img src="https://avatars3.githubusercontent.com/u/887639?v=4" /><br />
<sub><strong>Donavon West</strong></sub></a><br />
<a href="#infra-donavon" title="Infrastructure (Hosting, Build-Tools, etc)">🚇</a> <a href="https://github.com/donavon/use-event-listener/commits?author=donavon" title="Tests">⚠️</a> <a href="#example-donavon" title="Examples">💡</a> <a href="#ideas-donavon" title="Ideas, Planning, &amp; Feedback">🤔</a> <a href="#maintenance-donavon" title="Maintenance">🚧</a> <a href="https://github.com/donavon/use-event-listener/pulls?q=is%3Apr+reviewed-by%3Adonavon" title="Reviewed Pull Requests">👀</a> <a href="#tool-donavon" title="Tools">🔧</a> <a href="https://github.com/donavon/use-event-listener/commits?author=donavon" title="Code">💻</a></td><td style="text-align: center;"><a href="https://github.com/third774"><img src="https://avatars3.githubusercontent.com/u/8732191?v=4" /><br />
<sub><strong>Kevin Kipp</strong></sub></a><br />
<a href="https://github.com/donavon/use-event-listener/commits?author=third774" title="Code">💻</a></td><td style="text-align: center;"><a href="https://github.com/wKovacs64"><img src="https://avatars1.githubusercontent.com/u/1288694?v=4" /><br />
<sub><strong>Justin Hall</strong></sub></a><br />
<a href="https://github.com/donavon/use-event-listener/commits?author=wKovacs64" title="Code">💻</a> <a href="https://github.com/donavon/use-event-listener/commits?author=wKovacs64" title="Documentation">📖</a></td><td style="text-align: center;"><a href="https://github.com/huan086"><img src="https://avatars2.githubusercontent.com/u/1448788?v=4" /><br />
<sub><strong>Jeow Li Huan</strong></sub></a><br />
<a href="https://github.com/donavon/use-event-listener/pulls?q=is%3Apr+reviewed-by%3Ahuan086" title="Reviewed Pull Requests">👀</a></td><td style="text-align: center;"><a href="http://normanrz.com/"><img src="https://avatars1.githubusercontent.com/u/335438?v=4" /><br />
<sub><strong>Norman Rzepka</strong></sub></a><br />
<a href="#ideas-normanrz" title="Ideas, Planning, &amp; Feedback">🤔</a></td><td style="text-align: center;"><a href="https://github.com/bvanderdrift"><img src="https://avatars1.githubusercontent.com/u/6398452?v=4" /><br />
<sub><strong>Beer van der Drift</strong></sub></a><br />
<a href="https://github.com/donavon/use-event-listener/commits?author=bvanderdrift" title="Tests">⚠️</a> <a href="https://github.com/donavon/use-event-listener/commits?author=bvanderdrift" title="Code">💻</a></td><td style="text-align: center;"><a href="https://github.com/pruge"><img src="https://avatars1.githubusercontent.com/u/5827473?v=4" /><br />
<sub><strong>clingsoft</strong></sub></a><br />
<a href="https://github.com/donavon/use-event-listener/commits?author=pruge" title="Code">💻</a></td></tr></tbody></table>

This project follows the [all-contributors](https://github.com/all-contributors/all-contributors) specification. Contributions of any kind welcome!
