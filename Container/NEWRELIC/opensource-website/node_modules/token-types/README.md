![Node.js CI](https://github.com/Borewit/token-types/workflows/Node.js%20CI/badge.svg) [![NPM version](https://badge.fury.io/js/token-types.svg)](https://npmjs.org/package/token-types) [![npm downloads](http://img.shields.io/npm/dm/token-types.svg)](https://npmcharts.com/compare/token-types,strtok3?start=1200&interval=30) [![coveralls](https://coveralls.io/repos/github/Borewit/token-types/badge.svg?branch=master)](https://coveralls.io/github/Borewit/token-types?branch=master) [![Codacy Badge](https://api.codacy.com/project/badge/Grade/4723ce4613fc49cda8db5eed29f18834)](https://www.codacy.com/app/Borewit/token-types?utm_source=github.com&utm_medium=referral&utm_content=Borewit/token-types&utm_campaign=Badge_Grade) [![Language grade: JavaScript](https://img.shields.io/lgtm/grade/javascript/g/Borewit/token-types.svg?logo=lgtm&logoWidth=18)](https://lgtm.com/projects/g/Borewit/token-types/context:javascript) [![Total alerts](https://img.shields.io/lgtm/alerts/g/Borewit/token-types.svg?logo=lgtm&logoWidth=18)](https://lgtm.com/projects/g/Borewit/token-types/alerts/) [![DeepScan grade](https://deepscan.io/api/teams/5165/projects/6940/branches/61852/badge/grade.svg)](https://deepscan.io/dashboard#view=project&tid=5165&pid=6940&bid=61852) [![Known Vulnerabilities](https://snyk.io/test/github/Borewit/token-types/badge.svg?targetFile=package.json)](https://snyk.io/test/github/Borewit/token-types?targetFile=package.json)

token-types
===========

A primitive token library used to read and write from a node `Buffer`. Although it is possible to use this module directly, it is primary designed to be used with [strtok3 tokenizer](https://github.com/Borewit/strtok3).

Installation
------------

    npm install --save token-types

Usually in combination with [strtok3](https://github.com/Borewit/strtok3):

    npm install --save strtok3

Example
-------

    const strtok3 = require('strtok3');
    const token = require('token-types');
        
    (async () => {

      const tokenizer = await strtok3.fromFile("somefile.bin");
      try {
        const myNumber = await tokenizer.readToken(token.Float32_BE);
        console.log(`My number: ${myNumber}`);
      } finally {
        tokenizer.close(); // Close the file
      } 
    })();

Tokens
------

### Numeric tokens

`node-strtok` supports a wide variety of numerical tokens out of the box:

<table><thead><tr class="header"><th>Token</th><th>Number</th><th>Bits</th><th>Endianness</th></tr></thead><tbody><tr class="odd"><td><code>UINT8</code></td><td>Unsigned integer</td><td>8</td><td>n/a</td></tr><tr class="even"><td><code>UINT16_BE</code></td><td>Unsigned integer</td><td>16</td><td>big endian</td></tr><tr class="odd"><td><code>UINT16_LE</code></td><td>Unsigned integer</td><td>16</td><td>little endian</td></tr><tr class="even"><td><code>UINT24_BE</code></td><td>Unsigned integer</td><td>24</td><td>big endian</td></tr><tr class="odd"><td><code>UINT24_LE</code></td><td>Unsigned integer</td><td>24</td><td>little endian</td></tr><tr class="even"><td><code>UINT32_BE</code></td><td>Unsigned integer</td><td>32</td><td>big endian</td></tr><tr class="odd"><td><code>UINT32_LE</code></td><td>Unsigned integer</td><td>32</td><td>little endian</td></tr><tr class="even"><td><code>UINT64_BE</code></td><td>Unsigned integer</td><td>64</td><td>big endian</td></tr><tr class="odd"><td><code>UINT64_LE</code>*</td><td>Unsigned integer</td><td>64</td><td>little endian</td></tr><tr class="even"><td><code>INT8</code></td><td>Signed integer</td><td>8</td><td>n/a</td></tr><tr class="odd"><td><code>INT16_BE</code></td><td>Signed integer</td><td>16</td><td>big endian</td></tr><tr class="even"><td><code>INT16_LE</code></td><td>Signed integer</td><td>16</td><td>little endian</td></tr><tr class="odd"><td><code>INT24_BE</code></td><td>Signed integer</td><td>24</td><td>big endian</td></tr><tr class="even"><td><code>INT24_LE</code></td><td>Signed integer</td><td>24</td><td>little endian</td></tr><tr class="odd"><td><code>INT32_BE</code></td><td>Signed integer</td><td>32</td><td>big endian</td></tr><tr class="even"><td><code>INT32_LE</code></td><td>Signed integer</td><td>32</td><td>little endian</td></tr><tr class="odd"><td><code>INT64_BE</code></td><td>Signed integer</td><td>64</td><td>big endian</td></tr><tr class="even"><td><code>INT64_LE</code>*</td><td>Signed integer</td><td>64</td><td>little endian</td></tr><tr class="odd"><td><code>Float16_BE</code></td><td>IEEE 754 float</td><td>16</td><td>big endian</td></tr><tr class="even"><td><code>Float16_LE</code></td><td>IEEE 754 float</td><td>16</td><td>little endian</td></tr><tr class="odd"><td><code>Float32_BE</code></td><td>IEEE 754 float</td><td>32</td><td>big endian</td></tr><tr class="even"><td><code>Float32_LE</code></td><td>IEEE 754 float</td><td>32</td><td>little endian</td></tr><tr class="odd"><td><code>Float64_BE</code></td><td>IEEE 754 float</td><td>64</td><td>big endian</td></tr><tr class="even"><td><code>Float64_LE</code></td><td>IEEE 754 float</td><td>64</td><td>little endian</td></tr><tr class="odd"><td><code>Float80_BE</code>*</td><td>IEEE 754 float</td><td>80</td><td>big endian</td></tr><tr class="even"><td><code>Float80_LE</code>*</td><td>IEEE 754 float</td><td>80</td><td>little endian</td></tr></tbody></table>

### Other tokens

String types: \* Windows-1252 \* ISO-8859-1

\*) The tokens exceed the JavaScript IEEE 754 64-bit Floating Point precision, decoding and encoding is best effort based.

### Custom token

Complex tokens can be added, which makes very suitable for reading binary files or network messages:

     ExtendedHeader = {
        len: 10,

        get: (buf, off) => {
          return {
            // Extended header size
            size: Token.UINT32_BE.get(buf, off),
            // Extended Flags
            extendedFlags: Token.UINT16_BE.get(buf, off + 4),
            // Size of padding
            sizeOfPadding: Token.UINT32_BE.get(buf, off + 6),
            // CRC data present
            crcDataPresent: common.strtokBITSET.get(buf, off + 4, 31)
          };
        }
      };
