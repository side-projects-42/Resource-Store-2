<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>readme</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<div data-align="center">
<pre><code>&lt;br&gt;
&lt;br&gt;
&lt;img width=&quot;360&quot; src=&quot;media/logo.svg&quot; alt=&quot;Got&quot;&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;p align=&quot;center&quot;&gt;Huge thanks to &lt;a href=&quot;https://moxy.studio&quot;&gt;&lt;img src=&quot;https://sindresorhus.com/assets/thanks/moxy-logo.svg&quot; width=&quot;150&quot;&gt;&lt;/a&gt; for sponsoring me!
&lt;/p&gt;
&lt;br&gt;
&lt;br&gt;</code></pre>
</div>
<blockquote>
<p>Simplified HTTP requests</p>
</blockquote>
<p><a href="https://travis-ci.org/sindresorhus/got"><img src="https://travis-ci.org/sindresorhus/got.svg?branch=master" alt="Build Status: Linux" /></a> <a href="https://coveralls.io/github/sindresorhus/got?branch=master"><img src="https://coveralls.io/repos/github/sindresorhus/got/badge.svg?branch=master" alt="Coverage Status" /></a> <a href="https://npmjs.com/got"><img src="https://img.shields.io/npm/dm/got.svg" alt="Downloads" /></a> <a href="https://packagephobia.now.sh/result?p=got"><img src="https://packagephobia.now.sh/badge?p=got" alt="Install size" /></a></p>
<p>Got is a human-friendly and powerful HTTP request library.</p>
<p>It was created because the popular <a href="https://github.com/request/request"><code>request</code></a> package is bloated: <a href="https://packagephobia.now.sh/result?p=request"><img src="https://packagephobia.now.sh/badge?p=request" alt="Install size" /></a></p>
<p>Got is for Node.js. For browsers, we recommend <a href="https://github.com/sindresorhus/ky">Ky</a>.</p>
<h2 id="highlights">Highlights</h2>
<ul>
<li><a href="#api">Promise &amp; stream API</a></li>
<li><a href="#aborting-the-request">Request cancelation</a></li>
<li><a href="#cache-adapters">RFC compliant caching</a></li>
<li><a href="#followredirect">Follows redirects</a></li>
<li><a href="#retry">Retries on failure</a></li>
<li><a href="#onuploadprogress-progress">Progress events</a></li>
<li><a href="#decompress">Handles gzip/deflate</a></li>
<li><a href="#timeout">Timeout handling</a></li>
<li><a href="#errors">Errors with metadata</a></li>
<li><a href="#json">JSON mode</a></li>
<li><a href="#url">WHATWG URL support</a></li>
<li><a href="#hooks">Hooks</a></li>
<li><a href="#instances">Instances with custom defaults</a></li>
<li><a href="advanced-creation.md#merging-instances">Composable</a></li>
<li><a href="#useelectronnet">Electron support</a></li>
<li><a href="https://github.com/sindresorhus/got/network/dependents">Used by ~2000 packages and ~500K repos</a></li>
<li>Actively maintained</li>
</ul>
<p><a href="migration-guides.md">Moving from Request?</a></p>
<p><a href="#comparison">See how Got compares to other HTTP libraries</a></p>
<h2 id="install">Install</h2>
<pre><code>$ npm install got</code></pre>
<p><a href="https://www.patreon.com/sindresorhus"> <img src="https://c5.patreon.com/external/logo/become_a_patron_button@2x.png" width="160"> </a></p>
<h2 id="usage">Usage</h2>
<div class="sourceCode" id="cb3"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="kw">const</span> got <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;got&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-2" title="2"></a>
<a class="sourceLine" id="cb3-3" title="3">(<span class="kw">async</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb3-4" title="4">    <span class="cf">try</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb3-5" title="5">        <span class="kw">const</span> response <span class="op">=</span> <span class="cf">await</span> <span class="at">got</span>(<span class="st">&#39;sindresorhus.com&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-6" title="6">        <span class="va">console</span>.<span class="at">log</span>(<span class="va">response</span>.<span class="at">body</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-7" title="7">        <span class="co">//=&gt; &#39;&lt;!doctype html&gt; ...&#39;</span></a>
<a class="sourceLine" id="cb3-8" title="8">    <span class="op">}</span> <span class="cf">catch</span> (error) <span class="op">{</span></a>
<a class="sourceLine" id="cb3-9" title="9">        <span class="va">console</span>.<span class="at">log</span>(<span class="va">error</span>.<span class="va">response</span>.<span class="at">body</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-10" title="10">        <span class="co">//=&gt; &#39;Internal server error ...&#39;</span></a>
<a class="sourceLine" id="cb3-11" title="11">    <span class="op">}</span></a>
<a class="sourceLine" id="cb3-12" title="12"><span class="op">}</span>)()<span class="op">;</span></a></code></pre></div>
<h6 id="streams">Streams</h6>
<div class="sourceCode" id="cb4"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1"><span class="kw">const</span> fs <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;fs&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-2" title="2"><span class="kw">const</span> got <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;got&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-3" title="3"></a>
<a class="sourceLine" id="cb4-4" title="4"><span class="va">got</span>.<span class="at">stream</span>(<span class="st">&#39;sindresorhus.com&#39;</span>).<span class="at">pipe</span>(<span class="va">fs</span>.<span class="at">createWriteStream</span>(<span class="st">&#39;index.html&#39;</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb4-5" title="5"></a>
<a class="sourceLine" id="cb4-6" title="6"><span class="co">// For POST, PUT, and PATCH methods `got.stream` returns a `stream.Writable`</span></a>
<a class="sourceLine" id="cb4-7" title="7"><span class="va">fs</span>.<span class="at">createReadStream</span>(<span class="st">&#39;index.html&#39;</span>).<span class="at">pipe</span>(<span class="va">got</span>.<span class="va">stream</span>.<span class="at">post</span>(<span class="st">&#39;sindresorhus.com&#39;</span>))<span class="op">;</span></a></code></pre></div>
<h3 id="api">API</h3>
<p>It’s a <code>GET</code> request by default, but can be changed by using different methods or in the <code>options</code>.</p>
<h4 id="goturl-options">got(url, <a href="#options">options</a>)</h4>
<p>Returns a Promise for a <a href="#response"><code>response</code> object</a> or a <a href="#streams-1">stream</a> if <code>options.stream</code> is set to true.</p>
<h5 id="url">url</h5>
<p>Type: <code>string</code> <code>Object</code></p>
<p>The URL to request, as a string, a <a href="https://nodejs.org/api/https.html#https_https_request_options_callback"><code>https.request</code> options object</a>, or a <a href="https://nodejs.org/api/url.html#url_class_url">WHATWG <code>URL</code></a>.</p>
<p>Properties from <code>options</code> will override properties in the parsed <code>url</code>.</p>
<p>If no protocol is specified, it will default to <code>https</code>.</p>
<h5 id="options">options</h5>
<p>Type: <code>Object</code></p>
<p>Any of the <a href="https://nodejs.org/api/https.html#https_https_request_options_callback"><code>https.request</code></a> options.</p>
<h6 id="baseurl">baseUrl</h6>
<p>Type: <code>string</code> <code>Object</code></p>
<p>When specified, <code>url</code> will be prepended by <code>baseUrl</code>.<br> If you specify an absolute URL, it will skip the <code>baseUrl</code>.</p>
<p>Very useful when used with <code>got.extend()</code> to create niche-specific Got instances.</p>
<p>Can be a string or a <a href="https://nodejs.org/api/url.html#url_class_url">WHATWG <code>URL</code></a>.</p>
<p>Slash at the end of <code>baseUrl</code> and at the beginning of the <code>url</code> argument is optional:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb5-1" title="1"><span class="cf">await</span> <span class="at">got</span>(<span class="st">&#39;hello&#39;</span><span class="op">,</span> <span class="op">{</span><span class="dt">baseUrl</span><span class="op">:</span> <span class="st">&#39;https://example.com/v1&#39;</span><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb5-2" title="2"><span class="co">//=&gt; &#39;https://example.com/v1/hello&#39;</span></a>
<a class="sourceLine" id="cb5-3" title="3"></a>
<a class="sourceLine" id="cb5-4" title="4"><span class="cf">await</span> <span class="at">got</span>(<span class="st">&#39;/hello&#39;</span><span class="op">,</span> <span class="op">{</span><span class="dt">baseUrl</span><span class="op">:</span> <span class="st">&#39;https://example.com/v1/&#39;</span><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb5-5" title="5"><span class="co">//=&gt; &#39;https://example.com/v1/hello&#39;</span></a>
<a class="sourceLine" id="cb5-6" title="6"></a>
<a class="sourceLine" id="cb5-7" title="7"><span class="cf">await</span> <span class="at">got</span>(<span class="st">&#39;/hello&#39;</span><span class="op">,</span> <span class="op">{</span><span class="dt">baseUrl</span><span class="op">:</span> <span class="st">&#39;https://example.com/v1&#39;</span><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb5-8" title="8"><span class="co">//=&gt; &#39;https://example.com/v1/hello&#39;</span></a></code></pre></div>
<h6 id="headers">headers</h6>
<p>Type: <code>Object</code><br> Default: <code>{}</code></p>
<p>Request headers.</p>
<p>Existing headers will be overwritten. Headers set to <code>null</code> will be omitted.</p>
<h6 id="stream">stream</h6>
<p>Type: <code>boolean</code><br> Default: <code>false</code></p>
<p>Returns a <code>Stream</code> instead of a <code>Promise</code>. This is equivalent to calling <code>got.stream(url, [options])</code>.</p>
<h6 id="body">body</h6>
<p>Type: <code>string</code> <code>Buffer</code> <code>stream.Readable</code> <a href="https://github.com/form-data/form-data"><code>form-data</code> instance</a></p>
<p><strong>Note:</strong> If you provide this option, <code>got.stream()</code> will be read-only.</p>
<p>The body that will be sent with a <code>POST</code> request.</p>
<p>If present in <code>options</code> and <code>options.method</code> is not set, <code>options.method</code> will be set to <code>POST</code>.</p>
<p>The <code>content-length</code> header will be automatically set if <code>body</code> is a <code>string</code> / <code>Buffer</code> / <code>fs.createReadStream</code> instance / <a href="https://github.com/form-data/form-data"><code>form-data</code> instance</a>, and <code>content-length</code> and <code>transfer-encoding</code> are not manually set in <code>options.headers</code>.</p>
<h6 id="cookiejar">cookieJar</h6>
<p>Type: <a href="https://github.com/salesforce/tough-cookie#cookiejar"><code>tough.CookieJar</code> instance</a></p>
<p><strong>Note:</strong> If you provide this option, <code>options.headers.cookie</code> will be overridden.</p>
<p>Cookie support. You don’t have to care about parsing or how to store them. <a href="#cookies">Example.</a></p>
<h6 id="encoding">encoding</h6>
<p>Type: <code>string</code> <code>null</code><br> Default: <code>'utf8'</code></p>
<p><a href="https://nodejs.org/api/buffer.html#buffer_buffers_and_character_encodings">Encoding</a> to be used on <code>setEncoding</code> of the response data. If <code>null</code>, the body is returned as a <a href="https://nodejs.org/api/buffer.html"><code>Buffer</code></a> (binary data).</p>
<h6 id="form">form</h6>
<p>Type: <code>boolean</code><br> Default: <code>false</code></p>
<p><strong>Note:</strong> If you provide this option, <code>got.stream()</code> will be read-only. <strong>Note:</strong> <code>body</code> must be a plain object. It will be converted to a query string using <a href="https://nodejs.org/api/url.html#url_constructor_new_urlsearchparams_obj"><code>(new URLSearchParams(object)).toString()</code></a>.</p>
<p>If set to <code>true</code> and <code>Content-Type</code> header is not set, it will be set to <code>application/x-www-form-urlencoded</code>.</p>
<h6 id="json">json</h6>
<p>Type: <code>boolean</code><br> Default: <code>false</code></p>
<p><strong>Note:</strong> If you use <code>got.stream()</code>, this option will be ignored. <strong>Note:</strong> <code>body</code> must be a plain object or array and will be stringified.</p>
<p>If set to <code>true</code> and <code>Content-Type</code> header is not set, it will be set to <code>application/json</code>.</p>
<p>Parse response body with <code>JSON.parse</code> and set <code>accept</code> header to <code>application/json</code>. If used in conjunction with the <code>form</code> option, the <code>body</code> will the stringified as querystring and the response parsed as JSON.</p>
<h6 id="query">query</h6>
<p>Type: <code>string</code> <code>Object&lt;string, string|number&gt;</code> <a href="https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams"><code>URLSearchParams</code></a></p>
<p>Query string that will be added to the request URL. This will override the query string in <code>url</code>.</p>
<p>If you need to pass in an array, you can do it using a <code>URLSearchParams</code> instance:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb6-1" title="1"><span class="kw">const</span> got <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;got&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-2" title="2"></a>
<a class="sourceLine" id="cb6-3" title="3"><span class="kw">const</span> query <span class="op">=</span> <span class="kw">new</span> <span class="at">URLSearchParams</span>([[<span class="st">&#39;key&#39;</span><span class="op">,</span> <span class="st">&#39;a&#39;</span>]<span class="op">,</span> [<span class="st">&#39;key&#39;</span><span class="op">,</span> <span class="st">&#39;b&#39;</span>]])<span class="op">;</span></a>
<a class="sourceLine" id="cb6-4" title="4"></a>
<a class="sourceLine" id="cb6-5" title="5"><span class="at">got</span>(<span class="st">&#39;https://example.com&#39;</span><span class="op">,</span> <span class="op">{</span>query<span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-6" title="6"></a>
<a class="sourceLine" id="cb6-7" title="7"><span class="va">console</span>.<span class="at">log</span>(<span class="va">query</span>.<span class="at">toString</span>())<span class="op">;</span></a>
<a class="sourceLine" id="cb6-8" title="8"><span class="co">//=&gt; &#39;key=a&amp;key=b&#39;</span></a></code></pre></div>
<p>And if you need a different array format, you could use the <a href="https://github.com/sindresorhus/query-string"><code>query-string</code></a> package:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb7-1" title="1"><span class="kw">const</span> got <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;got&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-2" title="2"><span class="kw">const</span> queryString <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;query-string&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-3" title="3"></a>
<a class="sourceLine" id="cb7-4" title="4"><span class="kw">const</span> query <span class="op">=</span> <span class="va">queryString</span>.<span class="at">stringify</span>(<span class="op">{</span><span class="dt">key</span><span class="op">:</span> [<span class="st">&#39;a&#39;</span><span class="op">,</span> <span class="st">&#39;b&#39;</span>]<span class="op">},</span> <span class="op">{</span><span class="dt">arrayFormat</span><span class="op">:</span> <span class="st">&#39;bracket&#39;</span><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-5" title="5"></a>
<a class="sourceLine" id="cb7-6" title="6"><span class="at">got</span>(<span class="st">&#39;https://example.com&#39;</span><span class="op">,</span> <span class="op">{</span>query<span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-7" title="7"></a>
<a class="sourceLine" id="cb7-8" title="8"><span class="va">console</span>.<span class="at">log</span>(query)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-9" title="9"><span class="co">//=&gt; &#39;key[]=a&amp;key[]=b&#39;</span></a></code></pre></div>
<h6 id="timeout">timeout</h6>
<p>Type: <code>number</code> <code>Object</code></p>
<p>Milliseconds to wait for the server to end the response before aborting the request with <a href="#gottimeouterror"><code>got.TimeoutError</code></a> error (a.k.a. <code>request</code> property). By default, there’s no timeout.</p>
<p>This also accepts an <code>object</code> with the following fields to constrain the duration of each phase of the request lifecycle:</p>
<ul>
<li><code>lookup</code> starts when a socket is assigned and ends when the hostname has been resolved. Does not apply when using a Unix domain socket.</li>
<li><code>connect</code> starts when <code>lookup</code> completes (or when the socket is assigned if lookup does not apply to the request) and ends when the socket is connected.</li>
<li><code>secureConnect</code> starts when <code>connect</code> completes and ends when the handshaking process completes (HTTPS only).</li>
<li><code>socket</code> starts when the socket is connected. See <a href="https://nodejs.org/api/http.html#http_request_settimeout_timeout_callback">request.setTimeout</a>.</li>
<li><code>response</code> starts when the request has been written to the socket and ends when the response headers are received.</li>
<li><code>send</code> starts when the socket is connected and ends with the request has been written to the socket.</li>
<li><code>request</code> starts when the request is initiated and ends when the response’s end event fires.</li>
</ul>
<h6 id="retry">retry</h6>
<p>Type: <code>number</code> <code>Object</code><br> Default: - retries: <code>2</code> - methods: <code>GET</code> <code>PUT</code> <code>HEAD</code> <code>DELETE</code> <code>OPTIONS</code> <code>TRACE</code> - statusCodes: <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/408"><code>408</code></a> <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/413"><code>413</code></a> <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/429"><code>429</code></a> <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/500"><code>500</code></a> <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/502"><code>502</code></a> <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/503"><code>503</code></a> <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/504"><code>504</code></a> - maxRetryAfter: <code>undefined</code> - errorCodes: <code>ETIMEDOUT</code> <code>ECONNRESET</code> <code>EADDRINUSE</code> <code>ECONNREFUSED</code> <code>EPIPE</code> <code>ENOTFOUND</code> <code>ENETUNREACH</code> <code>EAI_AGAIN</code></p>
<p>An object representing <code>retries</code>, <code>methods</code>, <code>statusCodes</code>, <code>maxRetryAfter</code> and <code>errorCodes</code> fields for the time until retry, allowed methods, allowed status codes, maximum <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Retry-After"><code>Retry-After</code></a> time and allowed error codes.</p>
<p>If <code>maxRetryAfter</code> is set to <code>undefined</code>, it will use <code>options.timeout</code>.<br> If <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Retry-After"><code>Retry-After</code></a> header is greater than <code>maxRetryAfter</code>, it will cancel the request.</p>
<p>Delays between retries counts with function <code>1000 * Math.pow(2, retry) + Math.random() * 100</code>, where <code>retry</code> is attempt number (starts from 1).</p>
<p>The <code>retries</code> property can be a <code>number</code> or a <code>function</code> with <code>retry</code> and <code>error</code> arguments. The function must return a delay in milliseconds (<code>0</code> return value cancels retry).</p>
<p>By default, it retries <em>only</em> on the specified methods, status codes, and on these network errors: - <code>ETIMEDOUT</code>: One of the <a href="#timeout">timeout</a> limits were reached. - <code>ECONNRESET</code>: Connection was forcibly closed by a peer. - <code>EADDRINUSE</code>: Could not bind to any free port. - <code>ECONNREFUSED</code>: Connection was refused by the server. - <code>EPIPE</code>: The remote side of the stream being written has been closed. - <code>ENOTFOUND</code>: Couldn’t resolve the hostname to an IP address. - <code>ENETUNREACH</code>: No internet connection. - <code>EAI_AGAIN</code>: DNS lookup timed out.</p>
<h6 id="followredirect">followRedirect</h6>
<p>Type: <code>boolean</code><br> Default: <code>true</code></p>
<p>Defines if redirect responses should be followed automatically.</p>
<p>Note that if a <code>303</code> is sent by the server in response to any request type (<code>POST</code>, <code>DELETE</code>, etc.), Got will automatically request the resource pointed to in the location header via <code>GET</code>. This is in accordance with <a href="https://tools.ietf.org/html/rfc7231#section-6.4.4">the spec</a>.</p>
<h6 id="decompress">decompress</h6>
<p>Type: <code>boolean</code><br> Default: <code>true</code></p>
<p>Decompress the response automatically. This will set the <code>accept-encoding</code> header to <code>gzip, deflate</code> unless you set it yourself.</p>
<p>If this is disabled, a compressed response is returned as a <code>Buffer</code>. This may be useful if you want to handle decompression yourself or stream the raw compressed data.</p>
<h6 id="cache">cache</h6>
<p>Type: <code>Object</code><br> Default: <code>false</code></p>
<p><a href="#cache-adapters">Cache adapter instance</a> for storing cached data.</p>
<h6 id="request">request</h6>
<p>Type: <code>Function</code><br> Default: <code>http.request</code> <code>https.request</code> <em>(depending on the protocol)</em></p>
<p>Custom request function. The main purpose of this is to <a href="#experimental-http2-support">support HTTP2 using a wrapper</a>.</p>
<h6 id="useelectronnet">useElectronNet</h6>
<p>Type: <code>boolean</code><br> Default: <code>false</code></p>
<p>When used in Electron, Got will use <a href="https://electronjs.org/docs/api/net/"><code>electron.net</code></a> instead of the Node.js <code>http</code> module. According to the Electron docs, it should be fully compatible, but it’s not entirely. See <a href="https://github.com/sindresorhus/got/issues/443">#443</a> and <a href="https://github.com/sindresorhus/got/issues/461">#461</a>.</p>
<h6 id="throwhttperrors">throwHttpErrors</h6>
<p>Type: <code>boolean</code><br> Default: <code>true</code></p>
<p>Determines if a <code>got.HTTPError</code> is thrown for error responses (non-2xx status codes).</p>
<p>If this is disabled, requests that encounter an error status code will be resolved with the <code>response</code> instead of throwing. This may be useful if you are checking for resource availability and are expecting error responses.</p>
<h6 id="agent">agent</h6>
<p>Same as the <a href="https://nodejs.org/api/http.html#http_http_request_url_options_callback"><code>agent</code> option</a> for <code>http.request</code>, but with an extra feature:</p>
<p>If you require different agents for different protocols, you can pass a map of agents to the <code>agent</code> option. This is necessary because a request to one protocol might redirect to another. In such a scenario, Got will switch over to the right protocol agent for you.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb8-1" title="1"><span class="kw">const</span> got <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;got&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-2" title="2"><span class="kw">const</span> HttpAgent <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;agentkeepalive&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-3" title="3"><span class="kw">const</span> <span class="op">{</span>HttpsAgent<span class="op">}</span> <span class="op">=</span> HttpAgent<span class="op">;</span></a>
<a class="sourceLine" id="cb8-4" title="4"></a>
<a class="sourceLine" id="cb8-5" title="5"><span class="at">got</span>(<span class="st">&#39;sindresorhus.com&#39;</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb8-6" title="6">    <span class="dt">agent</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb8-7" title="7">        <span class="dt">http</span><span class="op">:</span> <span class="kw">new</span> <span class="at">HttpAgent</span>()<span class="op">,</span></a>
<a class="sourceLine" id="cb8-8" title="8">        <span class="dt">https</span><span class="op">:</span> <span class="kw">new</span> <span class="at">HttpsAgent</span>()</a>
<a class="sourceLine" id="cb8-9" title="9">    <span class="op">}</span></a>
<a class="sourceLine" id="cb8-10" title="10"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h6 id="hooks">hooks</h6>
<p>Type: <code>Object&lt;string, Function[]&gt;</code></p>
<p>Hooks allow modifications during the request lifecycle. Hook functions may be async and are run serially.</p>
<h6 id="hooks.init">hooks.init</h6>
<p>Type: <code>Function[]</code><br> Default: <code>[]</code></p>
<p>Called with plain <a href="#options">request options</a>, right before their normalization. This is especially useful in conjunction with <a href="#instances"><code>got.extend()</code></a> and <a href="advanced-creation.md"><code>got.create()</code></a> when the input needs custom handling.</p>
<p>See the <a href="migration-guides.md#breaking-changes">Request migration guide</a> for an example.</p>
<p><strong>Note</strong>: This hook must be synchronous!</p>
<h6 id="hooks.beforerequest">hooks.beforeRequest</h6>
<p>Type: <code>Function[]</code><br> Default: <code>[]</code></p>
<p>Called with <a href="source/normalize-arguments.js">normalized</a> <a href="#options">request options</a>. Got will make no further changes to the request before it is sent. This is especially useful in conjunction with <a href="#instances"><code>got.extend()</code></a> and <a href="advanced-creation.md"><code>got.create()</code></a> when you want to create an API client that, for example, uses HMAC-signing.</p>
<p>See the <a href="#aws">AWS section</a> for an example.</p>
<p><strong>Note:</strong> If you modify the <code>body</code> you will need to modify the <code>content-length</code> header too, because it has already been computed and assigned.</p>
<h6 id="hooks.beforeredirect">hooks.beforeRedirect</h6>
<p>Type: <code>Function[]</code><br> Default: <code>[]</code></p>
<p>Called with <a href="source/normalize-arguments.js">normalized</a> <a href="#options">request options</a>. Got will make no further changes to the request. This is especially useful when you want to avoid dead sites. Example:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb9-1" title="1"><span class="kw">const</span> got <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;got&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb9-2" title="2"></a>
<a class="sourceLine" id="cb9-3" title="3"><span class="at">got</span>(<span class="st">&#39;example.com&#39;</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb9-4" title="4">    <span class="dt">hooks</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb9-5" title="5">        <span class="dt">beforeRedirect</span><span class="op">:</span> [</a>
<a class="sourceLine" id="cb9-6" title="6">            options <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb9-7" title="7">                <span class="cf">if</span> (<span class="va">options</span>.<span class="at">hostname</span> <span class="op">===</span> <span class="st">&#39;deadSite&#39;</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb9-8" title="8">                    <span class="va">options</span>.<span class="at">hostname</span> <span class="op">=</span> <span class="st">&#39;fallbackSite&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb9-9" title="9">                <span class="op">}</span></a>
<a class="sourceLine" id="cb9-10" title="10">            <span class="op">}</span></a>
<a class="sourceLine" id="cb9-11" title="11">        ]</a>
<a class="sourceLine" id="cb9-12" title="12">    <span class="op">}</span></a>
<a class="sourceLine" id="cb9-13" title="13"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h6 id="hooks.beforeretry">hooks.beforeRetry</h6>
<p>Type: <code>Function[]</code><br> Default: <code>[]</code></p>
<p>Called with <a href="source/normalize-arguments.js">normalized</a> <a href="#options">request options</a>, the error and the retry count. Got will make no further changes to the request. This is especially useful when some extra work is required before the next try. Example:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb10-1" title="1"><span class="kw">const</span> got <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;got&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb10-2" title="2"></a>
<a class="sourceLine" id="cb10-3" title="3"><span class="at">got</span>(<span class="st">&#39;example.com&#39;</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb10-4" title="4">    <span class="dt">hooks</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb10-5" title="5">        <span class="dt">beforeRetry</span><span class="op">:</span> [</a>
<a class="sourceLine" id="cb10-6" title="6">            (options<span class="op">,</span> error<span class="op">,</span> retryCount) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb10-7" title="7">                <span class="cf">if</span> (<span class="va">error</span>.<span class="at">statusCode</span> <span class="op">===</span> <span class="dv">413</span>) <span class="op">{</span> <span class="co">// Payload too large</span></a>
<a class="sourceLine" id="cb10-8" title="8">                    <span class="va">options</span>.<span class="at">body</span> <span class="op">=</span> <span class="at">getNewBody</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb10-9" title="9">                <span class="op">}</span></a>
<a class="sourceLine" id="cb10-10" title="10">            <span class="op">}</span></a>
<a class="sourceLine" id="cb10-11" title="11">        ]</a>
<a class="sourceLine" id="cb10-12" title="12">    <span class="op">}</span></a>
<a class="sourceLine" id="cb10-13" title="13"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h6 id="hooks.afterresponse">hooks.afterResponse</h6>
<p>Type: <code>Function[]</code><br> Default: <code>[]</code></p>
<p>Called with <a href="#response">response object</a> and a retry function.</p>
<p>Each function should return the response. This is especially useful when you want to refresh an access token. Example:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb11-1" title="1"><span class="kw">const</span> got <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;got&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb11-2" title="2"></a>
<a class="sourceLine" id="cb11-3" title="3"><span class="kw">const</span> instance <span class="op">=</span> <span class="va">got</span>.<span class="at">extend</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb11-4" title="4">    <span class="dt">hooks</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb11-5" title="5">        <span class="dt">afterResponse</span><span class="op">:</span> [</a>
<a class="sourceLine" id="cb11-6" title="6">            (response<span class="op">,</span> retryWithMergedOptions) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb11-7" title="7">                <span class="cf">if</span> (<span class="va">response</span>.<span class="at">statusCode</span> <span class="op">===</span> <span class="dv">401</span>) <span class="op">{</span> <span class="co">// Unauthorized</span></a>
<a class="sourceLine" id="cb11-8" title="8">                    <span class="kw">const</span> updatedOptions <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb11-9" title="9">                        <span class="dt">headers</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb11-10" title="10">                            <span class="dt">token</span><span class="op">:</span> <span class="at">getNewToken</span>() <span class="co">// Refresh the access token</span></a>
<a class="sourceLine" id="cb11-11" title="11">                        <span class="op">}</span></a>
<a class="sourceLine" id="cb11-12" title="12">                    <span class="op">};</span></a>
<a class="sourceLine" id="cb11-13" title="13"></a>
<a class="sourceLine" id="cb11-14" title="14">                    <span class="co">// Save for further requests</span></a>
<a class="sourceLine" id="cb11-15" title="15">                    <span class="va">instance</span>.<span class="va">defaults</span>.<span class="at">options</span> <span class="op">=</span> <span class="va">got</span>.<span class="at">mergeOptions</span>(<span class="va">instance</span>.<span class="va">defaults</span>.<span class="at">options</span><span class="op">,</span> updatedOptions)<span class="op">;</span></a>
<a class="sourceLine" id="cb11-16" title="16"></a>
<a class="sourceLine" id="cb11-17" title="17">                    <span class="co">// Make a new retry</span></a>
<a class="sourceLine" id="cb11-18" title="18">                    <span class="cf">return</span> <span class="at">retryWithMergedOptions</span>(updatedOptions)<span class="op">;</span></a>
<a class="sourceLine" id="cb11-19" title="19">                <span class="op">}</span></a>
<a class="sourceLine" id="cb11-20" title="20"></a>
<a class="sourceLine" id="cb11-21" title="21">                <span class="co">// No changes otherwise</span></a>
<a class="sourceLine" id="cb11-22" title="22">                <span class="cf">return</span> response<span class="op">;</span></a>
<a class="sourceLine" id="cb11-23" title="23">            <span class="op">}</span></a>
<a class="sourceLine" id="cb11-24" title="24">        ]</a>
<a class="sourceLine" id="cb11-25" title="25">    <span class="op">},</span></a>
<a class="sourceLine" id="cb11-26" title="26">    <span class="dt">mutableDefaults</span><span class="op">:</span> <span class="kw">true</span></a>
<a class="sourceLine" id="cb11-27" title="27"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h6 id="hooks.beforeerror">hooks.beforeError</h6>
<p>Type: <code>Function[]</code><br> Default: <code>[]</code></p>
<p>Called with an <code>Error</code> instance. The error is passed to the hook right before it’s thrown. This is especially useful when you want to have more detailed errors.</p>
<p><strong>Note</strong>: Errors thrown while normalizing input options are thrown directly and not part of this hook.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb12-1" title="1"><span class="kw">const</span> got <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;got&#39;</span>)<span class="op">;</span> </a>
<a class="sourceLine" id="cb12-2" title="2"></a>
<a class="sourceLine" id="cb12-3" title="3"><span class="at">got</span>(<span class="st">&#39;api.github.com/some-endpoint&#39;</span><span class="op">,</span> <span class="op">{</span>   </a>
<a class="sourceLine" id="cb12-4" title="4">    <span class="dt">hooks</span><span class="op">:</span> <span class="op">{</span>    </a>
<a class="sourceLine" id="cb12-5" title="5">        <span class="dt">onError</span><span class="op">:</span> [  </a>
<a class="sourceLine" id="cb12-6" title="6">            error <span class="kw">=&gt;</span> <span class="op">{</span>  </a>
<a class="sourceLine" id="cb12-7" title="7">                <span class="kw">const</span> <span class="op">{</span>response<span class="op">}</span> <span class="op">=</span> error<span class="op">;</span>   </a>
<a class="sourceLine" id="cb12-8" title="8">                <span class="cf">if</span> (response <span class="op">&amp;&amp;</span> <span class="va">response</span>.<span class="at">body</span>) <span class="op">{</span>    </a>
<a class="sourceLine" id="cb12-9" title="9">                    <span class="va">error</span>.<span class="at">name</span> <span class="op">=</span> <span class="st">&#39;GitHubError&#39;</span><span class="op">;</span> </a>
<a class="sourceLine" id="cb12-10" title="10">                    <span class="va">error</span>.<span class="at">message</span> <span class="op">=</span> <span class="vs">`</span><span class="sc">${</span><span class="va">response</span>.<span class="va">body</span>.<span class="at">message</span><span class="sc">}</span><span class="vs"> (</span><span class="sc">${</span><span class="va">error</span>.<span class="at">statusCode</span><span class="sc">}</span><span class="vs">)`</span><span class="op">;</span>   </a>
<a class="sourceLine" id="cb12-11" title="11">                <span class="op">}</span></a>
<a class="sourceLine" id="cb12-12" title="12"></a>
<a class="sourceLine" id="cb12-13" title="13">                <span class="cf">return</span> error<span class="op">;</span>   </a>
<a class="sourceLine" id="cb12-14" title="14">            <span class="op">}</span>   </a>
<a class="sourceLine" id="cb12-15" title="15">        ]   </a>
<a class="sourceLine" id="cb12-16" title="16">    <span class="op">}</span>   </a>
<a class="sourceLine" id="cb12-17" title="17"><span class="op">}</span>)<span class="op">;</span> </a></code></pre></div>
<h4 id="response">Response</h4>
<p>The response object will typically be a <a href="https://nodejs.org/api/http.html#http_class_http_incomingmessage">Node.js HTTP response stream</a>, however, if returned from the cache it will be a <a href="https://github.com/lukechilds/responselike">response-like object</a> which behaves in the same way.</p>
<h5 id="request-1">request</h5>
<p>Type: <code>Object</code></p>
<p><strong>Note:</strong> This is not a <a href="https://nodejs.org/api/http.html#http_class_http_clientrequest">http.ClientRequest</a>.</p>
<ul>
<li><code>gotOptions</code> - The options that were set on this request.</li>
</ul>
<h5 id="body-1">body</h5>
<p>Type: <code>string</code> <code>Object</code> <em>(depending on <code>options.json</code>)</em></p>
<p>The result of the request.</p>
<h5 id="url-1">url</h5>
<p>Type: <code>string</code></p>
<p>The request URL or the final URL after redirects.</p>
<h5 id="requesturl">requestUrl</h5>
<p>Type: <code>string</code></p>
<p>The original request URL.</p>
<h5 id="timings">timings</h5>
<p>Type: <code>Object</code></p>
<p>The object contains the following properties:</p>
<ul>
<li><code>start</code> - Time when the request started.</li>
<li><code>socket</code> - Time when a socket was assigned to the request.</li>
<li><code>lookup</code> - Time when the DNS lookup finished.</li>
<li><code>connect</code> - Time when the socket successfully connected.</li>
<li><code>upload</code> - Time when the request finished uploading.</li>
<li><code>response</code> - Time when the request fired the <code>response</code> event.</li>
<li><code>end</code> - Time when the response fired the <code>end</code> event.</li>
<li><code>error</code> - Time when the request fired the <code>error</code> event.</li>
<li><code>phases</code>
<ul>
<li><code>wait</code> - <code>timings.socket - timings.start</code></li>
<li><code>dns</code> - <code>timings.lookup - timings.socket</code></li>
<li><code>tcp</code> - <code>timings.connect - timings.lookup</code></li>
<li><code>request</code> - <code>timings.upload - timings.connect</code></li>
<li><code>firstByte</code> - <code>timings.response - timings.upload</code></li>
<li><code>download</code> - <code>timings.end - timings.response</code></li>
<li><code>total</code> - <code>timings.end - timings.start</code> or <code>timings.error - timings.start</code></li>
</ul></li>
</ul>
<p><strong>Note:</strong> The time is a <code>number</code> representing the milliseconds elapsed since the UNIX epoch.</p>
<h5 id="fromcache">fromCache</h5>
<p>Type: <code>boolean</code></p>
<p>Whether the response was retrieved from the cache.</p>
<h5 id="redirecturls">redirectUrls</h5>
<p>Type: <code>Array</code></p>
<p>The redirect URLs.</p>
<h5 id="retrycount">retryCount</h5>
<p>Type: <code>number</code></p>
<p>The number of times the request was retried.</p>
<h4 id="streams-1">Streams</h4>
<p><strong>Note:</strong> Progress events, redirect events and request/response events can also be used with promises.</p>
<h4 id="got.streamurl-options">got.stream(url, <a href="#options">options</a>)</h4>
<p>Sets <code>options.stream</code> to <code>true</code>.</p>
<p>Returns a <a href="https://nodejs.org/api/stream.html#stream_class_stream_duplex">duplex stream</a> with additional events:</p>
<h5 id="onrequest-request">.on(‘request’, request)</h5>
<p><code>request</code> event to get the request object of the request.</p>
<p><strong>Tip:</strong> You can use <code>request</code> event to abort request:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb13-1" title="1"><span class="va">got</span>.<span class="at">stream</span>(<span class="st">&#39;github.com&#39;</span>)</a>
<a class="sourceLine" id="cb13-2" title="2">    .<span class="at">on</span>(<span class="st">&#39;request&#39;</span><span class="op">,</span> request <span class="kw">=&gt;</span> <span class="at">setTimeout</span>(() <span class="kw">=&gt;</span> <span class="va">request</span>.<span class="at">abort</span>()<span class="op">,</span> <span class="dv">50</span>))<span class="op">;</span></a></code></pre></div>
<h5 id="onresponse-response">.on(‘response’, response)</h5>
<p>The <code>response</code> event to get the response object of the final request.</p>
<h5 id="onredirect-response-nextoptions">.on(‘redirect’, response, nextOptions)</h5>
<p>The <code>redirect</code> event to get the response object of a redirect. The second argument is options for the next request to the redirect location.</p>
<h5 id="onuploadprogress-progress">.on(‘uploadProgress’, progress)</h5>
<h5 id="ondownloadprogress-progress">.on(‘downloadProgress’, progress)</h5>
<p>Progress events for uploading (sending a request) and downloading (receiving a response). The <code>progress</code> argument is an object like:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb14-1" title="1"><span class="op">{</span></a>
<a class="sourceLine" id="cb14-2" title="2">    <span class="dt">percent</span><span class="op">:</span> <span class="fl">0.1</span><span class="op">,</span></a>
<a class="sourceLine" id="cb14-3" title="3">    <span class="dt">transferred</span><span class="op">:</span> <span class="dv">1024</span><span class="op">,</span></a>
<a class="sourceLine" id="cb14-4" title="4">    <span class="dt">total</span><span class="op">:</span> <span class="dv">10240</span></a>
<a class="sourceLine" id="cb14-5" title="5"><span class="op">}</span></a></code></pre></div>
<p>If it’s not possible to retrieve the body size (can happen when streaming), <code>total</code> will be <code>null</code>.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb15-1" title="1">(<span class="kw">async</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb15-2" title="2">    <span class="kw">const</span> response <span class="op">=</span> <span class="cf">await</span> <span class="at">got</span>(<span class="st">&#39;sindresorhus.com&#39;</span>)</a>
<a class="sourceLine" id="cb15-3" title="3">        .<span class="at">on</span>(<span class="st">&#39;downloadProgress&#39;</span><span class="op">,</span> progress <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb15-4" title="4">            <span class="co">// Report download progress</span></a>
<a class="sourceLine" id="cb15-5" title="5">        <span class="op">}</span>)</a>
<a class="sourceLine" id="cb15-6" title="6">        .<span class="at">on</span>(<span class="st">&#39;uploadProgress&#39;</span><span class="op">,</span> progress <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb15-7" title="7">            <span class="co">// Report upload progress</span></a>
<a class="sourceLine" id="cb15-8" title="8">        <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb15-9" title="9"></a>
<a class="sourceLine" id="cb15-10" title="10">    <span class="va">console</span>.<span class="at">log</span>(response)<span class="op">;</span></a>
<a class="sourceLine" id="cb15-11" title="11"><span class="op">}</span>)()<span class="op">;</span></a></code></pre></div>
<h5 id="onerror-error-body-response">.on(‘error’, error, body, response)</h5>
<p>The <code>error</code> event emitted in case of a protocol error (like <code>ENOTFOUND</code> etc.) or status error (4xx or 5xx). The second argument is the body of the server response in case of status error. The third argument is a response object.</p>
<h4 id="got.geturl-options">got.get(url, <a href="#options">options</a>)</h4>
<h4 id="got.posturl-options">got.post(url, <a href="#options">options</a>)</h4>
<h4 id="got.puturl-options">got.put(url, <a href="#options">options</a>)</h4>
<h4 id="got.patchurl-options">got.patch(url, <a href="#options">options</a>)</h4>
<h4 id="got.headurl-options">got.head(url, <a href="#options">options</a>)</h4>
<h4 id="got.deleteurl-options">got.delete(url, <a href="#options">options</a>)</h4>
<p>Sets <code>options.method</code> to the method name and makes a request.</p>
<h3 id="instances">Instances</h3>
<h4 id="got.extendoptions">got.extend(<a href="#options">options</a>)</h4>
<p>Configure a new <code>got</code> instance with default <code>options</code>. The <code>options</code> are merged with the parent instance’s <code>defaults.options</code> using <a href="#gotmergeoptionsparentoptions-newoptions"><code>got.mergeOptions</code></a>. You can access the resolved options with the <code>.defaults</code> property on the instance.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb16-1" title="1"><span class="kw">const</span> client <span class="op">=</span> <span class="va">got</span>.<span class="at">extend</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb16-2" title="2">    <span class="dt">baseUrl</span><span class="op">:</span> <span class="st">&#39;https://example.com&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb16-3" title="3">    <span class="dt">headers</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb16-4" title="4">        <span class="st">&#39;x-unicorn&#39;</span><span class="op">:</span> <span class="st">&#39;rainbow&#39;</span></a>
<a class="sourceLine" id="cb16-5" title="5">    <span class="op">}</span></a>
<a class="sourceLine" id="cb16-6" title="6"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb16-7" title="7"></a>
<a class="sourceLine" id="cb16-8" title="8"><span class="va">client</span>.<span class="at">get</span>(<span class="st">&#39;/demo&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb16-9" title="9"></a>
<a class="sourceLine" id="cb16-10" title="10"><span class="co">/* HTTP Request =&gt;</span></a>
<a class="sourceLine" id="cb16-11" title="11"><span class="co"> * GET /demo HTTP/1.1</span></a>
<a class="sourceLine" id="cb16-12" title="12"><span class="co"> * Host: example.com</span></a>
<a class="sourceLine" id="cb16-13" title="13"><span class="co"> * x-unicorn: rainbow</span></a>
<a class="sourceLine" id="cb16-14" title="14"><span class="co"> */</span></a></code></pre></div>
<div class="sourceCode" id="cb17"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb17-1" title="1">(<span class="kw">async</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb17-2" title="2">    <span class="kw">const</span> client <span class="op">=</span> <span class="va">got</span>.<span class="at">extend</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb17-3" title="3">        <span class="dt">baseUrl</span><span class="op">:</span> <span class="st">&#39;httpbin.org&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb17-4" title="4">        <span class="dt">headers</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb17-5" title="5">            <span class="st">&#39;x-foo&#39;</span><span class="op">:</span> <span class="st">&#39;bar&#39;</span></a>
<a class="sourceLine" id="cb17-6" title="6">        <span class="op">}</span></a>
<a class="sourceLine" id="cb17-7" title="7">    <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb17-8" title="8">    <span class="kw">const</span> <span class="op">{</span>headers<span class="op">}</span> <span class="op">=</span> (<span class="cf">await</span> <span class="va">client</span>.<span class="at">get</span>(<span class="st">&#39;/headers&#39;</span><span class="op">,</span> <span class="op">{</span><span class="dt">json</span><span class="op">:</span> <span class="kw">true</span><span class="op">}</span>)).<span class="at">body</span><span class="op">;</span></a>
<a class="sourceLine" id="cb17-9" title="9">    <span class="co">//=&gt; headers[&#39;x-foo&#39;] === &#39;bar&#39;</span></a>
<a class="sourceLine" id="cb17-10" title="10"></a>
<a class="sourceLine" id="cb17-11" title="11">    <span class="kw">const</span> jsonClient <span class="op">=</span> <span class="va">client</span>.<span class="at">extend</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb17-12" title="12">        <span class="dt">json</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></a>
<a class="sourceLine" id="cb17-13" title="13">        <span class="dt">headers</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb17-14" title="14">            <span class="st">&#39;x-baz&#39;</span><span class="op">:</span> <span class="st">&#39;qux&#39;</span></a>
<a class="sourceLine" id="cb17-15" title="15">        <span class="op">}</span></a>
<a class="sourceLine" id="cb17-16" title="16">    <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb17-17" title="17">    <span class="kw">const</span> <span class="op">{</span><span class="dt">headers</span><span class="op">:</span> headers2<span class="op">}</span> <span class="op">=</span> (<span class="cf">await</span> <span class="va">jsonClient</span>.<span class="at">get</span>(<span class="st">&#39;/headers&#39;</span>)).<span class="at">body</span><span class="op">;</span></a>
<a class="sourceLine" id="cb17-18" title="18">    <span class="co">//=&gt; headers2[&#39;x-foo&#39;] === &#39;bar&#39;</span></a>
<a class="sourceLine" id="cb17-19" title="19">    <span class="co">//=&gt; headers2[&#39;x-baz&#39;] === &#39;qux&#39;</span></a>
<a class="sourceLine" id="cb17-20" title="20"><span class="op">}</span>)()<span class="op">;</span></a></code></pre></div>
<p><strong>Tip:</strong> Need more control over the behavior of Got? Check out the <a href="advanced-creation.md"><code>got.create()</code></a>.</p>
<h4 id="got.mergeoptionsparentoptions-newoptions">got.mergeOptions(parentOptions, newOptions)</h4>
<p>Extends parent options. Avoid using <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax#Spread_in_object_literals">object spread</a> as it doesn’t work recursively:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb18-1" title="1"><span class="kw">const</span> a <span class="op">=</span> <span class="op">{</span><span class="dt">headers</span><span class="op">:</span> <span class="op">{</span><span class="dt">cat</span><span class="op">:</span> <span class="st">&#39;meow&#39;</span><span class="op">,</span> <span class="dt">wolf</span><span class="op">:</span> [<span class="st">&#39;bark&#39;</span><span class="op">,</span> <span class="st">&#39;wrrr&#39;</span>]<span class="op">}};</span></a>
<a class="sourceLine" id="cb18-2" title="2"><span class="kw">const</span> b <span class="op">=</span> <span class="op">{</span><span class="dt">headers</span><span class="op">:</span> <span class="op">{</span><span class="dt">cow</span><span class="op">:</span> <span class="st">&#39;moo&#39;</span><span class="op">,</span> <span class="dt">wolf</span><span class="op">:</span> [<span class="st">&#39;auuu&#39;</span>]<span class="op">}};</span></a>
<a class="sourceLine" id="cb18-3" title="3"></a>
<a class="sourceLine" id="cb18-4" title="4"><span class="op">{</span>...<span class="at">a</span><span class="op">,</span> ...<span class="at">b</span><span class="op">}</span>            <span class="co">// =&gt; {headers: {cow: &#39;moo&#39;, wolf: [&#39;auuu&#39;]}}</span></a>
<a class="sourceLine" id="cb18-5" title="5"><span class="va">got</span>.<span class="at">mergeOptions</span>(a<span class="op">,</span> b)  <span class="co">// =&gt; {headers: {cat: &#39;meow&#39;, cow: &#39;moo&#39;, wolf: [&#39;auuu&#39;]}}</span></a></code></pre></div>
<p>Options are deeply merged to a new object. The value of each key is determined as follows:</p>
<ul>
<li>If the new property is set to <code>undefined</code>, it keeps the old one.</li>
<li>If the parent property is an instance of <code>URL</code> and the new value is a <code>string</code> or <code>URL</code>, a new URL instance is created: <a href="https://developer.mozilla.org/en-US/docs/Web/API/URL/URL#Syntax"><code>new URL(new, parent)</code></a>.</li>
<li>If the new property is a plain <code>Object</code>:
<ul>
<li>If the parent property is a plain <code>Object</code> too, both values are merged recursively into a new <code>Object</code>.</li>
<li>Otherwise, only the new value is deeply cloned.</li>
</ul></li>
<li>If the new property is an <code>Array</code>, it overwrites the old one with a deep clone of the new property.</li>
<li>Otherwise, the new value is assigned to the key.</li>
</ul>
<h4 id="got.defaults">got.defaults</h4>
<p>Type: <code>Object</code></p>
<p>The default Got options.</p>
<h2 id="errors">Errors</h2>
<p>Each error contains <code>host</code>, <code>hostname</code>, <code>method</code>, <code>path</code>, <code>protocol</code>, <code>url</code> and <code>gotOptions</code> properties to make debugging easier.</p>
<p>In Promise mode, the <code>response</code> is attached to the error.</p>
<h4 id="got.cacheerror">got.CacheError</h4>
<p>When a cache method fails, for example, if the database goes down or there’s a filesystem error.</p>
<h4 id="got.requesterror">got.RequestError</h4>
<p>When a request fails. Contains a <code>code</code> property with error class code, like <code>ECONNREFUSED</code>.</p>
<h4 id="got.readerror">got.ReadError</h4>
<p>When reading from response stream fails.</p>
<h4 id="got.parseerror">got.ParseError</h4>
<p>When <code>json</code> option is enabled, server response code is 2xx, and <code>JSON.parse</code> fails. Includes <code>statusCode</code> and <code>statusMessage</code> properties.</p>
<h4 id="got.httperror">got.HTTPError</h4>
<p>When the server response code is not 2xx. Includes <code>body</code>, <code>statusCode</code>, <code>statusMessage</code>, and <code>redirectUrls</code> properties.</p>
<h4 id="got.maxredirectserror">got.MaxRedirectsError</h4>
<p>When the server redirects you more than ten times. Includes a <code>statusCode</code>, <code>statusMessage</code>, and <code>redirectUrls</code> property which is an array of the URLs Got was redirected to before giving up.</p>
<h4 id="got.unsupportedprotocolerror">got.UnsupportedProtocolError</h4>
<p>When given an unsupported protocol.</p>
<h4 id="got.cancelerror">got.CancelError</h4>
<p>When the request is aborted with <code>.cancel()</code>.</p>
<h4 id="got.timeouterror">got.TimeoutError</h4>
<p>When the request is aborted due to a <a href="#timeout">timeout</a>. Includes an <code>event</code> property.</p>
<h2 id="aborting-the-request">Aborting the request</h2>
<p>The promise returned by Got has a <a href="https://github.com/sindresorhus/p-cancelable"><code>.cancel()</code></a> method which when called, aborts the request.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb19-1" title="1">(<span class="kw">async</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb19-2" title="2">    <span class="kw">const</span> request <span class="op">=</span> <span class="at">got</span>(url<span class="op">,</span> options)<span class="op">;</span></a>
<a class="sourceLine" id="cb19-3" title="3"></a>
<a class="sourceLine" id="cb19-4" title="4">    <span class="co">// …</span></a>
<a class="sourceLine" id="cb19-5" title="5"></a>
<a class="sourceLine" id="cb19-6" title="6">    <span class="co">// In another part of the code</span></a>
<a class="sourceLine" id="cb19-7" title="7">    <span class="cf">if</span> (something) <span class="op">{</span></a>
<a class="sourceLine" id="cb19-8" title="8">        <span class="va">request</span>.<span class="at">cancel</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb19-9" title="9">    <span class="op">}</span></a>
<a class="sourceLine" id="cb19-10" title="10"></a>
<a class="sourceLine" id="cb19-11" title="11">    <span class="co">// …</span></a>
<a class="sourceLine" id="cb19-12" title="12"></a>
<a class="sourceLine" id="cb19-13" title="13">    <span class="cf">try</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb19-14" title="14">        <span class="cf">await</span> request<span class="op">;</span></a>
<a class="sourceLine" id="cb19-15" title="15">    <span class="op">}</span> <span class="cf">catch</span> (error) <span class="op">{</span></a>
<a class="sourceLine" id="cb19-16" title="16">        <span class="cf">if</span> (<span class="va">request</span>.<span class="at">isCanceled</span>) <span class="op">{</span> <span class="co">// Or `error instanceof got.CancelError`</span></a>
<a class="sourceLine" id="cb19-17" title="17">            <span class="co">// Handle cancelation</span></a>
<a class="sourceLine" id="cb19-18" title="18">        <span class="op">}</span></a>
<a class="sourceLine" id="cb19-19" title="19"></a>
<a class="sourceLine" id="cb19-20" title="20">        <span class="co">// Handle other errors</span></a>
<a class="sourceLine" id="cb19-21" title="21">    <span class="op">}</span></a>
<a class="sourceLine" id="cb19-22" title="22"><span class="op">}</span>)()<span class="op">;</span></a></code></pre></div>
<p><a name="cache-adapters"></a> ## Cache</p>
<p>Got implements <a href="http://httpwg.org/specs/rfc7234.html">RFC 7234</a> compliant HTTP caching which works out of the box in-memory and is easily pluggable with a wide range of storage adapters. Fresh cache entries are served directly from the cache, and stale cache entries are revalidated with <code>If-None-Match</code>/<code>If-Modified-Since</code> headers. You can read more about the underlying cache behavior in the <a href="https://github.com/lukechilds/cacheable-request"><code>cacheable-request</code> documentation</a>.</p>
<p>You can use the JavaScript <code>Map</code> type as an in-memory cache:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb20-1" title="1"><span class="kw">const</span> got <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;got&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb20-2" title="2"><span class="kw">const</span> map <span class="op">=</span> <span class="kw">new</span> <span class="at">Map</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb20-3" title="3"></a>
<a class="sourceLine" id="cb20-4" title="4">(<span class="kw">async</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb20-5" title="5">        <span class="kw">let</span> response <span class="op">=</span> <span class="cf">await</span> <span class="at">got</span>(<span class="st">&#39;sindresorhus.com&#39;</span><span class="op">,</span> <span class="op">{</span><span class="dt">cache</span><span class="op">:</span> map<span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb20-6" title="6">        <span class="va">console</span>.<span class="at">log</span>(<span class="va">response</span>.<span class="at">fromCache</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb20-7" title="7">        <span class="co">//=&gt; false</span></a>
<a class="sourceLine" id="cb20-8" title="8"></a>
<a class="sourceLine" id="cb20-9" title="9">        response <span class="op">=</span> <span class="cf">await</span> <span class="at">got</span>(<span class="st">&#39;sindresorhus.com&#39;</span><span class="op">,</span> <span class="op">{</span><span class="dt">cache</span><span class="op">:</span> map<span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb20-10" title="10">        <span class="va">console</span>.<span class="at">log</span>(<span class="va">response</span>.<span class="at">fromCache</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb20-11" title="11">        <span class="co">//=&gt; true</span></a>
<a class="sourceLine" id="cb20-12" title="12"><span class="op">}</span>)()<span class="op">;</span></a></code></pre></div>
<p>Got uses <a href="https://github.com/lukechilds/keyv">Keyv</a> internally to support a wide range of storage adapters. For something more scalable you could use an <a href="https://github.com/lukechilds/keyv#official-storage-adapters">official Keyv storage adapter</a>:</p>
<pre><code>$ npm install @keyv/redis</code></pre>
<div class="sourceCode" id="cb22"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb22-1" title="1"><span class="kw">const</span> got <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;got&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb22-2" title="2"><span class="kw">const</span> KeyvRedis <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;@keyv/redis&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb22-3" title="3"></a>
<a class="sourceLine" id="cb22-4" title="4"><span class="kw">const</span> redis <span class="op">=</span> <span class="kw">new</span> <span class="at">KeyvRedis</span>(<span class="st">&#39;redis://user:pass@localhost:6379&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb22-5" title="5"></a>
<a class="sourceLine" id="cb22-6" title="6"><span class="at">got</span>(<span class="st">&#39;sindresorhus.com&#39;</span><span class="op">,</span> <span class="op">{</span><span class="dt">cache</span><span class="op">:</span> redis<span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>Got supports anything that follows the Map API, so it’s easy to write your own storage adapter or use a third-party solution.</p>
<p>For example, the following are all valid storage adapters:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb23-1" title="1"><span class="kw">const</span> storageAdapter <span class="op">=</span> <span class="kw">new</span> <span class="at">Map</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb23-2" title="2"><span class="co">// Or</span></a>
<a class="sourceLine" id="cb23-3" title="3"><span class="kw">const</span> storageAdapter <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;./my-storage-adapter&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb23-4" title="4"><span class="co">// Or</span></a>
<a class="sourceLine" id="cb23-5" title="5"><span class="kw">const</span> QuickLRU <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;quick-lru&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb23-6" title="6"><span class="kw">const</span> storageAdapter <span class="op">=</span> <span class="kw">new</span> <span class="at">QuickLRU</span>(<span class="op">{</span><span class="dt">maxSize</span><span class="op">:</span> <span class="dv">1000</span><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb23-7" title="7"></a>
<a class="sourceLine" id="cb23-8" title="8"><span class="at">got</span>(<span class="st">&#39;sindresorhus.com&#39;</span><span class="op">,</span> <span class="op">{</span><span class="dt">cache</span><span class="op">:</span> storageAdapter<span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>View the <a href="https://github.com/lukechilds/keyv">Keyv docs</a> for more information on how to use storage adapters.</p>
<h2 id="proxies">Proxies</h2>
<p>You can use the <a href="https://github.com/koichik/node-tunnel"><code>tunnel</code></a> package with the <code>agent</code> option to work with proxies:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb24-1" title="1"><span class="kw">const</span> got <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;got&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb24-2" title="2"><span class="kw">const</span> tunnel <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;tunnel&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb24-3" title="3"></a>
<a class="sourceLine" id="cb24-4" title="4"><span class="at">got</span>(<span class="st">&#39;sindresorhus.com&#39;</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb24-5" title="5">    <span class="dt">agent</span><span class="op">:</span> <span class="va">tunnel</span>.<span class="at">httpOverHttp</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb24-6" title="6">        <span class="dt">proxy</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb24-7" title="7">            <span class="dt">host</span><span class="op">:</span> <span class="st">&#39;localhost&#39;</span></a>
<a class="sourceLine" id="cb24-8" title="8">        <span class="op">}</span></a>
<a class="sourceLine" id="cb24-9" title="9">    <span class="op">}</span>)</a>
<a class="sourceLine" id="cb24-10" title="10"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>Check out <a href="https://github.com/np-maintain/global-tunnel"><code>global-tunnel</code></a> if you want to configure proxy support for all HTTP/HTTPS traffic in your app.</p>
<h2 id="cookies">Cookies</h2>
<p>You can use the <a href="https://github.com/salesforce/tough-cookie"><code>tough-cookie</code></a> package:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb25-1" title="1"><span class="kw">const</span> got <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;got&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb25-2" title="2"><span class="kw">const</span> <span class="op">{</span>CookieJar<span class="op">}</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;tough-cookie&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb25-3" title="3"></a>
<a class="sourceLine" id="cb25-4" title="4"><span class="kw">const</span> cookieJar <span class="op">=</span> <span class="kw">new</span> <span class="at">CookieJar</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb25-5" title="5"><span class="va">cookieJar</span>.<span class="at">setCookie</span>(<span class="st">&#39;foo=bar&#39;</span><span class="op">,</span> <span class="st">&#39;https://www.google.com&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb25-6" title="6"></a>
<a class="sourceLine" id="cb25-7" title="7"><span class="at">got</span>(<span class="st">&#39;google.com&#39;</span><span class="op">,</span> <span class="op">{</span>cookieJar<span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h2 id="form-data">Form data</h2>
<p>You can use the <a href="https://github.com/form-data/form-data"><code>form-data</code></a> package to create POST request with form data:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb26-1" title="1"><span class="kw">const</span> fs <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;fs&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb26-2" title="2"><span class="kw">const</span> got <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;got&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb26-3" title="3"><span class="kw">const</span> FormData <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;form-data&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb26-4" title="4"><span class="kw">const</span> form <span class="op">=</span> <span class="kw">new</span> <span class="at">FormData</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb26-5" title="5"></a>
<a class="sourceLine" id="cb26-6" title="6"><span class="va">form</span>.<span class="at">append</span>(<span class="st">&#39;my_file&#39;</span><span class="op">,</span> <span class="va">fs</span>.<span class="at">createReadStream</span>(<span class="st">&#39;/foo/bar.jpg&#39;</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb26-7" title="7"></a>
<a class="sourceLine" id="cb26-8" title="8"><span class="va">got</span>.<span class="at">post</span>(<span class="st">&#39;google.com&#39;</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb26-9" title="9">    <span class="dt">body</span><span class="op">:</span> form</a>
<a class="sourceLine" id="cb26-10" title="10"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h2 id="oauth">OAuth</h2>
<p>You can use the <a href="https://github.com/ddo/oauth-1.0a"><code>oauth-1.0a</code></a> package to create a signed OAuth request:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb27-1" title="1"><span class="kw">const</span> got <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;got&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb27-2" title="2"><span class="kw">const</span> crypto  <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;crypto&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb27-3" title="3"><span class="kw">const</span> OAuth <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;oauth-1.0a&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb27-4" title="4"></a>
<a class="sourceLine" id="cb27-5" title="5"><span class="kw">const</span> oauth <span class="op">=</span> <span class="at">OAuth</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb27-6" title="6">    <span class="dt">consumer</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb27-7" title="7">        <span class="dt">key</span><span class="op">:</span> <span class="va">process</span>.<span class="va">env</span>.<span class="at">CONSUMER_KEY</span><span class="op">,</span></a>
<a class="sourceLine" id="cb27-8" title="8">        <span class="dt">secret</span><span class="op">:</span> <span class="va">process</span>.<span class="va">env</span>.<span class="at">CONSUMER_SECRET</span></a>
<a class="sourceLine" id="cb27-9" title="9">    <span class="op">},</span></a>
<a class="sourceLine" id="cb27-10" title="10">    <span class="dt">signature_method</span><span class="op">:</span> <span class="st">&#39;HMAC-SHA1&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb27-11" title="11">    <span class="dt">hash_function</span><span class="op">:</span> (baseString<span class="op">,</span> key) <span class="kw">=&gt;</span> <span class="va">crypto</span>.<span class="at">createHmac</span>(<span class="st">&#39;sha1&#39;</span><span class="op">,</span> key).<span class="at">update</span>(baseString).<span class="at">digest</span>(<span class="st">&#39;base64&#39;</span>)</a>
<a class="sourceLine" id="cb27-12" title="12"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb27-13" title="13"></a>
<a class="sourceLine" id="cb27-14" title="14"><span class="kw">const</span> token <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb27-15" title="15">    <span class="dt">key</span><span class="op">:</span> <span class="va">process</span>.<span class="va">env</span>.<span class="at">ACCESS_TOKEN</span><span class="op">,</span></a>
<a class="sourceLine" id="cb27-16" title="16">    <span class="dt">secret</span><span class="op">:</span> <span class="va">process</span>.<span class="va">env</span>.<span class="at">ACCESS_TOKEN_SECRET</span></a>
<a class="sourceLine" id="cb27-17" title="17"><span class="op">};</span></a>
<a class="sourceLine" id="cb27-18" title="18"></a>
<a class="sourceLine" id="cb27-19" title="19"><span class="kw">const</span> url <span class="op">=</span> <span class="st">&#39;https://api.twitter.com/1.1/statuses/home_timeline.json&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb27-20" title="20"></a>
<a class="sourceLine" id="cb27-21" title="21"><span class="at">got</span>(url<span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb27-22" title="22">    <span class="dt">headers</span><span class="op">:</span> <span class="va">oauth</span>.<span class="at">toHeader</span>(<span class="va">oauth</span>.<span class="at">authorize</span>(<span class="op">{</span>url<span class="op">,</span> <span class="dt">method</span><span class="op">:</span> <span class="st">&#39;GET&#39;</span><span class="op">},</span> token))<span class="op">,</span></a>
<a class="sourceLine" id="cb27-23" title="23">    <span class="dt">json</span><span class="op">:</span> <span class="kw">true</span></a>
<a class="sourceLine" id="cb27-24" title="24"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h2 id="unix-domain-sockets">Unix Domain Sockets</h2>
<p>Requests can also be sent via <a href="http://serverfault.com/questions/124517/whats-the-difference-between-unix-socket-and-tcp-ip-socket">unix domain sockets</a>. Use the following URL scheme: <code>PROTOCOL://unix:SOCKET:PATH</code>.</p>
<ul>
<li><code>PROTOCOL</code> - <code>http</code> or <code>https</code> <em>(optional)</em></li>
<li><code>SOCKET</code> - Absolute path to a unix domain socket, for example: <code>/var/run/docker.sock</code></li>
<li><code>PATH</code> - Request path, for example: <code>/v2/keys</code></li>
</ul>
<div class="sourceCode" id="cb28"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb28-1" title="1"><span class="at">got</span>(<span class="st">&#39;http://unix:/var/run/docker.sock:/containers/json&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb28-2" title="2"></a>
<a class="sourceLine" id="cb28-3" title="3"><span class="co">// Or without protocol (HTTP by default)</span></a>
<a class="sourceLine" id="cb28-4" title="4"><span class="at">got</span>(<span class="st">&#39;unix:/var/run/docker.sock:/containers/json&#39;</span>)<span class="op">;</span></a></code></pre></div>
<h2 id="aws">AWS</h2>
<p>Requests to AWS services need to have their headers signed. This can be accomplished by using the <a href="https://www.npmjs.com/package/aws4"><code>aws4</code></a> package. This is an example for querying an <a href="https://docs.aws.amazon.com/apigateway/api-reference/signing-requests/">“API Gateway”</a> with a signed request.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb29-1" title="1"><span class="kw">const</span> AWS <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;aws-sdk&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb29-2" title="2"><span class="kw">const</span> aws4 <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;aws4&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb29-3" title="3"><span class="kw">const</span> got <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;got&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb29-4" title="4"></a>
<a class="sourceLine" id="cb29-5" title="5"><span class="kw">const</span> chain <span class="op">=</span> <span class="kw">new</span> <span class="va">AWS</span>.<span class="at">CredentialProviderChain</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb29-6" title="6"></a>
<a class="sourceLine" id="cb29-7" title="7"><span class="co">// Create a Got instance to use relative paths and signed requests</span></a>
<a class="sourceLine" id="cb29-8" title="8"><span class="kw">const</span> awsClient <span class="op">=</span> <span class="va">got</span>.<span class="at">extend</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb29-9" title="9">    <span class="dt">baseUrl</span><span class="op">:</span> <span class="st">&#39;https://&lt;api-id&gt;.execute-api.&lt;api-region&gt;.amazonaws.com/&lt;stage&gt;/&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb29-10" title="10">    <span class="dt">hooks</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb29-11" title="11">        <span class="dt">beforeRequest</span><span class="op">:</span> [</a>
<a class="sourceLine" id="cb29-12" title="12">            <span class="kw">async</span> options <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb29-13" title="13">                <span class="kw">const</span> credentials <span class="op">=</span> <span class="cf">await</span> <span class="va">chain</span>.<span class="at">resolvePromise</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb29-14" title="14">                <span class="va">aws4</span>.<span class="at">sign</span>(options<span class="op">,</span> credentials)<span class="op">;</span></a>
<a class="sourceLine" id="cb29-15" title="15">            <span class="op">}</span></a>
<a class="sourceLine" id="cb29-16" title="16">        ]</a>
<a class="sourceLine" id="cb29-17" title="17">    <span class="op">}</span></a>
<a class="sourceLine" id="cb29-18" title="18"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb29-19" title="19"></a>
<a class="sourceLine" id="cb29-20" title="20"><span class="kw">const</span> response <span class="op">=</span> <span class="cf">await</span> <span class="at">awsClient</span>(<span class="st">&#39;endpoint/path&#39;</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb29-21" title="21">    <span class="co">// Request-specific options</span></a>
<a class="sourceLine" id="cb29-22" title="22"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h2 id="testing">Testing</h2>
<p>You can test your requests by using the <a href="https://github.com/node-nock/nock"><code>nock</code></a> package to mock an endpoint:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb30-1" title="1"><span class="kw">const</span> got <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;got&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb30-2" title="2"><span class="kw">const</span> nock <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;nock&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb30-3" title="3"></a>
<a class="sourceLine" id="cb30-4" title="4"><span class="at">nock</span>(<span class="st">&#39;https://sindresorhus.com&#39;</span>)</a>
<a class="sourceLine" id="cb30-5" title="5">    .<span class="at">get</span>(<span class="st">&#39;/&#39;</span>)</a>
<a class="sourceLine" id="cb30-6" title="6">    .<span class="at">reply</span>(<span class="dv">200</span><span class="op">,</span> <span class="st">&#39;Hello world!&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb30-7" title="7"></a>
<a class="sourceLine" id="cb30-8" title="8">(<span class="kw">async</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb30-9" title="9">    <span class="kw">const</span> response <span class="op">=</span> <span class="cf">await</span> <span class="at">got</span>(<span class="st">&#39;sindresorhus.com&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb30-10" title="10">    <span class="va">console</span>.<span class="at">log</span>(<span class="va">response</span>.<span class="at">body</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb30-11" title="11">    <span class="co">//=&gt; &#39;Hello world!&#39;</span></a>
<a class="sourceLine" id="cb30-12" title="12"><span class="op">}</span>)()<span class="op">;</span></a></code></pre></div>
<p>If you need real integration tests you can use <a href="https://github.com/lukechilds/create-test-server"><code>create-test-server</code></a>:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb31-1" title="1"><span class="kw">const</span> got <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;got&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb31-2" title="2"><span class="kw">const</span> createTestServer <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;create-test-server&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb31-3" title="3"></a>
<a class="sourceLine" id="cb31-4" title="4">(<span class="kw">async</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb31-5" title="5">    <span class="kw">const</span> server <span class="op">=</span> <span class="cf">await</span> <span class="at">createTestServer</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb31-6" title="6">    <span class="va">server</span>.<span class="at">get</span>(<span class="st">&#39;/&#39;</span><span class="op">,</span> <span class="st">&#39;Hello world!&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb31-7" title="7"></a>
<a class="sourceLine" id="cb31-8" title="8">    <span class="kw">const</span> response <span class="op">=</span> <span class="cf">await</span> <span class="at">got</span>(<span class="va">server</span>.<span class="at">url</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb31-9" title="9">    <span class="va">console</span>.<span class="at">log</span>(<span class="va">response</span>.<span class="at">body</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb31-10" title="10">    <span class="co">//=&gt; &#39;Hello world!&#39;</span></a>
<a class="sourceLine" id="cb31-11" title="11"></a>
<a class="sourceLine" id="cb31-12" title="12">    <span class="cf">await</span> <span class="va">server</span>.<span class="at">close</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb31-13" title="13"><span class="op">}</span>)()<span class="op">;</span></a></code></pre></div>
<h2 id="tips">Tips</h2>
<h3 id="user-agent">User Agent</h3>
<p>It’s a good idea to set the <code>'user-agent'</code> header so the provider can more easily see how their resource is used. By default, it’s the URL to this repo. You can omit this header by setting it to <code>null</code>.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb32-1" title="1"><span class="kw">const</span> got <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;got&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb32-2" title="2"><span class="kw">const</span> pkg <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;./package.json&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb32-3" title="3"></a>
<a class="sourceLine" id="cb32-4" title="4"><span class="at">got</span>(<span class="st">&#39;sindresorhus.com&#39;</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb32-5" title="5">    <span class="dt">headers</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb32-6" title="6">        <span class="st">&#39;user-agent&#39;</span><span class="op">:</span> <span class="vs">`my-package/</span><span class="sc">${</span><span class="va">pkg</span>.<span class="at">version</span><span class="sc">}</span><span class="vs"> (https://github.com/username/my-package)`</span></a>
<a class="sourceLine" id="cb32-7" title="7">    <span class="op">}</span></a>
<a class="sourceLine" id="cb32-8" title="8"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb32-9" title="9"></a>
<a class="sourceLine" id="cb32-10" title="10"><span class="at">got</span>(<span class="st">&#39;sindresorhus.com&#39;</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb32-11" title="11">    <span class="dt">headers</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb32-12" title="12">        <span class="st">&#39;user-agent&#39;</span><span class="op">:</span> <span class="kw">null</span></a>
<a class="sourceLine" id="cb32-13" title="13">    <span class="op">}</span></a>
<a class="sourceLine" id="cb32-14" title="14"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h3 id="responses">304 Responses</h3>
<p>Bear in mind; if you send an <code>if-modified-since</code> header and receive a <code>304 Not Modified</code> response, the body will be empty. It’s your responsibility to cache and retrieve the body contents.</p>
<h3 id="custom-endpoints">Custom endpoints</h3>
<p>Use <code>got.extend()</code> to make it nicer to work with REST APIs. Especially if you use the <code>baseUrl</code> option.</p>
<p><strong>Note:</strong> Not to be confused with <a href="advanced-creation.md"><code>got.create()</code></a>, which has no defaults.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb33-1" title="1"><span class="kw">const</span> got <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;got&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb33-2" title="2"><span class="kw">const</span> pkg <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;./package.json&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb33-3" title="3"></a>
<a class="sourceLine" id="cb33-4" title="4"><span class="kw">const</span> custom <span class="op">=</span> <span class="va">got</span>.<span class="at">extend</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb33-5" title="5">    <span class="dt">baseUrl</span><span class="op">:</span> <span class="st">&#39;example.com&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb33-6" title="6">    <span class="dt">json</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></a>
<a class="sourceLine" id="cb33-7" title="7">    <span class="dt">headers</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb33-8" title="8">        <span class="st">&#39;user-agent&#39;</span><span class="op">:</span> <span class="vs">`my-package/</span><span class="sc">${</span><span class="va">pkg</span>.<span class="at">version</span><span class="sc">}</span><span class="vs"> (https://github.com/username/my-package)`</span></a>
<a class="sourceLine" id="cb33-9" title="9">    <span class="op">}</span></a>
<a class="sourceLine" id="cb33-10" title="10"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb33-11" title="11"></a>
<a class="sourceLine" id="cb33-12" title="12"><span class="co">// Use `custom` exactly how you use `got`</span></a>
<a class="sourceLine" id="cb33-13" title="13">(<span class="kw">async</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb33-14" title="14">    <span class="kw">const</span> list <span class="op">=</span> <span class="cf">await</span> <span class="at">custom</span>(<span class="st">&#39;/v1/users/list&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb33-15" title="15"><span class="op">}</span>)()<span class="op">;</span></a></code></pre></div>
<p><strong>Tip:</strong> Need to merge some instances into a single one? Check out <a href="advanced-creation.md#merging-instances"><code>got.mergeInstances()</code></a>.</p>
<h3 id="experimental-http2-support">Experimental HTTP2 support</h3>
<p>Got provides an experimental support for HTTP2 using the <a href="https://github.com/szmarczak/http2-wrapper"><code>http2-wrapper</code></a> package:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb34-1" title="1"><span class="kw">const</span> got <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;got&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb34-2" title="2"><span class="kw">const</span> <span class="op">{</span>request<span class="op">}</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;http2-wrapper&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb34-3" title="3"></a>
<a class="sourceLine" id="cb34-4" title="4"><span class="kw">const</span> h2got <span class="op">=</span> <span class="va">got</span>.<span class="at">extend</span>(<span class="op">{</span>request<span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb34-5" title="5"></a>
<a class="sourceLine" id="cb34-6" title="6">(<span class="kw">async</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb34-7" title="7">    <span class="kw">const</span> <span class="op">{</span>body<span class="op">}</span> <span class="op">=</span> <span class="cf">await</span> <span class="at">h2got</span>(<span class="st">&#39;https://nghttp2.org/httpbin/headers&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb34-8" title="8">    <span class="va">console</span>.<span class="at">log</span>(body)<span class="op">;</span></a>
<a class="sourceLine" id="cb34-9" title="9"><span class="op">}</span>)()<span class="op">;</span></a></code></pre></div>
<h2 id="comparison">Comparison</h2>
<table>
<colgroup>
<col style="width: 20%" />
<col style="width: 13%" />
<col style="width: 14%" />
<col style="width: 17%" />
<col style="width: 14%" />
<col style="width: 19%" />
</colgroup>
<thead>
<tr class="header">
<th></th>
<th style="text-align: center;"><code>got</code></th>
<th style="text-align: center;"><a href="https://github.com/request/request"><code>request</code></a></th>
<th style="text-align: center;"><a href="https://github.com/bitinn/node-fetch"><code>node-fetch</code></a></th>
<th style="text-align: center;"><a href="https://github.com/axios/axios"><code>axios</code></a></th>
<th style="text-align: center;"><a href="https://github.com/visionmedia/superagent"><code>superagent</code></a></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>HTTP/2 support</td>
<td style="text-align: center;">❔</td>
<td style="text-align: center;">✖</td>
<td style="text-align: center;">✖</td>
<td style="text-align: center;">✖</td>
<td style="text-align: center;">✔**</td>
</tr>
<tr class="even">
<td>Browser support</td>
<td style="text-align: center;">✖</td>
<td style="text-align: center;">✖</td>
<td style="text-align: center;">✔*</td>
<td style="text-align: center;">✔</td>
<td style="text-align: center;">✔</td>
</tr>
<tr class="odd">
<td>Electron support</td>
<td style="text-align: center;">✔</td>
<td style="text-align: center;">✖</td>
<td style="text-align: center;">✖</td>
<td style="text-align: center;">✖</td>
<td style="text-align: center;">✖</td>
</tr>
<tr class="even">
<td>Promise API</td>
<td style="text-align: center;">✔</td>
<td style="text-align: center;">✔</td>
<td style="text-align: center;">✔</td>
<td style="text-align: center;">✔</td>
<td style="text-align: center;">✔</td>
</tr>
<tr class="odd">
<td>Stream API</td>
<td style="text-align: center;">✔</td>
<td style="text-align: center;">✔</td>
<td style="text-align: center;">Node.js only</td>
<td style="text-align: center;">✖</td>
<td style="text-align: center;">✔</td>
</tr>
<tr class="even">
<td>Request cancelation</td>
<td style="text-align: center;">✔</td>
<td style="text-align: center;">✖</td>
<td style="text-align: center;">✔</td>
<td style="text-align: center;">✔</td>
<td style="text-align: center;">✔</td>
</tr>
<tr class="odd">
<td>RFC compliant caching</td>
<td style="text-align: center;">✔</td>
<td style="text-align: center;">✖</td>
<td style="text-align: center;">✖</td>
<td style="text-align: center;">✖</td>
<td style="text-align: center;">✖</td>
</tr>
<tr class="even">
<td>Cookies (out-of-box)</td>
<td style="text-align: center;">✔</td>
<td style="text-align: center;">✔</td>
<td style="text-align: center;">✖</td>
<td style="text-align: center;">✖</td>
<td style="text-align: center;">✖</td>
</tr>
<tr class="odd">
<td>Follows redirects</td>
<td style="text-align: center;">✔</td>
<td style="text-align: center;">✔</td>
<td style="text-align: center;">✔</td>
<td style="text-align: center;">✔</td>
<td style="text-align: center;">✔</td>
</tr>
<tr class="even">
<td>Retries on failure</td>
<td style="text-align: center;">✔</td>
<td style="text-align: center;">✖</td>
<td style="text-align: center;">✖</td>
<td style="text-align: center;">✖</td>
<td style="text-align: center;">✔</td>
</tr>
<tr class="odd">
<td>Progress events</td>
<td style="text-align: center;">✔</td>
<td style="text-align: center;">✖</td>
<td style="text-align: center;">✖</td>
<td style="text-align: center;">Browser only</td>
<td style="text-align: center;">✔</td>
</tr>
<tr class="even">
<td>Handles gzip/deflate</td>
<td style="text-align: center;">✔</td>
<td style="text-align: center;">✔</td>
<td style="text-align: center;">✔</td>
<td style="text-align: center;">✔</td>
<td style="text-align: center;">✔</td>
</tr>
<tr class="odd">
<td>Advanced timeouts</td>
<td style="text-align: center;">✔</td>
<td style="text-align: center;">✖</td>
<td style="text-align: center;">✖</td>
<td style="text-align: center;">✖</td>
<td style="text-align: center;">✖</td>
</tr>
<tr class="even">
<td>Timings</td>
<td style="text-align: center;">✔</td>
<td style="text-align: center;">✔</td>
<td style="text-align: center;">✖</td>
<td style="text-align: center;">✖</td>
<td style="text-align: center;">✖</td>
</tr>
<tr class="odd">
<td>Errors with metadata</td>
<td style="text-align: center;">✔</td>
<td style="text-align: center;">✖</td>
<td style="text-align: center;">✖</td>
<td style="text-align: center;">✔</td>
<td style="text-align: center;">✖</td>
</tr>
<tr class="even">
<td>JSON mode</td>
<td style="text-align: center;">✔</td>
<td style="text-align: center;">✔</td>
<td style="text-align: center;">✖</td>
<td style="text-align: center;">✔</td>
<td style="text-align: center;">✔</td>
</tr>
<tr class="odd">
<td>Custom defaults</td>
<td style="text-align: center;">✔</td>
<td style="text-align: center;">✔</td>
<td style="text-align: center;">✖</td>
<td style="text-align: center;">✔</td>
<td style="text-align: center;">✖</td>
</tr>
<tr class="even">
<td>Composable</td>
<td style="text-align: center;">✔</td>
<td style="text-align: center;">✖</td>
<td style="text-align: center;">✖</td>
<td style="text-align: center;">✖</td>
<td style="text-align: center;">✔</td>
</tr>
<tr class="odd">
<td>Hooks</td>
<td style="text-align: center;">✔</td>
<td style="text-align: center;">✖</td>
<td style="text-align: center;">✖</td>
<td style="text-align: center;">✔</td>
<td style="text-align: center;">✖</td>
</tr>
<tr class="even">
<td>Issues open</td>
<td style="text-align: center;"><a href="https://github.com/sindresorhus/got/issues?q=is%3Aissue+is%3Aopen+sort%3Aupdated-desc"><img src="https://badgen.net/github/open-issues/sindresorhus/got?label" /></a></td>
<td style="text-align: center;"><a href="https://github.com/request/request/issues?q=is%3Aissue+is%3Aopen+sort%3Aupdated-desc"><img src="https://badgen.net/github/open-issues/request/request?label" /></a></td>
<td style="text-align: center;"><a href="https://github.com/bitinn/node-fetch/issues?q=is%3Aissue+is%3Aopen+sort%3Aupdated-desc"><img src="https://badgen.net/github/open-issues/bitinn/node-fetch?label" /></a></td>
<td style="text-align: center;"><a href="https://github.com/axios/axios/issues?q=is%3Aissue+is%3Aopen+sort%3Aupdated-desc"><img src="https://badgen.net/github/open-issues/axios/axios?label" /></a></td>
<td style="text-align: center;"><a href="https://github.com/visionmedia/superagent/issues?q=is%3Aissue+is%3Aopen+sort%3Aupdated-desc"><img src="https://badgen.net/github/open-issues/visionmedia/superagent?label" /></a></td>
</tr>
<tr class="odd">
<td>Issues closed</td>
<td style="text-align: center;"><a href="https://github.com/sindresorhus/got/issues?q=is%3Aissue+is%3Aclosed+sort%3Aupdated-desc"><img src="https://badgen.net/github/closed-issues/sindresorhus/got?label" /></a></td>
<td style="text-align: center;"><a href="https://github.com/request/request/issues?q=is%3Aissue+is%3Aclosed+sort%3Aupdated-desc"><img src="https://badgen.net/github/closed-issues/request/request?label" /></a></td>
<td style="text-align: center;"><a href="https://github.com/bitinn/node-fetch/issues?q=is%3Aissue+is%3Aclosed+sort%3Aupdated-desc"><img src="https://badgen.net/github/closed-issues/bitinn/node-fetch?label" /></a></td>
<td style="text-align: center;"><a href="https://github.com/axios/axios/issues?q=is%3Aissue+is%3Aclosed+sort%3Aupdated-desc"><img src="https://badgen.net/github/closed-issues/axios/axios?label" /></a></td>
<td style="text-align: center;"><a href="https://github.com/visionmedia/superagent/issues?q=is%3Aissue+is%3Aclosed+sort%3Aupdated-desc"><img src="https://badgen.net/github/closed-issues/visionmedia/superagent?label" /></a></td>
</tr>
<tr class="even">
<td>Downloads</td>
<td style="text-align: center;"><a href="https://www.npmjs.com/package/got"><img src="https://badgen.net/npm/dm/got?label" /></a></td>
<td style="text-align: center;"><a href="https://www.npmjs.com/package/request"><img src="https://badgen.net/npm/dm/request?label" /></a></td>
<td style="text-align: center;"><a href="https://www.npmjs.com/package/node-fetch"><img src="https://badgen.net/npm/dm/node-fetch?label" /></a></td>
<td style="text-align: center;"><a href="https://www.npmjs.com/package/axios"><img src="https://badgen.net/npm/dm/axios?label" /></a></td>
<td style="text-align: center;"><a href="https://www.npmjs.com/package/superagent"><img src="https://badgen.net/npm/dm/superagent?label" /></a></td>
</tr>
<tr class="odd">
<td>Coverage</td>
<td style="text-align: center;"><a href="https://coveralls.io/github/sindresorhus/got"><img src="https://badgen.net/coveralls/c/github/sindresorhus/got?label" /></a></td>
<td style="text-align: center;"><a href="https://coveralls.io/github/request/request"><img src="https://badgen.net/coveralls/c/github/request/request?label" /></a></td>
<td style="text-align: center;"><a href="https://coveralls.io/github/bitinn/node-fetch"><img src="https://badgen.net/coveralls/c/github/bitinn/node-fetch?label" /></a></td>
<td style="text-align: center;"><a href="https://coveralls.io/github/mzabriskie/axios"><img src="https://badgen.net/coveralls/c/github/mzabriskie/axios?label" /></a></td>
<td style="text-align: center;">unknown</td>
</tr>
<tr class="even">
<td>Build</td>
<td style="text-align: center;"><a href="https://travis-ci.org/sindresorhus/got"><img src="https://badgen.net/travis/sindresorhus/got?label" /></a></td>
<td style="text-align: center;"><a href="https://travis-ci.org/request/request"><img src="https://badgen.net/travis/request/request?label" /></a></td>
<td style="text-align: center;"><a href="https://travis-ci.org/bitinn/node-fetch"><img src="https://badgen.net/travis/bitinn/node-fetch?label" /></a></td>
<td style="text-align: center;"><a href="https://travis-ci.org/axios/axios"><img src="https://badgen.net/travis/axios/axios?label" /></a></td>
<td style="text-align: center;"><a href="https://travis-ci.org/visionmedia/superagent"><img src="https://badgen.net/travis/visionmedia/superagent?label" /></a></td>
</tr>
<tr class="odd">
<td>Bugs</td>
<td style="text-align: center;"><a href="https://github.com/sindresorhus/got/issues?q=is%3Aissue+is%3Aopen+sort%3Aupdated-desc+label%3Abug"><img src="https://badgen.net/github/label-issues/sindresorhus/got/bug/open?label" /></a></td>
<td style="text-align: center;"><a href="https://github.com/request/request/issues?q=is%3Aissue+is%3Aopen+sort%3Aupdated-desc+label%3A%22Needs+investigation%22"><img src="https://badgen.net/github/label-issues/request/request/Needs%20investigation/open?label" /></a></td>
<td style="text-align: center;"><a href="https://github.com/bitinn/node-fetch/issues?q=is%3Aissue+is%3Aopen+sort%3Aupdated-desc+label%3Abug"><img src="https://badgen.net/github/label-issues/bitinn/node-fetch/bug/open?label" /></a></td>
<td style="text-align: center;"><a href="https://github.com/axios/axios/issues?q=is%3Aissue+is%3Aopen+sort%3Aupdated-desc+label%3Abug"><img src="https://badgen.net/github/label-issues/axios/axios/bug/open?label" /></a></td>
<td style="text-align: center;"><a href="https://github.com/visionmedia/superagent/issues?q=is%3Aissue+is%3Aopen+sort%3Aupdated-desc+label%3ABug"><img src="https://badgen.net/github/label-issues/visionmedia/superagent/Bug/open?label" /></a></td>
</tr>
<tr class="even">
<td>Dependents</td>
<td style="text-align: center;"><a href="https://www.npmjs.com/package/got?activeTab=dependents"><img src="https://badgen.net/npm/dependents/got?label" /></a></td>
<td style="text-align: center;"><a href="https://www.npmjs.com/package/request?activeTab=dependents"><img src="https://badgen.net/npm/dependents/request?label" /></a></td>
<td style="text-align: center;"><a href="https://www.npmjs.com/package/node-fetch?activeTab=dependents"><img src="https://badgen.net/npm/dependents/node-fetch?label" /></a></td>
<td style="text-align: center;"><a href="https://www.npmjs.com/package/axios?activeTab=dependents"><img src="https://badgen.net/npm/dependents/axios?label" /></a></td>
<td style="text-align: center;"><a href="https://www.npmjs.com/package/visionmedia?activeTab=dependents"><img src="https://badgen.net/npm/dependents/superagent?label" /></a></td>
</tr>
<tr class="odd">
<td>Install size</td>
<td style="text-align: center;"><a href="https://packagephobia.now.sh/result?p=got"><img src="https://badgen.net/packagephobia/install/got?label" /></a></td>
<td style="text-align: center;"><a href="https://packagephobia.now.sh/result?p=request"><img src="https://badgen.net/packagephobia/install/request?label" /></a></td>
<td style="text-align: center;"><a href="https://packagephobia.now.sh/result?p=node-fetch"><img src="https://badgen.net/packagephobia/install/node-fetch?label" /></a></td>
<td style="text-align: center;"><a href="https://packagephobia.now.sh/result?p=axios"><img src="https://badgen.net/packagephobia/install/axios?label" /></a></td>
<td style="text-align: center;"><a href="https://packagephobia.now.sh/result?p=superagent"><img src="https://badgen.net/packagephobia/install/superagent?label" /></a></td>
</tr>
</tbody>
</table>
<p>* It’s almost API compatible with the browser <code>fetch</code> API.<br> ** Need to switch the protocol manually.<br> ❔ Experimental support.</p>
<!-- GITHUB -->
<!-- ISSUES OPEN -->
<!-- ISSUES CLOSED -->
<!-- DOWNLOADS -->
<!-- COVERAGE -->
<!-- BUILD -->
<!-- BUGS -->
<!-- DEPENDENTS -->
<!-- INSTALL SIZE -->
<h2 id="related">Related</h2>
<ul>
<li><a href="https://github.com/sindresorhus/gh-got">gh-got</a> - Got convenience wrapper to interact with the GitHub API</li>
<li><a href="https://github.com/singapore/gl-got">gl-got</a> - Got convenience wrapper to interact with the GitLab API</li>
<li><a href="https://github.com/samverschueren/travis-got">travis-got</a> - Got convenience wrapper to interact with the Travis API</li>
<li><a href="https://github.com/kevva/graphql-got">graphql-got</a> - Got convenience wrapper to interact with GraphQL</li>
<li><a href="https://github.com/khaosdoctor/gotql">GotQL</a> - Got convenience wrapper to interact with GraphQL using JSON-parsed queries instead of strings</li>
</ul>
<h2 id="maintainers">Maintainers</h2>
<table style="width:100%;">
<colgroup>
<col style="width: 16%" />
<col style="width: 16%" />
<col style="width: 16%" />
<col style="width: 16%" />
<col style="width: 16%" />
<col style="width: 16%" />
</colgroup>
<thead>
<tr class="header">
<th><a href="https://sindresorhus.com"><img src="https://github.com/sindresorhus.png?size=100" alt="Sindre Sorhus" /></a></th>
<th><a href="https://github.com/floatdrop"><img src="https://github.com/floatdrop.png?size=100" alt="Vsevolod Strukchinsky" /></a></th>
<th><a href="https://github.com/AlexTes"><img src="https://github.com/AlexTes.png?size=100" alt="Alexander Tesfamichael" /></a></th>
<th><a href="https://github.com/lukechilds"><img src="https://github.com/lukechilds.png?size=100" alt="Luke Childs" /></a></th>
<th><a href="https://github.com/szmarczak"><img src="https://github.com/szmarczak.png?size=100" alt="Szymon Marczak" /></a></th>
<th><a href="https://github.com/brandon93s"><img src="https://github.com/brandon93s.png?size=100" alt="Brandon Smith" /></a></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><a href="https://sindresorhus.com">Sindre Sorhus</a></td>
<td><a href="https://github.com/floatdrop">Vsevolod Strukchinsky</a></td>
<td><a href="https://alextes.me">Alexander Tesfamichael</a></td>
<td><a href="https://github.com/lukechilds">Luke Childs</a></td>
<td><a href="https://github.com/szmarczak">Szymon Marczak</a></td>
<td><a href="https://github.com/brandon93s">Brandon Smith</a></td>
</tr>
</tbody>
</table>
<h2 id="license">License</h2>
<p>MIT</p>
</body>
</html>
