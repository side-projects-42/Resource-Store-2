unist-util-map
==============

[![Build](https://img.shields.io/travis/syntax-tree/unist-util-find-all-after.svg)](https://travis-ci.org/syntax-tree/unist-util-find-all-after) [![Coverage](https://img.shields.io/codecov/c/github/syntax-tree/unist-util-find-all-after.svg)](https://codecov.io/github/syntax-tree/unist-util-find-all-after) [![Downloads](https://img.shields.io/npm/dm/unist-util-find-all-after.svg)](https://www.npmjs.com/package/unist-util-find-all-after) [![Size](https://img.shields.io/bundlephobia/minzip/unist-util-find-all-after.svg)](https://bundlephobia.com/result?p=unist-util-find-all-after)

[**unist**](https://github.com/syntax-tree/unist) utility to create a new [tree](https://github.com/syntax-tree/unist#tree) by mapping all [node](https://github.com/syntax-tree/unist#node)s with the given function.

Install
-------

[npm](https://docs.npmjs.com/cli/install):

    npm install unist-util-map

Usage
-----

    var u = require('unist-builder')
    var map = require('unist-util-map')

    var tree = u('tree', [
      u('leaf', 'leaf 1'),
      u('node', [u('leaf', 'leaf 2')]),
      u('void'),
      u('leaf', 'leaf 3')
    ])

    var next = map(tree, function(node) {
      return node.type === 'leaf'
        ? Object.assign({}, node, {value: 'CHANGED'})
        : node
    })

    console.dir(next, {depth: null})

Yields:

    {
      type: 'tree',
      children: [
        { type: 'leaf', value: 'CHANGED' },
        { type: 'node', children: [ { type: 'leaf', value: 'CHANGED' } ] },
        { type: 'void' },
        { type: 'leaf', value: 'CHANGED' }
      ]
    }

…note that `tree` is not mutated.

API
---

### `map(tree, mapFn)`

Create a new [tree](https://github.com/syntax-tree/unist#tree) by mapping all [node](https://github.com/syntax-tree/unist#node)s with the given function.

###### Parameters

-   `tree` ([`Node`](https://github.com/syntax-tree/unist#node)) — [Tree](https://github.com/syntax-tree/unist#tree) to map
-   `callback` ([`Function`](#function-mapfnnode-index-parent)) — Function that returns a new node

###### Returns

[`Node`](https://github.com/syntax-tree/unist#node) — New mapped [tree](https://github.com/syntax-tree/unist#tree).

#### `function mapFn(node[, index, parent])`

Function called with a [node](https://github.com/syntax-tree/unist#node) to produce a new node.

###### Parameters

-   `node` ([`Node`](https://github.com/syntax-tree/unist#node)) — Current [node](https://github.com/syntax-tree/unist#node) being processed
-   `index` (`number?`) — [Index](https://github.com/syntax-tree/unist#index) of `node`, or `null`
-   `parent` (`Node?`) — [Parent](https://github.com/syntax-tree/unist#parent-1) of `node`, or `null`

###### Returns

[`Node`](https://github.com/syntax-tree/unist#node) — Node to be used in the new [tree](https://github.com/syntax-tree/unist#tree). Its children are not used: if the original node has children, those are mapped.

Related
-------

-   [`unist-util-filter`](https://github.com/syntax-tree/unist-util-filter) — Create a new tree with all nodes that pass the given function
-   [`unist-util-flatmap`](https://gitlab.com/staltz/unist-util-flatmap) — Create a new tree by expanding a node into many
-   [`unist-util-remove`](https://github.com/syntax-tree/unist-util-remove) — Remove nodes from trees
-   [`unist-util-select`](https://github.com/syntax-tree/unist-util-select) — Select nodes with CSS-like selectors
-   [`unist-util-visit`](https://github.com/syntax-tree/unist-util-visit) — Recursively walk over nodes
-   [`unist-builder`](https://github.com/syntax-tree/unist-builder) — Creating trees

Contribute
----------

See [`contributing.md` in `syntax-tree/.github`](https://github.com/syntax-tree/.github/blob/master/contributing.md) for ways to get started. See [`support.md`](https://github.com/syntax-tree/.github/blob/master/support.md) for ways to get help.

This project has a [Code of Conduct](https://github.com/syntax-tree/.github/blob/master/code-of-conduct.md). By interacting with this repository, organisation, or community you agree to abide by its terms.

License
-------

[MIT](license) © [azu](https://efcl.info)
