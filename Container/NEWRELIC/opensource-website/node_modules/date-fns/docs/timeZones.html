<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>timeZones</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<h1 id="time-zones">Time Zones</h1>
<h2 id="table-of-contents">Table of Contents</h2>
<ul>
<li><p><a href="#overview">Overview</a></p></li>
<li><p><a href="#date-fns-tz"><code>date-fns-tz</code></a></p></li>
</ul>
<h2 id="overview">Overview</h2>
<p>Working with UTC or ISO date strings is easy, and so is working with JS dates when all times are displayed in a user’s local time in the browser. The difficulty comes when working with another time zone’s local time, other than the current system’s, like showing the local time of an event in LA at 8pm PST on a Node server in Europe or a user’s machine set to EST.</p>
<p>In this case there are two relevant pieces of information:</p>
<ul>
<li>a fixed moment in time in the form of a timestamp, UTC or ISO date string, and</li>
<li>the time zone descriptor, usually an offset or IANA time zone name (e.g. <code>America/Los_Angeles</code>).</li>
</ul>
<p>Libraries like Moment and Luxon, which provide their own date time classes, manage these timestamp and time zone values internally. Since <code>date-fns</code> always returns a plain JS Date, which implicitly has the current system’s time zone, helper functions are needed for handling common time zone related use cases.</p>
<h2 id="date-fns-tz"><a href="https://www.npmjs.com/package/date-fns-tz"><code>date-fns-tz</code></a></h2>
<p>Dependency free IANA time zone support is implemented via the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl">Intl API</a> to keep actual time zone data out of code bundles. Modern browsers all support the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DateTimeFormat#Browser_compatibility">necessary features</a>, and for those that don’t a <a href="https://github.com/yahoo/date-time-format-timezone">polyfill</a> can be used.</p>
<p>Functions are provided for converting to and from a Date instance which will have the internal UTC time adjusted so it prints to the correct time value in the associated time zone, regardless of the current system time zone. The <code>date-fns</code> <code>format</code> function is extended with support for the <code>z...zzzz</code> tokens to format long and short time zone names.</p>
<p>Compatible with <code>date-fns</code> version 2</p>
<p>License: MIT</p>
<h3 id="synopsis">Synopsis</h3>
<div class="sourceCode" id="cb1"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb1-1" title="1"><span class="kw">const</span> <span class="op">{</span> zonedTimeToUtc<span class="op">,</span> utcToZonedTime<span class="op">,</span> format <span class="op">}</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;date-fns-tz&#39;</span>)</a>
<a class="sourceLine" id="cb1-2" title="2"></a>
<a class="sourceLine" id="cb1-3" title="3"><span class="co">// Set the date to &quot;2018-09-01T16:01:36.386Z&quot;</span></a>
<a class="sourceLine" id="cb1-4" title="4"><span class="kw">const</span> utcDate <span class="op">=</span> <span class="at">zonedTimeToUtc</span>(<span class="st">&#39;2018-09-01 18:01:36.386&#39;</span><span class="op">,</span> <span class="st">&#39;Europe/Berlin&#39;</span>)</a>
<a class="sourceLine" id="cb1-5" title="5"></a>
<a class="sourceLine" id="cb1-6" title="6"><span class="co">// Obtain a Date instance that will render the equivalent Berlin time for the UTC date</span></a>
<a class="sourceLine" id="cb1-7" title="7"><span class="kw">const</span> date <span class="op">=</span> <span class="kw">new</span> <span class="at">Date</span>(<span class="st">&#39;2018-09-01T16:01:36.386Z&#39;</span>)</a>
<a class="sourceLine" id="cb1-8" title="8"><span class="kw">const</span> timeZone <span class="op">=</span> <span class="st">&#39;Europe/Berlin&#39;</span></a>
<a class="sourceLine" id="cb1-9" title="9"><span class="kw">const</span> zonedDate <span class="op">=</span> <span class="at">utcToZonedTime</span>(date<span class="op">,</span> timeZone)</a>
<a class="sourceLine" id="cb1-10" title="10"><span class="co">// zonedDate could be used to initialize a date picker or display the formatted local date/time</span></a>
<a class="sourceLine" id="cb1-11" title="11"></a>
<a class="sourceLine" id="cb1-12" title="12"><span class="co">// Set the output to &quot;1.9.2018 18:01:36.386 GMT+02:00 (CEST)&quot;</span></a>
<a class="sourceLine" id="cb1-13" title="13"><span class="kw">const</span> pattern <span class="op">=</span> <span class="st">&#39;d.M.yyyy HH:mm:ss.SSS </span><span class="sc">\&#39;</span><span class="st">GMT</span><span class="sc">\&#39;</span><span class="st"> XXX (z)&#39;</span></a>
<a class="sourceLine" id="cb1-14" title="14"><span class="kw">const</span> output <span class="op">=</span> <span class="at">format</span>(zonedDate<span class="op">,</span> pattern<span class="op">,</span> <span class="op">{</span> <span class="dt">timeZone</span><span class="op">:</span> <span class="st">&#39;Europe/Berlin&#39;</span> <span class="op">}</span>)</a></code></pre></div>
<h3 id="links">Links</h3>
<ul>
<li><a href="https://github.com/marnusw/date-fns-tz#time-zone-helpers">API / Usage Scenarios</a></li>
</ul>
</body>
</html>
