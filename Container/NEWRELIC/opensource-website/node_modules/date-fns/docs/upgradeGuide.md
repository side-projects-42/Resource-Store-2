v2 Upgrade Guide
================

Common changes
--------------

This page covers a few of the most common problems people face when updating from v1 to v2. For a more detailed list of changes, look at the [change log for version 2.0.0](https://date-fns.org/docs/Change-Log#2.0.0-2019-08-20).

### Camel case naming schema

Function submodules now use camelCase naming schema:

    // Before v2.0.0
    import differenceInCalendarISOYears from 'date-fns/difference_in_calendar_iso_years'

    // v2.0.0 onward
    import differenceInCalendarISOYears from 'date-fns/differenceInCalendarISOYears'

### New formatting tokens

Starting with v2 `format` and `parse` uses [Unicode tokens](https://www.unicode.org/reports/tr35/tr35-dates.html#Date_Field_Symbol_Table).

See [Unicode Tokens doc](https://date-fns.org/docs/Unicode-Tokens) for more details.

### String arguments

Functions now don’t accept strings as date arguments. Strings should be parsed using `parseISO` (ISO 8601) or `parse`.

See [this post](https://blog.date-fns.org/post/we-cut-date-fns-v2-minimal-build-size-down-to-300-bytes-and-now-its-the-smallest-date-library-18f2nvh2z0yal) for more details.

    // Before v2.0.0
    addDays('2016-01-01', 1)

    // v2.0.0 onward
    addDays(parseISO('2016-01-01'), 1)

### Arguments conversion

All functions now implicitly convert arguments by following rules:

<table><thead><tr class="header"><th></th><th>date</th><th>number</th><th>string</th><th>boolean</th></tr></thead><tbody><tr class="odd"><td>0</td><td>new Date(0)</td><td>0</td><td>‘0’</td><td>false</td></tr><tr class="even"><td>‘0’</td><td>Invalid Date</td><td>0</td><td>‘0’</td><td>false</td></tr><tr class="odd"><td>1</td><td>new Date(1)</td><td>1</td><td>‘1’</td><td>true</td></tr><tr class="even"><td>‘1’</td><td>Invalid Date</td><td>1</td><td>‘1’</td><td>true</td></tr><tr class="odd"><td>true</td><td>Invalid Date</td><td>NaN</td><td>‘true’</td><td>true</td></tr><tr class="even"><td>false</td><td>Invalid Date</td><td>NaN</td><td>‘false’</td><td>false</td></tr><tr class="odd"><td>null</td><td>Invalid Date</td><td>NaN</td><td>‘null’</td><td>false</td></tr><tr class="even"><td>undefined</td><td>Invalid Date</td><td>NaN</td><td>‘undefined’</td><td>false</td></tr><tr class="odd"><td>NaN</td><td>Invalid Date</td><td>NaN</td><td>‘NaN’</td><td>false</td></tr></tbody></table>

Notes:

-   as before, arguments expected to be `Date` are converted to `Date` using *date-fns’* `toDate` function;
-   arguments expected to be numbers are converted to integer numbers using our custom `toInteger` implementation (see [\#765](https://github.com/date-fns/date-fns/pull/765));
-   arguments expected to be strings are converted to strings using JavaScript’s `String` function;
-   arguments expected to be booleans are converted to boolean using JavaScript’s `Boolean` function.

`null` and `undefined` passed to optional arguments (i.e. properties of `options` argument) are ignored as if no argument was passed.

If any argument is invalid (i.e. `NaN` for numbers and `Invalid Date` for dates), an invalid value will be returned:

-   `false` for functions that return booleans (expect `isValid`);
-   `Invalid Date` for functions that return dates;
-   `NaN` for functions that return numbers;
-   and `String('Invalid Date')` for functions that return strings.

See tests and PRs [\#460](https://github.com/date-fns/date-fns/pull/460) and [\#765](https://github.com/date-fns/date-fns/pull/765) for exact behavior.

### `null`

`null` now is not a valid date. `isValid(null)` returns `false`; `toDate(null)` returns an invalid date. Since `toDate` is used internally by all the functions, operations over `null` will also return an invalid date. [See \#537](https://github.com/date-fns/date-fns/issues/537) for the reasoning.

### `RangeError`

Functions now throw `RangeError` if optional values passed to `options` are not `undefined` or have expected values. This change is introduced for consistency with ECMAScript standard library which does the same.

### `TypeError`

All functions now check if the passed number of arguments is less than the number of required arguments and throw `TypeError` exception if so.

### UMD/CDN

The Bower & UMD/CDN package versions are no longer supported.

### New locale format

See [docs/Locale](https://date-fns.org/docs/Locale).

Locales renamed:

-   `en` → `en-US`
-   `zh_cn` → `zh-CN`
-   `zh_tw` → `zh-TW`

    // Before v2.0.0
    import locale from 'date-fns/locale/zh_cn'

    // v2.0.0 onward
    import locale from 'date-fns/locale/zh-CN'
