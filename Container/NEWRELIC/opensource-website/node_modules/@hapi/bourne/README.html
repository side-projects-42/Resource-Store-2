<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>README</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
</head>
<body>
<p><a href="http://hapijs.com"><img src="https://raw.githubusercontent.com/hapijs/assets/master/images/family.png" width="180px" align="right" /></a></p>
<h1 id="bourne.-json-bourne.">Bourne. JSON Bourne.</h1>
<p><code>JSON.parse()</code> drop-in replacement with prototype poisoning protection</p>
<p><a href="https://travis-ci.org/hapijs/bourne"><img src="https://travis-ci.org/hapijs/bourne.svg" alt="Build Status" /></a></p>
<h2 id="introduction">Introduction</h2>
<p>Consider this:</p>
<pre><code>&gt; const a = &#39;{&quot;__proto__&quot;:{ &quot;b&quot;:5}}&#39;;
&#39;{&quot;__proto__&quot;:{ &quot;b&quot;:5}}&#39;

&gt; const b = JSON.parse(a);
{ __proto__: { b: 5 } }

&gt; b.b;
undefined

&gt; const c = Object.assign({}, b);
{}

&gt; c.b
5</code></pre>
<p>The problem is that <code>JSON.parse()</code> retains the <code>__proto__</code> property as a plain object key. By itself, this is not a security issue. However, as soon as that object is assigned to another or iterated on and values copied, the <code>__proto__</code> property leaks and becomes the objectâ€™s prototype.</p>
<h2 id="api">API</h2>
<h3 id="bourne.parsetext-reviver-options"><code>Bourne.parse(text, [reviver], [options])</code></h3>
<p>Parses a given JSON-formatted text into an object where: - <code>text</code> - the JSON text string. - <code>reviver</code> - the <code>JSON.parse()</code> optional <code>reviver</code> argument. - <code>options</code> - optional configuration object where: - <code>protoAction</code> - optional string with one of: - <code>'error'</code> - throw a <code>SyntaxError</code> when a <code>__proto__</code> key is found. This is the default value. - <code>'remove'</code> - deletes any <code>__proto__</code> keys from the result object. - <code>'ignore'</code> - skips all validation (same as calling <code>JSON.parse()</code> directly).</p>
<h3 id="bourne.scanobj-options"><code>Bourne.scan(obj, [options])</code></h3>
<p>Scans a given object for prototype properties where: - <code>obj</code> - the object being scanned. - <code>options</code> - optional configuration object where: - <code>protoAction</code> - optional string with one of: - <code>'error'</code> - throw a <code>SyntaxError</code> when a <code>__proto__</code> key is found. This is the default value. - <code>'remove'</code> - deletes any <code>__proto__</code> keys from the input <code>obj</code>.</p>
</body>
</html>
