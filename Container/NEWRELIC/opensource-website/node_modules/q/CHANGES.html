<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>CHANGES</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
</head>
<body>
<h2 id="section">1.5.1</h2>
<ul>
<li>Q.any now annotates its error message to clarify that Q.any was involved and includes only the last error emitted. (Ivan Etchart)</li>
<li>Avoid domain.dispose during tests in preparation for Node.js 9. (Anna Henningsen)</li>
</ul>
<h2 id="section-1">1.5.0</h2>
<ul>
<li>Q.any gives an error message from the last rejected promise</li>
<li>Throw if callback supplied to “finally” is invalid (<span class="citation" data-cites="grahamrhay">@grahamrhay</span>)</li>
<li>Long stack trace improvements, can now construct long stack traces across rethrows.</li>
</ul>
<h2 id="section-2">1.4.1</h2>
<ul>
<li>Address an issue that prevented Q from being used as a <code>&lt;script&gt;</code> for Firefox add-ons. Q can now be used in any environment that provides <code>window</code> or <code>self</code> globals, favoring <code>window</code> since add-ons have an an immutable <code>self</code> that is distinct from <code>window</code>.</li>
</ul>
<h2 id="section-3">1.4.0</h2>
<ul>
<li>Add <code>noConflict</code> support for use in <code>&lt;script&gt;</code> (<span class="citation" data-cites="jahnjw">@jahnjw</span>).</li>
</ul>
<h2 id="section-4">1.3.0</h2>
<ul>
<li>Add tracking for unhandled and handled rejections in Node.js (<span class="citation" data-cites="benjamingr">@benjamingr</span>).</li>
</ul>
<h2 id="section-5">1.2.1</h2>
<ul>
<li>Fix Node.js environment detection for modern Browserify (<span class="citation" data-cites="kahnjw">@kahnjw</span>).</li>
</ul>
<h2 id="section-6">1.2.0</h2>
<ul>
<li>Added Q.any(promisesArray) method (<span class="citation" data-cites="vergara">@vergara</span>). Returns a promise fulfilled with the value of the first resolved promise in promisesArray. If all promises in promisesArray are rejected, it returns a rejected promise.</li>
</ul>
<h2 id="section-7">1.1.2</h2>
<ul>
<li>Removed extraneous files from the npm package by using the “files” whitelist in package.json instead of the .npmignore blacklist.
<ol class="example" type="1">
<li></li>
</ol></li>
</ul>
<h2 id="section-8">1.1.1</h2>
<ul>
<li>Fix a pair of regressions in bootstrapping, one which precluded WebWorker support, and another that precluded support in <code>&lt;script&gt;</code> usage outright. #607</li>
</ul>
<h2 id="section-9">1.1.0</h2>
<ul>
<li>Adds support for enabling long stack traces in node.js by setting environment variable <code>Q_DEBUG=1</code>.</li>
<li>Introduces the <code>tap</code> method to promises, which will see a value pass through without alteration.</li>
<li>Use instanceof to recognize own promise instances as opposed to thenables.</li>
<li>Construct timeout errors with <code>code === ETIMEDOUT</code> (Kornel Lesiński)</li>
<li>More descriminant CommonJS module environment detection.</li>
<li>Dropped continuous integration for Node.js 0.6 and 0.8 because of changes to npm that preclude the use of new <code>^</code> version predicate operator in any transitive dependency.</li>
<li>Users can now override <code>Q.nextTick</code>.</li>
</ul>
<h2 id="section-10">1.0.1</h2>
<ul>
<li>Adds support for <code>Q.Promise</code>, which implements common usage of the ES6 <code>Promise</code> constructor and its methods. <code>Promise</code> does not have a valid promise constructor and a proper implementation awaits version 2 of Q.</li>
<li>Removes the console stopgap for a promise inspector. This no longer works with any degree of reliability.</li>
<li>Fixes support for content security policies that forbid eval. Now using the <code>StopIteration</code> global to distinguish SpiderMonkey generators from ES6 generators, assuming that they will never coexist.</li>
</ul>
<h2 id="section-11">1.0.0</h2>
<p>:cake: This is all but a re-release of version 0.9, which has settled into a gentle maintenance mode and rightly deserves an official 1.0. An ambitious 2.0 release is already around the corner, but 0.9/1.0 have been distributed far and wide and demand long term support.</p>
<ul>
<li>Q will now attempt to post a debug message in browsers regardless of whether window.Touch is defined. Chrome at least now has this property regardless of whether touch is supported by the underlying hardware.</li>
<li>Remove deprecation warning from <code>promise.valueOf</code>. The function is called by the browser in various ways so there is no way to distinguish usage that should be migrated from usage that cannot be altered.</li>
</ul>
<h2 id="section-12">0.9.7</h2>
<ul>
<li>:warning: <code>q.min.js</code> is no longer checked-in. It is however still created by Grunt and NPM.</li>
<li>Fixes a bug that inhibited <code>Q.async</code> with implementations of the new ES6 generators.</li>
<li>Fixes a bug with <code>nextTick</code> affecting Safari 6.0.5 the first time a page loads when an <code>iframe</code> is involved.</li>
<li>Introduces <code>passByCopy</code>, <code>join</code>, and <code>race</code>.</li>
<li>Shows stack traces or error messages on the console, instead of <code>Error</code> objects.</li>
<li>Elimintates wrapper methods for improved performance.</li>
<li><code>Q.all</code> now propagates progress notifications of the form you might expect of ES6 iterations, <code>{value, index}</code> where the <code>value</code> is the progress notification from the promise at <code>index</code>.</li>
</ul>
<h2 id="section-13">0.9.6</h2>
<ul>
<li>Fixes a bug in recognizing the difference between compatible Q promises, and Q promises from before the implementation of “inspect”. The latter are now coerced.</li>
<li>Fixes an infinite asynchronous coercion cycle introduced by former solution, in two independently sufficient ways. 1.) All promises returned by makePromise now implement “inspect”, albeit a default that reports that the promise has an “unknown” state. 2.) The implementation of “then/when” is now in “then” instead of “when”, so that the responsibility to “coerce” the given promise rests solely in the “when” method and the “then” method may assume that “this” is a promise of the right type.</li>
<li>Refactors <code>nextTick</code> to use an unrolled microtask within Q regardless of how new ticks a requested. #316 <span class="citation" data-cites="rkatic">@rkatic</span></li>
</ul>
<h2 id="section-14">0.9.5</h2>
<ul>
<li>Introduces <code>inspect</code> for getting the state of a promise as <code>{state: "fulfilled" | "rejected" | "pending", value | reason}</code>.</li>
<li>Introduces <code>allSettled</code> which produces an array of promises states for the input promises once they have all “settled”. This is in accordance with a discussion on Promises/A+ that “settled” refers to a promise that is “fulfilled” or “rejected”. “resolved” refers to a deferred promise that has been “resolved” to another promise, “sealing its fate” to the fate of the successor promise.</li>
<li>Long stack traces are now off by default. Set <code>Q.longStackSupport</code> to true to enable long stack traces.</li>
<li>Long stack traces can now follow the entire asynchronous history of a promise, not just a single jump.</li>
<li>Introduces <code>spawn</code> for an immediately invoked asychronous generator. <span class="citation" data-cites="jlongster">@jlongster</span></li>
<li>Support for <em>experimental</em> synonyms <code>mapply</code>, <code>mcall</code>, <code>nmapply</code>, <code>nmcall</code> for method invocation.</li>
</ul>
<h2 id="section-15">0.9.4</h2>
<ul>
<li><code>isPromise</code> and <code>isPromiseAlike</code> now always returns a boolean (even for falsy values). #284 <span class="citation" data-cites="lfac-pt">@lfac-pt</span></li>
<li>Support for ES6 Generators in <code>async</code> #288 <span class="citation" data-cites="andywingo">@andywingo</span></li>
<li>Clear duplicate promise rejections from dispatch methods #238 <span class="citation" data-cites="SLaks">@SLaks</span></li>
<li>Unhandled rejection API #296 2 <code>stopUnhandledRejectionTracking</code>, <code>getUnhandledReasons</code>, <code>resetUnhandledRejections</code>.</li>
</ul>
<h2 id="section-16">0.9.3</h2>
<ul>
<li>Add the ability to give <code>Q.timeout</code>’s errors a custom error message. #270 <span class="citation" data-cites="jgrenon">@jgrenon</span></li>
<li>Fix Q’s call-stack busting behavior in Node.js 0.10, by switching from <code>process.nextTick</code> to <code>setImmediate</code>. #254 #259</li>
<li>Fix Q’s behavior when used with the Mocha test runner in the browser, since Mocha introduces a fake <code>process</code> global without a <code>nextTick</code> property. #267</li>
<li>Fix some, but not all, cases wherein Q would give false positives in its unhandled rejection detection (#252). A fix for other cases (#238) is hopefully coming soon.</li>
<li>Made <code>Q.promise</code> throw early if given a non-function.</li>
</ul>
<h2 id="section-17">0.9.2</h2>
<ul>
<li>Pass through progress notifications when using <code>timeout</code>. #229 <span class="citation" data-cites="omares">@omares</span></li>
<li>Pass through progress notifications when using <code>delay</code>.</li>
<li>Fix <code>nbind</code> to actually bind the <code>thisArg</code>. #232 <span class="citation" data-cites="davidpadbury">@davidpadbury</span></li>
</ul>
<h2 id="section-18">0.9.1</h2>
<ul>
<li>Made the AMD detection compatible with the RequireJS optimizer’s <code>namespace</code> option. #225 <span class="citation" data-cites="terinjokes">@terinjokes</span></li>
<li>Fix side effects from <code>valueOf</code>, and thus from <code>isFulfilled</code>, <code>isRejected</code>, and <code>isPending</code>. #226 <span class="citation" data-cites="benjamn">@benjamn</span></li>
</ul>
<h2 id="section-19">0.9.0</h2>
<p>This release removes many layers of deprecated methods and brings Q closer to alignment with Mark Miller’s TC39 <a href="http://wiki.ecmascript.org/doku.php?id=strawman:concurrency">strawman</a> for concurrency. At the same time, it fixes many bugs and adds a few features around error handling. Finally, it comes with an updated and comprehensive <a href="https://github.com/kriskowal/q/wiki/API-Reference">API Reference</a>.</p>
<h3 id="api-cleanup">API Cleanup</h3>
<p>The following deprecated or undocumented methods have been removed. Their replacements are listed here:</p>
<table>
<thead>
<tr>
<th>
0.8.x method
</th>
<th>
0.9 replacement
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<code>Q.ref</code>
</td>
<td>
<code>Q</code>
</td>
</tr>
<tr>
<td>
<code>call</code>, <code>apply</code>, <code>bind</code> (*)
</td>
<td>
<code>fcall</code>/<code>invoke</code>, <code>fapply</code>/<code>post</code>, <code>fbind</code>
</td>
</tr>
<tr>
<td>
<code>ncall</code>, <code>napply</code> (*)
</td>
<td>
<code>nfcall</code>/<code>ninvoke</code>, <code>nfapply</code>/<code>npost</code>
</td>
</tr>
<tr>
<td>
<code>end</code>
</td>
<td>
<code>done</code>
</td>
</tr>
<tr>
<td>
<code>put</code>
</td>
<td>
<code>set</code>
</td>
</tr>
<tr>
<td>
<code>node</code>
</td>
<td>
<code>nbind</code>
</td>
</tr>
<tr>
<td>
<code>nend</code>
</td>
<td>
<code>nodeify</code>
</td>
</tr>
<tr>
<td>
<code>isResolved</code>
</td>
<td>
<code>isPending</code>
</td>
</tr>
<tr>
<td>
<code>deferred.node</code>
</td>
<td>
<code>deferred.makeNodeResolver</code>
</td>
</tr>
<tr>
<td>
<code>Method</code>, <code>sender</code>
</td>
<td>
<code>dispatcher</code>
</td>
</tr>
<tr>
<td>
<code>send</code>
</td>
<td>
<code>dispatch</code>
</td>
</tr>
<tr>
<td>
<code>view</code>, <code>viewInfo</code>
</td>
<td>
(none)
</td>
</tr>
</tbody>
</table>
<p>(*) Use of <code>thisp</code> is discouraged. For calling methods, use <code>post</code> or <code>invoke</code>.</p>
<h3 id="alignment-with-the-concurrency-strawman">Alignment with the Concurrency Strawman</h3>
<ul>
<li>Q now exports a <code>Q(value)</code> function, an alias for <code>resolve</code>. <code>Q.call</code>, <code>Q.apply</code>, and <code>Q.bind</code> were removed to make room for the same methods on the function prototype.</li>
<li><code>invoke</code> has been aliased to <code>send</code> in all its forms.</li>
<li><code>post</code> with no method name acts like <code>fapply</code>.</li>
</ul>
<h3 id="error-handling">Error Handling</h3>
<ul>
<li>Long stack traces can be turned off by setting <code>Q.stackJumpLimit</code> to zero. In the future, this property will be used to fine tune how many stack jumps are retained in long stack traces; for now, anything nonzero is treated as one (since Q only tracks one stack jump at the moment, see #144). #168</li>
<li>In Node.js, if there are unhandled rejections when the process exits, they are output to the console. #115</li>
</ul>
<h3 id="other">Other</h3>
<ul>
<li><code>delete</code> and <code>set</code> (née <code>put</code>) no longer have a fulfillment value.</li>
<li>Q promises are no longer frozen, which <a href="http://code.google.com/p/v8/issues/detail?id=1858">helps with performance</a>.</li>
<li><code>thenReject</code> is now included, as a counterpart to <code>thenResolve</code>.</li>
<li>The included browser <code>nextTick</code> shim is now faster. #195 <span class="citation" data-cites="rkatic">@rkatic</span>.</li>
</ul>
<h3 id="bug-fixes">Bug Fixes</h3>
<ul>
<li>Q now works in Internet Explorer 10. #186 <span class="citation" data-cites="ForbesLindesay">@ForbesLindesay</span></li>
<li><code>fbind</code> no longer hard-binds the returned function’s <code>this</code> to <code>undefined</code>. #202</li>
<li><code>Q.reject</code> no longer leaks memory. #148</li>
<li><code>npost</code> with no arguments now works. #207</li>
<li><code>allResolved</code> now works with non-Q promises (“thenables”). #179</li>
<li><code>keys</code> behavior is now correct even in browsers without native <code>Object.keys</code>. #192 <span class="citation" data-cites="rkatic">@rkatic</span></li>
<li><code>isRejected</code> and the <code>exception</code> property now work correctly if the rejection reason is falsy. #198</li>
</ul>
<h3 id="internals-and-advanced">Internals and Advanced</h3>
<ul>
<li>The internal interface for a promise now uses <code>dispatchPromise(resolve, op, operands)</code> instead of <code>sendPromise(op, resolve, ...operands)</code>, which reduces the cases where Q needs to do argument slicing.</li>
<li>The internal protocol uses different operands. “put” is now “set”. “del” is now “delete”. “view” and “viewInfo” have been removed.</li>
<li><code>Q.fulfill</code> has been added. It is distinct from <code>Q.resolve</code> in that it does not pass promises through, nor coerces promises from other systems. The promise becomes the fulfillment value. This is only recommended for use when trying to fulfill a promise with an object that has a <code>then</code> function that is at the same time not a promise.</li>
</ul>
<h2 id="section-20">0.8.12</h2>
<ul>
<li>Treat foreign promises as unresolved in <code>Q.isFulfilled</code>; this lets <code>Q.all</code> work on arrays containing foreign promises. #154</li>
<li>Fix minor incompliances with the <a href="http://promises-aplus.github.com/promises-spec/">Promises/A+ spec</a> and <a href="https://github.com/promises-aplus/promises-tests">test suite</a>. #157 #158</li>
</ul>
<h2 id="section-21">0.8.11</h2>
<ul>
<li>Added <code>nfcall</code>, <code>nfapply</code>, and <code>nfbind</code> as <code>thisp</code>-less versions of <code>ncall</code>, <code>napply</code>, and <code>nbind</code>. The latter are now deprecated. #142</li>
<li>Long stack traces no longer cause linearly-growing memory usage when chaining promises together. #111</li>
<li>Inspecting <code>error.stack</code> in a rejection handler will now give a long stack trace. #103</li>
<li>Fixed <code>Q.timeout</code> to clear its timeout handle when the promise is rejected; previously, it kept the event loop alive until the timeout period expired. #145 <span class="citation" data-cites="dfilatov">@dfilatov</span></li>
<li>Added <code>q/queue</code> module, which exports an infinite promise queue constructor.</li>
</ul>
<h2 id="section-22">0.8.10</h2>
<ul>
<li>Added <code>done</code> as a replacement for <code>end</code>, taking the usual fulfillment, rejection, and progress handlers. It’s essentially equivalent to <code>then(f, r, p).end()</code>.</li>
<li>Added <code>Q.onerror</code>, a settable error trap that you can use to get full stack traces for uncaught errors. #94</li>
<li>Added <code>thenResolve</code> as a shortcut for returning a constant value once a promise is fulfilled. #108 <span class="citation" data-cites="ForbesLindesay">@ForbesLindesay</span></li>
<li>Various tweaks to progress notification, including propagation and transformation of progress values and only forwarding a single progress object.</li>
<li>Renamed <code>nend</code> to <code>nodeify</code>. It no longer returns an always-fulfilled promise when a Node callback is passed.</li>
<li><code>deferred.resolve</code> and <code>deferred.reject</code> no longer (sometimes) return <code>deferred.promise</code>.</li>
<li>Fixed stack traces getting mangled if they hit <code>end</code> twice. #116 #121 <span class="citation" data-cites="ef4">@ef4</span></li>
<li>Fixed <code>ninvoke</code> and <code>npost</code> to work on promises for objects with Node methods. #134</li>
<li>Fixed accidental coercion of objects with nontrivial <code>valueOf</code> methods, like <code>Date</code>s, by the promise’s <code>valueOf</code> method. #135</li>
<li>Fixed <code>spread</code> not calling the passed rejection handler if given a rejected promise.</li>
</ul>
<h2 id="section-23">0.8.9</h2>
<ul>
<li>Added <code>nend</code></li>
<li>Added preliminary progress notification support, via <code>promise.then(onFulfilled, onRejected, onProgress)</code>, <code>promise.progress(onProgress)</code>, and <code>deferred.notify(...progressData)</code>.</li>
<li>Made <code>put</code> and <code>del</code> return the object acted upon for easier chaining. #84</li>
<li>Fixed coercion cycles with cooperating promises. #106</li>
</ul>
<h2 id="section-24">0.8.7</h2>
<ul>
<li>Support <a href="http://github.com/kriskowal/mr">Montage Require</a></li>
</ul>
<h2 id="section-25">0.8.6</h2>
<ul>
<li>Fixed <code>npost</code> and <code>ninvoke</code> to pass the correct <code>thisp</code>. #74</li>
<li>Fixed various cases involving unorthodox rejection reasons. #73 #90 <span class="citation" data-cites="ef4">@ef4</span></li>
<li>Fixed double-resolving of misbehaved custom promises. #75</li>
<li>Sped up <code>Q.all</code> for arrays contain already-resolved promises or scalar values. <span class="citation" data-cites="ForbesLindesay">@ForbesLindesay</span></li>
<li>Made stack trace filtering work when concatenating assets. #93 <span class="citation" data-cites="ef4">@ef4</span></li>
<li>Added warnings for deprecated methods. <span class="citation" data-cites="ForbesLindesay">@ForbesLindesay</span></li>
<li>Added <code>.npmignore</code> file so that dependent packages get a slimmer <code>node_modules</code> directory.</li>
</ul>
<h2 id="section-26">0.8.5</h2>
<ul>
<li>Added preliminary support for long traces (2)</li>
<li>Added <code>fapply</code>, <code>fcall</code>, <code>fbind</code> for non-thisp promised function calls.</li>
<li>Added <code>return</code> for async generators, where generators are implemented.</li>
<li>Rejected promises now have an “exception” property. If an object isRejected(object), then object.valueOf().exception will be the wrapped error.</li>
<li>Added Jasmine specifications</li>
<li>Support Internet Explorers 7–9 (with multiple bug fixes 2)</li>
<li>Support Firefox 12</li>
<li>Support Safari 5.1.5</li>
<li>Support Chrome 18</li>
</ul>
<h2 id="section-27">0.8.4</h2>
<ul>
<li>WARNING: <code>promise.timeout</code> is now rejected with an <code>Error</code> object and the message now includes the duration of the timeout in miliseconds. This doesn’t constitute (in my opinion) a backward-incompatibility since it is a change of an undocumented and unspecified public behavior, but if you happened to depend on the exception being a string, you will need to revise your code.</li>
<li>Added <code>deferred.makeNodeResolver()</code> to replace the more cryptic <code>deferred.node()</code> method.</li>
<li>Added experimental <code>Q.promise(maker(resolve, reject))</code> to make a promise inside a callback, such that thrown exceptions in the callback are converted and the resolver and rejecter are arguments. This is a shorthand for making a deferred directly and inspired by <span class="citation" data-cites="gozala">@gozala</span>’s stream constructor pattern and the Microsoft Windows Metro Promise constructor interface.</li>
<li>Added experimental <code>Q.begin()</code> that is intended to kick off chains of <code>.then</code> so that each of these can be reordered without having to edit the new and former first step.</li>
</ul>
<h2 id="section-28">0.8.3</h2>
<ul>
<li>Added <code>isFulfilled</code>, <code>isRejected</code>, and <code>isResolved</code> to the promise prototype.</li>
<li>Added <code>allResolved</code> for waiting for every promise to either be fulfilled or rejected, without propagating an error. <span class="citation" data-cites="utvara">@utvara</span> #53</li>
<li>Added <code>Q.bind</code> as a method to transform functions that return and throw into promise-returning functions. See <a href="https://gist.github.com/1782808">an example</a>. 2</li>
<li>Renamed <code>node</code> export to <code>nbind</code>, and added <code>napply</code> to complete the set. <code>node</code> remains as deprecated. 2 #58</li>
<li>Renamed <code>Method</code> export to <code>sender</code>. <code>Method</code> remains as deprecated and will be removed in the next major version since I expect it has very little usage.</li>
<li>Added browser console message indicating a live list of unhandled errors.</li>
<li>Added support for <code>msSetImmediate</code> (IE10) or <code>setImmediate</code> (available via <a href="https://github.com/NobleJS/setImmediate">polyfill</a>) as a browser-side <code>nextTick</code> implementation. #44 #50 #59</li>
<li>Stopped using the event-queue dependency, which was in place for Narwhal support: now directly using <code>process.nextTick</code>.</li>
<li>WARNING: EXPERIMENTAL: added <code>finally</code> alias for <code>fin</code>, <code>catch</code> alias for <code>fail</code>, <code>try</code> alias for <code>call</code>, and <code>delete</code> alias for <code>del</code>. These properties are enquoted in the library for cross-browser compatibility, but may be used as property names in modern engines.</li>
</ul>
<h2 id="section-29">0.8.2</h2>
<ul>
<li>Deprecated <code>ref</code> in favor of <code>resolve</code> as recommended by
<ol start="2" class="example" type="1">
<li></li>
</ol></li>
<li>Update event-queue dependency.</li>
</ul>
<h2 id="section-30">0.8.1</h2>
<ul>
<li>Fixed Opera bug. #35 <span class="citation" data-cites="cadorn">@cadorn</span></li>
<li>Fixed <code>Q.all([])</code> #32 2</li>
</ul>
<h2 id="section-31">0.8.0</h2>
<ul>
<li>WARNING: <code>enqueue</code> removed. Use <code>nextTick</code> instead. This is more consistent with NodeJS and (subjectively) more explicit and intuitive.</li>
<li>WARNING: <code>def</code> removed. Use <code>master</code> instead. The term <code>def</code> was too confusing to new users.</li>
<li>WARNING: <code>spy</code> removed in favor of <code>fin</code>.</li>
<li>WARNING: <code>wait</code> removed. Do <code>all(args).get(0)</code> instead.</li>
<li>WARNING: <code>join</code> removed. Do <code>all(args).spread(callback)</code> instead.</li>
<li>WARNING: Removed the <code>Q</code> function module.exports alias for <code>Q.ref</code>. It conflicts with <code>Q.apply</code> in weird ways, making it uncallable.</li>
<li>Revised <code>delay</code> so that it accepts both <code>(value, timeout)</code> and <code>(timeout)</code> variations based on arguments length.</li>
<li>Added <code>ref().spread(cb(...args))</code>, a variant of <code>then</code> that spreads an array across multiple arguments. Useful with <code>all()</code>.</li>
<li>Added <code>defer().node()</code> Node callback generator. The callback accepts <code>(error, value)</code> or <code>(error, ...values)</code>. For multiple value arguments, the fulfillment value is an array, useful in conjunction with <code>spread</code>.</li>
<li>Added <code>node</code> and <code>ncall</code>, both with the signature <code>(fun, thisp_opt, ...args)</code>. The former is a decorator and the latter calls immediately. <code>node</code> optional binds and partially applies. <code>ncall</code> can bind and pass arguments.</li>
</ul>
<h2 id="section-32">0.7.2</h2>
<ul>
<li>Fixed thenable promise assimilation.</li>
</ul>
<h2 id="section-33">0.7.1</h2>
<ul>
<li>Stopped shimming <code>Array.prototype.reduce</code>. The enumerable property has bad side-effects. Libraries that depend on this (for example, QQ) will need to be revised.</li>
</ul>
<h2 id="backward-incompatibility">0.7.0 - BACKWARD INCOMPATIBILITY</h2>
<ul>
<li>WARNING: Removed <code>report</code> and <code>asap</code></li>
<li>WARNING: The <code>callback</code> argument of the <code>fin</code> function no longer receives any arguments. Thus, it can be used to call functions that should not receive arguments on resolution. Use <code>when</code>, <code>then</code>, or <code>fail</code> if you need a value.</li>
<li>IMPORTANT: Fixed a bug in the use of <code>MessageChannel</code> for <code>nextTick</code>.</li>
<li>Renamed <code>enqueue</code> to <code>nextTick</code>.</li>
<li>Added experimental <code>view</code> and <code>viewInfo</code> for creating views of promises either when or before they’re fulfilled.</li>
<li>Shims are now externally applied so subsequent scripts or dependees can use them.</li>
<li>Improved minification results.</li>
<li>Improved readability.</li>
</ul>
<h2 id="backward-incompatibility-1">0.6.0 - BACKWARD INCOMPATIBILITY</h2>
<ul>
<li>WARNING: In practice, the implementation of <code>spy</code> and the name <code>fin</code> were useful. I’ve removed the old <code>fin</code> implementation and renamed/aliased <code>spy</code>.</li>
<li>The “q” module now exports its <code>ref</code> function as a “Q” constructor, with module systems that support exports assignment including NodeJS, RequireJS, and when used as a <code>&lt;script&gt;</code> tag. Notably, strictly compliant CommonJS does not support this, but UncommonJS does.</li>
<li>Added <code>async</code> decorator for generators that use yield to “trampoline” promises. In engines that support generators (SpiderMonkey), this will greatly reduce the need for nested callbacks.</li>
<li>Made <code>when</code> chainable.</li>
<li>Made <code>all</code> chainable.</li>
</ul>
<h2 id="section-34">0.5.3</h2>
<ul>
<li>Added <code>all</code> and refactored <code>join</code> and <code>wait</code> to use it. All of these will now reject at the earliest rejection.</li>
</ul>
<h2 id="section-35">0.5.2</h2>
<ul>
<li>Minor improvement to <code>spy</code>; now waits for resolution of callback promise.</li>
</ul>
<h2 id="section-36">0.5.1</h2>
<ul>
<li>Made most Q API methods chainable on promise objects, and turned the previous promise-methods of <code>join</code>, <code>wait</code>, and <code>report</code> into Q API methods.</li>
<li>Added <code>apply</code> and <code>call</code> to the Q API, and <code>apply</code> as a promise handler.</li>
<li>Added <code>fail</code>, <code>fin</code>, and <code>spy</code> to Q and the promise prototype for convenience when observing rejection, fulfillment and rejection, or just observing without affecting the resolution.</li>
<li>Renamed <code>def</code> (although <code>def</code> remains shimmed until the next major release) to <code>master</code>.</li>
<li>Switched to using <code>MessageChannel</code> for next tick task enqueue in browsers that support it.</li>
</ul>
<h2 id="minor-backward-incompatibility">0.5.0 - MINOR BACKWARD INCOMPATIBILITY</h2>
<ul>
<li>Exceptions are no longer reported when consumed.</li>
<li>Removed <code>error</code> from the API. Since exceptions are getting consumed, throwing them in an errback causes the exception to silently disappear. Use <code>end</code>.</li>
<li>Added <code>end</code> as both an API method and a promise-chain ending method. It causes propagated rejections to be thrown, which allows Node to write stack traces and emit <code>uncaughtException</code> events, and browsers to likewise emit <code>onerror</code> and log to the console.</li>
<li>Added <code>join</code> and <code>wait</code> as promise chain functions, so you can wait for variadic promises, returning your own promise back, or join variadic promises, resolving with a callback that receives variadic fulfillment values.</li>
</ul>
<h2 id="section-37">0.4.4</h2>
<ul>
<li><code>end</code> no longer returns a promise. It is the end of the promise chain.</li>
<li>Stopped reporting thrown exceptions in <code>when</code> callbacks and errbacks. These must be explicitly reported through <code>.end()</code>, <code>.then(null, Q.error)</code>, or some other mechanism.</li>
<li>Added <code>report</code> as an API method, which can be used as an errback to report and propagate an error.</li>
<li>Added <code>report</code> as a promise-chain method, so an error can be reported if it passes such a gate.</li>
</ul>
<h2 id="section-38">0.4.3</h2>
<ul>
<li>Fixed <code>&lt;script&gt;</code> support that regressed with 0.4.2 because of “use strict” in the module system multi-plexer.</li>
</ul>
<h2 id="section-39">0.4.2</h2>
<ul>
<li>Added support for RequireJS (jburke)</li>
</ul>
<h2 id="section-40">0.4.1</h2>
<ul>
<li>Added an “end” method to the promise prototype, as a shorthand for waiting for the promise to be resolved gracefully, and failing to do so, to dump an error message.</li>
</ul>
<h2 id="backward-incompatible">0.4.0 - BACKWARD INCOMPATIBLE*</h2>
<ul>
<li>*Removed the utility modules. NPM and Node no longer expose any module except the main module. These have been moved and merged into the “qq” package.</li>
<li>*In a non-CommonJS browser, q.js can be used as a script. It now creates a Q global variable.</li>
<li>Fixed thenable assimilation.</li>
<li>Fixed some issues with asap, when it resolves to undefined, or throws an exception.</li>
</ul>
<h2 id="backward-incompatible-1">0.3.0 - BACKWARD-INCOMPATIBLE</h2>
<ul>
<li>The <code>post</code> method has been reverted to its original signature, as provided in Tyler Close’s <code>ref_send</code> API. That is, <code>post</code> accepts two arguments, the second of which is an arbitrary object, but usually invocation arguments as an <code>Array</code>. To provide variadic arguments to <code>post</code>, there is a new <code>invoke</code> function that posts the variadic arguments to the value given in the first argument.</li>
<li>The <code>defined</code> method has been moved from <code>q</code> to <code>q/util</code> since it gets no use in practice but is still theoretically useful.</li>
<li>The <code>Promise</code> constructor has been renamed to <code>makePromise</code> to be consistent with the convention that functions that do not require the <code>new</code> keyword to be used as constructors have camelCase names.</li>
<li>The <code>isResolved</code> function has been renamed to <code>isFulfilled</code>. There is a new <code>isResolved</code> function that indicates whether a value is not a promise or, if it is a promise, whether it has been either fulfilled or rejected. The code has been revised to reflect this nuance in terminology.</li>
</ul>
<h2 id="section-41">0.2.10</h2>
<ul>
<li>Added <code>join</code> to <code>"q/util"</code> for variadically joining multiple promises.</li>
</ul>
<h2 id="section-42">0.2.9</h2>
<ul>
<li>The future-compatible <code>invoke</code> method has been added, to replace <code>post</code>, since <code>post</code> will become backward- incompatible in the next major release.</li>
<li>Exceptions thrown in the callbacks of a <code>when</code> call are now emitted to Node’s <code>"uncaughtException"</code> <code>process</code> event in addition to being returned as a rejection reason.</li>
</ul>
<h2 id="section-43">0.2.8</h2>
<ul>
<li>Exceptions thrown in the callbacks of a <code>when</code> call are now consumed, warned, and transformed into rejections of the promise returned by <code>when</code>.</li>
</ul>
<h2 id="section-44">0.2.7</h2>
<ul>
<li>Fixed a minor bug in thenable assimilation, regressed because of the change in the forwarding protocol.</li>
<li>Fixed behavior of “q/util” <code>deep</code> method on dates and other primitives. Github issue #11.</li>
</ul>
<h2 id="section-45">0.2.6</h2>
<ul>
<li>Thenables (objects with a “then” method) are accepted and provided, bringing this implementation of Q into conformance with Promises/A, B, and D.</li>
<li>Added <code>makePromise</code>, to replace the <code>Promise</code> function eventually.</li>
<li>Rejections are now also duck-typed. A rejection is a promise with a valueOf method that returns a rejection descriptor. A rejection descriptor has a “promiseRejected” property equal to “true” and a “reason” property corresponding to the rejection reason.</li>
<li>Altered the <code>makePromise</code> API such that the <code>fallback</code> method no longer receives a superfluous <code>resolved</code> method after the <code>operator</code>. The fallback method is responsible only for returning a resolution. This breaks an undocumented API, so third-party API’s depending on the previous undocumented behavior may break.</li>
</ul>
<h2 id="section-46">0.2.5</h2>
<ul>
<li>Changed promises into a duck-type such that multiple instances of the Q module can exchange promise objects. A promise is now defined as “an object that implements the <code>promiseSend(op, resolved, ...)</code> method and <code>valueOf</code>”.</li>
<li>Exceptions in promises are now captured and returned as rejections.</li>
</ul>
<h2 id="section-47">0.2.4</h2>
<ul>
<li>Fixed bug in <code>ref</code> that prevented <code>del</code> messages from being received (gozala)</li>
<li>Fixed a conflict with FireFox 4; constructor property is now read-only.</li>
</ul>
<h2 id="section-48">0.2.3</h2>
<ul>
<li>Added <code>keys</code> message to promises and to the promise API.</li>
</ul>
<h2 id="section-49">0.2.2</h2>
<ul>
<li>Added boilerplate to <code>q/queue</code> and <code>q/util</code>.</li>
<li>Fixed missing dependency to <code>q/queue</code>.</li>
</ul>
<h2 id="section-50">0.2.1</h2>
<ul>
<li>The <code>resolve</code> and <code>reject</code> methods of <code>defer</code> objects now return the resolution promise for convenience.</li>
<li>Added <code>q/util</code>, which provides <code>step</code>, <code>delay</code>, <code>shallow</code>, <code>deep</code>, and three reduction orders.</li>
<li>Added <code>q/queue</code> module for a promise <code>Queue</code>.</li>
<li>Added <code>q-comm</code> to the list of compatible libraries.</li>
<li>Deprecated <code>defined</code> from <code>q</code>, with intent to move it to <code>q/util</code>.</li>
</ul>
<h2 id="backward-incompatible-2">0.2.0 - BACKWARD INCOMPATIBLE</h2>
<ul>
<li>Changed post(ref, name, args) to variadic post(ref, name, …args). BACKWARD INCOMPATIBLE</li>
<li>Added a def(value) method to annotate an object as being necessarily a local value that cannot be serialized, such that inter-process/worker/vat promise communication libraries will send messages to it, but never send it back.</li>
<li>Added a send(value, op, …args) method to the public API, for forwarding messages to a value or promise in a future turn.</li>
</ul>
<h2 id="section-51">0.1.9</h2>
<ul>
<li>Added isRejected() for testing whether a value is a rejected promise. isResolved() retains the behavior of stating that rejected promises are not resolved.</li>
</ul>
<h2 id="section-52">0.1.8</h2>
<ul>
<li>Fixed isResolved(null) and isResolved(undefined) [issue #9]</li>
<li>Fixed a problem with the Object.create shim</li>
</ul>
<h2 id="section-53">0.1.7</h2>
<ul>
<li>shimmed ES5 Object.create in addition to Object.freeze for compatibility on non-ES5 engines (gozala)</li>
</ul>
<h2 id="section-54">0.1.6</h2>
<ul>
<li>Q.isResolved added</li>
<li>promise.valueOf() now returns the value of resolved and near values</li>
<li>asap retried</li>
<li>promises are frozen when possible</li>
</ul>
<h2 id="section-55">0.1.5</h2>
<ul>
<li>fixed dependency list for Teleport (gozala)</li>
<li>all unit tests now pass (gozala)</li>
</ul>
<h2 id="section-56">0.1.4</h2>
<ul>
<li>added support for Teleport as an engine (gozala)</li>
<li>simplified and updated methods for getting internal print and enqueue functions universally (gozala)</li>
</ul>
<h2 id="section-57">0.1.3</h2>
<ul>
<li>fixed erroneous link to the q module in package.json</li>
</ul>
<h2 id="section-58">0.1.2</h2>
<ul>
<li>restructured for overlay style package compatibility</li>
</ul>
<h2 id="section-59">0.1.0</h2>
<ul>
<li>removed asap because it was broken, probably down to the philosophy.</li>
</ul>
<h2 id="section-60">0.0.3</h2>
<ul>
<li>removed q-util</li>
<li>fixed asap so it returns a value if completed</li>
</ul>
<h2 id="section-61">0.0.2</h2>
<ul>
<li>added q-util</li>
</ul>
<h2 id="section-62">0.0.1</h2>
<ul>
<li>initial version</li>
</ul>
</body>
</html>
