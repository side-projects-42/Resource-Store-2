<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Readme</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<h1 id="form-data-npm-module-join-the-chat-at-httpsgitter.imform-dataform-data">Form-Data <a href="https://www.npmjs.com/package/form-data"><img src="https://img.shields.io/npm/v/form-data.svg" alt="NPM Module" /></a> <a href="https://gitter.im/form-data/form-data"><img src="http://form-data.github.io/images/gitterbadge.svg" alt="Join the chat at https://gitter.im/form-data/form-data" /></a></h1>
<p>A library to create readable <code>"multipart/form-data"</code> streams. Can be used to submit forms and file uploads to other web applications.</p>
<p>The API of this library is inspired by the <a href="http://dev.w3.org/2006/webapi/XMLHttpRequest-2/Overview.html#the-formdata-interface">XMLHttpRequest-2 FormData Interface</a>.</p>
<p><a href="https://travis-ci.org/form-data/form-data"><img src="https://img.shields.io/travis/form-data/form-data/v3.0.1.svg?label=linux:6.x-12.x" alt="Linux Build" /></a> <a href="https://travis-ci.org/form-data/form-data"><img src="https://img.shields.io/travis/form-data/form-data/v3.0.1.svg?label=macos:6.x-12.x" alt="MacOS Build" /></a> <a href="https://travis-ci.org/form-data/form-data"><img src="https://img.shields.io/travis/form-data/form-data/v3.0.1.svg?label=windows:6.x-12.x" alt="Windows Build" /></a></p>
<p><a href="https://coveralls.io/github/form-data/form-data?branch=master"><img src="https://img.shields.io/coveralls/form-data/form-data/v3.0.1.svg?label=code+coverage" alt="Coverage Status" /></a> <a href="https://david-dm.org/form-data/form-data"><img src="https://img.shields.io/david/form-data/form-data.svg" alt="Dependency Status" /></a></p>
<h2 id="install">Install</h2>
<pre><code>npm install --save form-data</code></pre>
<h2 id="usage">Usage</h2>
<p>In this example we are constructing a form with 3 fields that contain a string, a buffer and a file stream.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1"><span class="kw">var</span> FormData <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;form-data&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-2" title="2"><span class="kw">var</span> fs <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;fs&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-3" title="3"></a>
<a class="sourceLine" id="cb2-4" title="4"><span class="kw">var</span> form <span class="op">=</span> <span class="kw">new</span> <span class="at">FormData</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb2-5" title="5"><span class="va">form</span>.<span class="at">append</span>(<span class="st">&#39;my_field&#39;</span><span class="op">,</span> <span class="st">&#39;my value&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-6" title="6"><span class="va">form</span>.<span class="at">append</span>(<span class="st">&#39;my_buffer&#39;</span><span class="op">,</span> <span class="kw">new</span> <span class="at">Buffer</span>(<span class="dv">10</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb2-7" title="7"><span class="va">form</span>.<span class="at">append</span>(<span class="st">&#39;my_file&#39;</span><span class="op">,</span> <span class="va">fs</span>.<span class="at">createReadStream</span>(<span class="st">&#39;/foo/bar.jpg&#39;</span>))<span class="op">;</span></a></code></pre></div>
<p>Also you can use http-response stream:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="kw">var</span> FormData <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;form-data&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-2" title="2"><span class="kw">var</span> http <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;http&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-3" title="3"></a>
<a class="sourceLine" id="cb3-4" title="4"><span class="kw">var</span> form <span class="op">=</span> <span class="kw">new</span> <span class="at">FormData</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb3-5" title="5"></a>
<a class="sourceLine" id="cb3-6" title="6"><span class="va">http</span>.<span class="at">request</span>(<span class="st">&#39;http://nodejs.org/images/logo.png&#39;</span><span class="op">,</span> <span class="kw">function</span>(response) <span class="op">{</span></a>
<a class="sourceLine" id="cb3-7" title="7">  <span class="va">form</span>.<span class="at">append</span>(<span class="st">&#39;my_field&#39;</span><span class="op">,</span> <span class="st">&#39;my value&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-8" title="8">  <span class="va">form</span>.<span class="at">append</span>(<span class="st">&#39;my_buffer&#39;</span><span class="op">,</span> <span class="kw">new</span> <span class="at">Buffer</span>(<span class="dv">10</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb3-9" title="9">  <span class="va">form</span>.<span class="at">append</span>(<span class="st">&#39;my_logo&#39;</span><span class="op">,</span> response)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-10" title="10"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>Or <span class="citation" data-cites="mikeal">@mikeal</span>’s <a href="https://github.com/request/request">request</a> stream:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1"><span class="kw">var</span> FormData <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;form-data&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-2" title="2"><span class="kw">var</span> request <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;request&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-3" title="3"></a>
<a class="sourceLine" id="cb4-4" title="4"><span class="kw">var</span> form <span class="op">=</span> <span class="kw">new</span> <span class="at">FormData</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb4-5" title="5"></a>
<a class="sourceLine" id="cb4-6" title="6"><span class="va">form</span>.<span class="at">append</span>(<span class="st">&#39;my_field&#39;</span><span class="op">,</span> <span class="st">&#39;my value&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-7" title="7"><span class="va">form</span>.<span class="at">append</span>(<span class="st">&#39;my_buffer&#39;</span><span class="op">,</span> <span class="kw">new</span> <span class="at">Buffer</span>(<span class="dv">10</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb4-8" title="8"><span class="va">form</span>.<span class="at">append</span>(<span class="st">&#39;my_logo&#39;</span><span class="op">,</span> <span class="at">request</span>(<span class="st">&#39;http://nodejs.org/images/logo.png&#39;</span>))<span class="op">;</span></a></code></pre></div>
<p>In order to submit this form to a web application, call <code>submit(url, [callback])</code> method:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb5-1" title="1"><span class="va">form</span>.<span class="at">submit</span>(<span class="st">&#39;http://example.org/&#39;</span><span class="op">,</span> <span class="kw">function</span>(err<span class="op">,</span> res) <span class="op">{</span></a>
<a class="sourceLine" id="cb5-2" title="2">  <span class="co">// res – response object (http.IncomingMessage)  //</span></a>
<a class="sourceLine" id="cb5-3" title="3">  <span class="va">res</span>.<span class="at">resume</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb5-4" title="4"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>For more advanced request manipulations <code>submit()</code> method returns <code>http.ClientRequest</code> object, or you can choose from one of the alternative submission methods.</p>
<h3 id="custom-options">Custom options</h3>
<p>You can provide custom options, such as <code>maxDataSize</code>:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb6-1" title="1"><span class="kw">var</span> FormData <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;form-data&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-2" title="2"></a>
<a class="sourceLine" id="cb6-3" title="3"><span class="kw">var</span> form <span class="op">=</span> <span class="kw">new</span> <span class="at">FormData</span>(<span class="op">{</span> <span class="dt">maxDataSize</span><span class="op">:</span> <span class="dv">20971520</span> <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-4" title="4"><span class="va">form</span>.<span class="at">append</span>(<span class="st">&#39;my_field&#39;</span><span class="op">,</span> <span class="st">&#39;my value&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-5" title="5"><span class="va">form</span>.<span class="at">append</span>(<span class="st">&#39;my_buffer&#39;</span><span class="op">,</span> <span class="co">/* something big */</span>)<span class="op">;</span></a></code></pre></div>
<p>List of available options could be found in <a href="https://github.com/felixge/node-combined-stream/blob/master/lib/combined_stream.js#L7-L15">combined-stream</a></p>
<h3 id="alternative-submission-methods">Alternative submission methods</h3>
<p>You can use node’s http client interface:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb7-1" title="1"><span class="kw">var</span> http <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;http&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-2" title="2"></a>
<a class="sourceLine" id="cb7-3" title="3"><span class="kw">var</span> request <span class="op">=</span> <span class="va">http</span>.<span class="at">request</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb7-4" title="4">  <span class="dt">method</span><span class="op">:</span> <span class="st">&#39;post&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb7-5" title="5">  <span class="dt">host</span><span class="op">:</span> <span class="st">&#39;example.org&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb7-6" title="6">  <span class="dt">path</span><span class="op">:</span> <span class="st">&#39;/upload&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb7-7" title="7">  <span class="dt">headers</span><span class="op">:</span> <span class="va">form</span>.<span class="at">getHeaders</span>()</a>
<a class="sourceLine" id="cb7-8" title="8"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-9" title="9"></a>
<a class="sourceLine" id="cb7-10" title="10"><span class="va">form</span>.<span class="at">pipe</span>(request)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-11" title="11"></a>
<a class="sourceLine" id="cb7-12" title="12"><span class="va">request</span>.<span class="at">on</span>(<span class="st">&#39;response&#39;</span><span class="op">,</span> <span class="kw">function</span>(res) <span class="op">{</span></a>
<a class="sourceLine" id="cb7-13" title="13">  <span class="va">console</span>.<span class="at">log</span>(<span class="va">res</span>.<span class="at">statusCode</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-14" title="14"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>Or if you would prefer the <code>'Content-Length'</code> header to be set for you:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb8-1" title="1"><span class="va">form</span>.<span class="at">submit</span>(<span class="st">&#39;example.org/upload&#39;</span><span class="op">,</span> <span class="kw">function</span>(err<span class="op">,</span> res) <span class="op">{</span></a>
<a class="sourceLine" id="cb8-2" title="2">  <span class="va">console</span>.<span class="at">log</span>(<span class="va">res</span>.<span class="at">statusCode</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-3" title="3"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>To use custom headers and pre-known length in parts:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb9-1" title="1"><span class="kw">var</span> CRLF <span class="op">=</span> <span class="st">&#39;</span><span class="sc">\r\n</span><span class="st">&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb9-2" title="2"><span class="kw">var</span> form <span class="op">=</span> <span class="kw">new</span> <span class="at">FormData</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb9-3" title="3"></a>
<a class="sourceLine" id="cb9-4" title="4"><span class="kw">var</span> options <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb9-5" title="5">  <span class="dt">header</span><span class="op">:</span> CRLF <span class="op">+</span> <span class="st">&#39;--&#39;</span> <span class="op">+</span> <span class="va">form</span>.<span class="at">getBoundary</span>() <span class="op">+</span> CRLF <span class="op">+</span> <span class="st">&#39;X-Custom-Header: 123&#39;</span> <span class="op">+</span> CRLF <span class="op">+</span> CRLF<span class="op">,</span></a>
<a class="sourceLine" id="cb9-6" title="6">  <span class="dt">knownLength</span><span class="op">:</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb9-7" title="7"><span class="op">};</span></a>
<a class="sourceLine" id="cb9-8" title="8"></a>
<a class="sourceLine" id="cb9-9" title="9"><span class="va">form</span>.<span class="at">append</span>(<span class="st">&#39;my_buffer&#39;</span><span class="op">,</span> buffer<span class="op">,</span> options)<span class="op">;</span></a>
<a class="sourceLine" id="cb9-10" title="10"></a>
<a class="sourceLine" id="cb9-11" title="11"><span class="va">form</span>.<span class="at">submit</span>(<span class="st">&#39;http://example.com/&#39;</span><span class="op">,</span> <span class="kw">function</span>(err<span class="op">,</span> res) <span class="op">{</span></a>
<a class="sourceLine" id="cb9-12" title="12">  <span class="cf">if</span> (err) <span class="cf">throw</span> err<span class="op">;</span></a>
<a class="sourceLine" id="cb9-13" title="13">  <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;Done&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb9-14" title="14"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>Form-Data can recognize and fetch all the required information from common types of streams (<code>fs.readStream</code>, <code>http.response</code> and <code>mikeal's request</code>), for some other types of streams you’d need to provide “file”-related information manually:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb10-1" title="1"><span class="va">someModule</span>.<span class="at">stream</span>(<span class="kw">function</span>(err<span class="op">,</span> stdout<span class="op">,</span> stderr) <span class="op">{</span></a>
<a class="sourceLine" id="cb10-2" title="2">  <span class="cf">if</span> (err) <span class="cf">throw</span> err<span class="op">;</span></a>
<a class="sourceLine" id="cb10-3" title="3"></a>
<a class="sourceLine" id="cb10-4" title="4">  <span class="kw">var</span> form <span class="op">=</span> <span class="kw">new</span> <span class="at">FormData</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb10-5" title="5"></a>
<a class="sourceLine" id="cb10-6" title="6">  <span class="va">form</span>.<span class="at">append</span>(<span class="st">&#39;file&#39;</span><span class="op">,</span> stdout<span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb10-7" title="7">    <span class="dt">filename</span><span class="op">:</span> <span class="st">&#39;unicycle.jpg&#39;</span><span class="op">,</span> <span class="co">// ... or:</span></a>
<a class="sourceLine" id="cb10-8" title="8">    <span class="dt">filepath</span><span class="op">:</span> <span class="st">&#39;photos/toys/unicycle.jpg&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb10-9" title="9">    <span class="dt">contentType</span><span class="op">:</span> <span class="st">&#39;image/jpeg&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb10-10" title="10">    <span class="dt">knownLength</span><span class="op">:</span> <span class="dv">19806</span></a>
<a class="sourceLine" id="cb10-11" title="11">  <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb10-12" title="12"></a>
<a class="sourceLine" id="cb10-13" title="13">  <span class="va">form</span>.<span class="at">submit</span>(<span class="st">&#39;http://example.com/&#39;</span><span class="op">,</span> <span class="kw">function</span>(err<span class="op">,</span> res) <span class="op">{</span></a>
<a class="sourceLine" id="cb10-14" title="14">    <span class="cf">if</span> (err) <span class="cf">throw</span> err<span class="op">;</span></a>
<a class="sourceLine" id="cb10-15" title="15">    <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;Done&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb10-16" title="16">  <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb10-17" title="17"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>The <code>filepath</code> property overrides <code>filename</code> and may contain a relative path. This is typically used when uploading <a href="https://wicg.github.io/entries-api/#dom-htmlinputelement-webkitdirectory">multiple files from a directory</a>.</p>
<p>For edge cases, like POST request to URL with query string or to pass HTTP auth credentials, object can be passed to <code>form.submit()</code> as first parameter:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb11-1" title="1"><span class="va">form</span>.<span class="at">submit</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb11-2" title="2">  <span class="dt">host</span><span class="op">:</span> <span class="st">&#39;example.com&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb11-3" title="3">  <span class="dt">path</span><span class="op">:</span> <span class="st">&#39;/probably.php?extra=params&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb11-4" title="4">  <span class="dt">auth</span><span class="op">:</span> <span class="st">&#39;username:password&#39;</span></a>
<a class="sourceLine" id="cb11-5" title="5"><span class="op">},</span> <span class="kw">function</span>(err<span class="op">,</span> res) <span class="op">{</span></a>
<a class="sourceLine" id="cb11-6" title="6">  <span class="va">console</span>.<span class="at">log</span>(<span class="va">res</span>.<span class="at">statusCode</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb11-7" title="7"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>In case you need to also send custom HTTP headers with the POST request, you can use the <code>headers</code> key in first parameter of <code>form.submit()</code>:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb12-1" title="1"><span class="va">form</span>.<span class="at">submit</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb12-2" title="2">  <span class="dt">host</span><span class="op">:</span> <span class="st">&#39;example.com&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb12-3" title="3">  <span class="dt">path</span><span class="op">:</span> <span class="st">&#39;/surelynot.php&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb12-4" title="4">  <span class="dt">headers</span><span class="op">:</span> <span class="op">{</span><span class="st">&#39;x-test-header&#39;</span><span class="op">:</span> <span class="st">&#39;test-header-value&#39;</span><span class="op">}</span></a>
<a class="sourceLine" id="cb12-5" title="5"><span class="op">},</span> <span class="kw">function</span>(err<span class="op">,</span> res) <span class="op">{</span></a>
<a class="sourceLine" id="cb12-6" title="6">  <span class="va">console</span>.<span class="at">log</span>(<span class="va">res</span>.<span class="at">statusCode</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb12-7" title="7"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h3 id="methods">Methods</h3>
<ul>
<li><a href="https://github.com/form-data/form-data#void-append-string-field-mixed-value--mixed-options-"><em>Void</em> append( <strong>String</strong> <em>field</em>, <strong>Mixed</strong> <em>value</em> [, <strong>Mixed</strong> <em>options</em>] )</a>.</li>
<li><a href="https://github.com/form-data/form-data#array-getheaders-array-userheaders-"><em>Headers</em> getHeaders( [<strong>Headers</strong> <em>userHeaders</em>] )</a></li>
<li><a href="https://github.com/form-data/form-data#string-getboundary"><em>String</em> getBoundary()</a></li>
<li><a href="https://github.com/form-data/form-data#void-setboundary"><em>Void</em> setBoundary()</a></li>
<li><a href="https://github.com/form-data/form-data#buffer-getbuffer"><em>Buffer</em> getBuffer()</a></li>
<li><a href="https://github.com/form-data/form-data#integer-getlengthsync"><em>Integer</em> getLengthSync()</a></li>
<li><a href="https://github.com/form-data/form-data#integer-getlength-function-callback-"><em>Integer</em> getLength( <strong>function</strong> <em>callback</em> )</a></li>
<li><a href="https://github.com/form-data/form-data#boolean-hasknownlength"><em>Boolean</em> hasKnownLength()</a></li>
<li><a href="https://github.com/form-data/form-data#request-submit-params-function-callback-"><em>Request</em> submit( <em>params</em>, <strong>function</strong> <em>callback</em> )</a></li>
<li><a href="https://github.com/form-data/form-data#string-tostring"><em>String</em> toString()</a></li>
</ul>
<h4 id="void-append-string-field-mixed-value-mixed-options"><em>Void</em> append( <strong>String</strong> <em>field</em>, <strong>Mixed</strong> <em>value</em> [, <strong>Mixed</strong> <em>options</em>] )</h4>
<p>Append data to the form. You can submit about any format (string, integer, boolean, buffer, etc.). However, Arrays are not supported and need to be turned into strings by the user.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb13-1" title="1"><span class="kw">var</span> form <span class="op">=</span> <span class="kw">new</span> <span class="at">FormData</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb13-2" title="2"><span class="va">form</span>.<span class="at">append</span>( <span class="st">&#39;my_string&#39;</span><span class="op">,</span> <span class="st">&#39;my value&#39;</span> )<span class="op">;</span></a>
<a class="sourceLine" id="cb13-3" title="3"><span class="va">form</span>.<span class="at">append</span>( <span class="st">&#39;my_integer&#39;</span><span class="op">,</span> <span class="dv">1</span> )<span class="op">;</span></a>
<a class="sourceLine" id="cb13-4" title="4"><span class="va">form</span>.<span class="at">append</span>( <span class="st">&#39;my_boolean&#39;</span><span class="op">,</span> <span class="kw">true</span> )<span class="op">;</span></a>
<a class="sourceLine" id="cb13-5" title="5"><span class="va">form</span>.<span class="at">append</span>( <span class="st">&#39;my_buffer&#39;</span><span class="op">,</span> <span class="kw">new</span> <span class="at">Buffer</span>(<span class="dv">10</span>) )<span class="op">;</span></a>
<a class="sourceLine" id="cb13-6" title="6"><span class="va">form</span>.<span class="at">append</span>( <span class="st">&#39;my_array_as_json&#39;</span><span class="op">,</span> <span class="va">JSON</span>.<span class="at">stringify</span>( [<span class="st">&#39;bird&#39;</span><span class="op">,</span><span class="st">&#39;cute&#39;</span>] ) )</a></code></pre></div>
<p>You may provide a string for options, or an object.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb14-1" title="1"><span class="co">// Set filename by providing a string for options</span></a>
<a class="sourceLine" id="cb14-2" title="2"><span class="va">form</span>.<span class="at">append</span>( <span class="st">&#39;my_file&#39;</span><span class="op">,</span> <span class="va">fs</span>.<span class="at">createReadStream</span>(<span class="st">&#39;/foo/bar.jpg&#39;</span>)<span class="op">,</span> <span class="st">&#39;bar.jpg&#39;</span> )<span class="op">;</span></a>
<a class="sourceLine" id="cb14-3" title="3"></a>
<a class="sourceLine" id="cb14-4" title="4"><span class="co">// provide an object.</span></a>
<a class="sourceLine" id="cb14-5" title="5"><span class="va">form</span>.<span class="at">append</span>( <span class="st">&#39;my_file&#39;</span><span class="op">,</span> <span class="va">fs</span>.<span class="at">createReadStream</span>(<span class="st">&#39;/foo/bar.jpg&#39;</span>)<span class="op">,</span> <span class="op">{</span><span class="dt">filename</span><span class="op">:</span> <span class="st">&#39;bar.jpg&#39;</span><span class="op">,</span> <span class="dt">contentType</span><span class="op">:</span> <span class="st">&#39;image/jpeg&#39;</span><span class="op">,</span> <span class="dt">knownLength</span><span class="op">:</span> <span class="dv">19806</span><span class="op">}</span> )<span class="op">;</span></a></code></pre></div>
<h4 id="headers-getheaders-headers-userheaders"><em>Headers</em> getHeaders( [<strong>Headers</strong> <em>userHeaders</em>] )</h4>
<p>This method adds the correct <code>content-type</code> header to the provided array of <code>userHeaders</code>.</p>
<h4 id="string-getboundary"><em>String</em> getBoundary()</h4>
<p>Return the boundary of the formData. By default, the boundary consists of 26 <code>-</code> followed by 24 numbers for example:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb15-1" title="1"><span class="op">--------------------------</span><span class="dv">515890814546601021194782</span></a></code></pre></div>
<h4 id="void-setboundarystring-boundary"><em>Void</em> setBoundary(String <em>boundary</em>)</h4>
<p>Set the boundary string, overriding the default behavior described above.</p>
<p><em>Note: The boundary must be unique and may not appear in the data.</em></p>
<h4 id="buffer-getbuffer"><em>Buffer</em> getBuffer()</h4>
<p>Return the full formdata request package, as a Buffer. You can insert this Buffer in e.g. Axios to send multipart data.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb16-1" title="1"><span class="kw">var</span> form <span class="op">=</span> <span class="kw">new</span> <span class="at">FormData</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb16-2" title="2"><span class="va">form</span>.<span class="at">append</span>( <span class="st">&#39;my_buffer&#39;</span><span class="op">,</span> <span class="va">Buffer</span>.<span class="at">from</span>([<span class="bn">0x4a</span><span class="op">,</span><span class="bn">0x42</span><span class="op">,</span><span class="bn">0x20</span><span class="op">,</span><span class="bn">0x52</span><span class="op">,</span><span class="bn">0x6f</span><span class="op">,</span><span class="bn">0x63</span><span class="op">,</span><span class="bn">0x6b</span><span class="op">,</span><span class="bn">0x73</span>]) )<span class="op">;</span></a>
<a class="sourceLine" id="cb16-3" title="3"><span class="va">form</span>.<span class="at">append</span>( <span class="st">&#39;my_file&#39;</span><span class="op">,</span> <span class="va">fs</span>.<span class="at">readFileSync</span>(<span class="st">&#39;/foo/bar.jpg&#39;</span>) )<span class="op">;</span></a>
<a class="sourceLine" id="cb16-4" title="4"></a>
<a class="sourceLine" id="cb16-5" title="5"><span class="va">axios</span>.<span class="at">post</span>( <span class="st">&#39;https://example.com/path/to/api&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb16-6" title="6">            <span class="va">form</span>.<span class="at">getBuffer</span>()<span class="op">,</span></a>
<a class="sourceLine" id="cb16-7" title="7">            <span class="va">form</span>.<span class="at">getHeaders</span>()</a>
<a class="sourceLine" id="cb16-8" title="8">          )</a></code></pre></div>
<p><strong>Note:</strong> Because the output is of type Buffer, you can only append types that are accepted by Buffer: <em>string, Buffer, ArrayBuffer, Array, or Array-like Object</em>. A ReadStream for example will result in an error.</p>
<h4 id="integer-getlengthsync"><em>Integer</em> getLengthSync()</h4>
<p>Same as <code>getLength</code> but synchronous.</p>
<p><em>Note: getLengthSync <strong>doesn’t</strong> calculate streams length.</em></p>
<h4 id="integer-getlength-function-callback"><em>Integer</em> getLength( <strong>function</strong> <em>callback</em> )</h4>
<p>Returns the <code>Content-Length</code> async. The callback is used to handle errors and continue once the length has been calculated</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb17-1" title="1"><span class="kw">this</span>.<span class="at">getLength</span>(<span class="kw">function</span>(err<span class="op">,</span> length) <span class="op">{</span></a>
<a class="sourceLine" id="cb17-2" title="2">  <span class="cf">if</span> (err) <span class="op">{</span></a>
<a class="sourceLine" id="cb17-3" title="3">    <span class="kw">this</span>.<span class="at">_error</span>(err)<span class="op">;</span></a>
<a class="sourceLine" id="cb17-4" title="4">    <span class="cf">return</span><span class="op">;</span></a>
<a class="sourceLine" id="cb17-5" title="5">  <span class="op">}</span></a>
<a class="sourceLine" id="cb17-6" title="6"></a>
<a class="sourceLine" id="cb17-7" title="7">  <span class="co">// add content length</span></a>
<a class="sourceLine" id="cb17-8" title="8">  <span class="va">request</span>.<span class="at">setHeader</span>(<span class="st">&#39;Content-Length&#39;</span><span class="op">,</span> length)<span class="op">;</span></a>
<a class="sourceLine" id="cb17-9" title="9"></a>
<a class="sourceLine" id="cb17-10" title="10">  ...</a>
<a class="sourceLine" id="cb17-11" title="11"><span class="op">}</span>.<span class="at">bind</span>(<span class="kw">this</span>))<span class="op">;</span></a></code></pre></div>
<h4 id="boolean-hasknownlength"><em>Boolean</em> hasKnownLength()</h4>
<p>Checks if the length of added values is known.</p>
<h4 id="request-submit-params-function-callback"><em>Request</em> submit( <em>params</em>, <strong>function</strong> <em>callback</em> )</h4>
<p>Submit the form to a web application.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb18-1" title="1"><span class="kw">var</span> form <span class="op">=</span> <span class="kw">new</span> <span class="at">FormData</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb18-2" title="2"><span class="va">form</span>.<span class="at">append</span>( <span class="st">&#39;my_string&#39;</span><span class="op">,</span> <span class="st">&#39;Hello World&#39;</span> )<span class="op">;</span></a>
<a class="sourceLine" id="cb18-3" title="3"></a>
<a class="sourceLine" id="cb18-4" title="4"><span class="va">form</span>.<span class="at">submit</span>( <span class="st">&#39;http://example.com/&#39;</span><span class="op">,</span> <span class="kw">function</span>(err<span class="op">,</span> res) <span class="op">{</span></a>
<a class="sourceLine" id="cb18-5" title="5">  <span class="co">// res – response object (http.IncomingMessage)  //</span></a>
<a class="sourceLine" id="cb18-6" title="6">  <span class="va">res</span>.<span class="at">resume</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb18-7" title="7"><span class="op">}</span> )<span class="op">;</span></a></code></pre></div>
<h4 id="string-tostring"><em>String</em> toString()</h4>
<p>Returns the form data as a string. Don’t use this if you are sending files or buffers, use <code>getBuffer()</code> instead.</p>
<h3 id="integration-with-other-libraries">Integration with other libraries</h3>
<h4 id="request">Request</h4>
<p>Form submission using <a href="https://github.com/request/request">request</a>:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb19-1" title="1"><span class="kw">var</span> formData <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb19-2" title="2">  <span class="dt">my_field</span><span class="op">:</span> <span class="st">&#39;my_value&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb19-3" title="3">  <span class="dt">my_file</span><span class="op">:</span> <span class="va">fs</span>.<span class="at">createReadStream</span>(__dirname <span class="op">+</span> <span class="st">&#39;/unicycle.jpg&#39;</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb19-4" title="4"><span class="op">};</span></a>
<a class="sourceLine" id="cb19-5" title="5"></a>
<a class="sourceLine" id="cb19-6" title="6"><span class="va">request</span>.<span class="at">post</span>(<span class="op">{</span><span class="dt">url</span><span class="op">:</span><span class="st">&#39;http://service.com/upload&#39;</span><span class="op">,</span> <span class="dt">formData</span><span class="op">:</span> formData<span class="op">},</span> <span class="kw">function</span>(err<span class="op">,</span> httpResponse<span class="op">,</span> body) <span class="op">{</span></a>
<a class="sourceLine" id="cb19-7" title="7">  <span class="cf">if</span> (err) <span class="op">{</span></a>
<a class="sourceLine" id="cb19-8" title="8">    <span class="cf">return</span> <span class="va">console</span>.<span class="at">error</span>(<span class="st">&#39;upload failed:&#39;</span><span class="op">,</span> err)<span class="op">;</span></a>
<a class="sourceLine" id="cb19-9" title="9">  <span class="op">}</span></a>
<a class="sourceLine" id="cb19-10" title="10">  <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;Upload successful!  Server responded with:&#39;</span><span class="op">,</span> body)<span class="op">;</span></a>
<a class="sourceLine" id="cb19-11" title="11"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>For more details see <a href="https://github.com/request/request#multipartform-data-multipart-form-uploads">request readme</a>.</p>
<h4 id="node-fetch">node-fetch</h4>
<p>You can also submit a form using <a href="https://github.com/bitinn/node-fetch">node-fetch</a>:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb20-1" title="1"><span class="kw">var</span> form <span class="op">=</span> <span class="kw">new</span> <span class="at">FormData</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb20-2" title="2"></a>
<a class="sourceLine" id="cb20-3" title="3"><span class="va">form</span>.<span class="at">append</span>(<span class="st">&#39;a&#39;</span><span class="op">,</span> <span class="dv">1</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb20-4" title="4"></a>
<a class="sourceLine" id="cb20-5" title="5"><span class="at">fetch</span>(<span class="st">&#39;http://example.com&#39;</span><span class="op">,</span> <span class="op">{</span> <span class="dt">method</span><span class="op">:</span> <span class="st">&#39;POST&#39;</span><span class="op">,</span> <span class="dt">body</span><span class="op">:</span> form <span class="op">}</span>)</a>
<a class="sourceLine" id="cb20-6" title="6">    .<span class="at">then</span>(<span class="kw">function</span>(res) <span class="op">{</span></a>
<a class="sourceLine" id="cb20-7" title="7">        <span class="cf">return</span> <span class="va">res</span>.<span class="at">json</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb20-8" title="8">    <span class="op">}</span>).<span class="at">then</span>(<span class="kw">function</span>(json) <span class="op">{</span></a>
<a class="sourceLine" id="cb20-9" title="9">        <span class="va">console</span>.<span class="at">log</span>(json)<span class="op">;</span></a>
<a class="sourceLine" id="cb20-10" title="10">    <span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h4 id="axios">axios</h4>
<p>In Node.js you can post a file using <a href="https://github.com/axios/axios">axios</a>:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb21-1" title="1"><span class="kw">const</span> form <span class="op">=</span> <span class="kw">new</span> <span class="at">FormData</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb21-2" title="2"><span class="kw">const</span> stream <span class="op">=</span> <span class="va">fs</span>.<span class="at">createReadStream</span>(PATH_TO_FILE)<span class="op">;</span></a>
<a class="sourceLine" id="cb21-3" title="3"></a>
<a class="sourceLine" id="cb21-4" title="4"><span class="va">form</span>.<span class="at">append</span>(<span class="st">&#39;image&#39;</span><span class="op">,</span> stream)<span class="op">;</span></a>
<a class="sourceLine" id="cb21-5" title="5"></a>
<a class="sourceLine" id="cb21-6" title="6"><span class="co">// In Node.js environment you need to set boundary in the header field &#39;Content-Type&#39; by calling method `getHeaders`</span></a>
<a class="sourceLine" id="cb21-7" title="7"><span class="kw">const</span> formHeaders <span class="op">=</span> <span class="va">form</span>.<span class="at">getHeaders</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb21-8" title="8"></a>
<a class="sourceLine" id="cb21-9" title="9"><span class="va">axios</span>.<span class="at">post</span>(<span class="st">&#39;http://example.com&#39;</span><span class="op">,</span> form<span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb21-10" title="10">  <span class="dt">headers</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb21-11" title="11">    ...<span class="at">formHeaders</span><span class="op">,</span></a>
<a class="sourceLine" id="cb21-12" title="12">  <span class="op">},</span></a>
<a class="sourceLine" id="cb21-13" title="13"><span class="op">}</span>)</a>
<a class="sourceLine" id="cb21-14" title="14">.<span class="at">then</span>(response <span class="kw">=&gt;</span> response)</a>
<a class="sourceLine" id="cb21-15" title="15">.<span class="at">catch</span>(error <span class="kw">=&gt;</span> error)</a></code></pre></div>
<h2 id="notes">Notes</h2>
<ul>
<li><code>getLengthSync()</code> method DOESN’T calculate length for streams, use <code>knownLength</code> options as workaround.</li>
<li>Starting version <code>2.x</code> FormData has dropped support for <code>node@0.10.x</code>.</li>
<li>Starting version <code>3.x</code> FormData has dropped support for <code>node@4.x</code>.</li>
</ul>
<h2 id="license">License</h2>
<p>Form-Data is released under the <a href="License">MIT</a> license.</p>
</body>
</html>
