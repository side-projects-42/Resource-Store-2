<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>README</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<div data-align="center">
<h1>
Fork TS Checker Webpack Plugin
</h1>
<p>
Webpack plugin that runs TypeScript type checker on a separate process.
</p>
<p><a href="https://www.npmjs.com/package/fork-ts-checker-webpack-plugin"><img src="https://img.shields.io/npm/v/fork-ts-checker-webpack-plugin.svg" alt="npm version" /></a> <a href="https://www.npmjs.com/package/fork-ts-checker-webpack-plugin"><img src="https://img.shields.io/npm/v/fork-ts-checker-webpack-plugin/beta.svg" alt="npm beta version" /></a> <a href="https://github.com/TypeStrong/fork-ts-checker-webpack-plugin/actions?query=branch%3Amaster+event%3Apush"><img src="https://github.com/TypeStrong/fork-ts-checker-webpack-plugin/workflows/CI/CD/badge.svg?branch=master&amp;event=push" alt="build status" /></a> <a href="https://npmjs.org/package/fork-ts-checker-webpack-plugin"><img src="http://img.shields.io/npm/dm/fork-ts-checker-webpack-plugin.svg" alt="downloads" /></a> <a href="http://commitizen.github.io/cz-cli/"><img src="https://img.shields.io/badge/commitizen-friendly-brightgreen.svg" alt="commitizen friendly" /></a> <a href="https://github.com/prettier/prettier"><img src="https://img.shields.io/badge/code_style-prettier-ff69b4.svg" alt="code style: prettier" /></a> <a href="https://github.com/semantic-release/semantic-release"><img src="https://img.shields.io/badge/%20%20%F0%9F%93%A6%F0%9F%9A%80-semantic--release-e10079.svg" alt="semantic-release" /></a></p>
</div>
<h2 id="installation">Installation</h2>
<p>This plugin requires minimum <strong>Node.js 6.11.5</strong>, <strong>webpack 4</strong>, <strong>TypeScript 2.1</strong> and optionally <strong>ESLint 6</strong> (which itself requires minimum <strong>Node.js 8.10.0</strong>)</p>
<p>If you depend on <strong>webpack 2</strong>, <strong>webpack 3</strong>, or <strong>tslint 4</strong>, please use <a href="https://github.com/TypeStrong/fork-ts-checker-webpack-plugin/tree/v3.1.1">older version</a> of the plugin.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb1-1" title="1"><span class="co"># with npm</span></a>
<a class="sourceLine" id="cb1-2" title="2"><span class="ex">npm</span> install --save-dev fork-ts-checker-webpack-plugin</a>
<a class="sourceLine" id="cb1-3" title="3"></a>
<a class="sourceLine" id="cb1-4" title="4"><span class="co"># with yarn</span></a>
<a class="sourceLine" id="cb1-5" title="5"><span class="ex">yarn</span> add --dev fork-ts-checker-webpack-plugin</a></code></pre></div>
<p>Basic webpack config (with <a href="https://github.com/TypeStrong/ts-loader">ts-loader</a>)</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1"><span class="kw">const</span> ForkTsCheckerWebpackPlugin <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;fork-ts-checker-webpack-plugin&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-2" title="2"></a>
<a class="sourceLine" id="cb2-3" title="3"><span class="kw">const</span> webpackConfig <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb2-4" title="4">  <span class="dt">context</span><span class="op">:</span> __dirname<span class="op">,</span> <span class="co">// to automatically find tsconfig.json</span></a>
<a class="sourceLine" id="cb2-5" title="5">  <span class="dt">entry</span><span class="op">:</span> <span class="st">&#39;./src/index.ts&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-6" title="6">  <span class="dt">module</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb2-7" title="7">    <span class="dt">rules</span><span class="op">:</span> [</a>
<a class="sourceLine" id="cb2-8" title="8">      <span class="op">{</span></a>
<a class="sourceLine" id="cb2-9" title="9">        <span class="dt">test</span><span class="op">:</span> <span class="ss">/</span><span class="sc">\.</span><span class="ss">tsx</span><span class="sc">?$</span><span class="ss">/</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-10" title="10">        <span class="dt">loader</span><span class="op">:</span> <span class="st">&#39;ts-loader&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-11" title="11">        <span class="dt">options</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb2-12" title="12">          <span class="co">// disable type checker - we will use it in fork plugin</span></a>
<a class="sourceLine" id="cb2-13" title="13">          <span class="dt">transpileOnly</span><span class="op">:</span> <span class="kw">true</span></a>
<a class="sourceLine" id="cb2-14" title="14">        <span class="op">}</span></a>
<a class="sourceLine" id="cb2-15" title="15">      <span class="op">}</span></a>
<a class="sourceLine" id="cb2-16" title="16">    ]</a>
<a class="sourceLine" id="cb2-17" title="17">  <span class="op">},</span></a>
<a class="sourceLine" id="cb2-18" title="18">  <span class="dt">plugins</span><span class="op">:</span> [<span class="kw">new</span> <span class="at">ForkTsCheckerWebpackPlugin</span>()]</a>
<a class="sourceLine" id="cb2-19" title="19"><span class="op">};</span></a></code></pre></div>
<h2 id="motivation">Motivation</h2>
<p>There was already similar solution - <a href="https://github.com/s-panferov/awesome-typescript-loader">awesome-typescript-loader</a>. You can add <code>CheckerPlugin</code> and delegate checker to the separate process. The problem with <code>awesome-typescript-loader</code> was that, in our case, it was a lot slower than <a href="https://github.com/TypeStrong/ts-loader">ts-loader</a> on an incremental build (~20s vs ~3s). Secondly, we used <a href="https://palantir.github.io/tslint">tslint</a> and we wanted to run this, along with type checker, in a separate process. This is why this plugin was created. To provide better performance, the plugin reuses Abstract Syntax Trees between compilations and shares these trees with TSLint.</p>
<h2 id="modules-resolution">Modules resolution</h2>
<p>It’s very important to be aware that <strong>this plugin uses <a href="https://github.com/Microsoft/TypeScript">TypeScript</a>’s, not <a href="https://github.com/webpack/webpack">webpack</a>’s modules resolution</strong>. It means that you have to setup <code>tsconfig.json</code> correctly. For example if you set <code>files: ['./src/someFile.ts']</code> in <code>tsconfig.json</code>, this plugin will check only <code>someFile.ts</code> for semantic errors. It’s because of performance. The goal of this plugin is to be <em>as fast as possible</em>. With TypeScript’s module resolution we don’t have to wait for webpack to compile files (which traverses dependency graph during compilation) - we have a full list of files from the begin.</p>
<p>To debug TypeScript’s modules resolution, you can use <code>tsc --traceResolution</code> command.</p>
<h2 id="eslint">ESLint</h2>
<p><a href="https://eslint.org/blog/2019/01/future-typescript-eslint">ESLint is the future of linting in the TypeScript world.</a> If you’d like to use eslint with the plugin, supply this option: <code>eslint: true</code> and ensure you have the relevant dependencies installed:</p>
<p><code>yarn add eslint @typescript-eslint/parser @typescript-eslint/eslint-plugin --dev</code></p>
<p>You should have an ESLint configuration file in your root project directory. Here is a sample <code>.eslintrc.js</code> configuration for a TypeScript project:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="kw">const</span> path <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;path&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-2" title="2"><span class="va">module</span>.<span class="at">exports</span> <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb3-3" title="3">  <span class="dt">parser</span><span class="op">:</span> <span class="st">&#39;@typescript-eslint/parser&#39;</span><span class="op">,</span> <span class="co">// Specifies the ESLint parser</span></a>
<a class="sourceLine" id="cb3-4" title="4">  <span class="dt">extends</span><span class="op">:</span> [</a>
<a class="sourceLine" id="cb3-5" title="5">    <span class="st">&#39;plugin:@typescript-eslint/recommended&#39;</span> <span class="co">// Uses the recommended rules from the @typescript-eslint/eslint-plugin</span></a>
<a class="sourceLine" id="cb3-6" title="6">  ]<span class="op">,</span></a>
<a class="sourceLine" id="cb3-7" title="7">  <span class="dt">parserOptions</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb3-8" title="8">    <span class="dt">project</span><span class="op">:</span> <span class="va">path</span>.<span class="at">resolve</span>(__dirname<span class="op">,</span> <span class="st">&#39;./tsconfig.json&#39;</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb3-9" title="9">    <span class="dt">tsconfigRootDir</span><span class="op">:</span> __dirname<span class="op">,</span></a>
<a class="sourceLine" id="cb3-10" title="10">    <span class="dt">ecmaVersion</span><span class="op">:</span> <span class="dv">2018</span><span class="op">,</span> <span class="co">// Allows for the parsing of modern ECMAScript features</span></a>
<a class="sourceLine" id="cb3-11" title="11">    <span class="dt">sourceType</span><span class="op">:</span> <span class="st">&#39;module&#39;</span><span class="op">,</span> <span class="co">// Allows for the use of imports</span></a>
<a class="sourceLine" id="cb3-12" title="12">  <span class="op">},</span></a>
<a class="sourceLine" id="cb3-13" title="13">  <span class="dt">rules</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb3-14" title="14">    <span class="co">// Place to specify ESLint rules. Can be used to overwrite rules specified from the extended configs</span></a>
<a class="sourceLine" id="cb3-15" title="15">    <span class="co">// e.g. &quot;@typescript-eslint/explicit-function-return-type&quot;: &quot;off&quot;,</span></a>
<a class="sourceLine" id="cb3-16" title="16">  <span class="op">}</span></a>
<a class="sourceLine" id="cb3-17" title="17"><span class="op">};</span></a></code></pre></div>
<p>There’s a good explanation on setting up TypeScript ESLint support by Robert Cooper <a href="https://dev.to/robertcoopercode/using-eslint-and-prettier-in-a-typescript-project-53jb">here</a>.</p>
<h2 id="options">Options</h2>
<ul>
<li><p><strong>tsconfig</strong> <code>string</code>: Path to <em>tsconfig.json</em> file. Default: <code>path.resolve(compiler.options.context, './tsconfig.json')</code>.</p></li>
<li><p><strong>compilerOptions</strong> <code>object</code>: Allows overriding TypeScript options. Should be specified in the same format as you would do for the <code>compilerOptions</code> property in tsconfig.json. Default: <code>{}</code>.</p></li>
<li><p><strong>eslint</strong> <code>true | undefined</code>:</p>
<ul>
<li>If <code>true</code>, this activates eslint support.</li>
</ul></li>
<li><p><strong>eslintOptions</strong> <code>object</code>:</p>
<ul>
<li>Options that can be used to initialise ESLint. See https://eslint.org/docs/developer-guide/nodejs-api#cliengine</li>
</ul></li>
<li><p><strong>async</strong> <code>boolean</code>: True by default - <code>async: false</code> can block webpack’s emit to wait for type checker/linter and to add errors to the webpack’s compilation. We recommend to set this to <code>false</code> in projects where type checking is faster than webpack’s build - it’s better for integration with other plugins. Another scenario where you might want to set this to <code>false</code> is if you use the <code>overlay</code> functionality of <code>webpack-dev-server</code>.</p></li>
<li><p><strong>ignoreDiagnostics</strong> <code>number[]</code>: List of TypeScript diagnostic codes to ignore.</p></li>
<li><p><strong>ignoreLints</strong> <code>string[]</code>: List of eslint rule names to ignore.</p></li>
<li><p><strong>ignoreLintWarnings</strong> <code>boolean</code>: If true, will ignore all lint warnings.</p></li>
<li><p><strong>reportFiles</strong> <code>string[]</code>: Only report errors on files matching these glob patterns. This can be useful when certain types definitions have errors that are not fatal to your application. Default: <code>[]</code>. Please note that this may behave unexpectedly if using the incremental API as the incremental API doesn’t look for global and semantic errors <a href="https://github.com/Microsoft/TypeScript/blob/89386ddda7dafc63cb35560e05412487f47cc267/src/compiler/watch.ts#L141">if it has already found syntactic errors</a>.</p></li>
</ul>
<div class="sourceCode" id="cb4"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1"><span class="co">// in webpack.config.js</span></a>
<a class="sourceLine" id="cb4-2" title="2"><span class="kw">new</span> <span class="at">ForkTsCheckerWebpackPlugin</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb4-3" title="3">  <span class="dt">reportFiles</span><span class="op">:</span> [<span class="st">&#39;src/**/*.{ts,tsx}&#39;</span><span class="op">,</span> <span class="st">&#39;!src/skip.ts&#39;</span>]</a>
<a class="sourceLine" id="cb4-4" title="4"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<ul>
<li><p><strong>logger</strong> <code>object</code>: Logger instance. It should be object that implements method: <code>error</code>, <code>warn</code>, <code>info</code>. Default: <code>console</code>.</p></li>
<li><p><strong>formatter</strong> <code>'default' | 'codeframe' | (issue: Issue) =&gt; string)</code>: Formatter for issues and lints. By default uses <code>default</code> formatter. You can also pass your own formatter as a function (see <code>src/issue/</code> and <code>src/formatter/</code> for API reference).</p></li>
<li><p><strong>formatterOptions</strong> <code>object</code>: Options passed to formatters (currently only <code>codeframe</code> - see <a href="https://babeljs.io/docs/en/next/babel-code-frame.html#options">available options</a>)</p></li>
<li><p><strong>silent</strong> <code>boolean</code>: If <code>true</code>, logger will not be used. Default: <code>false</code>.</p></li>
<li><p><strong>checkSyntacticErrors</strong> <code>boolean</code>: This option is useful if you’re using ts-loader in <code>happyPackMode</code> with <a href="https://github.com/amireh/happypack">HappyPack</a> or <a href="https://github.com/webpack-contrib/thread-loader">thread-loader</a> to parallelise your builds. If <code>true</code> it will ensure that the plugin checks for <em>both</em> syntactic errors (eg <code>const array = [{} {}];</code>) and semantic errors (eg <code>const x: number = '1';</code>). By default the plugin only checks for semantic errors. This is because when ts-loader is used in <code>transpileOnly</code> mode, ts-loader will still report syntactic errors. When used in <code>happyPackMode</code> it does not. Default: <code>false</code>.</p></li>
<li><p><strong>memoryLimit</strong> <code>number</code>: Memory limit for service process in MB. If service exits with allocation failed error, increase this number. Default: <code>2048</code>.</p></li>
<li><p><strong>vue</strong> <code>boolean | { enabled: boolean, compiler: string }</code>: If <code>true</code> or <code>enabled: true</code>, the linter and compiler will process VueJs single-file-component (.vue) files. See the <a href="https://github.com/TypeStrong/fork-ts-checker-webpack-plugin#vue">Vue section</a> further down for information on how to correctly setup your project.</p></li>
<li><p><strong>useTypescriptIncrementalApi</strong> <code>boolean</code>: If true, the plugin will use incremental compilation API introduced in TypeScript 2.7. Defaults to <code>true</code> when working with TypeScript 3+ and <code>false</code> when below 3. The default can be overridden by directly specifying a value. Don’t use it together with VueJs enabled - it’s not supported yet.</p></li>
<li><p><strong>measureCompilationTime</strong> <code>boolean</code>: If true, the plugin will measure the time spent inside the compilation code. This may be useful to compare modes, especially if there are other loaders/plugins involved in the compilation. <strong>requires Node.js &gt;= 8.5.0</strong></p></li>
<li><p><strong>typescript</strong> <code>string</code>: If supplied this is a custom path where <code>typescript</code> can be found. Defaults to <code>require.resolve('typescript')</code>.</p></li>
<li><p><strong>resolveModuleNameModule</strong> and <strong>resolveTypeReferenceDirectiveModule</strong> <code>string</code>: Both of those options refer to files on the disk that respectively export a <code>resolveModuleName</code> or a <code>resolveTypeReferenceDirectiveModule</code> function. These functions will be used to resolve the import statements and the <code>&lt;reference types="..."&gt;</code> directives instead of the default TypeScript implementation. Check the following code for an example of what those functions should look like:</p>
<details>
<p><summary>Code sample</summary></p>
<div class="sourceCode" id="cb5"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb5-1" title="1"><span class="kw">const</span> <span class="op">{</span> resolveModuleName <span class="op">}</span> <span class="op">=</span> <span class="at">require</span>(<span class="vs">`ts-pnp`</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb5-2" title="2"></a>
<a class="sourceLine" id="cb5-3" title="3"><span class="va">exports</span>.<span class="at">resolveModuleName</span> <span class="op">=</span> (</a>
<a class="sourceLine" id="cb5-4" title="4">  typescript<span class="op">,</span></a>
<a class="sourceLine" id="cb5-5" title="5">  moduleName<span class="op">,</span></a>
<a class="sourceLine" id="cb5-6" title="6">  containingFile<span class="op">,</span></a>
<a class="sourceLine" id="cb5-7" title="7">  compilerOptions<span class="op">,</span></a>
<a class="sourceLine" id="cb5-8" title="8">  resolutionHost</a>
<a class="sourceLine" id="cb5-9" title="9">) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb5-10" title="10">  <span class="cf">return</span> <span class="at">resolveModuleName</span>(</a>
<a class="sourceLine" id="cb5-11" title="11">    moduleName<span class="op">,</span></a>
<a class="sourceLine" id="cb5-12" title="12">    containingFile<span class="op">,</span></a>
<a class="sourceLine" id="cb5-13" title="13">    compilerOptions<span class="op">,</span></a>
<a class="sourceLine" id="cb5-14" title="14">    resolutionHost<span class="op">,</span></a>
<a class="sourceLine" id="cb5-15" title="15">    <span class="va">typescript</span>.<span class="at">resolveModuleName</span></a>
<a class="sourceLine" id="cb5-16" title="16">  )<span class="op">;</span></a>
<a class="sourceLine" id="cb5-17" title="17"><span class="op">};</span></a>
<a class="sourceLine" id="cb5-18" title="18"></a>
<a class="sourceLine" id="cb5-19" title="19"><span class="va">exports</span>.<span class="at">resolveTypeReferenceDirective</span> <span class="op">=</span> (</a>
<a class="sourceLine" id="cb5-20" title="20">  typescript<span class="op">,</span></a>
<a class="sourceLine" id="cb5-21" title="21">  moduleName<span class="op">,</span></a>
<a class="sourceLine" id="cb5-22" title="22">  containingFile<span class="op">,</span></a>
<a class="sourceLine" id="cb5-23" title="23">  compilerOptions<span class="op">,</span></a>
<a class="sourceLine" id="cb5-24" title="24">  resolutionHost</a>
<a class="sourceLine" id="cb5-25" title="25">) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb5-26" title="26">  <span class="cf">return</span> <span class="at">resolveModuleName</span>(</a>
<a class="sourceLine" id="cb5-27" title="27">    moduleName<span class="op">,</span></a>
<a class="sourceLine" id="cb5-28" title="28">    containingFile<span class="op">,</span></a>
<a class="sourceLine" id="cb5-29" title="29">    compilerOptions<span class="op">,</span></a>
<a class="sourceLine" id="cb5-30" title="30">    resolutionHost<span class="op">,</span></a>
<a class="sourceLine" id="cb5-31" title="31">    <span class="va">typescript</span>.<span class="at">resolveTypeReferenceDirective</span></a>
<a class="sourceLine" id="cb5-32" title="32">  )<span class="op">;</span></a>
<a class="sourceLine" id="cb5-33" title="33"><span class="op">};</span></a></code></pre></div></li>
</ul>
</details>
<h2 id="different-behaviour-in-watch-mode">Different behaviour in watch mode</h2>
<p>If you turn on <a href="https://webpack.js.org/configuration/watch/#watch">webpacks watch mode</a> the <code>fork-ts-checker-notifier-webpack-plugin</code> will take care of logging type errors, <em>not</em> webpack itself. That means if you set <code>silent: true</code> you won’t see type errors in your console in watch mode.</p>
<p>You can either set <code>silent: false</code> to show the logging from <code>fork-ts-checker-notifier-webpack-plugin</code> <em>or</em> set <code>async: false</code>. Now webpack itself will log type errors again, but note that this can slow down your builds depending on the size of your project.</p>
<h2 id="notifier">Notifier</h2>
<p>You may already be using the excellent <a href="https://github.com/Turbo87/webpack-notifier">webpack-notifier</a> plugin to make build failures more obvious in the form of system notifications. There’s an equivalent notifier plugin designed to work with the <code>fork-ts-checker-webpack-plugin</code>. It is the <code>fork-ts-checker-notifier-webpack-plugin</code> and can be found <a href="https://github.com/johnnyreilly/fork-ts-checker-notifier-webpack-plugin">here</a>. This notifier deliberately has a similar API as the <code>webpack-notifier</code> plugin to make migration easier.</p>
<h2 id="known-issue-watching-non-emitting-files">Known Issue Watching Non-Emitting Files</h2>
<p>At present there is an issue with the plugin regarding the triggering of type-checking when a change is made in a source file that will not emit js. If you have a file which contains only <code>interface</code>s and / or <code>type</code>s then changes to it will <strong>not</strong> trigger the type checker whilst in watch mode. Sorry about that.</p>
<p>We hope this will be resolved in future; the issue can be tracked <a href="https://github.com/TypeStrong/fork-ts-checker-webpack-plugin/issues/36">here</a>.</p>
<h2 id="plugin-hooks">Plugin Hooks</h2>
<p>This plugin provides some custom webpack hooks (all are sync):</p>
<table>
<colgroup>
<col style="width: 15%" />
<col style="width: 59%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="header">
<th>Hook Access Key</th>
<th>Description</th>
<th>Params</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>cancel</code></td>
<td>Cancellation has been requested</td>
<td><code>cancellationToken</code></td>
</tr>
<tr class="even">
<td><code>waiting</code></td>
<td>Waiting for results</td>
<td>-</td>
</tr>
<tr class="odd">
<td><code>serviceBeforeStart</code></td>
<td>Async plugin that can be used for delaying <code>fork-ts-checker-service-start</code></td>
<td>-</td>
</tr>
<tr class="even">
<td><code>serviceStart</code></td>
<td>Service will be started</td>
<td><code>tsconfigPath</code>, <code>memoryLimit</code></td>
</tr>
<tr class="odd">
<td><code>serviceStartError</code></td>
<td>Cannot start service</td>
<td><code>error</code></td>
</tr>
<tr class="even">
<td><code>serviceOutOfMemory</code></td>
<td>Service is out of memory</td>
<td>-</td>
</tr>
<tr class="odd">
<td><code>receive</code></td>
<td>Plugin receives diagnostics and lints from service</td>
<td><code>diagnostics</code>, <code>lints</code></td>
</tr>
<tr class="even">
<td><code>emit</code></td>
<td>Service will add errors and warnings to webpack compilation (‘build’ mode)</td>
<td><code>diagnostics</code>, <code>lints</code>, <code>elapsed</code></td>
</tr>
<tr class="odd">
<td><code>done</code></td>
<td>Service finished type checking and webpack finished compilation (‘watch’ mode)</td>
<td><code>diagnostics</code>, <code>lints</code>, <code>elapsed</code></td>
</tr>
</tbody>
</table>
<h3 id="accessing-plugin-hooks">Accessing plugin hooks</h3>
<p>To access plugin hooks and tap into the event, we need to use the <code>getCompilerHooks</code> static method. When we call this method with a <a href="https://webpack.js.org/api/node/">webpack compiler instance</a>, it returns the series of <a href="https://github.com/webpack/tapable">tapable</a> hooks where you can pass in your callbacks.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb6-1" title="1"><span class="co">// require the plugin</span></a>
<a class="sourceLine" id="cb6-2" title="2"><span class="kw">const</span> ForkTsCheckerWebpackPlugin <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;fork-ts-checker-webpack-plugin&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-3" title="3"><span class="co">// setup compiler with the plugin</span></a>
<a class="sourceLine" id="cb6-4" title="4"><span class="kw">const</span> compiler <span class="op">=</span> <span class="at">webpack</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb6-5" title="5">  <span class="co">// .. webpack config</span></a>
<a class="sourceLine" id="cb6-6" title="6"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-7" title="7"><span class="co">// Optionally add the plugin to the compiler</span></a>
<a class="sourceLine" id="cb6-8" title="8"><span class="co">// **Don&#39;t do this if already added through configuration**</span></a>
<a class="sourceLine" id="cb6-9" title="9"><span class="kw">new</span> <span class="at">ForkTsCheckerWebpackPlugin</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb6-10" title="10">  <span class="dt">silent</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></a>
<a class="sourceLine" id="cb6-11" title="11">  <span class="dt">async</span><span class="op">:</span> <span class="kw">true</span></a>
<a class="sourceLine" id="cb6-12" title="12"><span class="op">}</span>).<span class="at">apply</span>(compiler)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-13" title="13"><span class="co">// Now get the plugin hooks from compiler</span></a>
<a class="sourceLine" id="cb6-14" title="14"><span class="kw">const</span> tsCheckerHooks <span class="op">=</span> <span class="va">ForkTsCheckerWebpackPlugin</span>.<span class="at">getCompilerHooks</span>(compiler)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-15" title="15"><span class="co">// These hooks provide access to different events</span></a>
<a class="sourceLine" id="cb6-16" title="16"><span class="co">// =================================================== //</span></a>
<a class="sourceLine" id="cb6-17" title="17"><span class="co">// The properties of tsCheckerHooks corresponds to the //</span></a>
<a class="sourceLine" id="cb6-18" title="18"><span class="co">// Hook Access Key of the table above.                 //</span></a>
<a class="sourceLine" id="cb6-19" title="19"><span class="co">// =================================================== //</span></a>
<a class="sourceLine" id="cb6-20" title="20"><span class="co">// Example, if we want to run some code when plugin has received diagnostics</span></a>
<a class="sourceLine" id="cb6-21" title="21"><span class="co">// and lint</span></a>
<a class="sourceLine" id="cb6-22" title="22"><span class="va">tsCheckerHooks</span>.<span class="va">receive</span>.<span class="at">tap</span>(<span class="st">&#39;yourListenerName&#39;</span><span class="op">,</span> (diagnostics<span class="op">,</span> lint) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb6-23" title="23">  <span class="co">// do something with diagnostics, perhaps show custom message</span></a>
<a class="sourceLine" id="cb6-24" title="24">  <span class="va">console</span>.<span class="at">log</span>(diagnostics)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-25" title="25"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-26" title="26"><span class="co">// Say we want to show some message when plugin is waiting for typecheck results</span></a>
<a class="sourceLine" id="cb6-27" title="27"><span class="va">tsCheckerHooks</span>.<span class="va">waiting</span>.<span class="at">tap</span>(<span class="st">&#39;yourListenerName&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb6-28" title="28">  <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;waiting for typecheck results&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-29" title="29"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>Calling <code>.tap()</code> on any hooks, requires two arguments.</p>
<h5 id="name-string"><code>name</code> (<code>string</code>)</h5>
<p>The first argument passed to <code>.tap</code> is the name of your listener callback (<code>yourListenerName</code>). It doesn’t need to correspond to anything special. It is intended to be used <a href="https://github.com/webpack/tapable#interception">internally</a> as the <code>name</code> of the hook.</p>
<h5 id="callback-function"><code>callback</code> (<code>function</code>)</h5>
<p>The second argument is the callback function. Depending on the hook you are tapping into, several arguments are passed to the function. Do check the table above to find out which arguments are passed to which hooks.</p>
<h3 id="accessing-hooks-on-webpack-multi-compiler-instance">Accessing hooks on Webpack Multi-Compiler instance</h3>
<p>The above method will not work on webpack <a href="https://webpack.js.org/api/node/#multicompiler">multi compiler</a> instance. The reason is <code>getCompilerHooks</code> expects (at lease as of now) the same compiler instance to be passed where the plugin was attached. So in case of multi compiler, we need to access individual compiler instances.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb7-1" title="1"><span class="kw">const</span> ForkTsCheckerWebpackPlugin <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;fork-ts-checker-webpack-plugin&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-2" title="2"><span class="co">// setup multi compiler with the plugin</span></a>
<a class="sourceLine" id="cb7-3" title="3"><span class="kw">const</span> compiler <span class="op">=</span> <span class="at">webpack</span>([</a>
<a class="sourceLine" id="cb7-4" title="4">  <span class="op">{</span></a>
<a class="sourceLine" id="cb7-5" title="5">    <span class="co">// .. webpack config</span></a>
<a class="sourceLine" id="cb7-6" title="6">  <span class="op">},</span></a>
<a class="sourceLine" id="cb7-7" title="7">  <span class="op">{</span></a>
<a class="sourceLine" id="cb7-8" title="8">    <span class="co">// .. webpack config</span></a>
<a class="sourceLine" id="cb7-9" title="9">  <span class="op">}</span></a>
<a class="sourceLine" id="cb7-10" title="10">])<span class="op">;</span></a>
<a class="sourceLine" id="cb7-11" title="11"></a>
<a class="sourceLine" id="cb7-12" title="12"><span class="co">// safely determine if instance is multi-compiler</span></a>
<a class="sourceLine" id="cb7-13" title="13"><span class="cf">if</span> (<span class="st">&#39;compilers&#39;</span> <span class="kw">in</span> compiler) <span class="op">{</span></a>
<a class="sourceLine" id="cb7-14" title="14">  <span class="va">compiler</span>.<span class="va">compilers</span>.<span class="at">forEach</span>(singleCompiler <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb7-15" title="15">    <span class="co">// get plugin hooks from the single compiler instance</span></a>
<a class="sourceLine" id="cb7-16" title="16">    <span class="kw">const</span> tsCheckerHooks <span class="op">=</span> <span class="va">ForkTsCheckerWebpackPlugin</span>.<span class="at">getCompilerHooks</span>(</a>
<a class="sourceLine" id="cb7-17" title="17">      singleCompiler</a>
<a class="sourceLine" id="cb7-18" title="18">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb7-19" title="19">    <span class="co">// now access hooks just like before</span></a>
<a class="sourceLine" id="cb7-20" title="20">    <span class="va">tsCheckerHooks</span>.<span class="va">waiting</span>.<span class="at">tap</span>(<span class="st">&#39;yourListenerName&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb7-21" title="21">      <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;waiting for typecheck results&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-22" title="22">    <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-23" title="23">  <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-24" title="24"><span class="op">}</span></a></code></pre></div>
<h2 id="vue">Vue</h2>
<ol type="1">
<li>Turn on the vue option in the plugin in your webpack config:</li>
</ol>
<div class="sourceCode" id="cb8"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb8-1" title="1"><span class="kw">new</span> <span class="at">ForkTsCheckerWebpackPlugin</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb8-2" title="2">  <span class="dt">vue</span><span class="op">:</span> <span class="kw">true</span></a>
<a class="sourceLine" id="cb8-3" title="3"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>Optionally change default <a href="https://github.com/vuejs/vue/tree/dev/packages/vue-template-compiler">vue-template-compiler</a> to <a href="https://github.com/nativescript-vue/nativescript-vue/tree/master/packages/nativescript-vue-template-compiler">nativescript-vue-template-compiler</a> if you use <a href="https://github.com/nativescript-vue/nativescript-vue">nativescript-vue</a></p>
<pre><code>new ForkTsCheckerWebpackPlugin({
  vue: { enabled: true, compiler: &#39;nativescript-vue-template-compiler&#39; }
});</code></pre>
<ol start="2" type="1">
<li>To activate TypeScript in your <code>.vue</code> files, you need to ensure your script tag’s language attribute is set to <code>ts</code> or <code>tsx</code> (also make sure you include the <code>.vue</code> extension in all your import statements as shown below):</li>
</ol>
<div class="sourceCode" id="cb10"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb10-1" title="1"><span class="kw">&lt;script</span><span class="ot"> lang=</span><span class="st">&quot;ts&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb10-2" title="2">  <span class="im">import</span> Hello <span class="im">from</span> <span class="st">&#39;@/components/hello.vue&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb10-3" title="3"></a>
<a class="sourceLine" id="cb10-4" title="4">  <span class="co">// ...</span></a>
<a class="sourceLine" id="cb10-5" title="5"><span class="kw">&lt;/script&gt;</span></a></code></pre></div>
<ol start="3" type="1">
<li>Ideally you are also using <code>ts-loader</code> (in transpileOnly mode). Your Webpack config rules may look something like this:</li>
</ol>
<div class="sourceCode" id="cb11"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb11-1" title="1"><span class="op">{</span></a>
<a class="sourceLine" id="cb11-2" title="2">  <span class="dt">test</span><span class="op">:</span> <span class="ss">/</span><span class="sc">\.</span><span class="ss">ts</span><span class="sc">$</span><span class="ss">/</span><span class="op">,</span></a>
<a class="sourceLine" id="cb11-3" title="3">  <span class="dt">loader</span><span class="op">:</span> <span class="st">&#39;ts-loader&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb11-4" title="4">  <span class="dt">include</span><span class="op">:</span> [<span class="at">resolve</span>(<span class="st">&#39;src&#39;</span>)<span class="op">,</span> <span class="at">resolve</span>(<span class="st">&#39;test&#39;</span>)]<span class="op">,</span></a>
<a class="sourceLine" id="cb11-5" title="5">  <span class="dt">options</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb11-6" title="6">    <span class="dt">appendTsSuffixTo</span><span class="op">:</span> [<span class="ss">/</span><span class="sc">\.</span><span class="ss">vue</span><span class="sc">$</span><span class="ss">/</span>]<span class="op">,</span></a>
<a class="sourceLine" id="cb11-7" title="7">    <span class="dt">transpileOnly</span><span class="op">:</span> <span class="kw">true</span></a>
<a class="sourceLine" id="cb11-8" title="8">  <span class="op">}</span></a>
<a class="sourceLine" id="cb11-9" title="9"><span class="op">},</span></a>
<a class="sourceLine" id="cb11-10" title="10"><span class="op">{</span></a>
<a class="sourceLine" id="cb11-11" title="11">  <span class="dt">test</span><span class="op">:</span> <span class="ss">/</span><span class="sc">\.</span><span class="ss">vue</span><span class="sc">$</span><span class="ss">/</span><span class="op">,</span></a>
<a class="sourceLine" id="cb11-12" title="12">  <span class="dt">loader</span><span class="op">:</span> <span class="st">&#39;vue-loader&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb11-13" title="13">  <span class="dt">options</span><span class="op">:</span> vueLoaderConfig</a>
<a class="sourceLine" id="cb11-14" title="14"><span class="op">},</span></a></code></pre></div>
<ol start="4" type="1">
<li>Ensure your <code>tsconfig.json</code> includes .vue files:</li>
</ol>
<div class="sourceCode" id="cb12"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb12-1" title="1"><span class="co">// tsconfig.json</span></a>
<a class="sourceLine" id="cb12-2" title="2"><span class="op">{</span></a>
<a class="sourceLine" id="cb12-3" title="3">  <span class="st">&quot;include&quot;</span><span class="op">:</span> [</a>
<a class="sourceLine" id="cb12-4" title="4">    <span class="st">&quot;src/**/*.ts&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb12-5" title="5">    <span class="st">&quot;src/**/*.vue&quot;</span></a>
<a class="sourceLine" id="cb12-6" title="6">  ]<span class="op">,</span></a>
<a class="sourceLine" id="cb12-7" title="7">  <span class="st">&quot;exclude&quot;</span><span class="op">:</span> [</a>
<a class="sourceLine" id="cb12-8" title="8">    <span class="st">&quot;node_modules&quot;</span></a>
<a class="sourceLine" id="cb12-9" title="9">  ]</a>
<a class="sourceLine" id="cb12-10" title="10"><span class="op">}</span></a></code></pre></div>
<ol start="5" type="1">
<li>It accepts any wildcard in your TypeScript configuration:</li>
</ol>
<div class="sourceCode" id="cb13"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb13-1" title="1"><span class="co">// tsconfig.json</span></a>
<a class="sourceLine" id="cb13-2" title="2"><span class="op">{</span></a>
<a class="sourceLine" id="cb13-3" title="3">  <span class="st">&quot;compilerOptions&quot;</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb13-4" title="4"></a>
<a class="sourceLine" id="cb13-5" title="5">    <span class="co">// ...</span></a>
<a class="sourceLine" id="cb13-6" title="6"></a>
<a class="sourceLine" id="cb13-7" title="7">    <span class="st">&quot;baseUrl&quot;</span><span class="op">:</span> <span class="st">&quot;.&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb13-8" title="8">    <span class="st">&quot;paths&quot;</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb13-9" title="9">      <span class="st">&quot;@/*&quot;</span><span class="op">:</span> [</a>
<a class="sourceLine" id="cb13-10" title="10">        <span class="st">&quot;src/*&quot;</span></a>
<a class="sourceLine" id="cb13-11" title="11">      ]<span class="op">,</span></a>
<a class="sourceLine" id="cb13-12" title="12">      <span class="st">&quot;~/*&quot;</span><span class="op">:</span> [</a>
<a class="sourceLine" id="cb13-13" title="13">        <span class="st">&quot;src/*&quot;</span></a>
<a class="sourceLine" id="cb13-14" title="14">      ]</a>
<a class="sourceLine" id="cb13-15" title="15">    <span class="op">}</span></a>
<a class="sourceLine" id="cb13-16" title="16">  <span class="op">}</span></a>
<a class="sourceLine" id="cb13-17" title="17"><span class="op">}</span></a>
<a class="sourceLine" id="cb13-18" title="18"></a>
<a class="sourceLine" id="cb13-19" title="19"><span class="co">// In a .ts or .vue file...</span></a>
<a class="sourceLine" id="cb13-20" title="20"><span class="im">import</span> Hello <span class="im">from</span> <span class="st">&#39;@/components/hello.vue&#39;</span></a></code></pre></div>
<ol start="6" type="1">
<li>If you are working in <strong>VSCode</strong>, you can get the <a href="https://marketplace.visualstudio.com/items?itemName=octref.vetur">Vetur</a> extension to complete the developer workflow.</li>
</ol>
<h2 id="credits">Credits</h2>
<p>This plugin was created in <a href="https://www.realytics.io/">Realytics</a> in 2017. Thank you for supporting Open Source.</p>
<h2 id="license">License</h2>
<p>MIT License</p>
</body>
</html>
