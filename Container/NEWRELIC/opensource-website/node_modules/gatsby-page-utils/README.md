gatsby-page-utils
=================

Usage
-----

    npm install gatsby-page-utils

### Example

    const {
      createPath,
      ignorePath,
      validatePath,
      watchDirectory,
    } = require(`gatsby-page-utils`)

    // ...

    const pagesDirectory = "/pages"
    watchDirectory(
      pagesDirectory,
      "**/*.{js, jsx}",
      addedPath => {
        // Filter out special components that shouldn't be made into
        // pages.
        if (!validatePath(addedPath)) {
          return
        }

        // Filter out anything matching the given ignore patterns and options
        if (ignorePath(addedPath, "*/connexion")) {
          return
        }

        // Create page object
        const createdPath = createPath(addedPath)
        const page = {
          path: createdPath,
          component: systemPath.join(pagesDirectory, addedPath),
        }

        // Add page
        createPage(page)
      },
      removedPath => {
        // Delete the page for the now deleted component.
        const componentPath = systemPath.join(pagesDirectory, removedPath)
        store.getState().pages.forEach(page => {
          if (page.component === componentPath) {
            deletePage({
              path: createPath(removedPath),
              component: componentPath,
            })
          }
        })
      }
    )

#### watchDirectory

Watch activity on a directory and call functions each time a file is added or removed

<table><thead><tr class="header"><th>property</th><th>description</th><th>type</th></tr></thead><tbody><tr class="odd"><td>path</td><td>Directory path in which pages are stored</td><td>String</td></tr><tr class="even"><td>glob</td><td>A glob that select files to watch</td><td>String</td></tr><tr class="odd"><td>onNewFile</td><td>A function called each time a new file is added</td><td>Function</td></tr><tr class="even"><td>onRemovedFile</td><td>A function called each time a file is removed</td><td>Function</td></tr></tbody></table>

#### createPath

Create a page path from a file path. It returns the page path.

<table><thead><tr class="header"><th>property</th><th>description</th><th>type</th></tr></thead><tbody><tr class="odd"><td>path</td><td>File path</td><td>String</td></tr></tbody></table>

#### validatePath

Validate a file path. It verifies that the path doesnâ€™t contain specific characters or strings. It returns `true` if the path is valid otherwise it returns `false`.

<table><thead><tr class="header"><th>property</th><th>description</th><th>type</th></tr></thead><tbody><tr class="odd"><td>path</td><td>File path</td><td>String</td></tr></tbody></table>

#### ignorePath

Determines if path should be ignored regarding of a ignore pattern passed as parameter. It returns `true` if the passed path should be ignored otherwise it returns `false`.

<table><thead><tr class="header"><th>property</th><th>description</th><th>type</th></tr></thead><tbody><tr class="odd"><td>path</td><td>File path</td><td>String</td></tr><tr class="even"><td>ignore</td><td>A pattern to match with file path</td><td>(Object | String | Array)</td></tr></tbody></table>
