remark-stringify
================

[![Build](https://img.shields.io/travis/remarkjs/remark.svg)](https://travis-ci.org/remarkjs/remark) [![Coverage](https://img.shields.io/codecov/c/github/remarkjs/remark.svg)](https://codecov.io/github/remarkjs/remark) [![Downloads](https://img.shields.io/npm/dm/remark-stringify.svg)](https://www.npmjs.com/package/remark-stringify) [![Size](https://img.shields.io/bundlephobia/minzip/remark-stringify.svg)](https://bundlephobia.com/result?p=remark-stringify) [![Chat](https://img.shields.io/badge/chat-spectrum-7b16ff.svg)](https://spectrum.chat/unified/remark) [![Sponsors](https://opencollective.com/unified/sponsors/badge.svg)](https://opencollective.com/unified) [![Backers](https://opencollective.com/unified/backers/badge.svg)](https://opencollective.com/unified)

[Compiler](https://github.com/unifiedjs/unified#processorcompiler) for [**unified**](https://github.com/unifiedjs/unified). Serializes [**mdast**](https://github.com/syntax-tree/mdast) syntax trees to Markdown. Used in the [**remark** processor](https://github.com/remarkjs/remark/tree/main/packages/remark) but can be used on its own as well. Can be [extended](#extending-the-compiler) to change how Markdown is serialized.

Sponsors
--------

[Gatsby](https://www.gatsbyjs.org)  
🥇  
  
[![](https://avatars1.githubusercontent.com/u/12551863?s=900&v=4)](https://www.gatsbyjs.org)

[Vercel](https://vercel.com)  
🥇  
  
[![](https://images.opencollective.com/vercel/d8a5bee/logo/512.png)](https://vercel.com)

[Netlify](https://www.netlify.com)  
  
  
[![](https://images.opencollective.com/netlify/4087de2/logo/512.png)](https://www.netlify.com)

[Holloway](https://www.holloway.com)  
  
  
[![](https://avatars1.githubusercontent.com/u/35904294?s=300&v=4)](https://www.holloway.com)

[ThemeIsle](https://themeisle.com)  
🥉  
  
[![](https://twitter-avatar.now.sh/themeisle)](https://themeisle.com)

[BoostIO](https://boostio.co)  
🥉  
  
[![](https://avatars1.githubusercontent.com/u/13612118?s=300&v=4)](https://boostio.co)

[Expo](https://expo.io)  
🥉  
  
[![](https://avatars1.githubusercontent.com/u/12504344?s=300&v=4)](https://expo.io)

  
  
  
  
[**You?**](https://opencollective.com/unified)

Install
-------

[npm](https://docs.npmjs.com/cli/install):

    npm install remark-stringify

Use
---

    var unified = require('unified')
    var createStream = require('unified-stream')
    var html = require('rehype-parse')
    var rehype2remark = require('rehype-remark')
    var stringify = require('remark-stringify')

    var processor = unified()
      .use(html)
      .use(rehype2remark)
      .use(stringify, {
        bullet: '*',
        fence: '~',
        fences: true,
        incrementListMarker: false
      })

    process.stdin.pipe(createStream(processor)).pipe(process.stdout)

[See **unified** for more examples »](https://github.com/unifiedjs/unified)

Contents
--------

-   [API](#api)
    -   [`processor().use(stringify[, options])`](#processorusestringify-options)
    -   [`stringify.Compiler`](#stringifycompiler)
-   [Extending the `Compiler`](#extending-the-compiler)
    -   [`Compiler#visitors`](#compilervisitors)
    -   [`function visitor(node[, parent])`](#function-visitornode-parent)
-   [Security](#security)
-   [Contribute](#contribute)
-   [License](#license)

API
---

[See **unified** for API docs »](https://github.com/unifiedjs/unified)

### `processor().use(stringify[, options])`

Configure the `processor` to serialize [**mdast**](https://github.com/syntax-tree/mdast) syntax trees to Markdown.

##### `options`

Options can be passed directly, or passed later through [`processor.data()`](https://github.com/unifiedjs/unified#processordatakey-value).

###### `options.gfm`

Serialize with the required escapes for GFM compatible Markdown (`boolean`, default: `true`).

-   Escape pipes (`|`, for tables)
-   Escape colons (`:`, for literal URLs)
-   Escape tildes (`~`, for strike-through)

###### `options.commonmark`

Serialize for CommonMark compatible Markdown (`boolean`, default: `false`).

-   Serialize adjacent block quotes separately
-   Escape more characters using slashes, instead of as entities

###### `options.pedantic`

⚠️ Pedantic was previously used to mimic old-style Markdown mode: no tables, no fenced code, and with many bugs. It’s currently still “working”, but please do not use it, it’ll be removed in the future.

###### `options.entities`

⚠️ `entities` was previously used, but included bugs. It’s currently still “working”, but please do not use it, it’ll be removed in the future.

###### `options.setext`

Serialize headings, when possible, in Setext-style (`boolean`, default: `false`). Uses `=` for level one headings and `-` for level two headings. Other heading levels are serialized as ATX (respecting `closeAtx`).

###### `options.closeAtx`

Serialize ATX headings with the same amount of closing hashes as opening hashes (`boolean`, default: `false`).

###### `options.tableCellPadding`

Create tables with a space between cell delimiters (`|`) and content (`boolean`, default: `true`).

###### `options.tablePipeAlign`

Align the delimiters (`|`) between table cells so that they all align nicely and form a grid (`boolean`, default: `true`).

###### `options.stringLength`

Function passed to [`markdown-table`](https://github.com/wooorm/markdown-table) to detect the length of a table cell (`Function`, default: [`s => s.length`](https://github.com/wooorm/markdown-table#stringlengthcell)). Used to pad tables.

###### `options.fence`

Marker to use for fenced code blocks (`'~'` or `` '`' ``, default: `` '`' ``).

###### `options.fences`

Create code blocks with a fence instead of indentation if they have no info string (`boolean`, default: `false`).

When `false`, code blocks are indented. Code blocks with an info string are always fenced.

###### `options.bullet`

Marker to use for the bullet of unordered list items (`'-'`, `'*'`, or `'+'`, default: `'-'`).

###### `options.listItemIndent`

Style of indentation for list items (`'tab'`, `'mixed'` or `'1'`, default: `'tab'`).

-   `'tab'`: use a tab stops (4 spaces)
-   `'1'`: use one space
-   `'mixed'`: use `1` for tight and `tab` for loose list items

###### `options.incrementListMarker`

Increment ordered list item numbers (`boolean`, default: `true`).

When `false`, all list item numbers will be the same.

###### `options.tightDefinitions`

Separate definitions with a single line feed (`boolean`, default: `false`).

When `false`, definitions will have blank lines between them, similar to other blocks.

###### `options.rule`

Marker to use for thematic breaks / horizontal rules (`'-'`, `'*'`, or `'_'`, default: `'*'`).

###### `options.ruleRepetition`

Number of markers to use for thematic breaks / horizontal rules (`number`, default: `3`). Musts be `3` or more.

###### `options.ruleSpaces`

Place a space between thematic break (horizontal rule) markers (`boolean`, default `true`).

###### `options.strong`

Marker to use for importance (`'_'` or `'*'`, default `'*'`).

###### `options.emphasis`

Marker to use for emphasis (`'_'` or `'*'`, default `'_'`).

### `stringify.Compiler`

Access to the [compiler](https://github.com/unifiedjs/unified#processorcompiler), if you need it.

Extending the `Compiler`
------------------------

If the `remark-stringify` plugin is used, it adds a [`Compiler`](https://github.com/unifiedjs/unified#processorcompiler) constructor function to the `processor`. Other plugins can add visitors to its prototype to change how Markdown is serialized.

The below plugin modifies a [visitor](#function-visitornode-parent) to add an extra blank line before headings with a rank of `2`.

    module.exports = gap

    function gap() {
      var Compiler = this.Compiler
      var visitors = Compiler.prototype.visitors
      var original = visitors.heading

      visitors.heading = heading

      function heading(node) {
        return (node.depth === 2 ? '\n' : '') + original.apply(this, arguments)
      }
    }

### `Compiler#visitors`

Map of types to [visitor](#function-visitornode-parent)s (`Object.<Function>`).

### `function visitor(node[, parent])`

Serialize `node`.

###### Parameters

-   `node` ([`Node`](https://github.com/syntax-tree/unist#node)) — Node to compile
-   `parent` ([`Parent`](https://github.com/syntax-tree/unist#parent), optional) — Parent of `node`. Not available on the root node

###### Returns

`string` — Serialized given `node`.

Security
--------

As Markdown is sometimes used for HTML, and improper use of HTML can open you up to a [cross-site scripting (XSS)](https://en.wikipedia.org/wiki/Cross-site_scripting) attack, use of remark can also be unsafe. When going to HTML, use remark in combination with the [**rehype**](https://github.com/rehypejs/rehype) ecosystem, and use [`rehype-sanitize`](https://github.com/rehypejs/rehype-sanitize) to make the tree safe.

Use of remark plugins could also open you up to other attacks. Carefully assess each plugin and the risks involved in using them.

Contribute
----------

See [`contributing.md`](https://github.com/remarkjs/.github/blob/HEAD/contributing.md) in [`remarkjs/.github`](https://github.com/remarkjs/.github) for ways to get started. See [`support.md`](https://github.com/remarkjs/.github/blob/HEAD/support.md) for ways to get help. Ideas for new plugins and tools can be posted in [`remarkjs/ideas`](https://github.com/remarkjs/ideas).

A curated list of awesome remark resources can be found in [**awesome remark**](https://github.com/remarkjs/awesome-remark).

This project has a [code of conduct](https://github.com/remarkjs/.github/blob/HEAD/code-of-conduct.md). By interacting with this repository, organization, or community you agree to abide by its terms.

License
-------

[MIT](https://github.com/remarkjs/remark/blob/main/license) © [Titus Wormer](https://wooorm.com)
