<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>README.ru</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<h1 id="command-option-argument">Command-Option-Argument</h1>
<p><a href="http://travis-ci.org/veged/coa"><img src="https://secure.travis-ci.org/veged/coa.png" alt="build status" /></a></p>
<h2 id="что-это">Что это?</h2>
<p>COA — парсер параметров командной строки, позволяющий извлечь максимум пользы от формального API вашей программы. Как только вы опишете определение в терминах команд, параметров и аргументов, вы автоматически получите:</p>
<ul>
<li>Справку для командной строки</li>
<li>API для использования программы как модуля в COA-совместимых программах</li>
<li>Автодополнение для командной строки</li>
</ul>
<h3 id="прочие-возможности">Прочие возможности</h3>
<ul>
<li>Широкий выбор настроек для параметров и аргументов, включая множественные значения, логические значения и обязательность параметров</li>
<li>Возможность асинхронного исполнения команд, используя промисы (используется библиотека <a href="https://github.com/kriskowal/q">Q</a>)</li>
<li>Простота использования существующих команд как подмодулей для новых команд</li>
<li>Комбинированная валидация и анализ сложных значений</li>
</ul>
<h2 id="примеры">Примеры</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb1-1" title="1"><span class="at">require</span>(<span class="st">&#39;coa&#39;</span>).<span class="at">Cmd</span>() <span class="co">// декларация команды верхнего уровня</span></a>
<a class="sourceLine" id="cb1-2" title="2">    .<span class="at">name</span>(<span class="va">process</span>.<span class="at">argv</span>[<span class="dv">1</span>]) <span class="co">// имя команды верхнего уровня, берем из имени программы</span></a>
<a class="sourceLine" id="cb1-3" title="3">    .<span class="at">title</span>(<span class="st">&#39;Жутко полезная утилита для командной строки&#39;</span>) <span class="co">// название для использования в справке и сообщениях</span></a>
<a class="sourceLine" id="cb1-4" title="4">    .<span class="at">helpful</span>() <span class="co">// добавляем поддержку справки командной строки (-h, --help)</span></a>
<a class="sourceLine" id="cb1-5" title="5">    .<span class="at">opt</span>() <span class="co">// добавляем параметр</span></a>
<a class="sourceLine" id="cb1-6" title="6">        .<span class="at">name</span>(<span class="st">&#39;version&#39;</span>) <span class="co">// имя параметра для использования в API</span></a>
<a class="sourceLine" id="cb1-7" title="7">        .<span class="at">title</span>(<span class="st">&#39;Version&#39;</span>) <span class="co">// текст для вывода в сообщениях</span></a>
<a class="sourceLine" id="cb1-8" title="8">        .<span class="at">short</span>(<span class="st">&#39;v&#39;</span>) <span class="co">// короткое имя параметра: -v</span></a>
<a class="sourceLine" id="cb1-9" title="9">        .<span class="at">long</span>(<span class="st">&#39;version&#39;</span>) <span class="co">// длинное имя параметра: --version</span></a>
<a class="sourceLine" id="cb1-10" title="10">        .<span class="at">flag</span>() <span class="co">// параметр не требует ввода значения</span></a>
<a class="sourceLine" id="cb1-11" title="11">        .<span class="at">act</span>(<span class="kw">function</span>(opts) <span class="op">{</span>  <span class="co">// действия при вызове аргумента</span></a>
<a class="sourceLine" id="cb1-12" title="12">            <span class="co">// результатом является вывод текстового сообщения</span></a>
<a class="sourceLine" id="cb1-13" title="13">            <span class="cf">return</span> <span class="va">JSON</span>.<span class="at">parse</span>(<span class="at">require</span>(<span class="st">&#39;fs&#39;</span>).<span class="at">readFileSync</span>(__dirname <span class="op">+</span> <span class="st">&#39;/package.json&#39;</span>))</a>
<a class="sourceLine" id="cb1-14" title="14">                .<span class="at">version</span><span class="op">;</span></a>
<a class="sourceLine" id="cb1-15" title="15">        <span class="op">}</span>)</a>
<a class="sourceLine" id="cb1-16" title="16">        .<span class="at">end</span>() <span class="co">// завершаем определение параметра и возвращаемся к определению верхнего уровня</span></a>
<a class="sourceLine" id="cb1-17" title="17">    .<span class="at">cmd</span>().<span class="at">name</span>(<span class="st">&#39;subcommand&#39;</span>).<span class="at">apply</span>(<span class="at">require</span>(<span class="st">&#39;./subcommand&#39;</span>).<span class="at">COA</span>).<span class="at">end</span>() <span class="co">// загрузка подкоманды из модуля</span></a>
<a class="sourceLine" id="cb1-18" title="18">    .<span class="at">cmd</span>() <span class="co">// добавляем еще одну подкоманду</span></a>
<a class="sourceLine" id="cb1-19" title="19">        .<span class="at">name</span>(<span class="st">&#39;othercommand&#39;</span>).<span class="at">title</span>(<span class="st">&#39;Еще одна полезная подпрограмма&#39;</span>).<span class="at">helpful</span>()</a>
<a class="sourceLine" id="cb1-20" title="20">        .<span class="at">opt</span>()</a>
<a class="sourceLine" id="cb1-21" title="21">            .<span class="at">name</span>(<span class="st">&#39;input&#39;</span>).<span class="at">title</span>(<span class="st">&#39;input file, required&#39;</span>)</a>
<a class="sourceLine" id="cb1-22" title="22">            .<span class="at">short</span>(<span class="st">&#39;i&#39;</span>).<span class="at">long</span>(<span class="st">&#39;input&#39;</span>)</a>
<a class="sourceLine" id="cb1-23" title="23">            .<span class="at">val</span>(<span class="kw">function</span>(v) <span class="op">{</span> <span class="co">// функция-валидатор, также может использоваться для трансформации значений параметров</span></a>
<a class="sourceLine" id="cb1-24" title="24">                <span class="cf">return</span> <span class="at">require</span>(<span class="st">&#39;fs&#39;</span>).<span class="at">createReadStream</span>(v) <span class="op">}</span>)</a>
<a class="sourceLine" id="cb1-25" title="25">            .<span class="at">req</span>() <span class="co">// параметр является обязательным</span></a>
<a class="sourceLine" id="cb1-26" title="26">            .<span class="at">end</span>() <span class="co">// завершаем определение параметра и возвращаемся к определению команды</span></a>
<a class="sourceLine" id="cb1-27" title="27">        .<span class="at">end</span>() <span class="co">// завершаем определение подкоманды и возвращаемся к определению команды верхнего уровня</span></a>
<a class="sourceLine" id="cb1-28" title="28">    .<span class="at">run</span>(<span class="va">process</span>.<span class="va">argv</span>.<span class="at">slice</span>(<span class="dv">2</span>))<span class="op">;</span> <span class="co">// разбираем process.argv и запускаем</span></a></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1"><span class="co">// subcommand.js</span></a>
<a class="sourceLine" id="cb2-2" title="2"><span class="va">exports</span>.<span class="at">COA</span> <span class="op">=</span> <span class="kw">function</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb2-3" title="3">    <span class="kw">this</span></a>
<a class="sourceLine" id="cb2-4" title="4">        .<span class="at">title</span>(<span class="st">&#39;Полезная подпрограмма&#39;</span>).<span class="at">helpful</span>()</a>
<a class="sourceLine" id="cb2-5" title="5">        .<span class="at">opt</span>()</a>
<a class="sourceLine" id="cb2-6" title="6">            .<span class="at">name</span>(<span class="st">&#39;output&#39;</span>).<span class="at">title</span>(<span class="st">&#39;output file&#39;</span>)</a>
<a class="sourceLine" id="cb2-7" title="7">            .<span class="at">short</span>(<span class="st">&#39;o&#39;</span>).<span class="at">long</span>(<span class="st">&#39;output&#39;</span>)</a>
<a class="sourceLine" id="cb2-8" title="8">            .<span class="at">output</span>() <span class="co">// использовать стандартную настройку для параметра вывода</span></a>
<a class="sourceLine" id="cb2-9" title="9">            .<span class="at">end</span>()</a>
<a class="sourceLine" id="cb2-10" title="10"><span class="op">};</span></a></code></pre></div>
<h2 id="api">API</h2>
<h3 id="cmd">Cmd</h3>
<p>Команда — сущность верхнего уровня. У команды могут быть определены параметры и аргументы.</p>
<h4 id="cmd.api">Cmd.api</h4>
<p>Возвращает объект, который можно использовать в других программах. Подкоманды являются методами этого объекта.<br> <strong><span class="citation" data-cites="returns">@returns</span></strong> <em>{Object}</em></p>
<h4 id="cmd.name">Cmd.name</h4>
<p>Определяет канонический идентификатор команды, используемый в вызовах API.<br> <strong><span class="citation" data-cites="param">@param</span></strong> <em>String</em> <code>_name</code> имя команды<br> <strong><span class="citation" data-cites="returns">@returns</span></strong> <em>COA.Cmd</em> <code>this</code> экземпляр команды (для поддержки цепочки методов)</p>
<h4 id="cmd.title">Cmd.title</h4>
<p>Определяет название команды, используемый в текстовых сообщениях.<br> <strong><span class="citation" data-cites="param">@param</span></strong> <em>String</em> <code>_title</code> название команды<br> <strong><span class="citation" data-cites="returns">@returns</span></strong> <em>COA.Cmd</em> <code>this</code> экземпляр команды (для поддержки цепочки методов)</p>
<h4 id="cmd.cmd">Cmd.cmd</h4>
<p>Создает новую подкоманду или добавляет ранее определенную подкоманду к текущей команде.<br> <strong><span class="citation" data-cites="param">@param</span></strong> <em>COA.Cmd</em> <code>[cmd]</code> экземпляр ранее определенной подкоманды<br> <strong><span class="citation" data-cites="returns">@returns</span></strong> <em>COA.Cmd</em> экземпляр новой или ранее определенной подкоманды</p>
<h4 id="cmd.opt">Cmd.opt</h4>
<p>Создает параметр для текущей команды.<br> <strong><span class="citation" data-cites="returns">@returns</span></strong> <em>COA.Opt</em> <code>new</code> экземпляр параметра</p>
<h4 id="cmd.arg">Cmd.arg</h4>
<p>Создает аргумент для текущей команды.<br> <strong><span class="citation" data-cites="returns">@returns</span></strong> <em>COA.Opt</em> <code>new</code> экземпляр аргумента</p>
<h4 id="cmd.act">Cmd.act</h4>
<p>Добавляет (или создает) действие для текущей команды.<br> <strong><span class="citation" data-cites="param">@param</span></strong> <em>Function</em> <code>act</code> функция, выполняемая в контексте экземпляра текущей команды и принимающая следующие параметры:<br> - <em>Object</em> <code>opts</code> параметры команды<br> - <em>Array</em> <code>args</code> аргументы команды<br> - <em>Object</em> <code>res</code> объект-аккумулятор результатов<br> Функция может вернуть проваленный промис из Cmd.reject (в случае ошибки) или любое другое значение, рассматриваемое как результат.<br> <strong><span class="citation" data-cites="param">@param</span></strong> <em>{Boolean}</em> [force=false] флаг, назначающий немедленное исполнение вместо добавления к списку существующих действий<br> <strong><span class="citation" data-cites="returns">@returns</span></strong> <em>COA.Cmd</em> <code>this</code> экземпляр команды (для поддержки цепочки методов)</p>
<h4 id="cmd.apply">Cmd.apply</h4>
<p>Исполняет функцию с переданными аргументами в контексте экземпляра текущей команды.<br> <strong><span class="citation" data-cites="param">@param</span></strong> <em>Function</em> <code>fn</code><br> <strong><span class="citation" data-cites="param">@param</span></strong> <em>Array</em> <code>args</code><br> <strong><span class="citation" data-cites="returns">@returns</span></strong> <em>COA.Cmd</em> <code>this</code> экземпляр команды (для поддержки цепочки методов)</p>
<h4 id="cmd.comp">Cmd.comp</h4>
<p>Назначает кастомную функцию автодополнения для текущей команды.<br> <strong><span class="citation" data-cites="param">@param</span></strong> <em>Function</em> <code>fn</code> функция-генератор автодополнения, исполняемая в контексте текущей команды. Принимает параметры:<br> - <em>Object</em> <code>opts</code> параметры<br> Может возвращать промис или любое другое значение, рассматриваемое как результат исполнения команды.<br> <strong><span class="citation" data-cites="returns">@returns</span></strong> <em>COA.Cmd</em> <code>this</code> экземпляр команды (для поддержки цепочки методов)</p>
<h4 id="cmd.helpful">Cmd.helpful</h4>
<p>Ставит флаг поддержки справки командной строки, т.е. вызов команды с параметрами -h –help выводит справку по работе с командой.<br> <strong><span class="citation" data-cites="returns">@returns</span></strong> <em>COA.Cmd</em> <code>this</code> экземпляр команды (для поддержки цепочки методов)</p>
<h4 id="cmd.completable">Cmd.completable</h4>
<p>Добавляет поддержку автодополнения командной строки. Добавляется подкоманда “completion”, которая выполняет все необходимые действия.<br> Может быть добавлен только для главной команды.<br> <strong><span class="citation" data-cites="returns">@returns</span></strong> <em>COA.Cmd</em> <code>this</code> экземпляр команды (для поддержки цепочки методов)</p>
<h4 id="cmd.usage">Cmd.usage</h4>
<p>Возвращает текст справки по использованию команды для текущего экземпляра.<br> <strong><span class="citation" data-cites="returns">@returns</span></strong> <em>String</em> <code>usage</code> Текст справки по использованию</p>
<h4 id="cmd.run">Cmd.run</h4>
<p>Разбирает аргументы из значения, возвращаемого NodeJS process.argv, и запускает текущую программу, т.е. вызывает process.exit после завершения всех действий.<br> <strong><span class="citation" data-cites="param">@param</span></strong> <em>Array</em> <code>argv</code><br> <strong><span class="citation" data-cites="returns">@returns</span></strong> <em>COA.Cmd</em> <code>this</code> экземпляр команды (для поддержки цепочки методов)</p>
<h4 id="cmd.invoke">Cmd.invoke</h4>
<p>Исполняет переданную (или текущую) команду с указанными параметрами и аргументами.<br> <strong><span class="citation" data-cites="param">@param</span></strong> <em>String|Array</em> <code>cmds</code> подкоманда для исполнения (необязательно)<br> <strong><span class="citation" data-cites="param">@param</span></strong> <em>Object</em> <code>opts</code> параметры, передаваемые команде (необязательно)<br> <strong><span class="citation" data-cites="param">@param</span></strong> <em>Object</em> <code>args</code> аргументы, передаваемые команде (необязательно)<br> <strong><span class="citation" data-cites="returns">@returns</span></strong> <em>Q.Promise</em></p>
<h4 id="cmd.reject">Cmd.reject</h4>
<p>Проваливает промисы, возращенные в действиях.<br> Используется в .act() для возврата с ошибкой.<br> <strong><span class="citation" data-cites="param">@param</span></strong> <em>Object</em> <code>reason</code> причина провала<br> Вы можете определить метод toString() и свойство toString() объекта причины провала.<br> <strong><span class="citation" data-cites="returns">@returns</span></strong> <em>Q.promise</em> проваленный промис</p>
<h4 id="cmd.end">Cmd.end</h4>
<p>Завершает цепочку методов текущей подкоманды и возвращает экземпляр родительской команды.<br> <strong><span class="citation" data-cites="returns">@returns</span></strong> <em>COA.Cmd</em> <code>parent</code> родительская команда</p>
<h3 id="opt">Opt</h3>
<p>Параметр — именованная сущность. У параметра может быть определено короткое или длинное имя для использования из командной строки.<br> <strong><span class="citation" data-cites="namespace">@namespace</span></strong><br> <strong><span class="citation" data-cites="class">@class</span></strong> Переданный параметр</p>
<h4 id="opt.name">Opt.name</h4>
<p>Определяет канонический идентификатор параметра, используемый в вызовах API.<br> <strong><span class="citation" data-cites="param">@param</span></strong> <em>String</em> <code>_name</code> имя параметра<br> <strong><span class="citation" data-cites="returns">@returns</span></strong> <em>COA.Opt</em> <code>this</code> экземпляр параметра (для поддержки цепочки методов)</p>
<h4 id="opt.title">Opt.title</h4>
<p>Определяет описание для параметра, используемое в текстовых сообщениях.<br> <strong><span class="citation" data-cites="param">@param</span></strong> <em>String</em> <code>_title</code> название параметра<br> <strong><span class="citation" data-cites="returns">@returns</span></strong> <em>COA.Opt</em> <code>this</code> экземпляр параметра (для поддержки цепочки методов)</p>
<h4 id="opt.short">Opt.short</h4>
<p>Назначает ключ для короткого имени параметра, передаваемого из командной строки с одинарным дефисом (например, <code>-v</code>).<br> <strong><span class="citation" data-cites="param">@param</span></strong> <em>String</em> <code>_short</code><br> <strong><span class="citation" data-cites="returns">@returns</span></strong> <em>COA.Opt</em> <code>this</code> экземпляр параметра (для поддержки цепочки методов)</p>
<h4 id="opt.long">Opt.long</h4>
<p>Назначает ключ для длинного имени параметра, передаваемого из командной строки с двойным дефисом (например, <code>--version</code>).<br> <strong><span class="citation" data-cites="param">@param</span></strong> <em>String</em> <code>_long</code><br> <strong><span class="citation" data-cites="returns">@returns</span></strong> <em>COA.Opt</em> <code>this</code> экземпляр параметра (для поддержки цепочки методов)</p>
<h4 id="opt.flag">Opt.flag</h4>
<p>Помечает параметр как логический, т.е. параметр не имеющий значения.<br> <strong><span class="citation" data-cites="returns">@returns</span></strong> <em>COA.Opt</em> <code>this</code> экземпляр параметра (для поддержки цепочки методов)</p>
<h4 id="opt.arr">Opt.arr</h4>
<p>Помечает параметр как принимающий множественные значения.<br> Иначе будет использовано последнее переданное значение параметра.<br> <strong><span class="citation" data-cites="returns">@returns</span></strong> <em>COA.Opt</em> <code>this</code> экземпляр параметра (для поддержки цепочки методов)</p>
<h4 id="opt.req">Opt.req</h4>
<p>Помечает параметр как обязательный.<br> <strong><span class="citation" data-cites="returns">@returns</span></strong> <em>COA.Opt</em> <code>this</code> экземпляр параметра (для поддержки цепочки методов)</p>
<h4 id="opt.only">Opt.only</h4>
<p>Интерпретирует параметр как команду, т.е. программа будет завершена сразу после выполнения параметра.<br> <strong><span class="citation" data-cites="returns">@returns</span></strong> <em>COA.Opt</em> <code>this</code> экземпляр параметра (для поддержки цепочки методов)</p>
<h4 id="opt.val">Opt.val</h4>
<p>Назначает функцию валидации (или трансформации значения) для значения параметра.<br> Значение, полученное из командной строки, передается в функцию-валидатор прежде чем оно станет доступно из API.<br> Используется для валидации и трансформации введенных данных.<br> <strong><span class="citation" data-cites="param">@param</span></strong> <em>Function</em> <code>_val</code> функция валидации, исполняемая в контексте экземпляра параметра и принимающая в качестве единственного параметра значение, полученное из командной строки<br> <strong><span class="citation" data-cites="returns">@returns</span></strong> <em>COA.Opt</em> <code>this</code> экземпляр параметра (для поддержки цепочки методов)</p>
<h4 id="opt.def">Opt.def</h4>
<p>Назначает значение параметра по умолчанию. Это значение также передается в функцию валидации как обычное значение.<br> <strong><span class="citation" data-cites="param">@param</span></strong> <em>Object</em> <code>_def</code><br> <strong><span class="citation" data-cites="returns">@returns</span></strong> <em>COA.Opt</em> <code>this</code> экземпляр параметра (для поддержки цепочки методов)</p>
<h4 id="opt.input">Opt.input</h4>
<p>Помечает параметр как принимающий ввод пользователя. <br> Позволяет использовать валидацию для STDIN.<br> <strong><span class="citation" data-cites="returns">@returns</span></strong> <em>{COA.Opt}</em> <code>this</code> экземпляр параметра (для поддержки цепочки методов)</p>
<h4 id="opt.output">Opt.output</h4>
<p>Помечает параметр как вывод.<br> Позволяет использовать валидацию для STDOUT.<br> <strong><span class="citation" data-cites="returns">@returns</span></strong> <em>COA.Opt</em> <code>this</code> экземпляр параметра (для поддержки цепочки методов)</p>
<h4 id="opt.act">Opt.act</h4>
<p>Добавляет (или создает) действие для текущего параметра команды. Это действие будет выполнено, если текущий параметр есть в списке полученных параметров (с любым значением).<br> <strong><span class="citation" data-cites="param">@param</span></strong> <em>Function</em> <code>act</code> функция, выполняемая в контексте экземпляра текущей команды и принимающая следующие параметры:<br> - <em>Object</em> <code>opts</code> параметры команды<br> - <em>Array</em> <code>args</code> аргументы команды<br> - <em>Object</em> <code>res</code> объект-аккумулятор результатов<br> Функция может вернуть проваленный промис из Cmd.reject (в случае ошибки) или любое другое значение, рассматриваемое как результат.<br> <strong><span class="citation" data-cites="returns">@returns</span></strong> <em>COA.Opt</em> <code>this</code> экземпляр параметра (для поддержки цепочки методов)</p>
<h4 id="opt.comp">Opt.comp</h4>
<p>Назначает кастомную функцию автодополнения для текущей команды.<br> <strong><span class="citation" data-cites="param">@param</span></strong> <em>Function</em> <code>fn</code> функция-генератор автодоплнения, исполняемая в контексте экземпляра команды. Принимает параметры:<br> - <em>Object</em> <code>opts</code> параметры автодополнения<br> Может возвращать промис или любое другое значение, рассматриваемое как результат исполнения команды.<br> <strong><span class="citation" data-cites="returns">@returns</span></strong> <em>COA.Opt</em> <code>this</code> экземпляр параметра (для поддержки цепочки методов)</p>
<h4 id="opt.end">Opt.end</h4>
<p>Завершает цепочку методов текущего параметра и возвращает экземпляр родительской команды.<br> <strong><span class="citation" data-cites="returns">@returns</span></strong> <em>COA.Cmd</em> <code>parent</code> родительская команда</p>
<h3 id="arg">Arg</h3>
<p>Аргумент — неименованная сущность.<br> Аргументы передаются из командной строки как список неименованных значений.</p>
<h4 id="arg.name">Arg.name</h4>
<p>Определяет канонический идентификатор аргумента, используемый в вызовах API.<br> <strong><span class="citation" data-cites="param">@param</span></strong> <em>String</em> <code>_name</code> имя аргумента<br> <strong><span class="citation" data-cites="returns">@returns</span></strong> <em>COA.Arg</em> <code>this</code> экземпляр аргумента (для поддержки цепочки методов)</p>
<h4 id="arg.title">Arg.title</h4>
<p>Определяет описание для аргумента, используемое в текстовых сообщениях.<br> <strong><span class="citation" data-cites="param">@param</span></strong> <em>String</em> <code>_title</code> описание аргумента<br> <strong><span class="citation" data-cites="returns">@returns</span></strong> <em>COA.Arg</em> <code>this</code> экземпляр аргумента (для поддержки цепочки методов)</p>
<h4 id="arg.arr">Arg.arr</h4>
<p>Помечает аргумент как принимающий множественные значения.<br> Иначе будет использовано последнее переданное значение аргумента.<br> <strong><span class="citation" data-cites="returns">@returns</span></strong> <em>COA.Arg</em> <code>this</code> экземпляр аргумента (для поддержки цепочки методов)</p>
<h4 id="arg.req">Arg.req</h4>
<p>Помечает аргумент как обязательный.<br> <strong><span class="citation" data-cites="returns">@returns</span></strong> <em>COA.Arg</em> <code>this</code> экземпляр аргумента (для поддержки цепочки методов)</p>
<h4 id="arg.val">Arg.val</h4>
<p>Назначает функцию валидации (или трансформации значения) для аргумента.<br> Значение, полученное из командной строки, передается в функцию-валидатор прежде чем оно станет доступно из API.<br> Используется для валидации и трансформации введенных данных.<br> <strong><span class="citation" data-cites="param">@param</span></strong> <em>Function</em> <code>_val</code> функция валидации, исполняемая в контексте экземпляра аргумента и принимающая в качестве единственного параметра значение, полученное из командной строки<br> <strong><span class="citation" data-cites="returns">@returns</span></strong> <em>COA.Opt</em> <code>this</code> экземпляр аргумента (для поддержки цепочки методов)</p>
<h4 id="arg.def">Arg.def</h4>
<p>Назначает дефолтное значение для аргумента. Дефолтное значение передается в функцию валидации как обычное значение.<br> <strong><span class="citation" data-cites="param">@param</span></strong> <em>Object</em> <code>_def</code><br> <strong><span class="citation" data-cites="returns">@returns</span></strong> <em>COA.Arg</em> <code>this</code> экземпляр аргумента (для поддержки цепочки методов)</p>
<h4 id="arg.output">Arg.output</h4>
<p>Помечает параметр как вывод.<br> Позволяет назначить валидацию для STDOUT.<br> <strong><span class="citation" data-cites="returns">@returns</span></strong> <em>COA.Arg</em> <code>this</code> экземпляр аргумента (для поддержки цепочки методов)</p>
<h4 id="arg.comp">Arg.comp</h4>
<p>Назначает кастомную функцию автодополнения для текущего аргумента.<br> <strong><span class="citation" data-cites="param">@param</span></strong> <em>Function</em> <code>fn</code> функция-генератор автодоплнения, исполняемая в контексте текущей команды. Принимает параметры:<br> - <em>Object</em> <code>opts</code> параметры Может возвращать промис или любое другое значение, рассматриваемое как результат исполнения команды.<br> <strong><span class="citation" data-cites="returns">@returns</span></strong> <em>COA.Arg</em> <code>this</code> экземпляр аргумента (для поддержки цепочки методов)</p>
<h4 id="arg.end">Arg.end</h4>
<p>Завершает цепочку методов текущего аргумента и возвращает экземпляр родительской команды.<br> <strong><span class="citation" data-cites="returns">@returns</span></strong> <em>COA.Cmd</em> <code>parent</code> родительская команда</p>
</body>
</html>
