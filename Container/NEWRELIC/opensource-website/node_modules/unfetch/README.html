<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>README</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<p align="center">
<img src="https://i.imgur.com/0cSIPzP.png" width="300" height="300" alt="unfetch"> <br> <a href="https://www.npmjs.org/package/unfetch"><img src="https://img.shields.io/npm/v/unfetch.svg?style=flat" alt="npm"></a> <a href="https://unpkg.com/unfetch/polyfill"><img src="https://img.badgesize.io/https://unpkg.com/unfetch/polyfill/index.js?compression=gzip" alt="gzip size"></a> <a href="https://www.npmjs.com/package/unfetch"><img src="https://img.shields.io/npm/dt/unfetch.svg" alt="downloads" ></a> <a href="https://travis-ci.org/developit/unfetch"><img src="https://travis-ci.org/developit/unfetch.svg?branch=master" alt="travis"></a>
</p>
<h1 id="unfetch">unfetch</h1>
<blockquote>
<p>Tiny 500b fetch ‚Äúbarely-polyfill‚Äù</p>
</blockquote>
<ul>
<li><strong>Tiny:</strong> about <strong>500 bytes</strong> of <a href="https://unpkg.com/unfetch">ES3</a> gzipped</li>
<li><strong>Minimal:</strong> just <code>fetch()</code> with headers and text/json responses</li>
<li><strong>Familiar:</strong> a subset of the full API</li>
<li><strong>Supported:</strong> supports IE8+ <em>(assuming <code>Promise</code> is polyfilled of course!)</em></li>
<li><strong>Standalone:</strong> one function, no dependencies</li>
<li><strong>Modern:</strong> written in ES2015, transpiled to 500b of old-school JS</li>
</ul>
<blockquote>
<p>ü§î <strong>What‚Äôs Missing?</strong></p>
<ul>
<li>Uses simple Arrays instead of Iterables, since Arrays <em>are</em> iterables</li>
<li>No streaming, just Promisifies existing XMLHttpRequest response bodies</li>
<li>Use in Node.JS is handled by <a href="https://github.com/developit/unfetch/tree/master/packages/isomorphic-unfetch">isomorphic-unfetch</a></li>
</ul>
</blockquote>
<hr />
<ul>
<li><a href="#unfetch">Unfetch</a></li>
<li><a href="#installation">Installation</a></li>
<li><a href="#usage-as-a-polyfill">Usage: As a Polyfill</a></li>
<li><a href="#usage-as-a-ponyfill">Usage: As a Ponyfill</a></li>
<li><a href="#examples--demos">Examples &amp; Demos</a></li>
<li><a href="#api">API</a></li>
<li><a href="#caveats">Caveats</a></li>
<li><a href="#contribute">Contribute</a></li>
<li><a href="#license">License</a></li>
</ul>
<hr />
<h2 id="installation">Installation</h2>
<p>For use with <a href="http://nodejs.org">node</a> and <a href="https://npmjs.com">npm</a>:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb1-1" title="1"><span class="ex">npm</span> install --save unfetch</a></code></pre></div>
<p>Otherwise, grab it from <a href="https://unpkg.com/unfetch/">unpkg.com/unfetch</a>.</p>
<hr />
<h2 id="usage-as-a-polyfill">Usage: As a <a href="https://ponyfill.com/#polyfill">Polyfill</a></h2>
<p>This automatically ‚Äúinstalls‚Äù unfetch as <code>window.fetch()</code> if it detects Fetch isn‚Äôt supported:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1"><span class="im">import</span> <span class="st">&#39;unfetch/polyfill&#39;</span></a>
<a class="sourceLine" id="cb2-2" title="2"></a>
<a class="sourceLine" id="cb2-3" title="3"><span class="co">// fetch is now available globally!</span></a>
<a class="sourceLine" id="cb2-4" title="4"><span class="at">fetch</span>(<span class="st">&#39;/foo.json&#39;</span>)</a>
<a class="sourceLine" id="cb2-5" title="5">  .<span class="at">then</span>( r <span class="kw">=&gt;</span> <span class="va">r</span>.<span class="at">json</span>() )</a>
<a class="sourceLine" id="cb2-6" title="6">  .<span class="at">then</span>( data <span class="kw">=&gt;</span> <span class="va">console</span>.<span class="at">log</span>(data) )</a></code></pre></div>
<p>This polyfill version is particularly useful for hotlinking from <a href="https://unpkg.com">unpkg</a>:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb3-1" title="1"><span class="kw">&lt;script</span><span class="ot"> src=</span><span class="st">&quot;https://unpkg.com/unfetch/polyfill&quot;</span><span class="kw">&gt;&lt;/script&gt;</span></a>
<a class="sourceLine" id="cb3-2" title="2"><span class="kw">&lt;script&gt;</span></a>
<a class="sourceLine" id="cb3-3" title="3">  <span class="co">// now our page can use fetch!</span></a>
<a class="sourceLine" id="cb3-4" title="4">  <span class="at">fetch</span>(<span class="st">&#39;/foo&#39;</span>)</a>
<a class="sourceLine" id="cb3-5" title="5"><span class="kw">&lt;/script&gt;</span></a></code></pre></div>
<hr />
<h2 id="usage-as-a-ponyfill">Usage: As a <a href="https://github.com/sindresorhus/ponyfill">Ponyfill</a></h2>
<p>With a module bundler like <a href="http://rollupjs.org">rollup</a> or <a href="https://webpack.js.org">webpack</a>, you can import unfetch to use in your code without modifying any globals:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1"><span class="co">// using JS Modules:</span></a>
<a class="sourceLine" id="cb4-2" title="2"><span class="im">import</span> fetch <span class="im">from</span> <span class="st">&#39;unfetch&#39;</span></a>
<a class="sourceLine" id="cb4-3" title="3"></a>
<a class="sourceLine" id="cb4-4" title="4"><span class="co">// or using CommonJS:</span></a>
<a class="sourceLine" id="cb4-5" title="5"><span class="kw">var</span> fetch <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;unfetch&#39;</span>)</a>
<a class="sourceLine" id="cb4-6" title="6"></a>
<a class="sourceLine" id="cb4-7" title="7"><span class="co">// usage:</span></a>
<a class="sourceLine" id="cb4-8" title="8"><span class="at">fetch</span>(<span class="st">&#39;/foo.json&#39;</span>)</a>
<a class="sourceLine" id="cb4-9" title="9">  .<span class="at">then</span>( r <span class="kw">=&gt;</span> <span class="va">r</span>.<span class="at">json</span>() )</a>
<a class="sourceLine" id="cb4-10" title="10">  .<span class="at">then</span>( data <span class="kw">=&gt;</span> <span class="va">console</span>.<span class="at">log</span>(data) )</a></code></pre></div>
<p>The above will always return <code>unfetch()</code>. <em>(even if <code>window.fetch</code> exists!)</em></p>
<p>There‚Äôs also a UMD bundle available as <a href="https://unpkg.com/unfetch/dist/unfetch.umd.js">unfetch/dist/unfetch.umd.js</a>, which doesn‚Äôt automatically install itself as <code>window.fetch</code>.</p>
<hr />
<h2 id="examples-demos">Examples &amp; Demos</h2>
<p><a href="https://jsfiddle.net/developit/qrh7tLc0/"><strong>Real Example on JSFiddle</strong></a> ‚û°Ô∏è</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb5-1" title="1"><span class="co">// simple GET request:</span></a>
<a class="sourceLine" id="cb5-2" title="2"><span class="at">fetch</span>(<span class="st">&#39;/foo&#39;</span>)</a>
<a class="sourceLine" id="cb5-3" title="3">  .<span class="at">then</span>( r <span class="kw">=&gt;</span> <span class="va">r</span>.<span class="at">text</span>() )</a>
<a class="sourceLine" id="cb5-4" title="4">  .<span class="at">then</span>( txt <span class="kw">=&gt;</span> <span class="va">console</span>.<span class="at">log</span>(txt) )</a>
<a class="sourceLine" id="cb5-5" title="5"></a>
<a class="sourceLine" id="cb5-6" title="6"></a>
<a class="sourceLine" id="cb5-7" title="7"><span class="co">// complex POST request with JSON, headers:</span></a>
<a class="sourceLine" id="cb5-8" title="8"><span class="at">fetch</span>(<span class="st">&#39;/bear&#39;</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb5-9" title="9">  <span class="dt">method</span><span class="op">:</span> <span class="st">&#39;POST&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb5-10" title="10">  <span class="dt">headers</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb5-11" title="11">    <span class="st">&#39;Content-Type&#39;</span><span class="op">:</span> <span class="st">&#39;application/json&#39;</span></a>
<a class="sourceLine" id="cb5-12" title="12">  <span class="op">},</span></a>
<a class="sourceLine" id="cb5-13" title="13">  <span class="dt">body</span><span class="op">:</span> <span class="va">JSON</span>.<span class="at">stringify</span>(<span class="op">{</span> <span class="dt">hungry</span><span class="op">:</span> <span class="kw">true</span> <span class="op">}</span>)</a>
<a class="sourceLine" id="cb5-14" title="14"><span class="op">}</span>).<span class="at">then</span>( r <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb5-15" title="15">  <span class="at">open</span>(<span class="va">r</span>.<span class="va">headers</span>.<span class="at">get</span>(<span class="st">&#39;location&#39;</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb5-16" title="16">  <span class="cf">return</span> <span class="va">r</span>.<span class="at">json</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb5-17" title="17"><span class="op">}</span>)</a></code></pre></div>
<hr />
<h2 id="api">API</h2>
<p>While one of Unfetch‚Äôs goals is to provide a familiar interface, its API may differ from other <code>fetch</code> polyfills/ponyfills. One of the key differences is that Unfetch focuses on implementing the <a href="https://fetch.spec.whatwg.org/#fetch-api"><code>fetch()</code> API</a>, while offering minimal (yet functional) support to the other sections of the <a href="https://fetch.spec.whatwg.org/">Fetch spec</a>, like the <a href="https://fetch.spec.whatwg.org/#headers-class">Headers class</a> or the <a href="https://fetch.spec.whatwg.org/#response-class">Response class</a>. Unfetch‚Äôs API is organized as follows:</p>
<h3 id="fetchurl-string-options-object"><code>fetch(url: string, options: Object)</code></h3>
<p>This function is the heart of Unfetch. It will fetch resources from <code>url</code> according to the given <code>options</code>, returning a Promise that will eventually resolve to the response.</p>
<p>Unfetch will account for the following properties in <code>options</code>:</p>
<ul>
<li><code>method</code>: Indicates the request method to be performed on the target resource (The most common ones being <code>GET</code>, <code>POST</code>, <code>PUT</code>, <code>PATCH</code>, <code>HEAD</code>, <code>OPTIONS</code> or <code>DELETE</code>).</li>
<li><code>headers</code>: An <code>Object</code> containing additional information to be sent with the request, e.g.¬†<code>{ 'Content-Type': 'application/json' }</code> to indicate a JSON-typed request body.</li>
<li><code>credentials</code>: ‚ö† Accepts a <code>"include"</code> string, which will allow both CORS and same origin requests to work with cookies. As pointed in the <a href="#caveats">‚ÄòCaveats‚Äô section</a>, Unfetch won‚Äôt send or receive cookies otherwise. The <code>"same-origin"</code> value is not supported. ‚ö†</li>
<li><code>body</code>: The content to be transmitted in request‚Äôs body. Common content types include <code>FormData</code>, <code>JSON</code>, <code>Blob</code>, <code>ArrayBuffer</code> or plain text.</li>
</ul>
<h3 id="response-methods-and-attributes"><code>response</code> Methods and Attributes</h3>
<p>These methods are used to handle the response accordingly in your Promise chain. Instead of implementing full spec-compliant <a href="https://fetch.spec.whatwg.org/#response-class">Response Class</a> functionality, Unfetch provides the following methods and attributes:</p>
<h4 id="response.ok"><code>response.ok</code></h4>
<p>Returns <code>true</code> if the request received a status in the <code>OK</code> range (200-299).</p>
<h4 id="response.status"><code>response.status</code></h4>
<p>Contains the status code of the response, e.g.¬†<code>404</code> for a not found resource, <code>200</code> for a success.</p>
<h4 id="response.statustext"><code>response.statusText</code></h4>
<p>A message related to the <code>status</code> attribute, e.g.¬†<code>OK</code> for a status <code>200</code>.</p>
<h4 id="response.clone"><code>response.clone()</code></h4>
<p>Will return another <code>Object</code> with the same shape and content as <code>response</code>.</p>
<h4 id="response.text-response.json-response.blob"><code>response.text()</code>, <code>response.json()</code>, <code>response.blob()</code></h4>
<p>Will return the response content as plain text, JSON and <code>Blob</code>, respectively.</p>
<h4 id="response.headers"><code>response.headers</code></h4>
<p>Again, Unfetch doesn‚Äôt implement a full spec-compliant <a href="https://fetch.spec.whatwg.org/#headers"><code>Headers Class</code></a>, emulating some of the Map-like functionality through its own functions: * <code>headers.keys</code>: Returns an <code>Array</code> containing the <code>key</code> for every header in the response. * <code>headers.entries</code>: Returns an <code>Array</code> containing the <code>[key, value]</code> pairs for every <code>Header</code> in the response. * <code>headers.get(key)</code>: Returns the <code>value</code> associated with the given <code>key</code>. * <code>headers.has(key)</code>: Returns a <code>boolean</code> asserting the existence of a <code>value</code> for the given <code>key</code> among the response headers.</p>
<h2 id="caveats">Caveats</h2>
<p><em>Adapted from the GitHub fetch polyfill <a href="https://github.com/github/fetch#caveats"><strong>readme</strong></a>.</em></p>
<p>The <code>fetch</code> specification differs from <code>jQuery.ajax()</code> in mainly two ways that bear keeping in mind:</p>
<ul>
<li>By default, <code>fetch</code> <strong>won‚Äôt send or receive any cookies</strong> from the server, resulting in unauthenticated requests if the site relies on maintaining a user session.</li>
</ul>
<div class="sourceCode" id="cb6"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb6-1" title="1"><span class="at">fetch</span>(<span class="st">&#39;/users&#39;</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb6-2" title="2">  <span class="dt">credentials</span><span class="op">:</span> <span class="st">&#39;include&#39;</span></a>
<a class="sourceLine" id="cb6-3" title="3"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<ul>
<li><p>The Promise returned from <code>fetch()</code> <strong>won‚Äôt reject on HTTP error status</strong> even if the response is an HTTP 404 or 500. Instead, it will resolve normally, and it will only reject on network failure or if anything prevented the request from completing.</p>
<p>To have <code>fetch</code> Promise reject on HTTP error statuses, i.e.¬†on any non-2xx status, define a custom response handler:</p></li>
</ul>
<div class="sourceCode" id="cb7"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb7-1" title="1"><span class="at">fetch</span>(<span class="st">&#39;/users&#39;</span>)</a>
<a class="sourceLine" id="cb7-2" title="2">  .<span class="at">then</span>( checkStatus )</a>
<a class="sourceLine" id="cb7-3" title="3">  .<span class="at">then</span>( r <span class="kw">=&gt;</span> <span class="va">r</span>.<span class="at">json</span>() )</a>
<a class="sourceLine" id="cb7-4" title="4">  .<span class="at">then</span>( data <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb7-5" title="5">    <span class="va">console</span>.<span class="at">log</span>(data)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-6" title="6">  <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-7" title="7"></a>
<a class="sourceLine" id="cb7-8" title="8"><span class="kw">function</span> <span class="at">checkStatus</span>(response) <span class="op">{</span></a>
<a class="sourceLine" id="cb7-9" title="9">  <span class="cf">if</span> (<span class="va">response</span>.<span class="at">ok</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb7-10" title="10">    <span class="cf">return</span> response<span class="op">;</span></a>
<a class="sourceLine" id="cb7-11" title="11">  <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb7-12" title="12">    <span class="kw">var</span> error <span class="op">=</span> <span class="kw">new</span> <span class="at">Error</span>(<span class="va">response</span>.<span class="at">statusText</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-13" title="13">    <span class="va">error</span>.<span class="at">response</span> <span class="op">=</span> response<span class="op">;</span></a>
<a class="sourceLine" id="cb7-14" title="14">    <span class="cf">return</span> <span class="va">Promise</span>.<span class="at">reject</span>(error)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-15" title="15">  <span class="op">}</span></a>
<a class="sourceLine" id="cb7-16" title="16"><span class="op">}</span></a></code></pre></div>
<hr />
<h2 id="contribute">Contribute</h2>
<p>First off, thanks for taking the time to contribute! Now, take a moment to be sure your contributions make sense to everyone else.</p>
<h3 id="reporting-issues">Reporting Issues</h3>
<p>Found a problem? Want a new feature? First of all see if your issue or idea has <a href="../../issues">already been reported</a>. If it hasn‚Äôt, just open a <a href="../../issues/new">new clear and descriptive issue</a>.</p>
<h3 id="submitting-pull-requests">Submitting pull requests</h3>
<p>Pull requests are the greatest contributions, so be sure they are focused in scope, and do avoid unrelated commits.</p>
<blockquote>
<p>üíÅ <strong>Remember: size is the #1 priority.</strong></p>
<p>Every byte counts! PR‚Äôs can‚Äôt be merged if they increase the output size much.</p>
</blockquote>
<ul>
<li>Fork it!</li>
<li>Clone your fork: <code>git clone https://github.com/&lt;your-username&gt;/unfetch</code></li>
<li>Navigate to the newly cloned directory: <code>cd unfetch</code></li>
<li>Create a new branch for the new feature: <code>git checkout -b my-new-feature</code></li>
<li>Install the tools necessary for development: <code>npm install</code></li>
<li>Make your changes.</li>
<li><code>npm run build</code> to verify your change doesn‚Äôt increase output size.</li>
<li><code>npm test</code> to make sure your change doesn‚Äôt break anything.</li>
<li>Commit your changes: <code>git commit -am 'Add some feature'</code></li>
<li>Push to the branch: <code>git push origin my-new-feature</code></li>
<li>Submit a pull request with full remarks documenting your changes.</li>
</ul>
<h2 id="license">License</h2>
<p><a href="LICENSE.md">MIT License</a> ¬© <a href="https://jasonformat.com/">Jason Miller</a></p>
</body>
</html>
