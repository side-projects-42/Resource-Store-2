[<img src="https://webpack.js.org/assets/icon-square-big.svg" width="200" height="200" />](https://github.com/webpack/webpack)

[![npm](https://img.shields.io/npm/v/url-loader.svg)](https://npmjs.com/package/url-loader) [![node](https://img.shields.io/node/v/url-loader.svg)](https://nodejs.org) [![deps](https://david-dm.org/webpack-contrib/url-loader.svg)](https://david-dm.org/webpack-contrib/url-loader) [![tests](https://github.com/webpack-contrib/url-loader/workflows/url-loader/badge.svg)](https://github.com/webpack-contrib/url-loader/actions) [![chat](https://img.shields.io/badge/gitter-webpack%2Fwebpack-brightgreen.svg)](https://gitter.im/webpack/webpack) [![size](https://packagephobia.now.sh/badge?p=url-loader)](https://packagephobia.now.sh/result?p=url-loader)

url-loader
==========

A loader for webpack which transforms files into base64 URIs.

Getting Started
---------------

To begin, you’ll need to install `url-loader`:

    $ npm install url-loader --save-dev

`url-loader` works like [`file-loader`](https://github.com/webpack-contrib/file-loader), but can return a DataURL if the file is smaller than a byte limit.

**index.js**

    import img from './image.png';

**webpack.config.js**

    module.exports = {
      module: {
        rules: [
          {
            test: /\.(png|jpg|gif)$/i,
            use: [
              {
                loader: 'url-loader',
                options: {
                  limit: 8192,
                },
              },
            ],
          },
        ],
      },
    };

And run `webpack` via your preferred method.

Options
-------

<table style="width:98%;"><colgroup><col style="width: 14%" /><col style="width: 13%" /><col style="width: 30%" /><col style="width: 41%" /></colgroup><thead><tr class="header"><th style="text-align: center;">Name</th><th style="text-align: center;">Type</th><th style="text-align: center;">Default</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: center;"><strong><a href="#limit"><code>limit</code></a></strong></td><td style="text-align: center;"><code>{Boolean\|Number\|String}</code></td><td style="text-align: center;"><code>true</code></td><td style="text-align: left;">Specifying the maximum size of a file in bytes.</td></tr><tr class="even"><td style="text-align: center;"><strong><a href="#mimetype"><code>mimetype</code></a></strong></td><td style="text-align: center;"><code>{Boolean\|String}</code></td><td style="text-align: center;">based from <a href="https://github.com/jshttp/mime-types">mime-types</a></td><td style="text-align: left;">Sets the MIME type for the file to be transformed.</td></tr><tr class="odd"><td style="text-align: center;"><strong><a href="#encoding"><code>encoding</code></a></strong></td><td style="text-align: center;"><code>{Boolean\|String}</code></td><td style="text-align: center;"><code>base64</code></td><td style="text-align: left;">Specify the encoding which the file will be inlined with.</td></tr><tr class="even"><td style="text-align: center;"><strong><a href="#generator"><code>generator</code></a></strong></td><td style="text-align: center;"><code>{Function}</code></td><td style="text-align: center;"><code>() =&gt; type/subtype;encoding,base64_data</code></td><td style="text-align: left;">You can create you own custom implementation for encoding data.</td></tr><tr class="odd"><td style="text-align: center;"><strong><a href="#fallback"><code>fallback</code></a></strong></td><td style="text-align: center;"><code>{String}</code></td><td style="text-align: center;"><code>file-loader</code></td><td style="text-align: left;">Specifies an alternative loader to use when a target file’s size exceeds the limit.</td></tr><tr class="even"><td style="text-align: center;"><strong><a href="#esmodule"><code>esModule</code></a></strong></td><td style="text-align: center;"><code>{Boolean}</code></td><td style="text-align: center;"><code>true</code></td><td style="text-align: left;">Use ES modules syntax.</td></tr></tbody></table>

### `limit`

Type: `Boolean|Number|String` Default: `undefined`

The limit can be specified via loader options and defaults to no limit.

#### `Boolean`

Enable or disable transform files into base64.

**webpack.config.js**

    module.exports = {
      module: {
        rules: [
          {
            test: /\.(png|jpg|gif)$/i,
            use: [
              {
                loader: 'url-loader',
                options: {
                  limit: false,
                },
              },
            ],
          },
        ],
      },
    };

#### `Number|String`

A `Number` or `String` specifying the maximum size of a file in bytes. If the file size is **equal** or **greater** than the limit [`file-loader`](https://github.com/webpack-contrib/file-loader) will be used (by default) and all query parameters are passed to it.

Using an alternative to `file-loader` is enabled via the `fallback` option.

**webpack.config.js**

    module.exports = {
      module: {
        rules: [
          {
            test: /\.(png|jpg|gif)$/i,
            use: [
              {
                loader: 'url-loader',
                options: {
                  limit: 8192,
                },
              },
            ],
          },
        ],
      },
    };

### `mimetype`

Type: `Boolean|String` Default: based from [mime-types](https://github.com/jshttp/mime-types)

Specify the `mimetype` which the file will be inlined with. If unspecified the `mimetype` value will be used from [mime-types](https://github.com/jshttp/mime-types).

#### `Boolean`

The `true` value allows to generation the `mimetype` part from [mime-types](https://github.com/jshttp/mime-types). The `false` value removes the `mediatype` part from a Data URL (if omitted, defaults to `text/plain;charset=US-ASCII`).

**webpack.config.js**

    module.exports = {
      module: {
        rules: [
          {
            test: /\.(png|jpg|gif)$/i,
            use: [
              {
                loader: 'url-loader',
                options: {
                  mimetype: false,
                },
              },
            ],
          },
        ],
      },
    };

#### `String`

Sets the MIME type for the file to be transformed.

**webpack.config.js**

    module.exports = {
      module: {
        rules: [
          {
            test: /\.(png|jpg|gif)$/i,
            use: [
              {
                loader: 'url-loader',
                options: {
                  mimetype: 'image/png',
                },
              },
            ],
          },
        ],
      },
    };

### `encoding`

Type: `Boolean|String` Default: `base64`

Specify the `encoding` which the file will be inlined with. If unspecified the `encoding` will be `base64`.

#### `Boolean`

If you don’t want to use any encoding you can set `encoding` to `false` however if you set it to `true` it will use the default encoding `base64`.

**webpack.config.js**

    module.exports = {
      module: {
        rules: [
          {
            test: /\.svg$/i,
            use: [
              {
                loader: 'url-loader',
                options: {
                  encoding: false,
                },
              },
            ],
          },
        ],
      },
    };

#### `String`

It supports [Node.js Buffers and Character Encodings](https://nodejs.org/api/buffer.html#buffer_buffers_and_character_encodings) which are `["utf8","utf16le","latin1","base64","hex","ascii","binary","ucs2"]`.

**webpack.config.js**

    module.exports = {
      module: {
        rules: [
          {
            test: /\.svg$/i,
            use: [
              {
                loader: 'url-loader',
                options: {
                  encoding: 'utf8',
                },
              },
            ],
          },
        ],
      },
    };

### `generator`

Type: `Function` Default: `(mimetype, encoding, content, resourcePath) => mimetype;encoding,base64_content`

You can create you own custom implementation for encoding data.

**webpack.config.js**

    module.exports = {
      module: {
        rules: [
          {
            test: /\.(png|html)$/i,
            use: [
              {
                loader: 'url-loader',
                options: {
                  // The `mimetype` and `encoding` arguments will be obtained from your options
                  // The `resourcePath` argument is path to file.
                  generator: (content, mimetype, encoding, resourcePath) => {
                    if (/\.html$/i.test(resourcePath)) {
                      return `data:${mimetype},${content.toString()}`;
                    }

                    return `data:${mimetype}${
                      encoding ? `;${encoding}` : ''
                    },${content.toString(encoding)}`;
                  },
                },
              },
            ],
          },
        ],
      },
    };

### `fallback`

Type: `String` Default: `'file-loader'`

Specifies an alternative loader to use when a target file’s size exceeds the limit set in the `limit` option.

**webpack.config.js**

    module.exports = {
      module: {
        rules: [
          {
            test: /\.(png|jpg|gif)$/i,
            use: [
              {
                loader: 'url-loader',
                options: {
                  fallback: require.resolve('responsive-loader'),
                },
              },
            ],
          },
        ],
      },
    };

The fallback loader will receive the same configuration options as url-loader.

For example, to set the quality option of a responsive-loader above use:

**webpack.config.js**

    module.exports = {
      module: {
        rules: [
          {
            test: /\.(png|jpg|gif)$/i,
            use: [
              {
                loader: 'url-loader',
                options: {
                  fallback: require.resolve('responsive-loader'),
                  quality: 85,
                },
              },
            ],
          },
        ],
      },
    };

### `esModule`

Type: `Boolean` Default: `true`

By default, `file-loader` generates JS modules that use the ES modules syntax. There are some cases in which using ES modules is beneficial, like in the case of [module concatenation](https://webpack.js.org/plugins/module-concatenation-plugin/) and [tree shaking](https://webpack.js.org/guides/tree-shaking/).

You can enable a CommonJS module syntax using:

**webpack.config.js**

    module.exports = {
      module: {
        rules: [
          {
            test: /\.css$/,
            use: [
              {
                loader: 'url-loader',
                options: {
                  esModule: false,
                },
              },
            ],
          },
        ],
      },
    };

Examples
--------

### SVG

SVG can be compressed into a more compact output, avoiding `base64`. You can read about it more [here](https://css-tricks.com/probably-dont-base64-svg/). You can do it using [mini-svg-data-uri](https://github.com/tigt/mini-svg-data-uri) package.

**webpack.config.js**

    const svgToMiniDataURI = require('mini-svg-data-uri');

    module.exports = {
      module: {
        rules: [
          {
            test: /\.svg$/i,
            use: [
              {
                loader: 'url-loader',
                options: {
                  generator: (content) => svgToMiniDataURI(content.toString()),
                },
              },
            ],
          },
        ],
      },
    };

Contributing
------------

Please take a moment to read our contributing guidelines if you haven’t yet done so.

[CONTRIBUTING](./.github/CONTRIBUTING.md)

License
-------

[MIT](./LICENSE)


