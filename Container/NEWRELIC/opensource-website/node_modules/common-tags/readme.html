<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>readme</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<h1 id="common-tags"><img src="media/logo.svg" alt="common-tags" /></h1>
<p>🔖 A set of <strong>well-tested</strong>, commonly used template literal tag functions for use in ES2015+.</p>
<p>🌟 Plus some extra goodies for easily making your own tags.</p>
<h2 id="example">Example</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb1-1" title="1"><span class="im">import</span> <span class="op">{</span> html <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;common-tags&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb1-2" title="2"></a>
<a class="sourceLine" id="cb1-3" title="3">html<span class="vs">`</span></a>
<a class="sourceLine" id="cb1-4" title="4"><span class="vs">  &lt;div id=&quot;user-card&quot;&gt;</span></a>
<a class="sourceLine" id="cb1-5" title="5"><span class="vs">    &lt;h2&gt;</span><span class="sc">${</span><span class="va">user</span>.<span class="at">name</span><span class="sc">}</span><span class="vs">&lt;/h2&gt;</span></a>
<a class="sourceLine" id="cb1-6" title="6"><span class="vs">  &lt;/div&gt;</span></a>
<a class="sourceLine" id="cb1-7" title="7"><span class="vs">`</span></a></code></pre></div>
<h2 id="project-status">Project Status</h2>
<table>
<thead>
<tr class="header">
<th>Info</th>
<th>Badges</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Version</td>
<td><a href="https://github.com/declandewet/common-tags/releases/latest"><img src="https://img.shields.io/github/release/declandewet/common-tags.svg?style=flat-square" alt="github release" /></a> <a href="http://npmjs.org/package/common-tags"><img src="https://img.shields.io/npm/v/common-tags.svg?style=flat-square" alt="npm version" /></a></td>
</tr>
<tr class="even">
<td>License</td>
<td><a href="https://github.com/declandewet/common-tags/blob/master/license.md"><img src="https://img.shields.io/npm/l/common-tags.svg?style=flat-square" alt="npm license" /></a></td>
</tr>
<tr class="odd">
<td>Popularity</td>
<td><a href="http://npm-stat.com/charts.html?package=common-tags"><img src="https://img.shields.io/npm/dm/common-tags.svg?style=flat-square" alt="npm downloads" /></a></td>
</tr>
<tr class="even">
<td>Testing</td>
<td><a href="https://ci.appveyor.com/project/declandewet/common-tags"><img src="https://ci.appveyor.com/api/projects/status/75eiommx0llt3sgd?svg=true" alt="Build status" /></a> <a href="https://travis-ci.org/declandewet/common-tags"><img src="https://img.shields.io/travis/declandewet/common-tags.svg?style=flat-square" alt="build status" /></a> <a href="https://codecov.io/gh/declandewet/common-tags?branch=master"><img src="https://img.shields.io/codecov/c/gh/declandewet/common-tags.svg?style=flat-square" alt="codecov.io" /></a></td>
</tr>
<tr class="odd">
<td>Quality</td>
<td><a href="https://www.bithound.io/github/declandewet/common-tags"><img src="https://www.bithound.io/github/declandewet/common-tags/badges/score.svg" alt="bitHound Overall Score" /></a> <a href="https://david-dm.org/declandewet/common-tags"><img src="https://img.shields.io/david/declandewet/common-tags.svg?style=flat-square" alt="dependency status" /></a> <a href="https://david-dm.org/declandewet/common-tags#info=devDependencies"><img src="https://img.shields.io/david/dev/declandewet/common-tags.svg?style=flat-square" alt="dev dependency status" /></a></td>
</tr>
<tr class="even">
<td>Style</td>
<td><a href="https://github.com/prettier/prettier"><img src="https://img.shields.io/badge/code_style-prettier-ff69b4.svg?style=flat-square" alt="code style: prettier" /></a></td>
</tr>
</tbody>
</table>
<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->
<h2 id="table-of-contents">Table of Contents</h2>
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#why-you-should-care">Why You Should Care</a></li>
<li><a href="#see-who-is-using-common-tags">See Who Is Using <code>common-tags</code></a></li>
<li><a href="#installation">Installation</a>
<ul>
<li><a href="#requirements">Requirements</a></li>
<li><a href="#instructions">Instructions</a></li>
<li><a href="#with-unpkg">With unpkg</a></li>
</ul></li>
<li><a href="#usage">Usage</a>
<ul>
<li><a href="#imports">Imports</a></li>
<li><a href="#available-tags">Available Tags</a>
<ul>
<li><a href="#html"><code>html</code></a>
<ul>
<li><a href="#aliases-source-codeblock">Aliases: <code>source</code>, <code>codeBlock</code></a></li>
</ul></li>
<li><a href="#safehtml"><code>safeHtml</code></a></li>
<li><a href="#oneline"><code>oneLine</code></a></li>
<li><a href="#onelinetrim"><code>oneLineTrim</code></a></li>
<li><a href="#stripindent"><code>stripIndent</code></a></li>
<li><a href="#stripindents"><code>stripIndents</code></a></li>
<li><a href="#inlinelists"><code>inlineLists</code></a></li>
<li><a href="#onelineinlinelists"><code>oneLineInlineLists</code></a></li>
<li><a href="#commalists"><code>commaLists</code></a></li>
<li><a href="#commalistsor"><code>commaListsOr</code></a></li>
<li><a href="#commalistsand"><code>commaListsAnd</code></a></li>
<li><a href="#onelinecommalists"><code>oneLineCommaLists</code></a></li>
<li><a href="#onelinecommalistsor"><code>oneLineCommaListsOr</code></a></li>
<li><a href="#onelinecommalistsand"><code>oneLineCommaListsAnd</code></a></li>
</ul></li>
</ul></li>
<li><a href="#advanced-usage">Advanced Usage</a>
<ul>
<li><a href="#tail-processing">Tail Processing</a></li>
<li><a href="#using-tags-on-regular-string-literals">Using Tags on Regular String Literals</a></li>
<li><a href="#type-definitions">Type Definitions</a></li>
<li><a href="#make-your-own-template-tag">Make Your Own Template Tag</a>
<ul>
<li><a href="#class-is-in-session-templatetag">Class is in Session: TemplateTag</a></li>
<li><a href="#the-anatomy-of-a-transformer">The Anatomy of a Transformer</a></li>
<li><a href="#plugin-transformers">Plugin Transformers</a></li>
<li><a href="#plugin-pipeline">Plugin Pipeline</a></li>
<li><a href="#returning-other-values-from-a-transformer">Returning Other Values from a Transformer</a></li>
<li><a href="#list-of-built-in-transformers">List of Built-in Transformers</a>
<ul>
<li><a href="#trimresulttransformerside"><code>trimResultTransformer([side])</code></a></li>
<li><a href="#stripindenttransformertypeinitial"><code>stripIndentTransformer([type='initial'])</code></a></li>
<li><a href="#replaceresulttransformerreplacewhat-replacewith"><code>replaceResultTransformer(replaceWhat, replaceWith)</code></a></li>
<li><a href="#replacesubstitutiontransformerreplacewhat-replacewith"><code>replaceSubstitutionTransformer(replaceWhat, replaceWith)</code></a></li>
<li><a href="#replacestringtransformerreplacewhat-replacewith"><code>replaceStringTransformer(replaceWhat, replaceWith)</code></a></li>
<li><a href="#inlinearraytransformeropts"><code>inlineArrayTransformer(opts)</code></a></li>
<li><a href="#splitstringtransformersplitby"><code>splitStringTransformer(splitBy)</code></a></li>
</ul></li>
</ul></li>
</ul></li>
<li><a href="#how-to-contribute">How to Contribute</a></li>
<li><a href="#license">License</a></li>
<li><a href="#other-es2015-template-tag-modules">Other ES2015 Template Tag Modules</a></li>
</ul>
<!-- END doctoc generated TOC please keep comment here to allow auto update -->
<h2 id="introduction">Introduction</h2>
<p><code>common-tags</code> initially started out as two template tags I’d always find myself writing - one for stripping indents, and one for trimming multiline strings down to a single line. In it’s prime, I was an avid user of <a href="http://coffeescript.org">CoffeeScript</a>, which had this behaviour by default as part of it’s block strings feature. I also started out programming in Ruby, which has a similar mechanism called Heredocs.</p>
<p>Over time, I found myself needing a few more template tags to cover edge cases - ones that supported including arrays, or ones that helped to render out tiny bits of HTML not large enough to deserve their own file or an entire template engine. So I packaged all of these up into this module.</p>
<p>As more features were proposed, and I found myself needing a way to override the default settings to cover even more edge cases, I realized that my initial implementation wouldn’t be easy to scale.</p>
<p>So I re-wrote this module on top of a core architecture that makes use of transformer plugins which can be composed, imported independently and re-used.</p>
<h2 id="why-you-should-care">Why You Should Care</h2>
<p>Tagged templates in ES2015 are a welcome feature. But, they have their downsides. One such downside is that they preserve all whitespace by default - which makes multiline strings in source code look terrible.</p>
<p>Source code is not just for computers to interpret. Humans have to read it too 😁. If you care at all about how neat your source code is, or come from a <a href="http://coffeescript.org/">CoffeeScript</a> background and miss the <a href="http://coffeescript.org/#strings">block string syntax</a>, then you will love <code>common-tags</code>, as it was initially intended to bring this feature “back” to JS since it’s <a href="https://github.com/declandewet/common-tags/commit/2595288d6c276439d98d1bcbbb0aa113f4f7cd86">initial commit</a>.</p>
<p><code>common-tags</code> also <a href="#plugin-transformers">exposes a means of composing pipelines of dynamic transformer plugins</a>. As someone with a little experience writing tagged templates, I can admit that it is often the case that one tag might need to do the same thing as another tag before doing any further processing; for example - a typical tag that renders out HTML could strip initial indents first, then worry about handling character escapes. Both steps could easily be useful as their own separate template tags, but there isn’t an immediately obvious way of composing the two together for maximum re-use. <code>common-tags</code> offers not <a href="#tail-processing">one</a>, but <a href="#plugin-pipeline">two</a> ways of doing this.</p>
<p>Furthermore, I try to keep this project as transparently stable and updated as frequently as I possibly can. As you may have already seen by the <a href="#project-status">project status table</a>, <code>common-tags</code> is linted, well tested, tests are well covered, tests pass on both Unix and Windows operating systems, the popularity bandwidth is easily referenced and dependency health is in plain sight 😄. <code>common-tags</code> is also already <a href="#see-who-is-using-common-tags">used in production on a number of proprietary sites and dependent projects</a>, and <a href="#how-to-contribute">contributions are always welcome</a>, as are <a href="issues">suggestions</a>.</p>
<h2 id="see-who-is-using-common-tags">See Who Is Using <code>common-tags</code></h2>
<ul>
<li><strong><a href="https://slack.com/">Slack</a></strong> (<a href="https://slack.com/libs/desktop">ref</a>)</li>
<li><strong><a href="https://discordapp.com">Discord</a></strong> (<a href="https://discordapp.com/acknowledgements">ref</a>)</li>
<li><strong><a href="https://circleci.com">CircleCI</a></strong> (<a href="https://circleci.com/docs/2.0/open-source/">ref</a>)</li>
<li><strong><a href="https://www.confluent.io/">Confluent</a></strong> (<a href="https://www.confluent.io/third_party_software/">ref</a>)</li>
<li><strong><a href="https://tessel.io/">Tessel</a></strong> (<a href="https://github.com/tessel/t2-cli/blob/575ddb23f432d10f86b76f5cdca866d1146dedf5/package.json#L56">ref</a>)</li>
<li><strong><a href="https://www.emberjs.com/">Ember.js</a></strong> (<a href="https://github.com/emberjs/ember.js/blob/cacefee49ea4be2621a0ced3e4ceb0010d6cd841/package.json#L93">ref</a>)</li>
<li><strong><a href="https://angularjs.org/">Angular</a></strong> (<a href="https://github.com/angular/angular-cli/blob/90e2e805aae6e0bd2e00e52063221736a8d9cb0c/package.json#L50">ref</a>)</li>
<li><strong><a href="https://prettier.io/">Prettier</a></strong> (<a href="https://github.com/prettier/prettier-eslint/blob/49b762b57b7e7af3b06bd933050c614a91b6742d/package.json#L18">ref</a>)</li>
<li><strong><a href="https://www.apollographql.com">Apollo</a></strong> (<a href="https://github.com/apollographql/apollo-codegen/blob/b9b9a2afd851fa3cba786b26684b26378b1a6f53/package.json#L48">ref</a>)</li>
<li><strong><a href="https://developers.google.com/web/tools/workbox/">Workbox</a></strong> (<a href="https://github.com/GoogleChrome/workbox/blob/d391a0cb51b3e89121c5274fb15f05988233b57e/package.json#L64">ref</a>)</li>
<li><strong><a href="https://www.gatsbyjs.org/">Gatsby</a></strong> (<a href="https://github.com/gatsbyjs/gatsby/blob/3af191c9961b6da1cc04e9cb0a03787af25878db/packages/gatsby-cli/package.json#L16">ref</a>)</li>
<li><strong><a href="https://storybook.js.org/">Storybook</a></strong> (<a href="https://github.com/storybooks/storybook/blob/c275e5c508714bd1a49342e51ddf00bbdb54d277/app/react/package.json#L46">ref</a>)</li>
<li><strong><a href="https://www.cypress.io/">Cypress</a></strong> (<a href="https://github.com/cypress-io/cypress/blob/5d761630f233abb30b9b2e3fede9a4c4887cf880/cli/package.json#L44">ref</a>)</li>
<li><strong><a href="http://stylelint.io/">stylelint</a></strong> (<a href="https://github.com/stylelint/stylelint/blob/5dc5db5599a00cabc875cf99c56d60f93fbbbd2d/package.json#L82">ref</a>)</li>
<li><strong><a href="https://pnpm.js.org/">pnpm</a></strong> (<a href="https://github.com/pnpm/pnpm/blob/36be3d3f0c75992a1f3ff14b60c99115547d0fcc/package.json#L36">ref</a>)</li>
<li><strong><a href="http://cssinjs.org/">jss</a></strong> (<a href="https://github.com/cssinjs/jss/blob/7b9c1222893495c585b4b61d7ca9af05077cefec/package.json#L44">ref</a>)</li>
</ul>
<h2 id="installation">Installation</h2>
<h3 id="requirements">Requirements</h3>
<p>The official recommendation for running <code>common-tags</code> is as follows:</p>
<ul>
<li><a href="https://nodejs.org/en/download/">Node.js</a> v5.0.0 or higher</li>
<li>In order to use <code>common-tags</code>, your environment will also need to support ES2015 tagged templates (<a href="http://babeljs.io">pssst… check Babel out</a>)</li>
<li>You might also want to <a href="https://github.com/zloirock/core-js">polyfill some features</a> if you plan on supporting older browsers: <code>Array.prototype.includes</code></li>
</ul>
<p>It might work with below versions of Node, but this is not a guarantee.</p>
<h3 id="instructions">Instructions</h3>
<p><code>common-tags</code> is a <a href="https://nodejs.org/">Node</a> module. So, as long as you have Node.js and NPM installed, installing <code>common-tags</code> is as simple as running this in a terminal at the root of your project:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb2-1" title="1"><span class="ex">npm</span> install common-tags</a></code></pre></div>
<h3 id="with-unpkg">With unpkg</h3>
<p><code>common-tags</code> is also available at <a href="https://unpkg.com/common-tags">unpkg</a>. Just put this code in your HTML:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb3-1" title="1"><span class="kw">&lt;script</span><span class="ot"> src=</span><span class="st">&quot;https://unpkg.com/common-tags&quot;</span><span class="kw">&gt;&lt;/script&gt;</span></a></code></pre></div>
<p>This will make the library available under a global variable <code>commonTags</code>.</p>
<h2 id="usage">Usage</h2>
<h3 id="imports">Imports</h3>
<p>Like all modules, <code>common-tags</code> begins with an <code>import</code>. In fact, <code>common-tags</code> supports two styles of import:</p>
<p><strong>Named imports:</strong></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1"><span class="im">import</span> <span class="op">{</span>stripIndent<span class="op">}</span> <span class="im">from</span> <span class="st">&#39;common-tags&#39;</span></a></code></pre></div>
<p><strong>Direct module imports:</strong></p>
<p><em>(Useful if your bundler doesn’t support <a href="https://medium.com/@roman01la/dead-code-elimination-and-tree-shaking-in-javascript-build-systems-fb8512c86edf#.p30lbjm94">tree shaking</a> but you still want to only include modules you need).</em></p>
<div class="sourceCode" id="cb5"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb5-1" title="1"><span class="im">import</span> stripIndent <span class="im">from</span> <span class="st">&#39;common-tags/lib/stripIndent&#39;</span></a></code></pre></div>
<h3 id="available-tags">Available Tags</h3>
<p><code>common-tags</code> exports a bunch of wonderful pre-cooked template tags for your eager consumption. They are as follows:</p>
<h4 id="html"><code>html</code></h4>
<h5 id="aliases-source-codeblock">Aliases: <code>source</code>, <code>codeBlock</code></h5>
<p>You’ll often find that you might want to include an array in a template. Typically, doing something like <code>${array.join(', ')}</code> would work - but what if you’re printing a list of items in an HTML template and want to maintain the indentation? You’d have to count the spaces manually and include them in the <code>.join()</code> call - which is a bit <em>ugly</em> for my taste. This tag properly indents arrays, as well as newline characters in string substitutions, by converting them to an array split by newline and re-using the same array inclusion logic:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb6-1" title="1"><span class="im">import</span> <span class="op">{</span>html<span class="op">}</span> <span class="im">from</span> <span class="st">&#39;common-tags&#39;</span></a>
<a class="sourceLine" id="cb6-2" title="2"><span class="kw">let</span> fruits <span class="op">=</span> [<span class="st">&#39;apple&#39;</span><span class="op">,</span> <span class="st">&#39;orange&#39;</span><span class="op">,</span> <span class="st">&#39;watermelon&#39;</span>]</a>
<a class="sourceLine" id="cb6-3" title="3">html<span class="vs">`</span></a>
<a class="sourceLine" id="cb6-4" title="4"><span class="vs">  &lt;div class=&quot;list&quot;&gt;</span></a>
<a class="sourceLine" id="cb6-5" title="5"><span class="vs">    &lt;ul&gt;</span></a>
<a class="sourceLine" id="cb6-6" title="6"><span class="vs">      </span><span class="sc">${</span><span class="va">fruits</span>.<span class="at">map</span>(fruit <span class="kw">=&gt;</span> <span class="vs">`&lt;li&gt;</span><span class="sc">${</span>fruit<span class="sc">}</span><span class="vs">&lt;/li&gt;`</span>)<span class="sc">}</span></a>
<a class="sourceLine" id="cb6-7" title="7"><span class="vs">      </span><span class="sc">${</span><span class="st">&#39;&lt;li&gt;kiwi&lt;/li&gt;</span><span class="sc">\n</span><span class="st">&lt;li&gt;guava&lt;/li&gt;&#39;</span><span class="sc">}</span></a>
<a class="sourceLine" id="cb6-8" title="8"><span class="vs">    &lt;/ul&gt;</span></a>
<a class="sourceLine" id="cb6-9" title="9"><span class="vs">  &lt;/div&gt;</span></a>
<a class="sourceLine" id="cb6-10" title="10"><span class="vs">`</span></a></code></pre></div>
<p>Outputs:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb7-1" title="1"><span class="kw">&lt;div</span><span class="ot"> class=</span><span class="st">&quot;list&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb7-2" title="2">  <span class="kw">&lt;ul&gt;</span></a>
<a class="sourceLine" id="cb7-3" title="3">    <span class="kw">&lt;li&gt;</span>apple<span class="kw">&lt;/li&gt;</span></a>
<a class="sourceLine" id="cb7-4" title="4">    <span class="kw">&lt;li&gt;</span>orange<span class="kw">&lt;/li&gt;</span></a>
<a class="sourceLine" id="cb7-5" title="5">    <span class="kw">&lt;li&gt;</span>watermelon<span class="kw">&lt;/li&gt;</span></a>
<a class="sourceLine" id="cb7-6" title="6">    <span class="kw">&lt;li&gt;</span>kiwi<span class="kw">&lt;/li&gt;</span></a>
<a class="sourceLine" id="cb7-7" title="7">    <span class="kw">&lt;li&gt;</span>guava<span class="kw">&lt;/li&gt;</span></a>
<a class="sourceLine" id="cb7-8" title="8">  <span class="kw">&lt;/ul&gt;</span></a>
<a class="sourceLine" id="cb7-9" title="9"><span class="kw">&lt;/div&gt;</span></a></code></pre></div>
<h4 id="safehtml"><code>safeHtml</code></h4>
<p>A tag very similar to <code>html</code> but it does safe HTML escaping for strings coming from substitutions. When combined with regular <code>html</code> tag, you can do basic HTML templating that is safe from XSS (Cross-Site Scripting) attacks.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb8-1" title="1"><span class="im">import</span> <span class="op">{</span>html<span class="op">,</span> safeHtml<span class="op">}</span> <span class="im">from</span> <span class="st">&#39;common-tags&#39;</span></a>
<a class="sourceLine" id="cb8-2" title="2"><span class="kw">let</span> userMessages <span class="op">=</span> [<span class="st">&#39;hi&#39;</span><span class="op">,</span> <span class="st">&#39;what are you up to?&#39;</span><span class="op">,</span> <span class="st">&#39;&lt;script&gt;alert(&quot;something evil&quot;)&lt;/script&gt;&#39;</span>]</a>
<a class="sourceLine" id="cb8-3" title="3">html<span class="vs">`</span></a>
<a class="sourceLine" id="cb8-4" title="4"><span class="vs">  &lt;div class=&quot;chat-list&quot;&gt;</span></a>
<a class="sourceLine" id="cb8-5" title="5"><span class="vs">    &lt;ul&gt;</span></a>
<a class="sourceLine" id="cb8-6" title="6"><span class="vs">      </span><span class="sc">${</span><span class="va">userMessages</span>.<span class="at">map</span>(message <span class="kw">=&gt;</span> safeHtml<span class="vs">`&lt;li&gt;</span><span class="sc">${</span>message<span class="sc">}</span><span class="vs">&lt;/li&gt;`</span>)<span class="sc">}</span></a>
<a class="sourceLine" id="cb8-7" title="7"><span class="vs">    &lt;/ul&gt;</span></a>
<a class="sourceLine" id="cb8-8" title="8"><span class="vs">  &lt;/div&gt;</span></a>
<a class="sourceLine" id="cb8-9" title="9"><span class="vs">`</span></a></code></pre></div>
<p>Outputs:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb9-1" title="1"><span class="kw">&lt;div</span><span class="ot"> class=</span><span class="st">&quot;chat-list&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb9-2" title="2">  <span class="kw">&lt;ul&gt;</span></a>
<a class="sourceLine" id="cb9-3" title="3">    <span class="kw">&lt;li&gt;</span>hi<span class="kw">&lt;/li&gt;</span></a>
<a class="sourceLine" id="cb9-4" title="4">    <span class="kw">&lt;li&gt;</span>what are you up to?<span class="kw">&lt;/li&gt;</span></a>
<a class="sourceLine" id="cb9-5" title="5">    <span class="kw">&lt;li&gt;</span><span class="dv">&amp;lt;</span>script<span class="dv">&amp;gt;</span>alert(<span class="dv">&amp;quot;</span>something evil<span class="dv">&amp;quot;</span>)<span class="dv">&amp;lt;</span>/script<span class="dv">&amp;gt;</span><span class="kw">&lt;/li&gt;</span></a>
<a class="sourceLine" id="cb9-6" title="6">  <span class="kw">&lt;/ul&gt;</span></a>
<a class="sourceLine" id="cb9-7" title="7"><span class="kw">&lt;/div&gt;</span></a></code></pre></div>
<h4 id="oneline"><code>oneLine</code></h4>
<p>Allows you to keep your single-line strings under 80 characters without resorting to crazy string concatenation.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb10-1" title="1"><span class="im">import</span> <span class="op">{</span>oneLine<span class="op">}</span> <span class="im">from</span> <span class="st">&#39;common-tags&#39;</span></a>
<a class="sourceLine" id="cb10-2" title="2"></a>
<a class="sourceLine" id="cb10-3" title="3">oneLine<span class="vs">`</span></a>
<a class="sourceLine" id="cb10-4" title="4"><span class="vs">  foo</span></a>
<a class="sourceLine" id="cb10-5" title="5"><span class="vs">  bar</span></a>
<a class="sourceLine" id="cb10-6" title="6"><span class="vs">  baz</span></a>
<a class="sourceLine" id="cb10-7" title="7"><span class="vs">`</span></a>
<a class="sourceLine" id="cb10-8" title="8"><span class="co">// &quot;foo bar baz&quot;</span></a></code></pre></div>
<h4 id="onelinetrim"><code>oneLineTrim</code></h4>
<p>Allows you to keep your single-line strings under 80 characters while trimming the new lines:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb11-1" title="1"><span class="im">import</span> <span class="op">{</span>oneLineTrim<span class="op">}</span> <span class="im">from</span> <span class="st">&#39;common-tags&#39;</span></a>
<a class="sourceLine" id="cb11-2" title="2"></a>
<a class="sourceLine" id="cb11-3" title="3">oneLineTrim<span class="vs">`</span></a>
<a class="sourceLine" id="cb11-4" title="4"><span class="vs">  https://news.com/article</span></a>
<a class="sourceLine" id="cb11-5" title="5"><span class="vs">  ?utm_source=designernews.co</span></a>
<a class="sourceLine" id="cb11-6" title="6"><span class="vs">`</span></a>
<a class="sourceLine" id="cb11-7" title="7"><span class="co">// https://news.com/article?utm_source=designernews.co</span></a></code></pre></div>
<h4 id="stripindent"><code>stripIndent</code></h4>
<p>If you want to strip the initial indentation from the beginning of each line in a multiline string:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb12-1" title="1"><span class="im">import</span> <span class="op">{</span>stripIndent<span class="op">}</span> <span class="im">from</span> <span class="st">&#39;common-tags&#39;</span></a>
<a class="sourceLine" id="cb12-2" title="2"></a>
<a class="sourceLine" id="cb12-3" title="3">stripIndent<span class="vs">`</span></a>
<a class="sourceLine" id="cb12-4" title="4"><span class="vs">  This is a multi-line string.</span></a>
<a class="sourceLine" id="cb12-5" title="5"><span class="vs">  You&#39;ll </span><span class="sc">${</span>verb<span class="sc">}</span><span class="vs"> that it is indented.</span></a>
<a class="sourceLine" id="cb12-6" title="6"><span class="vs">  We don&#39;t want to output this indentation.</span></a>
<a class="sourceLine" id="cb12-7" title="7"><span class="vs">    But we do want to keep this line indented.</span></a>
<a class="sourceLine" id="cb12-8" title="8"><span class="vs">`</span></a>
<a class="sourceLine" id="cb12-9" title="9"><span class="co">// This is a multi-line string.</span></a>
<a class="sourceLine" id="cb12-10" title="10"><span class="co">// You&#39;ll notice that it is indented.</span></a>
<a class="sourceLine" id="cb12-11" title="11"><span class="co">// We don&#39;t want to output this indentation.</span></a>
<a class="sourceLine" id="cb12-12" title="12"><span class="co">//   But we do want to keep this line indented.</span></a></code></pre></div>
<p>Important note: this tag will not indent multiline strings coming from the substitutions. If you want that behavior, use the <code>html</code> tag (aliases: <code>source</code>, <code>codeBlock</code>).</p>
<h4 id="stripindents"><code>stripIndents</code></h4>
<p>If you want to strip <em>all</em> of the indentation from the beginning of each line in a multiline string:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb13-1" title="1"><span class="im">import</span> <span class="op">{</span>stripIndents<span class="op">}</span> <span class="im">from</span> <span class="st">&#39;common-tags&#39;</span></a>
<a class="sourceLine" id="cb13-2" title="2"></a>
<a class="sourceLine" id="cb13-3" title="3">stripIndents<span class="vs">`</span></a>
<a class="sourceLine" id="cb13-4" title="4"><span class="vs">  This is a multi-line string.</span></a>
<a class="sourceLine" id="cb13-5" title="5"><span class="vs">  You&#39;ll </span><span class="sc">${</span>verb<span class="sc">}</span><span class="vs"> that it is indented.</span></a>
<a class="sourceLine" id="cb13-6" title="6"><span class="vs">  We don&#39;t want to output this indentation.</span></a>
<a class="sourceLine" id="cb13-7" title="7"><span class="vs">    We don&#39;t want to keep this line indented either.</span></a>
<a class="sourceLine" id="cb13-8" title="8"><span class="vs">`</span></a>
<a class="sourceLine" id="cb13-9" title="9"><span class="co">// This is a multi-line string.</span></a>
<a class="sourceLine" id="cb13-10" title="10"><span class="co">// You&#39;ll notice that it is indented.</span></a>
<a class="sourceLine" id="cb13-11" title="11"><span class="co">// We don&#39;t want to output this indentation.</span></a>
<a class="sourceLine" id="cb13-12" title="12"><span class="co">// We don&#39;t want to keep this line indented either.</span></a></code></pre></div>
<h4 id="inlinelists"><code>inlineLists</code></h4>
<p>Allows you to inline an array substitution as a list:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb14-1" title="1"><span class="im">import</span> <span class="op">{</span>inlineLists<span class="op">}</span> <span class="im">from</span> <span class="st">&#39;common-tags&#39;</span></a>
<a class="sourceLine" id="cb14-2" title="2"></a>
<a class="sourceLine" id="cb14-3" title="3">inlineLists<span class="vs">`</span></a>
<a class="sourceLine" id="cb14-4" title="4"><span class="vs">  I like </span><span class="sc">${</span>[<span class="st">&#39;apples&#39;</span><span class="op">,</span> <span class="st">&#39;bananas&#39;</span><span class="op">,</span> <span class="st">&#39;watermelons&#39;</span>]<span class="sc">}</span></a>
<a class="sourceLine" id="cb14-5" title="5"><span class="vs">  They&#39;re good!</span></a>
<a class="sourceLine" id="cb14-6" title="6"><span class="vs">`</span></a>
<a class="sourceLine" id="cb14-7" title="7"><span class="co">// I like apples bananas watermelons</span></a>
<a class="sourceLine" id="cb14-8" title="8"><span class="co">// They&#39;re good!</span></a></code></pre></div>
<h4 id="onelineinlinelists"><code>oneLineInlineLists</code></h4>
<p>Allows you to inline an array substitution as a list, rendered out on a single line:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb15-1" title="1"><span class="im">import</span> <span class="op">{</span>oneLineInlineLists<span class="op">}</span> <span class="im">from</span> <span class="st">&#39;common-tags&#39;</span></a>
<a class="sourceLine" id="cb15-2" title="2"></a>
<a class="sourceLine" id="cb15-3" title="3">oneLineInlineLists<span class="vs">`</span></a>
<a class="sourceLine" id="cb15-4" title="4"><span class="vs">  I like </span><span class="sc">${</span>[<span class="st">&#39;apples&#39;</span><span class="op">,</span> <span class="st">&#39;bananas&#39;</span><span class="op">,</span> <span class="st">&#39;watermelons&#39;</span>]<span class="sc">}</span></a>
<a class="sourceLine" id="cb15-5" title="5"><span class="vs">  They&#39;re good!</span></a>
<a class="sourceLine" id="cb15-6" title="6"><span class="vs">`</span></a>
<a class="sourceLine" id="cb15-7" title="7"><span class="co">// I like apples bananas watermelons They&#39;re good!</span></a></code></pre></div>
<h4 id="commalists"><code>commaLists</code></h4>
<p>Allows you to inline an array substitution as a comma-separated list:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb16-1" title="1"><span class="im">import</span> <span class="op">{</span>commaLists<span class="op">}</span> <span class="im">from</span> <span class="st">&#39;common-tags&#39;</span></a>
<a class="sourceLine" id="cb16-2" title="2"></a>
<a class="sourceLine" id="cb16-3" title="3">commaLists<span class="vs">`</span></a>
<a class="sourceLine" id="cb16-4" title="4"><span class="vs">  I like </span><span class="sc">${</span>[<span class="st">&#39;apples&#39;</span><span class="op">,</span> <span class="st">&#39;bananas&#39;</span><span class="op">,</span> <span class="st">&#39;watermelons&#39;</span>]<span class="sc">}</span></a>
<a class="sourceLine" id="cb16-5" title="5"><span class="vs">  They&#39;re good!</span></a>
<a class="sourceLine" id="cb16-6" title="6"><span class="vs">`</span></a>
<a class="sourceLine" id="cb16-7" title="7"><span class="co">// I like apples, bananas, watermelons</span></a>
<a class="sourceLine" id="cb16-8" title="8"><span class="co">// They&#39;re good!</span></a></code></pre></div>
<h4 id="commalistsor"><code>commaListsOr</code></h4>
<p>Allows you to inline an array substitution as a comma-separated list, the last of which is preceded by the word “or”:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb17-1" title="1"><span class="im">import</span> <span class="op">{</span>commaListsOr<span class="op">}</span> <span class="im">from</span> <span class="st">&#39;common-tags&#39;</span></a>
<a class="sourceLine" id="cb17-2" title="2"></a>
<a class="sourceLine" id="cb17-3" title="3">commaListsOr<span class="vs">`</span></a>
<a class="sourceLine" id="cb17-4" title="4"><span class="vs">  I like </span><span class="sc">${</span>[<span class="st">&#39;apples&#39;</span><span class="op">,</span> <span class="st">&#39;bananas&#39;</span><span class="op">,</span> <span class="st">&#39;watermelons&#39;</span>]<span class="sc">}</span></a>
<a class="sourceLine" id="cb17-5" title="5"><span class="vs">  They&#39;re good!</span></a>
<a class="sourceLine" id="cb17-6" title="6"><span class="vs">`</span></a>
<a class="sourceLine" id="cb17-7" title="7"><span class="co">// I like apples, bananas or watermelons</span></a>
<a class="sourceLine" id="cb17-8" title="8"><span class="co">// They&#39;re good!</span></a></code></pre></div>
<h4 id="commalistsand"><code>commaListsAnd</code></h4>
<p>Allows you to inline an array substitution as a comma-separated list, the last of which is preceded by the word “and”:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb18-1" title="1"><span class="im">import</span> <span class="op">{</span>commaListsAnd<span class="op">}</span> <span class="im">from</span> <span class="st">&#39;common-tags&#39;</span></a>
<a class="sourceLine" id="cb18-2" title="2"></a>
<a class="sourceLine" id="cb18-3" title="3">commaListsAnd<span class="vs">`</span></a>
<a class="sourceLine" id="cb18-4" title="4"><span class="vs">  I like </span><span class="sc">${</span>[<span class="st">&#39;apples&#39;</span><span class="op">,</span> <span class="st">&#39;bananas&#39;</span><span class="op">,</span> <span class="st">&#39;watermelons&#39;</span>]<span class="sc">}</span></a>
<a class="sourceLine" id="cb18-5" title="5"><span class="vs">  They&#39;re good!</span></a>
<a class="sourceLine" id="cb18-6" title="6"><span class="vs">`</span></a>
<a class="sourceLine" id="cb18-7" title="7"><span class="co">// I like apples, bananas and watermelons</span></a>
<a class="sourceLine" id="cb18-8" title="8"><span class="co">// They&#39;re good!</span></a></code></pre></div>
<h4 id="onelinecommalists"><code>oneLineCommaLists</code></h4>
<p>Allows you to inline an array substitution as a comma-separated list, and is rendered out on to a single line:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb19-1" title="1"><span class="im">import</span> <span class="op">{</span>oneLineCommaLists<span class="op">}</span> <span class="im">from</span> <span class="st">&#39;common-tags&#39;</span></a>
<a class="sourceLine" id="cb19-2" title="2"></a>
<a class="sourceLine" id="cb19-3" title="3">oneLineCommaLists<span class="vs">`</span></a>
<a class="sourceLine" id="cb19-4" title="4"><span class="vs">  I like </span><span class="sc">${</span>[<span class="st">&#39;apples&#39;</span><span class="op">,</span> <span class="st">&#39;bananas&#39;</span><span class="op">,</span> <span class="st">&#39;watermelons&#39;</span>]<span class="sc">}</span></a>
<a class="sourceLine" id="cb19-5" title="5"><span class="vs">  They&#39;re good!</span></a>
<a class="sourceLine" id="cb19-6" title="6"><span class="vs">`</span></a>
<a class="sourceLine" id="cb19-7" title="7"><span class="co">// I like apples, bananas or watermelons They&#39;re good!</span></a></code></pre></div>
<h4 id="onelinecommalistsor"><code>oneLineCommaListsOr</code></h4>
<p>Allows you to inline an array substitution as a comma-separated list, the last of which is preceded by the word “or”, and is rendered out on to a single line:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb20-1" title="1"><span class="im">import</span> <span class="op">{</span>oneLineCommaListsOr<span class="op">}</span> <span class="im">from</span> <span class="st">&#39;common-tags&#39;</span></a>
<a class="sourceLine" id="cb20-2" title="2"></a>
<a class="sourceLine" id="cb20-3" title="3">oneLineCommaListsOr<span class="vs">`</span></a>
<a class="sourceLine" id="cb20-4" title="4"><span class="vs">  I like </span><span class="sc">${</span>[<span class="st">&#39;apples&#39;</span><span class="op">,</span> <span class="st">&#39;bananas&#39;</span><span class="op">,</span> <span class="st">&#39;watermelons&#39;</span>]<span class="sc">}</span></a>
<a class="sourceLine" id="cb20-5" title="5"><span class="vs">  They&#39;re good!</span></a>
<a class="sourceLine" id="cb20-6" title="6"><span class="vs">`</span></a>
<a class="sourceLine" id="cb20-7" title="7"><span class="co">// I like apples, bananas or watermelons They&#39;re good!</span></a></code></pre></div>
<h4 id="onelinecommalistsand"><code>oneLineCommaListsAnd</code></h4>
<p>Allows you to inline an array substitution as a comma-separated list, the last of which is preceded by the word “and”, and is rendered out on to a single line:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb21-1" title="1"><span class="im">import</span> <span class="op">{</span>oneLineCommaListsAnd<span class="op">}</span> <span class="im">from</span> <span class="st">&#39;common-tags&#39;</span></a>
<a class="sourceLine" id="cb21-2" title="2"></a>
<a class="sourceLine" id="cb21-3" title="3">oneLineCommaListsAnd<span class="vs">`</span></a>
<a class="sourceLine" id="cb21-4" title="4"><span class="vs">  I like </span><span class="sc">${</span>[<span class="st">&#39;apples&#39;</span><span class="op">,</span> <span class="st">&#39;bananas&#39;</span><span class="op">,</span> <span class="st">&#39;watermelons&#39;</span>]<span class="sc">}</span></a>
<a class="sourceLine" id="cb21-5" title="5"><span class="vs">  They&#39;re good!</span></a>
<a class="sourceLine" id="cb21-6" title="6"><span class="vs">`</span></a>
<a class="sourceLine" id="cb21-7" title="7"><span class="co">// I like apples, bananas and watermelons They&#39;re good!</span></a></code></pre></div>
<h2 id="advanced-usage">Advanced Usage</h2>
<h3 id="tail-processing">Tail Processing</h3>
<p>It’s possible to pass the output of a tagged template to another template tag in pure ES2015+:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb22-1" title="1"><span class="im">import</span> <span class="op">{</span>oneLine<span class="op">}</span> <span class="im">from</span> <span class="st">&#39;common-tags&#39;</span></a>
<a class="sourceLine" id="cb22-2" title="2"></a>
<a class="sourceLine" id="cb22-3" title="3">oneLine<span class="vs">`</span></a>
<a class="sourceLine" id="cb22-4" title="4"><span class="vs">  </span><span class="sc">${</span><span class="vs">String.raw`</span></a>
<a class="sourceLine" id="cb22-5" title="5"><span class="vs">    foo</span></a>
<a class="sourceLine" id="cb22-6" title="6"><span class="vs">    bar\nbaz</span></a>
<a class="sourceLine" id="cb22-7" title="7"><span class="vs">  `</span><span class="sc">}</span></a>
<a class="sourceLine" id="cb22-8" title="8"><span class="vs">`</span></a>
<a class="sourceLine" id="cb22-9" title="9"><span class="co">// &quot;foo bar\nbaz&quot;</span></a></code></pre></div>
<p>We can make this neater. Every tag <code>common-tags</code> exports can delay execution if it receives a function as it’s first argument. This function is assumed to be a template tag, and is called via an intermediary tagging process before the result is passed back to our tag. Use it like so (this code is equivalent to the previous code block):</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb23-1" title="1"><span class="im">import</span> <span class="op">{</span>oneLine<span class="op">}</span> <span class="im">from</span> <span class="st">&#39;common-tags&#39;</span></a>
<a class="sourceLine" id="cb23-2" title="2"></a>
<a class="sourceLine" id="cb23-3" title="3"><span class="at">oneLine</span>(<span class="va">String</span>.<span class="at">raw</span>)<span class="vs">`</span></a>
<a class="sourceLine" id="cb23-4" title="4"><span class="vs">  foo</span></a>
<a class="sourceLine" id="cb23-5" title="5"><span class="vs">  bar</span><span class="sc">\n</span><span class="vs">baz</span></a>
<a class="sourceLine" id="cb23-6" title="6"><span class="vs">`</span></a>
<a class="sourceLine" id="cb23-7" title="7"><span class="co">// &quot;foo bar\nbaz&quot;</span></a></code></pre></div>
<h3 id="using-tags-on-regular-string-literals">Using Tags on Regular String Literals</h3>
<p>Sometimes you might want to use a tag on a normal string (e.g. for stripping the indentation). For that purpose just call a tag as a function with the passed string:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb24-1" title="1"><span class="im">import</span> <span class="op">{</span>stripIndent<span class="op">}</span> <span class="im">from</span> <span class="st">&#39;common-tags&#39;</span></a>
<a class="sourceLine" id="cb24-2" title="2"></a>
<a class="sourceLine" id="cb24-3" title="3"><span class="at">stripIndent</span>(<span class="st">&quot;  foo</span><span class="sc">\n</span><span class="st">    bar&quot;</span>)</a>
<a class="sourceLine" id="cb24-4" title="4"><span class="co">// &quot;foo\n  bar&quot;</span></a></code></pre></div>
<h3 id="type-definitions">Type Definitions</h3>
<p>There are third-party type definitions for <code>common-tags</code> on <a href="https://www.npmjs.com/package/@types/common-tags">npm</a>. Just install them like so:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb25-1" title="1"><span class="ex">npm</span> install @types/common-tags</a></code></pre></div>
<p>Please note that these type definitions are not officially maintained by the authors of <code>common-tags</code> - they are maintained by the TypeScript community.</p>
<h3 id="make-your-own-template-tag">Make Your Own Template Tag</h3>
<p><code>common-tags</code> exposes an interface that allows you to painlessly create your own template tags.</p>
<h4 id="class-is-in-session-templatetag">Class is in Session: TemplateTag</h4>
<p><code>common-tags</code> exports a <code>TemplateTag</code> class. This class is the foundation of <code>common-tags</code>. The concept of the class works on the premise that transformations occur on a template either when the template is finished being processed (<code>onEndResult</code>), or when the tag encounters a string (<code>onString</code>) or a substitution (<code>onSubstitution</code>). Any tag produced by this class supports <a href="#tail-processing">tail processing</a>.</p>
<p>The easiest tag to create is a tag that does nothing:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb26-1" title="1"><span class="im">import</span> <span class="op">{</span>TemplateTag<span class="op">}</span> <span class="im">from</span> <span class="st">&#39;common-tags&#39;</span></a>
<a class="sourceLine" id="cb26-2" title="2"></a>
<a class="sourceLine" id="cb26-3" title="3"><span class="kw">const</span> doNothing <span class="op">=</span> <span class="kw">new</span> <span class="at">TemplateTag</span>()</a>
<a class="sourceLine" id="cb26-4" title="4"></a>
<a class="sourceLine" id="cb26-5" title="5">doNothing<span class="vs">`foo bar`</span></a>
<a class="sourceLine" id="cb26-6" title="6"><span class="co">// &#39;foo bar&#39;</span></a></code></pre></div>
<h4 id="the-anatomy-of-a-transformer">The Anatomy of a Transformer</h4>
<p><code>TemplateTag</code> receives either an array or argument list of <code>transformers</code>. A <code>transformer</code> is just a plain object with three optional methods - <code>onString</code>, <code>onSubstitution</code> and <code>onEndResult</code> - it looks like this:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb27-1" title="1"><span class="op">{</span></a>
<a class="sourceLine" id="cb27-2" title="2">  <span class="at">onString</span> (str) <span class="op">{</span></a>
<a class="sourceLine" id="cb27-3" title="3">    <span class="co">// optional. Called when the tag encounters a string.</span></a>
<a class="sourceLine" id="cb27-4" title="4">    <span class="co">// (a string is whatever&#39;s not inside &quot;${}&quot; in your template literal)</span></a>
<a class="sourceLine" id="cb27-5" title="5">    <span class="co">// `str` is the value of the current string</span></a>
<a class="sourceLine" id="cb27-6" title="6">  <span class="op">},</span></a>
<a class="sourceLine" id="cb27-7" title="7">  <span class="at">onSubstitution</span> (substitution<span class="op">,</span> resultSoFar) <span class="op">{</span></a>
<a class="sourceLine" id="cb27-8" title="8">    <span class="co">// optional. Called when the tag encounters a substitution.</span></a>
<a class="sourceLine" id="cb27-9" title="9">    <span class="co">// (a substitution is whatever&#39;s inside &quot;${}&quot; in your template literal)</span></a>
<a class="sourceLine" id="cb27-10" title="10">    <span class="co">// `substitution` is the value of the current substitution</span></a>
<a class="sourceLine" id="cb27-11" title="11">    <span class="co">// `resultSoFar` is the end result up to the point of this substitution</span></a>
<a class="sourceLine" id="cb27-12" title="12">  <span class="op">},</span></a>
<a class="sourceLine" id="cb27-13" title="13">  <span class="at">onEndResult</span> (endResult) <span class="op">{</span></a>
<a class="sourceLine" id="cb27-14" title="14">    <span class="co">// optional. Called when all substitutions have been parsed</span></a>
<a class="sourceLine" id="cb27-15" title="15">    <span class="co">// `endResult` is the final value.</span></a>
<a class="sourceLine" id="cb27-16" title="16">  <span class="op">}</span></a>
<a class="sourceLine" id="cb27-17" title="17"><span class="op">}</span></a></code></pre></div>
<h4 id="plugin-transformers">Plugin Transformers</h4>
<p>You can wrap a transformer in a function that receives arguments in order to create a dynamic plugin:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb28-1" title="1"><span class="kw">const</span> substitutionReplacer <span class="op">=</span> (oldValue<span class="op">,</span> newValue) <span class="kw">=&gt;</span> (<span class="op">{</span></a>
<a class="sourceLine" id="cb28-2" title="2">  <span class="at">onSubstitution</span>(substitution<span class="op">,</span> resultSoFar) <span class="op">{</span></a>
<a class="sourceLine" id="cb28-3" title="3">    <span class="cf">if</span> (substitution <span class="op">===</span> oldValue) <span class="op">{</span></a>
<a class="sourceLine" id="cb28-4" title="4">      <span class="cf">return</span> newValue</a>
<a class="sourceLine" id="cb28-5" title="5">    <span class="op">}</span></a>
<a class="sourceLine" id="cb28-6" title="6">    <span class="cf">return</span> substitution</a>
<a class="sourceLine" id="cb28-7" title="7">  <span class="op">}</span></a>
<a class="sourceLine" id="cb28-8" title="8"><span class="op">}</span>)</a>
<a class="sourceLine" id="cb28-9" title="9"></a>
<a class="sourceLine" id="cb28-10" title="10"><span class="kw">const</span> replaceFizzWithBuzz <span class="op">=</span> <span class="kw">new</span> <span class="at">TemplateTag</span>(<span class="at">substitutionReplacer</span>(<span class="st">&#39;fizz&#39;</span><span class="op">,</span> <span class="st">&#39;buzz&#39;</span>))</a>
<a class="sourceLine" id="cb28-11" title="11"></a>
<a class="sourceLine" id="cb28-12" title="12">replaceFizzWithBuzz<span class="vs">`foo bar </span><span class="sc">${</span><span class="st">&quot;fizz&quot;</span><span class="sc">}</span><span class="vs">`</span></a>
<a class="sourceLine" id="cb28-13" title="13"><span class="co">// &quot;foo bar buzz&quot;</span></a></code></pre></div>
<blockquote>
<p><strong>note</strong> - if you call <code>new TemplateTag(substitutionReplacer)</code>, <code>substitutionReplacer</code> will automatically be initiated with no arguments.</p>
</blockquote>
<h4 id="plugin-pipeline">Plugin Pipeline</h4>
<p>You can pass a list of transformers, and <code>TemplateTag</code> will call them on your tag in the order they are specified:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb29-1" title="1"><span class="co">// note: passing these as an array also works</span></a>
<a class="sourceLine" id="cb29-2" title="2"><span class="kw">const</span> replace <span class="op">=</span> <span class="kw">new</span> <span class="at">TemplateTag</span>(</a>
<a class="sourceLine" id="cb29-3" title="3">  <span class="at">substitutionReplacer</span>(<span class="st">&#39;fizz&#39;</span><span class="op">,</span> <span class="st">&#39;buzz&#39;</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb29-4" title="4">  <span class="at">substitutionReplacer</span>(<span class="st">&#39;foo&#39;</span><span class="op">,</span> <span class="st">&#39;bar&#39;</span>)</a>
<a class="sourceLine" id="cb29-5" title="5">)</a>
<a class="sourceLine" id="cb29-6" title="6"></a>
<a class="sourceLine" id="cb29-7" title="7">replace<span class="vs">`</span><span class="sc">${</span><span class="st">&quot;foo&quot;</span><span class="sc">}</span><span class="vs"> </span><span class="sc">${</span><span class="st">&quot;fizz&quot;</span><span class="sc">}</span><span class="vs">`</span></a>
<a class="sourceLine" id="cb29-8" title="8"><span class="co">// &quot;bar buzz&quot;</span></a></code></pre></div>
<p>When multiple transformers are passed to <code>TemplateTag</code>, they will be iterated three times - first, all transformer <code>onString</code> methods will be called. Once they are done processing, <code>onSubstitution</code> methods will be called. Finally, all transformer <code>onEndResult</code> methods will be called.</p>
<h4 id="returning-other-values-from-a-transformer">Returning Other Values from a Transformer</h4>
<p>This is super easy. Transformers are just objects, after all. They have full access to <code>this</code>:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb30-1" title="1"><span class="kw">const</span> listSubs <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb30-2" title="2">  <span class="at">onString</span>(str) <span class="op">{</span></a>
<a class="sourceLine" id="cb30-3" title="3">    <span class="kw">this</span>.<span class="at">ctx</span> <span class="op">=</span> <span class="kw">this</span>.<span class="at">ctx</span> <span class="op">||</span> <span class="op">{</span> <span class="dt">strings</span><span class="op">:</span> []<span class="op">,</span> <span class="dt">subs</span><span class="op">:</span> [] <span class="op">}</span></a>
<a class="sourceLine" id="cb30-4" title="4">    <span class="kw">this</span>.<span class="va">ctx</span>.<span class="va">strings</span>.<span class="at">push</span>(str)<span class="op">;</span></a>
<a class="sourceLine" id="cb30-5" title="5">    <span class="cf">return</span> str</a>
<a class="sourceLine" id="cb30-6" title="6">  <span class="op">},</span></a>
<a class="sourceLine" id="cb30-7" title="7">  <span class="at">onSubstitution</span>(sub<span class="op">,</span> res) <span class="op">{</span></a>
<a class="sourceLine" id="cb30-8" title="8">    <span class="kw">this</span>.<span class="va">ctx</span>.<span class="va">subs</span>.<span class="at">push</span>(<span class="op">{</span> sub<span class="op">,</span> <span class="dt">precededBy</span><span class="op">:</span> res <span class="op">}</span>)</a>
<a class="sourceLine" id="cb30-9" title="9">    <span class="cf">return</span> sub</a>
<a class="sourceLine" id="cb30-10" title="10">  <span class="op">},</span></a>
<a class="sourceLine" id="cb30-11" title="11">  <span class="at">onEndResult</span>(res) <span class="op">{</span></a>
<a class="sourceLine" id="cb30-12" title="12">    <span class="cf">return</span> <span class="kw">this</span>.<span class="at">ctx</span></a>
<a class="sourceLine" id="cb30-13" title="13">  <span class="op">}</span></a>
<a class="sourceLine" id="cb30-14" title="14"><span class="op">}</span></a>
<a class="sourceLine" id="cb30-15" title="15"></a>
<a class="sourceLine" id="cb30-16" title="16"><span class="kw">const</span> toJSON <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb30-17" title="17">  <span class="at">onEndResult</span>(res) <span class="op">{</span></a>
<a class="sourceLine" id="cb30-18" title="18">    <span class="cf">return</span> <span class="va">JSON</span>.<span class="at">stringify</span>(res<span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb30-19" title="19">  <span class="op">}</span></a>
<a class="sourceLine" id="cb30-20" title="20"><span class="op">}</span></a>
<a class="sourceLine" id="cb30-21" title="21"></a>
<a class="sourceLine" id="cb30-22" title="22"><span class="kw">const</span> log <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb30-23" title="23">  <span class="at">onEndResult</span>(res) <span class="op">{</span></a>
<a class="sourceLine" id="cb30-24" title="24">    <span class="va">console</span>.<span class="at">log</span>(res)</a>
<a class="sourceLine" id="cb30-25" title="25">    <span class="cf">return</span> res</a>
<a class="sourceLine" id="cb30-26" title="26">  <span class="op">}</span></a>
<a class="sourceLine" id="cb30-27" title="27"><span class="op">}</span></a>
<a class="sourceLine" id="cb30-28" title="28"></a>
<a class="sourceLine" id="cb30-29" title="29"><span class="kw">const</span> process <span class="op">=</span> <span class="kw">new</span> <span class="at">TemplateTag</span>([listSubs<span class="op">,</span> toJSON<span class="op">,</span> log])</a>
<a class="sourceLine" id="cb30-30" title="30"></a>
<a class="sourceLine" id="cb30-31" title="31">process<span class="vs">`</span></a>
<a class="sourceLine" id="cb30-32" title="32"><span class="vs">  foo </span><span class="sc">${</span><span class="st">&#39;bar&#39;</span><span class="sc">}</span></a>
<a class="sourceLine" id="cb30-33" title="33"><span class="vs">  fizz </span><span class="sc">${</span><span class="st">&#39;buzz&#39;</span><span class="sc">}</span></a>
<a class="sourceLine" id="cb30-34" title="34"><span class="vs">`</span></a>
<a class="sourceLine" id="cb30-35" title="35"><span class="co">// {</span></a>
<a class="sourceLine" id="cb30-36" title="36"><span class="co">//  &quot;strings&quot;: [</span></a>
<a class="sourceLine" id="cb30-37" title="37"><span class="co">//    &quot;\n  foo &quot;,</span></a>
<a class="sourceLine" id="cb30-38" title="38"><span class="co">//    &quot;\n  foo bar\n  fizz &quot;,</span></a>
<a class="sourceLine" id="cb30-39" title="39"><span class="co">//    &quot;\n&quot; </span></a>
<a class="sourceLine" id="cb30-40" title="40"><span class="co">//  ],</span></a>
<a class="sourceLine" id="cb30-41" title="41"><span class="co">//  &quot;subs&quot;: [</span></a>
<a class="sourceLine" id="cb30-42" title="42"><span class="co">//    {</span></a>
<a class="sourceLine" id="cb30-43" title="43"><span class="co">//      &quot;sub&quot;: &quot;bar&quot;,</span></a>
<a class="sourceLine" id="cb30-44" title="44"><span class="co">//      &quot;precededBy&quot;: &quot;\n  foo &quot;</span></a>
<a class="sourceLine" id="cb30-45" title="45"><span class="co">//    },</span></a>
<a class="sourceLine" id="cb30-46" title="46"><span class="co">//    {</span></a>
<a class="sourceLine" id="cb30-47" title="47"><span class="co">//      &quot;sub&quot;: &quot;buzz&quot;,</span></a>
<a class="sourceLine" id="cb30-48" title="48"><span class="co">//      &quot;precededBy&quot;: &quot;\n  foo bar\n  fizz &quot;</span></a>
<a class="sourceLine" id="cb30-49" title="49"><span class="co">//    }</span></a>
<a class="sourceLine" id="cb30-50" title="50"><span class="co">//  ]</span></a>
<a class="sourceLine" id="cb30-51" title="51"><span class="co">// }</span></a></code></pre></div>
<h4 id="list-of-built-in-transformers">List of Built-in Transformers</h4>
<p>Since <code>common-tags</code> is built on the foundation of this TemplateTag class, it comes with its own set of built-in transformers:</p>
<h5 id="trimresulttransformerside"><code>trimResultTransformer([side])</code></h5>
<p>Trims the whitespace surrounding the end result. Accepts an optional <code>side</code> (can be <code>"start"</code> or <code>"end"</code> or alternatively <code>"left"</code> or <code>"right"</code>) that when supplied, will only trim whitespace from that side of the string.</p>
<h5 id="stripindenttransformertypeinitial"><code>stripIndentTransformer([type='initial'])</code></h5>
<p>Strips the indents from the end result. Offers two types: <code>all</code>, which removes all indentation from each line, and <code>initial</code>, which removes the shortest indent level from each line. Defaults to <code>initial</code>.</p>
<h5 id="replaceresulttransformerreplacewhat-replacewith"><code>replaceResultTransformer(replaceWhat, replaceWith)</code></h5>
<p>Replaces a value or pattern in the end result with a new value. <code>replaceWhat</code> can be a string or a regular expression, <code>replaceWith</code> is the new value.</p>
<h5 id="replacesubstitutiontransformerreplacewhat-replacewith"><code>replaceSubstitutionTransformer(replaceWhat, replaceWith)</code></h5>
<p>Replaces the result of all substitutions (results of calling <code>${ ... }</code>) with a new value. Same as for <code>replaceResultTransformer</code>, <code>replaceWhat</code> can be a string or regular expression and <code>replaceWith</code> is the new value.</p>
<h5 id="replacestringtransformerreplacewhat-replacewith"><code>replaceStringTransformer(replaceWhat, replaceWith)</code></h5>
<p>Replaces the result of all strings (what’s not in <code>${ ... }</code>) with a new value. Same as for <code>replaceResultTransformer</code>, <code>replaceWhat</code> can be a string or regular expression and <code>replaceWith</code> is the new value.</p>
<h5 id="inlinearraytransformeropts"><code>inlineArrayTransformer(opts)</code></h5>
<p>Converts any array substitutions into a string that represents a list. Accepts an options object:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb31-1" title="1">opts <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb31-2" title="2">  <span class="dt">separator</span><span class="op">:</span> <span class="st">&#39;,&#39;</span><span class="op">,</span> <span class="co">// what to separate each item with (always followed by a space)</span></a>
<a class="sourceLine" id="cb31-3" title="3">  <span class="dt">conjunction</span><span class="op">:</span> <span class="st">&#39;and&#39;</span><span class="op">,</span> <span class="co">// replace the last separator with this value</span></a>
<a class="sourceLine" id="cb31-4" title="4">  <span class="dt">serial</span><span class="op">:</span> <span class="kw">true</span> <span class="co">// should the separator be included before the conjunction? As in the case of serial/oxford commas</span></a>
<a class="sourceLine" id="cb31-5" title="5"><span class="op">}</span></a></code></pre></div>
<h5 id="splitstringtransformersplitby"><code>splitStringTransformer(splitBy)</code></h5>
<p>Splits a string substitution into an array by the provided <code>splitBy</code> substring, <strong>only</strong> if the string contains the <code>splitBy</code> substring.</p>
<h2 id="how-to-contribute">How to Contribute</h2>
<p>Please see the <a href="contributing.md">Contribution Guidelines</a>.</p>
<h2 id="license">License</h2>
<p>MIT. See <a href="license.md">license.md</a>.</p>
<h2 id="other-es2015-template-tag-modules">Other ES2015 Template Tag Modules</h2>
<p>If <code>common-tags</code> doesn’t quite fit your bill, and you just can’t seem to find what you’re looking for - perhaps these might be of use to you?</p>
<ul>
<li><a href="https://www.npmjs.com/package/tage">tage</a> - make functions work as template tags too</li>
<li><a href="https://www.npmjs.com/package/is-tagged">is-tagged</a> - Check whether a function call is initiated by a tagged template string or invoked in a regular way</li>
<li><a href="https://www.npmjs.com/package/es6-template-strings">es6-template-strings</a> - Compile and resolve template strings notation as specified in ES6</li>
<li><a href="https://github.com/trueadm/t7">t7</a> - A light-weight virtual-dom template library</li>
<li><a href="https://www.npmjs.com/package/html-template-tag">html-template-tag</a> - ES6 Tagged Template for compiling HTML template strings.</li>
<li><a href="https://www.npmjs.com/package/clean-tagged-string">clean-tagged-string</a> - A simple utility function to clean ES6 template strings.</li>
<li><a href="https://www.npmjs.com/package/multiline-tag">multiline-tag</a> - Tags for template strings making them behave like coffee multiline strings</li>
<li><a href="https://www.npmjs.com/package/deindent">deindent</a> - ES6 template string helper for deindentation.</li>
<li><a href="https://www.npmjs.com/package/heredoc-tag">heredoc-tag</a> - Heredoc helpers for ES2015 template strings</li>
<li><a href="https://www.npmjs.com/package/regx">regx</a> - Tagged template string regular expression compiler.</li>
<li><a href="https://www.npmjs.org/package/regexr">regexr</a> - Provides an ES6 template tag function that makes it easy to compose regexes out of template strings without double-escaped hell.</li>
<li><a href="https://www.npmjs.com/package/url-escape-tag">url-escape-tag</a> - A template tag for escaping url parameters based on ES2015 tagged templates.</li>
<li><a href="https://www.npmjs.com/package/shell-escape-tag">shell-escape-tag</a> - An ES6+ template tag which escapes parameters for interpolation into shell commands.</li>
<li><a href="https://www.npmjs.com/package/sql-tags">sql-tags</a> - ES6 tagged template string functions for SQL statements.</li>
<li><a href="https://www.npmjs.com/package/sql-tag">sql-tag</a> - A template tag for writing elegant sql strings.</li>
<li><a href="https://www.npmjs.com/package/sequelize-sql-tag">sequelize-sql-tag</a> - A sequelize plugin for sql-tag</li>
<li><a href="https://www.npmjs.com/package/pg-sql-tag">pg-sql-tag</a> - A pg plugin for sql-tag</li>
<li><a href="https://www.npmjs.com/package/sql-template-strings">sql-template-strings</a> - ES6 tagged template strings for prepared statements with mysql and postgres</li>
<li><a href="https://www.npmjs.com/package/sql-composer">sql-composer</a> - Composable SQL template strings for Node.js</li>
<li><a href="https://www.npmjs.com/package/pg-template-tag">pg-template-tag</a> - ECMAScript 6 (2015) template tag function to write queries for node-postgres.</li>
<li><a href="https://www.npmjs.com/package/digraph-tag">digraph-tag</a> - ES6 string template tag for quickly generating directed graph data</li>
<li><a href="https://www.npmjs.com/package/es2015-i18n-tag">es2015-i18n-tag</a> - ES2015 template literal tag for i18n and l10n translation and localization</li>
</ul>
</body>
</html>
