<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>README</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<h1 id="memoize-one">memoize-one</h1>
<p>A memoization library that only caches the result of the most recent arguments.</p>
<blockquote>
<p>Also <a href="https://github.com/microlinkhq/async-memoize-one">async version</a>.</p>
</blockquote>
<p><a href="https://travis-ci.org/alexreardon/memoize-one"><img src="https://travis-ci.org/alexreardon/memoize-one.svg?branch=master" alt="Build Status" /></a> <a href="https://www.npmjs.com/package/memoize-one"><img src="https://img.shields.io/npm/v/memoize-one.svg" alt="npm" /></a> <img src="https://img.shields.io/badge/types-typescript%20%7C%20flow-blueviolet" alt="types" /> <a href="https://david-dm.org/alexreardon/memoize-one"><img src="https://david-dm.org/alexreardon/memoize-one.svg" alt="dependencies" /></a> <a href="https://www.npmjs.com/package/memoize-one"><img src="https://img.shields.io/bundlephobia/minzip/memoize-one.svg" alt="minzip" /></a> <a href="https://www.npmjs.com/package/memoize-one"><img src="https://img.shields.io/npm/dm/memoize-one.svg" alt="Downloads per month" /></a></p>
<h2 id="rationale">Rationale</h2>
<p>Unlike other memoization libraries, <code>memoize-one</code> only remembers the latest arguments and result. No need to worry about cache busting mechanisms such as <code>maxAge</code>, <code>maxSize</code>, <code>exclusions</code> and so on, which can be prone to memory leaks. <code>memoize-one</code> simply remembers the last arguments, and if the function is next called with the same arguments then it returns the previous result.</p>
<h2 id="usage">Usage</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb1-1" title="1"><span class="co">// memoize-one uses the default import</span></a>
<a class="sourceLine" id="cb1-2" title="2"><span class="im">import</span> memoizeOne <span class="im">from</span> <span class="st">&#39;memoize-one&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb1-3" title="3"></a>
<a class="sourceLine" id="cb1-4" title="4"><span class="kw">const</span> add <span class="op">=</span> (a<span class="op">,</span> b) <span class="kw">=&gt;</span> a <span class="op">+</span> b<span class="op">;</span></a>
<a class="sourceLine" id="cb1-5" title="5"><span class="kw">const</span> memoizedAdd <span class="op">=</span> <span class="at">memoizeOne</span>(add)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-6" title="6"></a>
<a class="sourceLine" id="cb1-7" title="7"><span class="at">memoizedAdd</span>(<span class="dv">1</span><span class="op">,</span> <span class="dv">2</span>)<span class="op">;</span> <span class="co">// 3</span></a>
<a class="sourceLine" id="cb1-8" title="8"></a>
<a class="sourceLine" id="cb1-9" title="9"><span class="at">memoizedAdd</span>(<span class="dv">1</span><span class="op">,</span> <span class="dv">2</span>)<span class="op">;</span> <span class="co">// 3</span></a>
<a class="sourceLine" id="cb1-10" title="10"><span class="co">// Add function is not executed: previous result is returned</span></a>
<a class="sourceLine" id="cb1-11" title="11"></a>
<a class="sourceLine" id="cb1-12" title="12"><span class="at">memoizedAdd</span>(<span class="dv">2</span><span class="op">,</span> <span class="dv">3</span>)<span class="op">;</span> <span class="co">// 5</span></a>
<a class="sourceLine" id="cb1-13" title="13"><span class="co">// Add function is called to get new value</span></a>
<a class="sourceLine" id="cb1-14" title="14"></a>
<a class="sourceLine" id="cb1-15" title="15"><span class="at">memoizedAdd</span>(<span class="dv">2</span><span class="op">,</span> <span class="dv">3</span>)<span class="op">;</span> <span class="co">// 5</span></a>
<a class="sourceLine" id="cb1-16" title="16"><span class="co">// Add function is not executed: previous result is returned</span></a>
<a class="sourceLine" id="cb1-17" title="17"></a>
<a class="sourceLine" id="cb1-18" title="18"><span class="at">memoizedAdd</span>(<span class="dv">1</span><span class="op">,</span> <span class="dv">2</span>)<span class="op">;</span> <span class="co">// 3</span></a>
<a class="sourceLine" id="cb1-19" title="19"><span class="co">// Add function is called to get new value.</span></a>
<a class="sourceLine" id="cb1-20" title="20"><span class="co">// While this was previously cached,</span></a>
<a class="sourceLine" id="cb1-21" title="21"><span class="co">// it is not the latest so the cached result is lost</span></a></code></pre></div>
<h2 id="installation">Installation</h2>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb2-1" title="1"><span class="co"># yarn</span></a>
<a class="sourceLine" id="cb2-2" title="2"><span class="ex">yarn</span> add memoize-one</a>
<a class="sourceLine" id="cb2-3" title="3"></a>
<a class="sourceLine" id="cb2-4" title="4"><span class="co"># npm</span></a>
<a class="sourceLine" id="cb2-5" title="5"><span class="ex">npm</span> install memoize-one --save</a></code></pre></div>
<h2 id="function-argument-equality">Function argument equality</h2>
<p>By default, we apply our own <em>fast</em> and <em>naive</em> equality function to determine whether the arguments provided to your function are equal. You can see the full code here: <a href="https://github.com/alexreardon/memoize-one/blob/master/src/are-inputs-equal.ts">are-inputs-equal.ts</a>.</p>
<p>(By default) function arguments are considered equal if:</p>
<ol type="1">
<li>there is same amount of arguments</li>
<li>each new argument has strict equality (<code>===</code>) with the previous argument</li>
<li><strong>[special case]</strong> if two arguments are not <code>===</code> and they are both <code>NaN</code> then the two arguments are treated as equal</li>
</ol>
<p>What this looks like in practice:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="im">import</span> memoizeOne <span class="im">from</span> <span class="st">&#39;memoize-one&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb3-2" title="2"></a>
<a class="sourceLine" id="cb3-3" title="3"><span class="co">// add all numbers provided to the function</span></a>
<a class="sourceLine" id="cb3-4" title="4"><span class="kw">const</span> add <span class="op">=</span> (...<span class="at">args</span> <span class="op">=</span> []) <span class="kw">=&gt;</span></a>
<a class="sourceLine" id="cb3-5" title="5">  <span class="va">args</span>.<span class="at">reduce</span>((current<span class="op">,</span> value) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb3-6" title="6">    <span class="cf">return</span> current <span class="op">+</span> value<span class="op">;</span></a>
<a class="sourceLine" id="cb3-7" title="7">  <span class="op">},</span> <span class="dv">0</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-8" title="8"><span class="kw">const</span> memoizedAdd <span class="op">=</span> <span class="at">memoizeOne</span>(add)<span class="op">;</span></a></code></pre></div>
<blockquote>
<ol type="1">
<li>there is same amount of arguments</li>
</ol>
</blockquote>
<div class="sourceCode" id="cb4"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1"><span class="at">memoizedAdd</span>(<span class="dv">1</span><span class="op">,</span> <span class="dv">2</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-2" title="2"><span class="co">// the amount of arguments has changed, so underlying add function is called</span></a>
<a class="sourceLine" id="cb4-3" title="3"><span class="at">memoizedAdd</span>(<span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span>)<span class="op">;</span></a></code></pre></div>
<blockquote>
<ol start="2" type="1">
<li>new arguments have strict equality (<code>===</code>) with the previous argument</li>
</ol>
</blockquote>
<div class="sourceCode" id="cb5"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb5-1" title="1"><span class="at">memoizedAdd</span>(<span class="dv">1</span><span class="op">,</span> <span class="dv">2</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb5-2" title="2"><span class="co">// each argument is `===` to the last argument, so cache is used</span></a>
<a class="sourceLine" id="cb5-3" title="3"><span class="at">memoizedAdd</span>(<span class="dv">1</span><span class="op">,</span> <span class="dv">2</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb5-4" title="4"><span class="co">// second argument has changed, so add function is called again</span></a>
<a class="sourceLine" id="cb5-5" title="5"><span class="at">memoizedAdd</span>(<span class="dv">1</span><span class="op">,</span> <span class="dv">3</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb5-6" title="6"><span class="co">// the first value is not `===` to the previous first value (1 !== 3)</span></a>
<a class="sourceLine" id="cb5-7" title="7"><span class="co">// so add function is called again</span></a>
<a class="sourceLine" id="cb5-8" title="8"><span class="at">memoizedAdd</span>(<span class="dv">3</span><span class="op">,</span> <span class="dv">1</span>)<span class="op">;</span></a></code></pre></div>
<blockquote>
<ol start="3" type="1">
<li><strong>[special case]</strong> if the arguments are not <code>===</code> and they are both <code>NaN</code> then the argument is treated as equal</li>
</ol>
</blockquote>
<div class="sourceCode" id="cb6"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb6-1" title="1"><span class="at">memoizedAdd</span>(<span class="kw">NaN</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-2" title="2"><span class="co">// Even though NaN !== NaN these arguments are treated as equal</span></a>
<a class="sourceLine" id="cb6-3" title="3"><span class="at">memoizedAdd</span>(<span class="kw">NaN</span>)<span class="op">;</span></a></code></pre></div>
<h2 id="custom-equality-function">Custom equality function</h2>
<p>You can also pass in a custom function for checking the equality of two sets of arguments</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb7-1" title="1"><span class="kw">const</span> memoized <span class="op">=</span> <span class="at">memoizeOne</span>(fn<span class="op">,</span> isEqual)<span class="op">;</span></a></code></pre></div>
<p>The equality function needs to conform to this <code>type</code>:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode ts"><code class="sourceCode typescript"><a class="sourceLine" id="cb8-1" title="1"><span class="kw">type</span> EqualityFn <span class="op">=</span> (newArgs<span class="op">:</span> <span class="dt">any</span><span class="op">[],</span> lastArgs<span class="op">:</span> <span class="dt">any</span><span class="op">[]</span>) <span class="kw">=&gt;</span> <span class="dt">boolean</span><span class="op">;</span></a>
<a class="sourceLine" id="cb8-2" title="2"></a>
<a class="sourceLine" id="cb8-3" title="3"><span class="co">// You can import this type from memoize-one if you like</span></a>
<a class="sourceLine" id="cb8-4" title="4"></a>
<a class="sourceLine" id="cb8-5" title="5"><span class="co">// typescript</span></a>
<a class="sourceLine" id="cb8-6" title="6"><span class="im">import</span> <span class="op">{</span> EqualityFn <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;memoize-one&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb8-7" title="7"></a>
<a class="sourceLine" id="cb8-8" title="8"><span class="co">// flow</span></a>
<a class="sourceLine" id="cb8-9" title="9"><span class="im">import</span> <span class="kw">type</span> <span class="op">{</span> EqualityFn <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;memoize-one&#39;</span><span class="op">;</span></a></code></pre></div>
<p>An equality function should return <code>true</code> if the arguments are equal. If <code>true</code> is returned then the wrapped function will not be called.</p>
<p>A custom equality function needs to compare <code>Arrays</code>. The <code>newArgs</code> array will be a new reference every time so a simple <code>newArgs === lastArgs</code> will always return <code>false</code>.</p>
<p>Equality functions are not called if the <code>this</code> context of the function has changed (see below).</p>
<p>Here is an example that uses a <a href="https://github.com/lukeed/dequal">dequal</a> deep equal equality check</p>
<blockquote>
<p><code>dequal</code> correctly handles deep comparing two arrays</p>
</blockquote>
<div class="sourceCode" id="cb9"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb9-1" title="1"><span class="im">import</span> memoizeOne <span class="im">from</span> <span class="st">&#39;memoize-one&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb9-2" title="2"><span class="im">import</span> <span class="op">{</span> dequal <span class="im">as</span> isDeepEqual <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;dequal&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb9-3" title="3"></a>
<a class="sourceLine" id="cb9-4" title="4"><span class="kw">const</span> identity <span class="op">=</span> (x) <span class="kw">=&gt;</span> x<span class="op">;</span></a>
<a class="sourceLine" id="cb9-5" title="5"></a>
<a class="sourceLine" id="cb9-6" title="6"><span class="kw">const</span> shallowMemoized <span class="op">=</span> <span class="at">memoizeOne</span>(identity)<span class="op">;</span></a>
<a class="sourceLine" id="cb9-7" title="7"><span class="kw">const</span> deepMemoized <span class="op">=</span> <span class="at">memoizeOne</span>(identity<span class="op">,</span> isDeepEqual)<span class="op">;</span></a>
<a class="sourceLine" id="cb9-8" title="8"></a>
<a class="sourceLine" id="cb9-9" title="9"><span class="kw">const</span> result1 <span class="op">=</span> <span class="at">shallowMemoized</span>(<span class="op">{</span> <span class="dt">foo</span><span class="op">:</span> <span class="st">&#39;bar&#39;</span> <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb9-10" title="10"><span class="kw">const</span> result2 <span class="op">=</span> <span class="at">shallowMemoized</span>(<span class="op">{</span> <span class="dt">foo</span><span class="op">:</span> <span class="st">&#39;bar&#39;</span> <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb9-11" title="11"></a>
<a class="sourceLine" id="cb9-12" title="12">result1 <span class="op">===</span> result2<span class="op">;</span> <span class="co">// false - different object reference</span></a>
<a class="sourceLine" id="cb9-13" title="13"></a>
<a class="sourceLine" id="cb9-14" title="14"><span class="kw">const</span> result3 <span class="op">=</span> <span class="at">deepMemoized</span>(<span class="op">{</span> <span class="dt">foo</span><span class="op">:</span> <span class="st">&#39;bar&#39;</span> <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb9-15" title="15"><span class="kw">const</span> result4 <span class="op">=</span> <span class="at">deepMemoized</span>(<span class="op">{</span> <span class="dt">foo</span><span class="op">:</span> <span class="st">&#39;bar&#39;</span> <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb9-16" title="16"></a>
<a class="sourceLine" id="cb9-17" title="17">result3 <span class="op">===</span> result4<span class="op">;</span> <span class="co">// true - arguments are deep equal</span></a></code></pre></div>
<h2 id="this"><code>this</code></h2>
<h3 id="memoize-one-correctly-respects-this-control"><code>memoize-one</code> correctly respects <code>this</code> control</h3>
<p>This library takes special care to maintain, and allow control over the the <code>this</code> context for <strong>both</strong> the original function being memoized as well as the returned memoized function. Both the original function and the memoized function‚Äôs <code>this</code> context respect <a href="https://github.com/getify/You-Dont-Know-JS/blob/master/this%20%26%20object%20prototypes/ch2.md">all the <code>this</code> controlling techniques</a>:</p>
<ul>
<li>new bindings (<code>new</code>)</li>
<li>explicit binding (<code>call</code>, <code>apply</code>, <code>bind</code>);</li>
<li>implicit binding (call site: <code>obj.foo()</code>);</li>
<li>default binding (<code>window</code> or <code>undefined</code> in <code>strict mode</code>);</li>
<li>fat arrow binding (binding to lexical <code>this</code>)</li>
<li>ignored this (pass <code>null</code> as <code>this</code> to explicit binding)</li>
</ul>
<h3 id="changes-to-this-is-considered-an-argument-change">Changes to <code>this</code> is considered an argument change</h3>
<p>Changes to the running context (<code>this</code>) of a function can result in the function returning a different value even though its arguments have stayed the same:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb10-1" title="1"><span class="kw">function</span> <span class="at">getA</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb10-2" title="2">  <span class="cf">return</span> <span class="kw">this</span>.<span class="at">a</span><span class="op">;</span></a>
<a class="sourceLine" id="cb10-3" title="3"><span class="op">}</span></a>
<a class="sourceLine" id="cb10-4" title="4"></a>
<a class="sourceLine" id="cb10-5" title="5"><span class="kw">const</span> temp1 <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb10-6" title="6">  <span class="dt">a</span><span class="op">:</span> <span class="dv">20</span><span class="op">,</span></a>
<a class="sourceLine" id="cb10-7" title="7"><span class="op">};</span></a>
<a class="sourceLine" id="cb10-8" title="8"><span class="kw">const</span> temp2 <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb10-9" title="9">  <span class="dt">a</span><span class="op">:</span> <span class="dv">30</span><span class="op">,</span></a>
<a class="sourceLine" id="cb10-10" title="10"><span class="op">};</span></a>
<a class="sourceLine" id="cb10-11" title="11"></a>
<a class="sourceLine" id="cb10-12" title="12"><span class="va">getA</span>.<span class="at">call</span>(temp1)<span class="op">;</span> <span class="co">// 20</span></a>
<a class="sourceLine" id="cb10-13" title="13"><span class="va">getA</span>.<span class="at">call</span>(temp2)<span class="op">;</span> <span class="co">// 30</span></a></code></pre></div>
<p>Therefore, in order to prevent against unexpected results, <code>memoize-one</code> takes into account the current execution context (<code>this</code>) of the memoized function. If <code>this</code> is different to the previous invocation then it is considered a change in argument. <a href="https://github.com/alexreardon/memoize-one/issues/3">further discussion</a>.</p>
<p>Generally this will be of no impact if you are not explicity controlling the <code>this</code> context of functions you want to memoize with <a href="https://github.com/getify/You-Dont-Know-JS/blob/master/this%20%26%20object%20prototypes/ch2.md#explicit-binding">explicit binding</a> or <a href="https://github.com/getify/You-Dont-Know-JS/blob/master/this%20%26%20object%20prototypes/ch2.md#implicit-binding">implicit binding</a>. <code>memoize-One</code> will detect when you are manipulating <code>this</code> and will then consider the <code>this</code> context as an argument. If <code>this</code> changes, it will re-execute the original function even if the arguments have not changed.</p>
<h2 id="when-your-result-function-throws">When your result function <code>throw</code>s</h2>
<blockquote>
<p>There is no caching when your result function throws</p>
</blockquote>
<p>If your result function <code>throw</code>s then the memoized function will also throw. The throw will not break the memoized functions existing argument cache. It means the memoized function will pretend like it was never called with arguments that made it <code>throw</code>.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb11-1" title="1"><span class="kw">const</span> canThrow <span class="op">=</span> (name<span class="op">:</span> string) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb11-2" title="2">  <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;called&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb11-3" title="3">  <span class="cf">if</span> (name <span class="op">===</span> <span class="st">&#39;throw&#39;</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb11-4" title="4">    <span class="cf">throw</span> <span class="kw">new</span> <span class="at">Error</span>(name)<span class="op">;</span></a>
<a class="sourceLine" id="cb11-5" title="5">  <span class="op">}</span></a>
<a class="sourceLine" id="cb11-6" title="6">  <span class="cf">return</span> <span class="op">{</span> name <span class="op">};</span></a>
<a class="sourceLine" id="cb11-7" title="7"><span class="op">};</span></a>
<a class="sourceLine" id="cb11-8" title="8"></a>
<a class="sourceLine" id="cb11-9" title="9"><span class="kw">const</span> memoized <span class="op">=</span> <span class="at">memoizeOne</span>(canThrow)<span class="op">;</span></a>
<a class="sourceLine" id="cb11-10" title="10"></a>
<a class="sourceLine" id="cb11-11" title="11"><span class="kw">const</span> value1 <span class="op">=</span> <span class="at">memoized</span>(<span class="st">&#39;Alex&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb11-12" title="12"><span class="co">// console.log =&gt; &#39;called&#39;</span></a>
<a class="sourceLine" id="cb11-13" title="13"><span class="kw">const</span> value2 <span class="op">=</span> <span class="at">memoized</span>(<span class="st">&#39;Alex&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb11-14" title="14"><span class="co">// result function not called</span></a>
<a class="sourceLine" id="cb11-15" title="15"></a>
<a class="sourceLine" id="cb11-16" title="16"><span class="va">console</span>.<span class="at">log</span>(value1 <span class="op">===</span> value2)<span class="op">;</span></a>
<a class="sourceLine" id="cb11-17" title="17"><span class="co">// console.log =&gt; true</span></a>
<a class="sourceLine" id="cb11-18" title="18"></a>
<a class="sourceLine" id="cb11-19" title="19"><span class="cf">try</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb11-20" title="20">  <span class="at">memoized</span>(<span class="st">&#39;throw&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb11-21" title="21">  <span class="co">// console.log =&gt; &#39;called&#39;</span></a>
<a class="sourceLine" id="cb11-22" title="22"><span class="op">}</span> <span class="cf">catch</span> (e) <span class="op">{</span></a>
<a class="sourceLine" id="cb11-23" title="23">  firstError <span class="op">=</span> e<span class="op">;</span></a>
<a class="sourceLine" id="cb11-24" title="24"><span class="op">}</span></a>
<a class="sourceLine" id="cb11-25" title="25"></a>
<a class="sourceLine" id="cb11-26" title="26"><span class="cf">try</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb11-27" title="27">  <span class="at">memoized</span>(<span class="st">&#39;throw&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb11-28" title="28">  <span class="co">// console.log =&gt; &#39;called&#39;</span></a>
<a class="sourceLine" id="cb11-29" title="29">  <span class="co">// the result function was called again even though it was called twice</span></a>
<a class="sourceLine" id="cb11-30" title="30">  <span class="co">// with the &#39;throw&#39; string</span></a>
<a class="sourceLine" id="cb11-31" title="31"><span class="op">}</span> <span class="cf">catch</span> (e) <span class="op">{</span></a>
<a class="sourceLine" id="cb11-32" title="32">  secondError <span class="op">=</span> e<span class="op">;</span></a>
<a class="sourceLine" id="cb11-33" title="33"><span class="op">}</span></a>
<a class="sourceLine" id="cb11-34" title="34"></a>
<a class="sourceLine" id="cb11-35" title="35"><span class="va">console</span>.<span class="at">log</span>(firstError <span class="op">!==</span> secondError)<span class="op">;</span></a>
<a class="sourceLine" id="cb11-36" title="36"></a>
<a class="sourceLine" id="cb11-37" title="37"><span class="kw">const</span> value3 <span class="op">=</span> <span class="at">memoized</span>(<span class="st">&#39;Alex&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb11-38" title="38"><span class="co">// result function not called as the original memoization cache has not been busted</span></a>
<a class="sourceLine" id="cb11-39" title="39"><span class="va">console</span>.<span class="at">log</span>(value1 <span class="op">===</span> value3)<span class="op">;</span></a>
<a class="sourceLine" id="cb11-40" title="40"><span class="co">// console.log =&gt; true</span></a></code></pre></div>
<h2 id="performance">Performance üöÄ</h2>
<h3 id="tiny">Tiny</h3>
<p><code>memoize-one</code> is super lightweight at <a href="https://www.npmjs.com/package/memoize-one"><img src="https://img.shields.io/bundlephobia/min/memoize-one.svg?label=" alt="min" /></a> minified and <a href="https://www.npmjs.com/package/memoize-one"><img src="https://img.shields.io/bundlephobia/minzip/memoize-one.svg?label=" alt="minzip" /></a> gzipped. (<code>1KB</code> = <code>1,024 Bytes</code>)</p>
<h3 id="extremely-fast">Extremely fast</h3>
<p><code>memoize-one</code> performs better or on par with than other popular memoization libraries for the purpose of remembering the latest invocation.</p>
<p><strong>Results</strong></p>
<ul>
<li><a href="https://www.measurethat.net/Benchmarks/ShowResult/4452">simple arguments</a></li>
<li><a href="https://www.measurethat.net/Benchmarks/ShowResult/4488">complex arguments</a></li>
</ul>
<p>The comparisons are not exhaustive and are primarily to show that <code>memoize-one</code> accomplishes remembering the latest invocation really fast. The benchmarks do not take into account the differences in feature sets, library sizes, parse time, and so on.</p>
<h2 id="code-health">Code health üëç</h2>
<ul>
<li>Tested with all built in <a href="https://github.com/getify/You-Dont-Know-JS/blob/1st-ed/types%20%26%20grammar/ch1.md">JavaScript types</a>.</li>
<li>100% code coverage</li>
<li><a href="https://travis-ci.org/alexreardon/memoize-one">Continuous integration</a> to run tests and type checks.</li>
<li>Written in <code>Typescript</code></li>
<li>Correct typing for <code>Typescript</code> and <code>flow</code> type systems</li>
<li>No dependencies</li>
</ul>
</body>
</html>
