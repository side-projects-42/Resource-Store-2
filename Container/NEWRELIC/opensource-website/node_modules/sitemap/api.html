<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>api</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<h1 id="api">API</h1>
<ul>
<li><a href="#api">API</a>
<ul>
<li><a href="#sitemapstream">SitemapStream</a></li>
<li><a href="#xmltositemapitemstream">XMLToSitemapItemStream</a></li>
<li><a href="#sitemapandindexstream">sitemapAndIndexStream</a></li>
<li><a href="#createsitemapsandindex">createSitemapsAndIndex</a></li>
<li><a href="#sitemapindexstream">SitemapIndexStream</a></li>
<li><a href="#xmllint">xmlLint</a></li>
<li><a href="#parsesitemap">parseSitemap</a></li>
<li><a href="#lineseparatedurlstositemapoptions">lineSeparatedURLsToSitemapOptions</a></li>
<li><a href="#streamtopromise">streamToPromise</a></li>
<li><a href="#objectstreamtojson">ObjectStreamToJSON</a></li>
<li><a href="#sitemapitemstream">SitemapItemStream</a></li>
<li><a href="#sitemap-item-options">Sitemap Item Options</a></li>
<li><a href="#sitemapimage">SitemapImage</a></li>
<li><a href="#videoitem">VideoItem</a></li>
<li><a href="#ilinkitem">ILinkItem</a></li>
<li><a href="#newsitem">NewsItem</a></li>
</ul></li>
</ul>
<h2 id="sitemapstream">SitemapStream</h2>
<p>A <a href="https://nodejs.org/api/stream.html#stream_implementing_a_transform_stream">Transform</a> for turning a <a href="https://nodejs.org/api/stream.html#stream_readable_streams">Readable stream</a> of either <a href="#sitemap-item-options">SitemapItemOptions</a> or url strings into a Sitemap. The readable stream it transforms <strong>must</strong> be in object mode.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb1-1" title="1"><span class="kw">const</span> <span class="op">{</span> SitemapStream <span class="op">}</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;sitemap&#39;</span>)</a>
<a class="sourceLine" id="cb1-2" title="2"><span class="kw">const</span> sms <span class="op">=</span> <span class="kw">new</span> <span class="at">SitemapStream</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb1-3" title="3">  <span class="dt">hostname</span><span class="op">:</span> <span class="st">&#39;https://example.com&#39;</span><span class="op">,</span> <span class="co">// optional only necessary if your paths are relative</span></a>
<a class="sourceLine" id="cb1-4" title="4">  <span class="dt">lastmodDateOnly</span><span class="op">:</span> <span class="kw">false</span> <span class="co">// defaults to false, flip to true for baidu</span></a>
<a class="sourceLine" id="cb1-5" title="5">  <span class="dt">xmlns</span><span class="op">:</span> <span class="op">{</span> <span class="co">// XML namespaces to turn on - all by default</span></a>
<a class="sourceLine" id="cb1-6" title="6">    <span class="dt">news</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></a>
<a class="sourceLine" id="cb1-7" title="7">    <span class="dt">xhtml</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></a>
<a class="sourceLine" id="cb1-8" title="8">    <span class="dt">image</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></a>
<a class="sourceLine" id="cb1-9" title="9">    <span class="dt">video</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></a>
<a class="sourceLine" id="cb1-10" title="10">    <span class="co">// custom: [&#39;xmlns:custom=&quot;https://example.com&quot;&#39;]</span></a>
<a class="sourceLine" id="cb1-11" title="11">  <span class="op">},</span></a>
<a class="sourceLine" id="cb1-12" title="12">  <span class="dt">errorHandler</span><span class="op">:</span> <span class="kw">undefined</span> <span class="co">// defaults to a standard errorLogger that logs to console or throws if the errorLevel is set to throw</span></a>
<a class="sourceLine" id="cb1-13" title="13"><span class="op">}</span>)</a>
<a class="sourceLine" id="cb1-14" title="14"><span class="kw">const</span> readable <span class="op">=</span> <span class="co">// a readable stream of objects</span></a>
<a class="sourceLine" id="cb1-15" title="15"><span class="va">readable</span>.<span class="at">pipe</span>(sms).<span class="at">pipe</span>(<span class="va">process</span>.<span class="at">stdout</span>)</a></code></pre></div>
<h2 id="xmltositemapitemstream">XMLToSitemapItemStream</h2>
<p>Takes a stream of xml and transforms it into a stream of SitemapOptions. Use this to parse existing sitemaps into config options compatible with this library</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1"><span class="kw">const</span> <span class="op">{</span> createReadStream<span class="op">,</span> createWriteStream <span class="op">}</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;fs&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-2" title="2"><span class="kw">const</span> <span class="op">{</span> XMLToSitemapItemStream<span class="op">,</span> ObjectStreamToJSON <span class="op">}</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;sitemap&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-3" title="3"></a>
<a class="sourceLine" id="cb2-4" title="4"><span class="at">createReadStream</span>(<span class="st">&#39;./some/sitemap.xml&#39;</span>)</a>
<a class="sourceLine" id="cb2-5" title="5"><span class="co">// turn the xml into sitemap option item options</span></a>
<a class="sourceLine" id="cb2-6" title="6">.<span class="at">pipe</span>(<span class="kw">new</span> <span class="at">XMLToSitemapItemStream</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb2-7" title="7">  <span class="co">// optional</span></a>
<a class="sourceLine" id="cb2-8" title="8">  <span class="dt">level</span><span class="op">:</span> <span class="va">ErrorLevel</span>.<span class="at">Warn</span> <span class="co">// default is WARN pass Silent to silence</span></a>
<a class="sourceLine" id="cb2-9" title="9">  <span class="dt">logger</span><span class="op">:</span> <span class="kw">false</span> <span class="co">// default is console log, pass false as another way to silence or your own custom logger</span></a>
<a class="sourceLine" id="cb2-10" title="10"><span class="op">}</span>))</a>
<a class="sourceLine" id="cb2-11" title="11"><span class="co">// convert the object stream to JSON</span></a>
<a class="sourceLine" id="cb2-12" title="12">.<span class="at">pipe</span>(<span class="kw">new</span> <span class="at">ObjectStreamToJSON</span>())</a>
<a class="sourceLine" id="cb2-13" title="13"><span class="co">// write the library compatible options to disk</span></a>
<a class="sourceLine" id="cb2-14" title="14">.<span class="at">pipe</span>(<span class="at">createWriteStream</span>(<span class="st">&#39;./sitemapOptions.json&#39;</span>))</a></code></pre></div>
<h2 id="sitemapandindexstream">sitemapAndIndexStream</h2>
<p>Use this to take a stream which may go over the max of 50000 items and split it into an index and sitemaps. SitemapAndIndexStream consumes a stream of urls and streams out index entries while writing individual urls to the streams you give it. Provide it with a function which when provided with a index returns a url where the sitemap will ultimately be hosted and a stream to write the current sitemap to. This function will be called everytime the next item in the stream would exceed the provided limit.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="kw">const</span> <span class="op">{</span> createReadStream<span class="op">,</span> createWriteStream <span class="op">}</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;fs&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-2" title="2"><span class="kw">const</span> <span class="op">{</span> resolve <span class="op">}</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;path&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-3" title="3"><span class="kw">const</span> <span class="op">{</span> createGzip <span class="op">}</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;zlib&#39;</span>)</a>
<a class="sourceLine" id="cb3-4" title="4"><span class="kw">const</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb3-5" title="5">  SitemapAndIndexStream<span class="op">,</span></a>
<a class="sourceLine" id="cb3-6" title="6">  SitemapStream<span class="op">,</span></a>
<a class="sourceLine" id="cb3-7" title="7">  lineSeparatedURLsToSitemapOptions</a>
<a class="sourceLine" id="cb3-8" title="8"><span class="op">}</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;sitemap&#39;</span>)</a>
<a class="sourceLine" id="cb3-9" title="9"></a>
<a class="sourceLine" id="cb3-10" title="10"><span class="kw">const</span> sms <span class="op">=</span> <span class="kw">new</span> <span class="at">SitemapAndIndexStream</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb3-11" title="11">  <span class="dt">limit</span><span class="op">:</span> <span class="dv">10000</span><span class="op">,</span> <span class="co">// defaults to 45k</span></a>
<a class="sourceLine" id="cb3-12" title="12">  <span class="co">// SitemapAndIndexStream will call this user provided function every time</span></a>
<a class="sourceLine" id="cb3-13" title="13">  <span class="co">// it needs to create a new sitemap file. You merely need to return a stream</span></a>
<a class="sourceLine" id="cb3-14" title="14">  <span class="co">// for it to write the sitemap urls to and the expected url where that sitemap will be hosted</span></a>
<a class="sourceLine" id="cb3-15" title="15">  <span class="dt">getSitemapStream</span><span class="op">:</span> (i) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb3-16" title="16">    <span class="kw">const</span> sitemapStream <span class="op">=</span> <span class="kw">new</span> <span class="at">SitemapStream</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb3-17" title="17">    <span class="kw">const</span> path <span class="op">=</span> <span class="vs">`./sitemap-</span><span class="sc">${</span>i<span class="sc">}</span><span class="vs">.xml`</span><span class="op">;</span></a>
<a class="sourceLine" id="cb3-18" title="18"></a>
<a class="sourceLine" id="cb3-19" title="19">    <span class="kw">const</span> ws <span class="op">=</span> sitemapStream</a>
<a class="sourceLine" id="cb3-20" title="20">      .<span class="at">pipe</span>(<span class="at">createGzip</span>()) <span class="co">// compress the output of the sitemap</span></a>
<a class="sourceLine" id="cb3-21" title="21">      .<span class="at">pipe</span>(<span class="at">createWriteStream</span>(<span class="at">resolve</span>(path <span class="op">+</span> <span class="st">&#39;.gz&#39;</span>)))<span class="op">;</span> <span class="co">// write it to sitemap-NUMBER.xml</span></a>
<a class="sourceLine" id="cb3-22" title="22"></a>
<a class="sourceLine" id="cb3-23" title="23">    <span class="cf">return</span> [<span class="kw">new</span> <span class="at">URL</span>(path<span class="op">,</span> <span class="st">&#39;https://example.com/subdir/&#39;</span>).<span class="at">toString</span>()<span class="op">,</span> sitemapStream<span class="op">,</span> ws]<span class="op">;</span></a>
<a class="sourceLine" id="cb3-24" title="24">  <span class="op">},</span></a>
<a class="sourceLine" id="cb3-25" title="25"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-26" title="26"></a>
<a class="sourceLine" id="cb3-27" title="27"><span class="at">lineSeparatedURLsToSitemapOptions</span>(</a>
<a class="sourceLine" id="cb3-28" title="28">  <span class="at">createReadStream</span>(<span class="st">&#39;./your-data.json.txt&#39;</span>)</a>
<a class="sourceLine" id="cb3-29" title="29">)</a>
<a class="sourceLine" id="cb3-30" title="30">.<span class="at">pipe</span>(sms)</a>
<a class="sourceLine" id="cb3-31" title="31">.<span class="at">pipe</span>(<span class="at">createGzip</span>())</a>
<a class="sourceLine" id="cb3-32" title="32">.<span class="at">pipe</span>(<span class="at">createWriteStream</span>(<span class="at">resolve</span>(<span class="st">&#39;./sitemap-index.xml.gz&#39;</span>)))<span class="op">;</span></a></code></pre></div>
<h2 id="sitemapindexstream">SitemapIndexStream</h2>
<p>Writes a sitemap index when given a stream urls.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1"><span class="co">/**</span></a>
<a class="sourceLine" id="cb4-2" title="2"><span class="co"> * writes the following</span></a>
<a class="sourceLine" id="cb4-3" title="3"><span class="co"> * &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></a>
<a class="sourceLine" id="cb4-4" title="4"><span class="co">   </span><span class="kw">&lt;sitemapindex</span><span class="ot"> xmlns=</span><span class="dt">&quot;http://www.sitemaps.org/schemas/sitemap/0.9&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb4-5" title="5"><span class="co">   </span><span class="kw">&lt;sitemap&gt;</span></a>
<a class="sourceLine" id="cb4-6" title="6"><span class="co">      </span><span class="kw">&lt;loc&gt;</span><span class="co">https://example.com/</span><span class="kw">&lt;/loc&gt;</span></a>
<a class="sourceLine" id="cb4-7" title="7"><span class="co">   </span><span class="kw">&lt;/sitemap&gt;</span></a>
<a class="sourceLine" id="cb4-8" title="8"><span class="co">   </span><span class="kw">&lt;sitemap&gt;</span></a>
<a class="sourceLine" id="cb4-9" title="9"><span class="co">      </span><span class="kw">&lt;loc&gt;</span><span class="co">https://example.com/2</span><span class="kw">&lt;/loc&gt;</span></a>
<a class="sourceLine" id="cb4-10" title="10"><span class="co">   </span><span class="kw">&lt;/sitemap&gt;</span></a>
<a class="sourceLine" id="cb4-11" title="11"><span class="co"> */</span></a>
<a class="sourceLine" id="cb4-12" title="12"><span class="kw">const</span> smis <span class="op">=</span> <span class="kw">new</span> <span class="at">SitemapIndexStream</span>(<span class="op">{</span><span class="dt">level</span><span class="op">:</span> <span class="st">&#39;warn&#39;</span><span class="op">}</span>)</a>
<a class="sourceLine" id="cb4-13" title="13"><span class="va">smis</span>.<span class="at">write</span>(<span class="op">{</span><span class="dt">url</span><span class="op">:</span> <span class="st">&#39;https://example.com/&#39;</span><span class="op">}</span>)</a>
<a class="sourceLine" id="cb4-14" title="14"><span class="va">smis</span>.<span class="at">write</span>(<span class="op">{</span><span class="dt">url</span><span class="op">:</span> <span class="st">&#39;https://example.com/2&#39;</span><span class="op">}</span>)</a>
<a class="sourceLine" id="cb4-15" title="15"><span class="va">smis</span>.<span class="at">pipe</span>(writestream)</a>
<a class="sourceLine" id="cb4-16" title="16"><span class="va">smis</span>.<span class="at">end</span>()</a></code></pre></div>
<h2 id="xmllint">xmlLint</h2>
<p>Resolve or reject depending on whether the passed in xml is a valid sitemap. This is just a wrapper around the xmlLint command line tool and thus requires xmlLint.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb5-1" title="1"><span class="kw">const</span> <span class="op">{</span> createReadStream <span class="op">}</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;fs&#39;</span>)</a>
<a class="sourceLine" id="cb5-2" title="2"><span class="kw">const</span> <span class="op">{</span> xmlLint <span class="op">}</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;sitemap&#39;</span>)</a>
<a class="sourceLine" id="cb5-3" title="3"><span class="at">xmlLint</span>(<span class="at">createReadStream</span>(<span class="st">&#39;./example.xml&#39;</span>)).<span class="at">then</span>(</a>
<a class="sourceLine" id="cb5-4" title="4">  () <span class="kw">=&gt;</span> <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;xml is valid&#39;</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb5-5" title="5">  ([err<span class="op">,</span> stderr]) <span class="kw">=&gt;</span> <span class="va">console</span>.<span class="at">error</span>(<span class="st">&#39;xml is invalid&#39;</span><span class="op">,</span> stderr)</a>
<a class="sourceLine" id="cb5-6" title="6">)</a></code></pre></div>
<h2 id="parsesitemap">parseSitemap</h2>
<p>Read xml and resolve with the configuration that would produce it or reject with an error</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb6-1" title="1"><span class="kw">const</span> <span class="op">{</span> createReadStream <span class="op">}</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;fs&#39;</span>)</a>
<a class="sourceLine" id="cb6-2" title="2"><span class="kw">const</span> <span class="op">{</span> parseSitemap<span class="op">,</span> createSitemap <span class="op">}</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;sitemap&#39;</span>)</a>
<a class="sourceLine" id="cb6-3" title="3"><span class="at">parseSitemap</span>(<span class="at">createReadStream</span>(<span class="st">&#39;./example.xml&#39;</span>)).<span class="at">then</span>(</a>
<a class="sourceLine" id="cb6-4" title="4">  <span class="co">// produces the same xml</span></a>
<a class="sourceLine" id="cb6-5" title="5">  <span class="co">// you can, of course, more practically modify it or store it</span></a>
<a class="sourceLine" id="cb6-6" title="6">  (xmlConfig) <span class="kw">=&gt;</span> <span class="va">console</span>.<span class="at">log</span>(<span class="at">createSitemap</span>(xmlConfig).<span class="at">toString</span>())<span class="op">,</span></a>
<a class="sourceLine" id="cb6-7" title="7">  (err) <span class="kw">=&gt;</span> <span class="va">console</span>.<span class="at">log</span>(err)</a>
<a class="sourceLine" id="cb6-8" title="8">)</a></code></pre></div>
<h2 id="lineseparatedurlstositemapoptions">lineSeparatedURLsToSitemapOptions</h2>
<p>Takes a stream of urls or sitemapoptions likely from fs.createReadStream(‘./path’) and returns an object stream of sitemap items.</p>
<h2 id="streamtopromise">streamToPromise</h2>
<p>Takes a stream returns a promise that resolves when stream emits finish.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb7-1" title="1"><span class="kw">const</span> <span class="op">{</span> streamToPromise<span class="op">,</span> SitemapStream <span class="op">}</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;sitemap&#39;</span>)</a>
<a class="sourceLine" id="cb7-2" title="2"><span class="kw">const</span> sitemap <span class="op">=</span> <span class="kw">new</span> <span class="at">SitemapStream</span>(<span class="op">{</span> <span class="dt">hostname</span><span class="op">:</span> <span class="st">&#39;http://example.com&#39;</span> <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-3" title="3"><span class="va">sitemap</span>.<span class="at">write</span>(<span class="op">{</span> <span class="dt">url</span><span class="op">:</span> <span class="st">&#39;/page-1/&#39;</span><span class="op">,</span> <span class="dt">changefreq</span><span class="op">:</span> <span class="st">&#39;daily&#39;</span><span class="op">,</span> <span class="dt">priority</span><span class="op">:</span> <span class="fl">0.3</span> <span class="op">}</span>)</a>
<a class="sourceLine" id="cb7-4" title="4"><span class="va">sitemap</span>.<span class="at">end</span>()</a>
<a class="sourceLine" id="cb7-5" title="5"><span class="at">streamToPromise</span>(sitemap).<span class="at">then</span>(buffer <span class="kw">=&gt;</span> <span class="va">console</span>.<span class="at">log</span>(<span class="va">buffer</span>.<span class="at">toString</span>())) <span class="co">// emits the full sitemap</span></a></code></pre></div>
<h2 id="objectstreamtojson">ObjectStreamToJSON</h2>
<p>A Transform that converts a stream of objects into a JSON Array or a line separated stringified JSON.</p>
<ul>
<li><span class="citation" data-cites="param">@param [lineSeparated=false]</span> whether to separate entries by a new line or comma</li>
</ul>
<div class="sourceCode" id="cb8"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb8-1" title="1"><span class="kw">const</span> stream <span class="op">=</span> <span class="va">Readable</span>.<span class="at">from</span>([<span class="op">{</span><span class="dt">a</span><span class="op">:</span> <span class="st">&#39;b&#39;</span><span class="op">}</span>])</a>
<a class="sourceLine" id="cb8-2" title="2">  .<span class="at">pipe</span>(<span class="kw">new</span> <span class="at">ObjectStreamToJSON</span>())</a>
<a class="sourceLine" id="cb8-3" title="3">  .<span class="at">pipe</span>(<span class="va">process</span>.<span class="at">stdout</span>)</a>
<a class="sourceLine" id="cb8-4" title="4"><span class="va">stream</span>.<span class="at">end</span>()</a>
<a class="sourceLine" id="cb8-5" title="5"><span class="co">// prints {&quot;a&quot;:&quot;b&quot;}</span></a></code></pre></div>
<h2 id="sitemapitemstream">SitemapItemStream</h2>
<p>Takes a stream of SitemapItemOptions and spits out xml for each</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb9-1" title="1"><span class="co">// writes &lt;url&gt;&lt;loc&gt;https://example.com&lt;/loc&gt;&lt;url&gt;&lt;url&gt;&lt;loc&gt;https://example.com/2&lt;/loc&gt;&lt;url&gt;</span></a>
<a class="sourceLine" id="cb9-2" title="2"><span class="kw">const</span> smis <span class="op">=</span> <span class="kw">new</span> <span class="at">SitemapItemStream</span>(<span class="op">{</span><span class="dt">level</span><span class="op">:</span> <span class="st">&#39;warn&#39;</span><span class="op">}</span>)</a>
<a class="sourceLine" id="cb9-3" title="3"><span class="va">smis</span>.<span class="at">pipe</span>(writestream)</a>
<a class="sourceLine" id="cb9-4" title="4"><span class="va">smis</span>.<span class="at">write</span>(<span class="op">{</span><span class="dt">url</span><span class="op">:</span> <span class="st">&#39;https://example.com&#39;</span><span class="op">,</span> <span class="dt">img</span><span class="op">:</span> []<span class="op">,</span> <span class="dt">video</span><span class="op">:</span> []<span class="op">,</span> <span class="dt">links</span><span class="op">:</span> []<span class="op">}</span>)</a>
<a class="sourceLine" id="cb9-5" title="5"><span class="va">smis</span>.<span class="at">write</span>(<span class="op">{</span><span class="dt">url</span><span class="op">:</span> <span class="st">&#39;https://example.com/2&#39;</span><span class="op">,</span> <span class="dt">img</span><span class="op">:</span> []<span class="op">,</span> <span class="dt">video</span><span class="op">:</span> []<span class="op">,</span> <span class="dt">links</span><span class="op">:</span> []<span class="op">}</span>)</a>
<a class="sourceLine" id="cb9-6" title="6"><span class="va">smis</span>.<span class="at">end</span>()</a></code></pre></div>
<h2 id="sitemap-item-options">Sitemap Item Options</h2>
<table>
<colgroup>
<col style="width: 26%" />
<col style="width: 17%" />
<col style="width: 8%" />
<col style="width: 47%" />
</colgroup>
<thead>
<tr class="header">
<th>Option</th>
<th>Type</th>
<th>eg</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>url</td>
<td>string</td>
<td><code>http://example.com/some/path</code></td>
<td>The only required property for every sitemap entry</td>
</tr>
<tr class="even">
<td>lastmod</td>
<td>string</td>
<td>‘2019-07-29’ or ‘2019-07-22T05:58:37.037Z’</td>
<td>When the page we as last modified use the W3C Datetime ISO8601 subset <a href="https://www.sitemaps.org/protocol.html#xmlTagDefinitions" class="uri">https://www.sitemaps.org/protocol.html#xmlTagDefinitions</a></td>
</tr>
<tr class="odd">
<td>changefreq</td>
<td>string</td>
<td>‘weekly’</td>
<td>How frequently the page is likely to change. This value provides general information to search engines and may not correlate exactly to how often they crawl the page. Please note that the value of this tag is considered a hint and not a command. See <a href="https://www.sitemaps.org/protocol.html#xmlTagDefinitions" class="uri">https://www.sitemaps.org/protocol.html#xmlTagDefinitions</a> for the acceptable values</td>
</tr>
<tr class="even">
<td>priority</td>
<td>number</td>
<td>0.6</td>
<td>The priority of this URL relative to other URLs on your site. Valid values range from 0.0 to 1.0. This value does not affect how your pages are compared to pages on other sites—it only lets the search engines know which pages you deem most important for the crawlers. The default priority of a page is 0.5. <a href="https://www.sitemaps.org/protocol.html#xmlTagDefinitions" class="uri">https://www.sitemaps.org/protocol.html#xmlTagDefinitions</a></td>
</tr>
<tr class="odd">
<td>img</td>
<td>object[]</td>
<td>see <a href="#ISitemapImage">#ISitemapImage</a></td>
<td><a href="https://support.google.com/webmasters/answer/178636?hl=en&amp;ref_topic=4581190" class="uri">https://support.google.com/webmasters/answer/178636?hl=en&amp;ref_topic=4581190</a></td>
</tr>
<tr class="even">
<td>video</td>
<td>object[]</td>
<td>see <a href="#IVideoItem">#IVideoItem</a></td>
<td><a href="https://support.google.com/webmasters/answer/80471?hl=en&amp;ref_topic=4581190" class="uri">https://support.google.com/webmasters/answer/80471?hl=en&amp;ref_topic=4581190</a></td>
</tr>
<tr class="odd">
<td>links</td>
<td>object[]</td>
<td>see <a href="#ILinkItem">#ILinkItem</a></td>
<td>Tell search engines about localized versions <a href="https://support.google.com/webmasters/answer/189077" class="uri">https://support.google.com/webmasters/answer/189077</a></td>
</tr>
<tr class="even">
<td>news</td>
<td>object</td>
<td>see <a href="#INewsItem">#INewsItem</a></td>
<td><a href="https://support.google.com/webmasters/answer/74288?hl=en&amp;ref_topic=4581190" class="uri">https://support.google.com/webmasters/answer/74288?hl=en&amp;ref_topic=4581190</a></td>
</tr>
<tr class="odd">
<td>ampLink</td>
<td>string</td>
<td><code>http://ampproject.org/article.amp.html</code></td>
<td></td>
</tr>
<tr class="even">
<td>cdata</td>
<td>boolean</td>
<td>true</td>
<td>wrap url in cdata xml escape</td>
</tr>
</tbody>
</table>
<h2 id="sitemapimage">SitemapImage</h2>
<p>Sitemap image <a href="https://support.google.com/webmasters/answer/178636?hl=en&amp;ref_topic=4581190" class="uri">https://support.google.com/webmasters/answer/178636?hl=en&amp;ref_topic=4581190</a></p>
<table>
<colgroup>
<col style="width: 26%" />
<col style="width: 17%" />
<col style="width: 8%" />
<col style="width: 47%" />
</colgroup>
<thead>
<tr class="header">
<th>Option</th>
<th>Type</th>
<th>eg</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>url</td>
<td>string</td>
<td><code>http://example.com/image.jpg</code></td>
<td>The URL of the image.</td>
</tr>
<tr class="even">
<td>caption</td>
<td>string - optional</td>
<td>‘Here we did the stuff’</td>
<td>The caption of the image.</td>
</tr>
<tr class="odd">
<td>title</td>
<td>string - optional</td>
<td>‘Star Wars EP IV’</td>
<td>The title of the image.</td>
</tr>
<tr class="even">
<td>geoLocation</td>
<td>string - optional</td>
<td>‘Limerick, Ireland’</td>
<td>The geographic location of the image.</td>
</tr>
<tr class="odd">
<td>license</td>
<td>string - optional</td>
<td><code>http://example.com/license.txt</code></td>
<td>A URL to the license of the image.</td>
</tr>
</tbody>
</table>
<h2 id="videoitem">VideoItem</h2>
<p>Sitemap video. <a href="https://support.google.com/webmasters/answer/80471?hl=en&amp;ref_topic=4581190" class="uri">https://support.google.com/webmasters/answer/80471?hl=en&amp;ref_topic=4581190</a></p>
<table>
<colgroup>
<col style="width: 26%" />
<col style="width: 17%" />
<col style="width: 8%" />
<col style="width: 47%" />
</colgroup>
<thead>
<tr class="header">
<th>Option</th>
<th>Type</th>
<th>eg</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>thumbnail_loc</td>
<td>string</td>
<td><code>"https://rtv3-img-roosterteeth.akamaized.net/store/0e841100-289b-4184-ae30-b6a16736960a.jpg/sm/thumb3.jpg"</code></td>
<td>A URL pointing to the video thumbnail image file</td>
</tr>
<tr class="even">
<td>title</td>
<td>string</td>
<td>‘2018:E6 - GoldenEye: Source’</td>
<td>The title of the video.</td>
</tr>
<tr class="odd">
<td>description</td>
<td>string</td>
<td>‘We play gun game in GoldenEye: Source with a good friend of ours. His name is Gruchy. Dan Gruchy.’</td>
<td>A description of the video. Maximum 2048 characters.</td>
</tr>
<tr class="even">
<td>content_loc</td>
<td>string - optional</td>
<td><code>"http://streamserver.example.com/video123.mp4"</code></td>
<td>A URL pointing to the actual video media file. Should be one of the supported formats. HTML is not a supported format. Flash is allowed, but no longer supported on most mobile platforms, and so may be indexed less well. Must not be the same as the <code>&lt;loc&gt;</code> URL.</td>
</tr>
<tr class="odd">
<td>player_loc</td>
<td>string - optional</td>
<td><code>"https://roosterteeth.com/embed/rouletsplay-2018-goldeneye-source"</code></td>
<td>A URL pointing to a player for a specific video. Usually this is the information in the src element of an <code>&lt;embed&gt;</code> tag. Must not be the same as the <code>&lt;loc&gt;</code> URL</td>
</tr>
<tr class="even">
<td>‘player_loc:autoplay’</td>
<td>string - optional</td>
<td>‘ap=1’</td>
<td>a string the search engine can append as a query param to enable automatic playback</td>
</tr>
<tr class="odd">
<td>‘player_loc:allow_embed’</td>
<td>boolean - optional</td>
<td>‘yes’</td>
<td>Whether the search engine can embed the video in search results. Allowed values are yes or no.</td>
</tr>
<tr class="even">
<td>duration</td>
<td>number - optional</td>
<td>600</td>
<td>duration of video in seconds</td>
</tr>
<tr class="odd">
<td>expiration_date</td>
<td>string - optional</td>
<td>“2012-07-16T19:20:30+08:00”</td>
<td>The date after which the video will no longer be available</td>
</tr>
<tr class="even">
<td>view_count</td>
<td>number - optional</td>
<td>‘21000000000’</td>
<td>The number of times the video has been viewed.</td>
</tr>
<tr class="odd">
<td>publication_date</td>
<td>string - optional</td>
<td>“2018-04-27T17:00:00.000Z”</td>
<td>The date the video was first published, in W3C format.</td>
</tr>
<tr class="even">
<td>category</td>
<td>string - optional</td>
<td>“Baking”</td>
<td>A short description of the broad category that the video belongs to. This is a string no longer than 256 characters.</td>
</tr>
<tr class="odd">
<td>restriction</td>
<td>string - optional</td>
<td>“IE GB US CA”</td>
<td>Whether to show or hide your video in search results from specific countries.</td>
</tr>
<tr class="even">
<td>restriction:relationship</td>
<td>string - optional</td>
<td>“deny”</td>
<td></td>
</tr>
<tr class="odd">
<td>gallery_loc</td>
<td>string - optional</td>
<td><code>"https://roosterteeth.com/series/awhu"</code></td>
<td>Currently not used.</td>
</tr>
<tr class="even">
<td>gallery_loc:title</td>
<td>string - optional</td>
<td>“awhu series page”</td>
<td>Currently not used.</td>
</tr>
<tr class="odd">
<td>price</td>
<td>string - optional</td>
<td>“1.99”</td>
<td>The price to download or view the video. Omit this tag for free videos.</td>
</tr>
<tr class="even">
<td>price:resolution</td>
<td>string - optional</td>
<td>“HD”</td>
<td>Specifies the resolution of the purchased version. Supported values are hd and sd.</td>
</tr>
<tr class="odd">
<td>price:currency</td>
<td>string - optional</td>
<td>“USD”</td>
<td>currency [Required] Specifies the currency in ISO 4217 format.</td>
</tr>
<tr class="even">
<td>price:type</td>
<td>string - optional</td>
<td>“rent”</td>
<td>type [Optional] Specifies the purchase option. Supported values are rent and own.</td>
</tr>
<tr class="odd">
<td>uploader</td>
<td>string - optional</td>
<td>“GrillyMcGrillerson”</td>
<td>The video uploader’s name. Only one <video:uploader> is allowed per video. String value, max 255 characters.</td>
</tr>
<tr class="even">
<td>platform</td>
<td>string - optional</td>
<td>“tv”</td>
<td>Whether to show or hide your video in search results on specified platform types. This is a list of space-delimited platform types. See <a href="https://support.google.com/webmasters/answer/80471?hl=en&amp;ref_topic=4581190" class="uri">https://support.google.com/webmasters/answer/80471?hl=en&amp;ref_topic=4581190</a> for more detail</td>
</tr>
<tr class="odd">
<td>platform:relationship</td>
<td>string ‘Allow’|‘Deny’ - optional</td>
<td>‘Allow’</td>
<td></td>
</tr>
<tr class="even">
<td>id</td>
<td>string - optional</td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>tag</td>
<td>string[] - optional</td>
<td>[‘Baking’]</td>
<td>An arbitrary string tag describing the video. Tags are generally very short descriptions of key concepts associated with a video or piece of content.</td>
</tr>
<tr class="even">
<td>rating</td>
<td>number - optional</td>
<td>2.5</td>
<td>The rating of the video. Supported values are float numbers</td>
</tr>
<tr class="odd">
<td>family_friendly</td>
<td>string ‘YES’|‘NO’ - optional</td>
<td>‘YES’</td>
<td></td>
</tr>
<tr class="even">
<td>requires_subscription</td>
<td>string ‘YES’|‘NO’ - optional</td>
<td>‘YES’</td>
<td>Indicates whether a subscription (either paid or free) is required to view the video. Allowed values are yes or no.</td>
</tr>
<tr class="odd">
<td>live</td>
<td>string ‘YES’|‘NO’ - optional</td>
<td>‘NO’</td>
<td>Indicates whether the video is a live stream. Supported values are yes or no.</td>
</tr>
</tbody>
</table>
<h2 id="ilinkitem">ILinkItem</h2>
<p><a href="https://support.google.com/webmasters/answer/189077" class="uri">https://support.google.com/webmasters/answer/189077</a></p>
<table>
<thead>
<tr class="header">
<th>Option</th>
<th>Type</th>
<th>eg</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>lang</td>
<td>string</td>
<td>‘en’</td>
<td></td>
</tr>
<tr class="even">
<td>url</td>
<td>string</td>
<td><code>'http://example.com/en/'</code></td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="newsitem">NewsItem</h2>
<p><a href="https://support.google.com/webmasters/answer/74288?hl=en&amp;ref_topic=4581190" class="uri">https://support.google.com/webmasters/answer/74288?hl=en&amp;ref_topic=4581190</a></p>
<table>
<colgroup>
<col style="width: 26%" />
<col style="width: 17%" />
<col style="width: 8%" />
<col style="width: 47%" />
</colgroup>
<thead>
<tr class="header">
<th>Option</th>
<th>Type</th>
<th>eg</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>access</td>
<td>string - ‘Registration’ | ‘Subscription’</td>
<td>‘Registration’ - optional</td>
<td></td>
</tr>
<tr class="even">
<td>publication</td>
<td>object</td>
<td>see following options</td>
<td></td>
</tr>
<tr class="odd">
<td>publication[‘name’]</td>
<td>string</td>
<td>‘The Example Times’</td>
<td>The <code>&lt;name&gt;</code> is the name of the news publication. It must exactly match the name as it appears on your articles on news.google.com, except for anything in parentheses.</td>
</tr>
<tr class="even">
<td>publication[‘language’]</td>
<td>string</td>
<td>‘en’</td>
<td>The <code>&lt;language&gt;</code> is the language of your publication. Use an ISO 639 language code (2 or 3 letters).</td>
</tr>
<tr class="odd">
<td>genres</td>
<td>string - optional</td>
<td>‘PressRelease, Blog’</td>
<td></td>
</tr>
<tr class="even">
<td>publication_date</td>
<td>string</td>
<td>‘2008-12-23’</td>
<td>Article publication date in W3C format, using either the “complete date” (YYYY-MM-DD) format or the “complete date plus hours, minutes, and seconds”</td>
</tr>
<tr class="odd">
<td>title</td>
<td>string</td>
<td>‘Companies A, B in Merger Talks’</td>
<td>The title of the news article.</td>
</tr>
<tr class="even">
<td>keywords</td>
<td>string - optional</td>
<td>“business, merger, acquisition, A, B”</td>
<td></td>
</tr>
<tr class="odd">
<td>stock_tickers</td>
<td>string - optional</td>
<td>“NASDAQ:A, NASDAQ:B”</td>
<td></td>
</tr>
</tbody>
</table>
</body>
</html>
