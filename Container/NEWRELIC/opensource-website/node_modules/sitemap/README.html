<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>README</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<h1 id="sitemap-mit-licensebuild-statusmonthly-downloads">sitemap <img src="https://img.shields.io/npm/l/sitemap" alt="MIT License" /><a href="https://travis-ci.org/ekalinin/sitemap.js"><img src="https://travis-ci.org/ekalinin/sitemap.js.svg?branch=master" alt="Build Status" /></a><img src="https://img.shields.io/npm/dm/sitemap" alt="Monthly Downloads" /></h1>
<p><strong>sitemap</strong> is a high-level streaming sitemap-generating library/CLI that makes creating <a href="http://www.sitemaps.org/">sitemap XML</a> files easy. <a href="https://support.google.com/webmasters/answer/156184?hl=en&amp;ref_topic=4581190">What is a sitemap?</a></p>
<h2 id="table-of-contents">Table of Contents</h2>
<ul>
<li><a href="#installation">Installation</a></li>
<li><a href="#generate-a-one-time-sitemap-from-a-list-of-urls">Generate a one time sitemap from a list of urls</a></li>
<li><a href="#serve-a-sitemap-from-a-server-and-periodically-update-it">Example of using sitemap.js with</a> <a href="https://expressjs.com/">express</a></li>
<li><a href="#create-sitemap-and-index-files-from-one-large-list">Generating more than one sitemap</a></li>
<li><a href="#options-you-can-pass">Options you can pass</a></li>
<li><a href="#examples">Examples</a></li>
<li><a href="#api">API</a></li>
<li><a href="#maintainers">Maintainers</a></li>
<li><a href="#license">License</a></li>
</ul>
<h2 id="installation">Installation</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb1-1" title="1"><span class="ex">npm</span> install --save sitemap</a></code></pre></div>
<h2 id="generate-a-one-time-sitemap-from-a-list-of-urls">Generate a one time sitemap from a list of urls</h2>
<p>If you are just looking to take a giant list of URLs and turn it into some sitemaps, try out our CLI. The cli can also parse, update and validate existing sitemaps.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb2-1" title="1"><span class="ex">npx</span> sitemap <span class="op">&lt;</span> listofurls.txt <span class="co"># `npx sitemap -h` for more examples and a list of options.</span></a></code></pre></div>
<p>For programmatic one time generation of a sitemap try:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1">  <span class="kw">const</span> <span class="op">{</span> SitemapStream<span class="op">,</span> streamToPromise <span class="op">}</span> <span class="op">=</span> <span class="at">require</span>( <span class="st">&#39;sitemap&#39;</span> )</a>
<a class="sourceLine" id="cb3-2" title="2">  <span class="kw">const</span> <span class="op">{</span> Readable <span class="op">}</span> <span class="op">=</span> <span class="at">require</span>( <span class="st">&#39;stream&#39;</span> )</a>
<a class="sourceLine" id="cb3-3" title="3"></a>
<a class="sourceLine" id="cb3-4" title="4">  <span class="co">// An array with your links</span></a>
<a class="sourceLine" id="cb3-5" title="5">  <span class="kw">const</span> links <span class="op">=</span> [<span class="op">{</span> <span class="dt">url</span><span class="op">:</span> <span class="st">&#39;/page-1/&#39;</span><span class="op">,</span>  <span class="dt">changefreq</span><span class="op">:</span> <span class="st">&#39;daily&#39;</span><span class="op">,</span> <span class="dt">priority</span><span class="op">:</span> <span class="fl">0.3</span>  <span class="op">}</span>]</a>
<a class="sourceLine" id="cb3-6" title="6"></a>
<a class="sourceLine" id="cb3-7" title="7">  <span class="co">// Create a stream to write to</span></a>
<a class="sourceLine" id="cb3-8" title="8">  <span class="kw">const</span> stream <span class="op">=</span> <span class="kw">new</span> <span class="at">SitemapStream</span>( <span class="op">{</span> <span class="dt">hostname</span><span class="op">:</span> <span class="st">&#39;https://...&#39;</span> <span class="op">}</span> )</a>
<a class="sourceLine" id="cb3-9" title="9"></a>
<a class="sourceLine" id="cb3-10" title="10">  <span class="co">// Return a promise that resolves with your XML string</span></a>
<a class="sourceLine" id="cb3-11" title="11">  <span class="cf">return</span> <span class="at">streamToPromise</span>(<span class="va">Readable</span>.<span class="at">from</span>(links).<span class="at">pipe</span>(stream)).<span class="at">then</span>((data) <span class="kw">=&gt;</span></a>
<a class="sourceLine" id="cb3-12" title="12">    <span class="va">data</span>.<span class="at">toString</span>()</a>
<a class="sourceLine" id="cb3-13" title="13">  )</a></code></pre></div>
<h2 id="serve-a-sitemap-from-a-server-and-periodically-update-it">Serve a sitemap from a server and periodically update it</h2>
<p>Use this if you have less than 50 thousand urls. See SitemapAndIndexStream for if you have more.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1"><span class="kw">const</span> express <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;express&#39;</span>)</a>
<a class="sourceLine" id="cb4-2" title="2"><span class="kw">const</span> <span class="op">{</span> SitemapStream<span class="op">,</span> streamToPromise <span class="op">}</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;sitemap&#39;</span>)</a>
<a class="sourceLine" id="cb4-3" title="3"><span class="kw">const</span> <span class="op">{</span> createGzip <span class="op">}</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;zlib&#39;</span>)</a>
<a class="sourceLine" id="cb4-4" title="4"><span class="kw">const</span> <span class="op">{</span> Readable <span class="op">}</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;stream&#39;</span>)</a>
<a class="sourceLine" id="cb4-5" title="5"></a>
<a class="sourceLine" id="cb4-6" title="6"><span class="kw">const</span> app <span class="op">=</span> <span class="at">express</span>()</a>
<a class="sourceLine" id="cb4-7" title="7"><span class="kw">let</span> sitemap</a>
<a class="sourceLine" id="cb4-8" title="8"></a>
<a class="sourceLine" id="cb4-9" title="9"><span class="va">app</span>.<span class="at">get</span>(<span class="st">&#39;/sitemap.xml&#39;</span><span class="op">,</span> <span class="kw">function</span>(req<span class="op">,</span> res) <span class="op">{</span></a>
<a class="sourceLine" id="cb4-10" title="10">  <span class="va">res</span>.<span class="at">header</span>(<span class="st">&#39;Content-Type&#39;</span><span class="op">,</span> <span class="st">&#39;application/xml&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-11" title="11">  <span class="va">res</span>.<span class="at">header</span>(<span class="st">&#39;Content-Encoding&#39;</span><span class="op">,</span> <span class="st">&#39;gzip&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-12" title="12">  <span class="co">// if we have a cached entry send it</span></a>
<a class="sourceLine" id="cb4-13" title="13">  <span class="cf">if</span> (sitemap) <span class="op">{</span></a>
<a class="sourceLine" id="cb4-14" title="14">    <span class="va">res</span>.<span class="at">send</span>(sitemap)</a>
<a class="sourceLine" id="cb4-15" title="15">    <span class="cf">return</span></a>
<a class="sourceLine" id="cb4-16" title="16">  <span class="op">}</span></a>
<a class="sourceLine" id="cb4-17" title="17"></a>
<a class="sourceLine" id="cb4-18" title="18">  <span class="cf">try</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb4-19" title="19">    <span class="kw">const</span> smStream <span class="op">=</span> <span class="kw">new</span> <span class="at">SitemapStream</span>(<span class="op">{</span> <span class="dt">hostname</span><span class="op">:</span> <span class="st">&#39;https://example.com/&#39;</span> <span class="op">}</span>)</a>
<a class="sourceLine" id="cb4-20" title="20">    <span class="kw">const</span> pipeline <span class="op">=</span> <span class="va">smStream</span>.<span class="at">pipe</span>(<span class="at">createGzip</span>())</a>
<a class="sourceLine" id="cb4-21" title="21"></a>
<a class="sourceLine" id="cb4-22" title="22">    <span class="co">// pipe your entries or directly write them.</span></a>
<a class="sourceLine" id="cb4-23" title="23">    <span class="va">smStream</span>.<span class="at">write</span>(<span class="op">{</span> <span class="dt">url</span><span class="op">:</span> <span class="st">&#39;/page-1/&#39;</span><span class="op">,</span>  <span class="dt">changefreq</span><span class="op">:</span> <span class="st">&#39;daily&#39;</span><span class="op">,</span> <span class="dt">priority</span><span class="op">:</span> <span class="fl">0.3</span> <span class="op">}</span>)</a>
<a class="sourceLine" id="cb4-24" title="24">    <span class="va">smStream</span>.<span class="at">write</span>(<span class="op">{</span> <span class="dt">url</span><span class="op">:</span> <span class="st">&#39;/page-2/&#39;</span><span class="op">,</span>  <span class="dt">changefreq</span><span class="op">:</span> <span class="st">&#39;monthly&#39;</span><span class="op">,</span>  <span class="dt">priority</span><span class="op">:</span> <span class="fl">0.7</span> <span class="op">}</span>)</a>
<a class="sourceLine" id="cb4-25" title="25">    <span class="va">smStream</span>.<span class="at">write</span>(<span class="op">{</span> <span class="dt">url</span><span class="op">:</span> <span class="st">&#39;/page-3/&#39;</span><span class="op">}</span>)    <span class="co">// changefreq: &#39;weekly&#39;,  priority: 0.5</span></a>
<a class="sourceLine" id="cb4-26" title="26">    <span class="va">smStream</span>.<span class="at">write</span>(<span class="op">{</span> <span class="dt">url</span><span class="op">:</span> <span class="st">&#39;/page-4/&#39;</span><span class="op">,</span>   <span class="dt">img</span><span class="op">:</span> <span class="st">&quot;http://urlTest.com&quot;</span> <span class="op">}</span>)</a>
<a class="sourceLine" id="cb4-27" title="27">    <span class="co">/* or use</span></a>
<a class="sourceLine" id="cb4-28" title="28"><span class="co">    Readable.from([{url: &#39;/page-1&#39;}...]).pipe(smStream)</span></a>
<a class="sourceLine" id="cb4-29" title="29"><span class="co">    if you are looking to avoid writing your own loop.</span></a>
<a class="sourceLine" id="cb4-30" title="30"><span class="co">    */</span></a>
<a class="sourceLine" id="cb4-31" title="31"></a>
<a class="sourceLine" id="cb4-32" title="32">    <span class="co">// cache the response</span></a>
<a class="sourceLine" id="cb4-33" title="33">    <span class="at">streamToPromise</span>(pipeline).<span class="at">then</span>(sm <span class="kw">=&gt;</span> sitemap <span class="op">=</span> sm)</a>
<a class="sourceLine" id="cb4-34" title="34">    <span class="co">// make sure to attach a write stream such as streamToPromise before ending</span></a>
<a class="sourceLine" id="cb4-35" title="35">    <span class="va">smStream</span>.<span class="at">end</span>()</a>
<a class="sourceLine" id="cb4-36" title="36">    <span class="co">// stream write the response</span></a>
<a class="sourceLine" id="cb4-37" title="37">    <span class="va">pipeline</span>.<span class="at">pipe</span>(res).<span class="at">on</span>(<span class="st">&#39;error&#39;</span><span class="op">,</span> (e) <span class="kw">=&gt;</span> <span class="op">{</span><span class="cf">throw</span> e<span class="op">}</span>)</a>
<a class="sourceLine" id="cb4-38" title="38">  <span class="op">}</span> <span class="cf">catch</span> (e) <span class="op">{</span></a>
<a class="sourceLine" id="cb4-39" title="39">    <span class="va">console</span>.<span class="at">error</span>(e)</a>
<a class="sourceLine" id="cb4-40" title="40">    <span class="va">res</span>.<span class="at">status</span>(<span class="dv">500</span>).<span class="at">end</span>()</a>
<a class="sourceLine" id="cb4-41" title="41">  <span class="op">}</span></a>
<a class="sourceLine" id="cb4-42" title="42"><span class="op">}</span>)</a>
<a class="sourceLine" id="cb4-43" title="43"></a>
<a class="sourceLine" id="cb4-44" title="44"><span class="va">app</span>.<span class="at">listen</span>(<span class="dv">3000</span><span class="op">,</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb4-45" title="45">  <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;listening&#39;</span>)</a>
<a class="sourceLine" id="cb4-46" title="46"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h2 id="create-sitemap-and-index-files-from-one-large-list">Create sitemap and index files from one large list</h2>
<p>If you know you are definitely going to have more than 50,000 urls in your sitemap, you can use this slightly more complex interface to create a new sitemap every 45,000 entries and add that file to a sitemap index.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb5-1" title="1"><span class="kw">const</span> <span class="op">{</span> createReadStream<span class="op">,</span> createWriteStream <span class="op">}</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;fs&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb5-2" title="2"><span class="kw">const</span> <span class="op">{</span> resolve <span class="op">}</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;path&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb5-3" title="3"><span class="kw">const</span> <span class="op">{</span> createGzip <span class="op">}</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;zlib&#39;</span>)</a>
<a class="sourceLine" id="cb5-4" title="4"><span class="kw">const</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb5-5" title="5">  simpleSitemapAndIndex<span class="op">,</span></a>
<a class="sourceLine" id="cb5-6" title="6">  lineSeparatedURLsToSitemapOptions</a>
<a class="sourceLine" id="cb5-7" title="7"><span class="op">}</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;sitemap&#39;</span>)</a>
<a class="sourceLine" id="cb5-8" title="8"></a>
<a class="sourceLine" id="cb5-9" title="9"><span class="co">// writes sitemaps and index out to the destination you provide.</span></a>
<a class="sourceLine" id="cb5-10" title="10"><span class="at">simpleSitemapAndIndex</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb5-11" title="11">  <span class="dt">hostname</span><span class="op">:</span> <span class="st">&#39;https://example.com&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb5-12" title="12">  <span class="dt">destinationDir</span><span class="op">:</span> <span class="st">&#39;./&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb5-13" title="13">  <span class="dt">sourceData</span><span class="op">:</span> <span class="at">lineSeparatedURLsToSitemapOptions</span>(</a>
<a class="sourceLine" id="cb5-14" title="14">    <span class="at">createReadStream</span>(<span class="st">&#39;./your-data.json.txt&#39;</span>)</a>
<a class="sourceLine" id="cb5-15" title="15">  )<span class="op">,</span></a>
<a class="sourceLine" id="cb5-16" title="16">  <span class="co">// or (only works with node 10.17 and up)</span></a>
<a class="sourceLine" id="cb5-17" title="17">  <span class="dt">sourceData</span><span class="op">:</span> [<span class="op">{</span> <span class="dt">url</span><span class="op">:</span> <span class="st">&#39;/page-1/&#39;</span><span class="op">,</span> <span class="dt">changefreq</span><span class="op">:</span> <span class="st">&#39;daily&#39;</span><span class="op">},</span> ...]<span class="op">,</span></a>
<a class="sourceLine" id="cb5-18" title="18">  <span class="co">// or</span></a>
<a class="sourceLine" id="cb5-19" title="19">  <span class="dt">sourceData</span><span class="op">:</span> <span class="st">&#39;./your-data.json.txt&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb5-20" title="20"><span class="op">}</span>).<span class="at">then</span>(() <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb5-21" title="21">  <span class="co">// Do follow up actions</span></a>
<a class="sourceLine" id="cb5-22" title="22"><span class="op">}</span>)</a></code></pre></div>
<p>Want to customize that?</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb6-1" title="1"><span class="kw">const</span> <span class="op">{</span> createReadStream<span class="op">,</span> createWriteStream <span class="op">}</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;fs&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-2" title="2"><span class="kw">const</span> <span class="op">{</span> resolve <span class="op">}</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;path&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-3" title="3"><span class="kw">const</span> <span class="op">{</span> createGzip <span class="op">}</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;zlib&#39;</span>)</a>
<a class="sourceLine" id="cb6-4" title="4"><span class="kw">const</span> <span class="op">{</span> Readable <span class="op">}</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;stream&#39;</span>)</a>
<a class="sourceLine" id="cb6-5" title="5"><span class="kw">const</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb6-6" title="6">  SitemapAndIndexStream<span class="op">,</span></a>
<a class="sourceLine" id="cb6-7" title="7">  SitemapStream<span class="op">,</span></a>
<a class="sourceLine" id="cb6-8" title="8">  lineSeparatedURLsToSitemapOptions</a>
<a class="sourceLine" id="cb6-9" title="9"><span class="op">}</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;sitemap&#39;</span>)</a>
<a class="sourceLine" id="cb6-10" title="10"></a>
<a class="sourceLine" id="cb6-11" title="11"><span class="kw">const</span> sms <span class="op">=</span> <span class="kw">new</span> <span class="at">SitemapAndIndexStream</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb6-12" title="12">  <span class="dt">limit</span><span class="op">:</span> <span class="dv">50000</span><span class="op">,</span> <span class="co">// defaults to 45k</span></a>
<a class="sourceLine" id="cb6-13" title="13">  <span class="co">// SitemapAndIndexStream will call this user provided function every time</span></a>
<a class="sourceLine" id="cb6-14" title="14">  <span class="co">// it needs to create a new sitemap file. You merely need to return a stream</span></a>
<a class="sourceLine" id="cb6-15" title="15">  <span class="co">// for it to write the sitemap urls to and the expected url where that sitemap will be hosted</span></a>
<a class="sourceLine" id="cb6-16" title="16">  <span class="dt">getSitemapStream</span><span class="op">:</span> (i) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb6-17" title="17">    <span class="kw">const</span> sitemapStream <span class="op">=</span> <span class="kw">new</span> <span class="at">SitemapStream</span>(<span class="op">{</span> <span class="dt">hostname</span><span class="op">:</span> <span class="st">&#39;https://example.com&#39;</span> <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-18" title="18">    <span class="co">// if your server automatically serves sitemap.xml.gz when requesting sitemap.xml leave this line be</span></a>
<a class="sourceLine" id="cb6-19" title="19">    <span class="co">// otherwise you will need to add .gz here and remove it a couple lines below so that both the index </span></a>
<a class="sourceLine" id="cb6-20" title="20">    <span class="co">// and the actual file have a .gz extension</span></a>
<a class="sourceLine" id="cb6-21" title="21">    <span class="kw">const</span> path <span class="op">=</span> <span class="vs">`./sitemap-</span><span class="sc">${</span>i<span class="sc">}</span><span class="vs">.xml`</span><span class="op">;</span> </a>
<a class="sourceLine" id="cb6-22" title="22"></a>
<a class="sourceLine" id="cb6-23" title="23">    sitemapStream</a>
<a class="sourceLine" id="cb6-24" title="24">      .<span class="at">pipe</span>(<span class="at">createGzip</span>()) <span class="co">// compress the output of the sitemap</span></a>
<a class="sourceLine" id="cb6-25" title="25">      .<span class="at">pipe</span>(<span class="at">createWriteStream</span>(<span class="at">resolve</span>(path <span class="op">+</span> <span class="st">&#39;.gz&#39;</span>)))<span class="op">;</span> <span class="co">// write it to sitemap-NUMBER.xml</span></a>
<a class="sourceLine" id="cb6-26" title="26"></a>
<a class="sourceLine" id="cb6-27" title="27">    <span class="cf">return</span> [<span class="kw">new</span> <span class="at">URL</span>(path<span class="op">,</span> <span class="st">&#39;https://example.com/subdir/&#39;</span>).<span class="at">toString</span>()<span class="op">,</span> sitemapStream]<span class="op">;</span></a>
<a class="sourceLine" id="cb6-28" title="28">  <span class="op">},</span></a>
<a class="sourceLine" id="cb6-29" title="29"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-30" title="30"></a>
<a class="sourceLine" id="cb6-31" title="31"><span class="co">// when reading from a file</span></a>
<a class="sourceLine" id="cb6-32" title="32"><span class="at">lineSeparatedURLsToSitemapOptions</span>(</a>
<a class="sourceLine" id="cb6-33" title="33">  <span class="at">createReadStream</span>(<span class="st">&#39;./your-data.json.txt&#39;</span>)</a>
<a class="sourceLine" id="cb6-34" title="34">)</a>
<a class="sourceLine" id="cb6-35" title="35">.<span class="at">pipe</span>(sms)</a>
<a class="sourceLine" id="cb6-36" title="36">.<span class="at">pipe</span>(<span class="at">createGzip</span>())</a>
<a class="sourceLine" id="cb6-37" title="37">.<span class="at">pipe</span>(<span class="at">createWriteStream</span>(<span class="at">resolve</span>(<span class="st">&#39;./sitemap-index.xml.gz&#39;</span>)))<span class="op">;</span></a>
<a class="sourceLine" id="cb6-38" title="38"></a>
<a class="sourceLine" id="cb6-39" title="39"><span class="co">// or reading straight from an in-memory array</span></a>
<a class="sourceLine" id="cb6-40" title="40">sms</a>
<a class="sourceLine" id="cb6-41" title="41">.<span class="at">pipe</span>(<span class="at">createGzip</span>())</a>
<a class="sourceLine" id="cb6-42" title="42">.<span class="at">pipe</span>(<span class="at">createWriteStream</span>(<span class="at">resolve</span>(<span class="st">&#39;./sitemap-index.xml.gz&#39;</span>)))<span class="op">;</span></a>
<a class="sourceLine" id="cb6-43" title="43"></a>
<a class="sourceLine" id="cb6-44" title="44"><span class="kw">const</span> arrayOfSitemapItems <span class="op">=</span> [<span class="op">{</span> <span class="dt">url</span><span class="op">:</span> <span class="st">&#39;/page-1/&#39;</span><span class="op">,</span> <span class="dt">changefreq</span><span class="op">:</span> <span class="st">&#39;daily&#39;</span><span class="op">},</span> ...]</a>
<a class="sourceLine" id="cb6-45" title="45"><span class="va">Readable</span>.<span class="at">from</span>(arrayOfSitemapItems).<span class="at">pipe</span>(sms) <span class="co">// available as of node 10.17.0</span></a>
<a class="sourceLine" id="cb6-46" title="46"><span class="co">// or</span></a>
<a class="sourceLine" id="cb6-47" title="47"><span class="va">arrayOfSitemapItems</span>.<span class="at">forEach</span>(item <span class="kw">=&gt;</span> <span class="va">sms</span>.<span class="at">write</span>(item))</a>
<a class="sourceLine" id="cb6-48" title="48"><span class="va">sms</span>.<span class="at">end</span>() <span class="co">// necessary to let it know you&#39;ve got nothing else to write</span></a></code></pre></div>
<h3 id="options-you-can-pass">Options you can pass</h3>
<div class="sourceCode" id="cb7"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb7-1" title="1"><span class="kw">const</span> <span class="op">{</span> SitemapStream<span class="op">,</span> streamToPromise <span class="op">}</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;sitemap&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-2" title="2"><span class="kw">const</span> smStream <span class="op">=</span> <span class="kw">new</span> <span class="at">SitemapStream</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb7-3" title="3">  <span class="dt">hostname</span><span class="op">:</span> <span class="st">&#39;http://www.mywebsite.com&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb7-4" title="4">  <span class="dt">xslUrl</span><span class="op">:</span> <span class="st">&quot;https://example.com/style.xsl&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb7-5" title="5">  <span class="dt">lastmodDateOnly</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span> <span class="co">// print date not time</span></a>
<a class="sourceLine" id="cb7-6" title="6">  <span class="dt">xmlns</span><span class="op">:</span> <span class="op">{</span> <span class="co">// trim the xml namespace</span></a>
<a class="sourceLine" id="cb7-7" title="7">    <span class="dt">news</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span> <span class="co">// flip to false to omit the xml namespace for news</span></a>
<a class="sourceLine" id="cb7-8" title="8">    <span class="dt">xhtml</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></a>
<a class="sourceLine" id="cb7-9" title="9">    <span class="dt">image</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></a>
<a class="sourceLine" id="cb7-10" title="10">    <span class="dt">video</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></a>
<a class="sourceLine" id="cb7-11" title="11">    <span class="dt">custom</span><span class="op">:</span> [</a>
<a class="sourceLine" id="cb7-12" title="12">      <span class="st">&#39;xsi:schemaLocation=&quot;http://www.sitemaps.org/schemas/sitemap/0.9 http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd&quot;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb7-13" title="13">      <span class="st">&#39;xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb7-14" title="14">    ]<span class="op">,</span></a>
<a class="sourceLine" id="cb7-15" title="15">  <span class="op">}</span></a>
<a class="sourceLine" id="cb7-16" title="16"> <span class="op">}</span>)</a>
<a class="sourceLine" id="cb7-17" title="17"><span class="co">// coalesce stream to value</span></a>
<a class="sourceLine" id="cb7-18" title="18"><span class="co">// alternatively you can pipe to another stream</span></a>
<a class="sourceLine" id="cb7-19" title="19"><span class="at">streamToPromise</span>(smStream).<span class="at">then</span>(<span class="va">console</span>.<span class="at">log</span>)</a>
<a class="sourceLine" id="cb7-20" title="20"></a>
<a class="sourceLine" id="cb7-21" title="21"><span class="va">smStream</span>.<span class="at">write</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb7-22" title="22">  <span class="dt">url</span><span class="op">:</span> <span class="st">&#39;/page1&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb7-23" title="23">  <span class="dt">changefreq</span><span class="op">:</span> <span class="st">&#39;weekly&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb7-24" title="24">  <span class="dt">priority</span><span class="op">:</span> <span class="fl">0.8</span><span class="op">,</span> <span class="co">// A hint to the crawler that it should prioritize this over items less than 0.8</span></a>
<a class="sourceLine" id="cb7-25" title="25"><span class="op">}</span>)</a>
<a class="sourceLine" id="cb7-26" title="26"></a>
<a class="sourceLine" id="cb7-27" title="27"><span class="co">// each sitemap entry supports many options</span></a>
<a class="sourceLine" id="cb7-28" title="28"><span class="co">// See [Sitemap Item Options](./api.md#sitemap-item-options) below for details</span></a>
<a class="sourceLine" id="cb7-29" title="29"><span class="va">smStream</span>.<span class="at">write</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb7-30" title="30">  <span class="dt">url</span><span class="op">:</span> <span class="st">&#39;http://test.com/page-1/&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb7-31" title="31">  <span class="dt">img</span><span class="op">:</span> [</a>
<a class="sourceLine" id="cb7-32" title="32">    <span class="op">{</span></a>
<a class="sourceLine" id="cb7-33" title="33">      <span class="dt">url</span><span class="op">:</span> <span class="st">&#39;http://test.com/img1.jpg&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb7-34" title="34">      <span class="dt">caption</span><span class="op">:</span> <span class="st">&#39;An image&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb7-35" title="35">      <span class="dt">title</span><span class="op">:</span> <span class="st">&#39;The Title of Image One&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb7-36" title="36">      <span class="dt">geoLocation</span><span class="op">:</span> <span class="st">&#39;London, United Kingdom&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb7-37" title="37">      <span class="dt">license</span><span class="op">:</span> <span class="st">&#39;https://creativecommons.org/licenses/by/4.0/&#39;</span></a>
<a class="sourceLine" id="cb7-38" title="38">    <span class="op">},</span></a>
<a class="sourceLine" id="cb7-39" title="39">    <span class="op">{</span></a>
<a class="sourceLine" id="cb7-40" title="40">      <span class="dt">url</span><span class="op">:</span> <span class="st">&#39;http://test.com/img2.jpg&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb7-41" title="41">      <span class="dt">caption</span><span class="op">:</span> <span class="st">&#39;Another image&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb7-42" title="42">      <span class="dt">title</span><span class="op">:</span> <span class="st">&#39;The Title of Image Two&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb7-43" title="43">      <span class="dt">geoLocation</span><span class="op">:</span> <span class="st">&#39;London, United Kingdom&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb7-44" title="44">      <span class="dt">license</span><span class="op">:</span> <span class="st">&#39;https://creativecommons.org/licenses/by/4.0/&#39;</span></a>
<a class="sourceLine" id="cb7-45" title="45">    <span class="op">}</span></a>
<a class="sourceLine" id="cb7-46" title="46">  ]<span class="op">,</span></a>
<a class="sourceLine" id="cb7-47" title="47">  <span class="dt">video</span><span class="op">:</span> [</a>
<a class="sourceLine" id="cb7-48" title="48">    <span class="op">{</span></a>
<a class="sourceLine" id="cb7-49" title="49">      <span class="dt">thumbnail_loc</span><span class="op">:</span> <span class="st">&#39;http://test.com/tmbn1.jpg&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb7-50" title="50">      <span class="dt">title</span><span class="op">:</span> <span class="st">&#39;A video title&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb7-51" title="51">      <span class="dt">description</span><span class="op">:</span> <span class="st">&#39;This is a video&#39;</span></a>
<a class="sourceLine" id="cb7-52" title="52">    <span class="op">},</span></a>
<a class="sourceLine" id="cb7-53" title="53">    <span class="op">{</span></a>
<a class="sourceLine" id="cb7-54" title="54">      <span class="dt">thumbnail_loc</span><span class="op">:</span> <span class="st">&#39;http://test.com/tmbn2.jpg&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb7-55" title="55">      <span class="dt">title</span><span class="op">:</span> <span class="st">&#39;A video with an attribute&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb7-56" title="56">      <span class="dt">description</span><span class="op">:</span> <span class="st">&#39;This is another video&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb7-57" title="57">      <span class="st">&#39;player_loc&#39;</span><span class="op">:</span> <span class="st">&#39;http://www.example.com/videoplayer.mp4?video=123&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb7-58" title="58">      <span class="st">&#39;player_loc:autoplay&#39;</span><span class="op">:</span> <span class="st">&#39;ap=1&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb7-59" title="59">      <span class="st">&#39;player_loc:allow_embed&#39;</span><span class="op">:</span> <span class="st">&#39;yes&#39;</span></a>
<a class="sourceLine" id="cb7-60" title="60">    <span class="op">}</span></a>
<a class="sourceLine" id="cb7-61" title="61">  ]<span class="op">,</span></a>
<a class="sourceLine" id="cb7-62" title="62">  <span class="dt">links</span><span class="op">:</span> [</a>
<a class="sourceLine" id="cb7-63" title="63">    <span class="op">{</span> <span class="dt">lang</span><span class="op">:</span> <span class="st">&#39;en&#39;</span><span class="op">,</span> <span class="dt">url</span><span class="op">:</span> <span class="st">&#39;http://test.com/page-1/&#39;</span> <span class="op">},</span></a>
<a class="sourceLine" id="cb7-64" title="64">    <span class="op">{</span> <span class="dt">lang</span><span class="op">:</span> <span class="st">&#39;ja&#39;</span><span class="op">,</span> <span class="dt">url</span><span class="op">:</span> <span class="st">&#39;http://test.com/page-1/ja/&#39;</span> <span class="op">}</span></a>
<a class="sourceLine" id="cb7-65" title="65">  ]<span class="op">,</span></a>
<a class="sourceLine" id="cb7-66" title="66">  <span class="dt">androidLink</span><span class="op">:</span> <span class="st">&#39;android-app://com.company.test/page-1/&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb7-67" title="67">  <span class="dt">news</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb7-68" title="68">    <span class="dt">publication</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb7-69" title="69">      <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;The Example Times&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb7-70" title="70">      <span class="dt">language</span><span class="op">:</span> <span class="st">&#39;en&#39;</span></a>
<a class="sourceLine" id="cb7-71" title="71">    <span class="op">},</span></a>
<a class="sourceLine" id="cb7-72" title="72">    <span class="dt">genres</span><span class="op">:</span> <span class="st">&#39;PressRelease, Blog&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb7-73" title="73">    <span class="dt">publication_date</span><span class="op">:</span> <span class="st">&#39;2008-12-23&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb7-74" title="74">    <span class="dt">title</span><span class="op">:</span> <span class="st">&#39;Companies A, B in Merger Talks&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb7-75" title="75">    <span class="dt">keywords</span><span class="op">:</span> <span class="st">&#39;business, merger, acquisition, A, B&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb7-76" title="76">    <span class="dt">stock_tickers</span><span class="op">:</span> <span class="st">&#39;NASDAQ:A, NASDAQ:B&#39;</span></a>
<a class="sourceLine" id="cb7-77" title="77">  <span class="op">}</span></a>
<a class="sourceLine" id="cb7-78" title="78"><span class="op">}</span>)</a>
<a class="sourceLine" id="cb7-79" title="79"><span class="co">// indicate there is nothing left to write</span></a>
<a class="sourceLine" id="cb7-80" title="80"><span class="va">smStream</span>.<span class="at">end</span>()</a></code></pre></div>
<h2 id="examples">Examples</h2>
<p>For more examples see the <a href="./examples/">examples directory</a></p>
<h2 id="api">API</h2>
<p>Full API docs can be found <a href="./api.md">here</a></p>
<h2 id="maintainers">Maintainers</h2>
<ul>
<li><span class="citation" data-cites="ekalinin">[@ekalinin]</span>(https://github.com/ekalinin)</li>
<li><span class="citation" data-cites="derduher">[@derduher]</span>(https://github.com/derduher)</li>
</ul>
<h2 id="license">License</h2>
<p>See <a href="https://github.com/ekalinin/sitemap.js/blob/master/LICENSE">LICENSE</a> file.</p>
</body>
</html>
