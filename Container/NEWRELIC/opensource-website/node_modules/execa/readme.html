<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>readme</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<p><img src="media/logo.svg" width="400"> <br></p>
<p><a href="https://travis-ci.com/github/sindresorhus/execa"><img src="https://travis-ci.com/sindresorhus/execa.svg?branch=master" alt="Build Status" /></a> <a href="https://coveralls.io/github/sindresorhus/execa?branch=master"><img src="https://coveralls.io/repos/github/sindresorhus/execa/badge.svg?branch=master" alt="Coverage Status" /></a></p>
<blockquote>
<p>Process execution for humans</p>
</blockquote>
<hr />
<p>Netlify is looking for a senior/expert Node.js backend engineer to join a fully remote, international, diverse (44% women and non-binary) and friendly team. This is for the team where one of the co-maintainers <span class="citation" data-cites="ehmicky">[@ehmicky]</span>(https://github.com/ehmicky) is working. The job description is <a href="https://boards.greenhouse.io/netlify/jobs/4832483002">here</a>.</p>
<hr />
<h2 id="why">Why</h2>
<p>This package improves <a href="https://nodejs.org/api/child_process.html"><code>child_process</code></a> methods with:</p>
<ul>
<li>Promise interface.</li>
<li><a href="#stripfinalnewline">Strips the final newline</a> from the output so you donâ€™t have to do <code>stdout.trim()</code>.</li>
<li>Supports <a href="https://en.wikipedia.org/wiki/Shebang_(Unix)">shebang</a> binaries cross-platform.</li>
<li><a href="https://github.com/IndigoUnited/node-cross-spawn#why">Improved Windows support.</a></li>
<li>Higher max buffer. 100 MB instead of 200 KB.</li>
<li><a href="#preferlocal">Executes locally installed binaries by name.</a></li>
<li><a href="#cleanup">Cleans up spawned processes when the parent process dies.</a></li>
<li><a href="#all">Get interleaved output</a> from <code>stdout</code> and <code>stderr</code> similar to what is printed on the terminal. <a href="#execasyncfile-arguments-options"><em>(Async only)</em></a></li>
<li><a href="#execacommandcommand-options">Can specify file and arguments as a single string without a shell</a></li>
<li>More descriptive errors.</li>
</ul>
<h2 id="install">Install</h2>
<pre><code>$ npm install execa</code></pre>
<h2 id="usage">Usage</h2>
<div class="sourceCode" id="cb2"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1"><span class="kw">const</span> execa <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;execa&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-2" title="2"></a>
<a class="sourceLine" id="cb2-3" title="3">(<span class="kw">async</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb2-4" title="4">    <span class="kw">const</span> <span class="op">{</span>stdout<span class="op">}</span> <span class="op">=</span> <span class="cf">await</span> <span class="at">execa</span>(<span class="st">&#39;echo&#39;</span><span class="op">,</span> [<span class="st">&#39;unicorns&#39;</span>])<span class="op">;</span></a>
<a class="sourceLine" id="cb2-5" title="5">    <span class="va">console</span>.<span class="at">log</span>(stdout)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-6" title="6">    <span class="co">//=&gt; &#39;unicorns&#39;</span></a>
<a class="sourceLine" id="cb2-7" title="7"><span class="op">}</span>)()<span class="op">;</span></a></code></pre></div>
<h3 id="pipe-the-child-process-stdout-to-the-parent">Pipe the child process stdout to the parent</h3>
<div class="sourceCode" id="cb3"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="kw">const</span> execa <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;execa&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-2" title="2"></a>
<a class="sourceLine" id="cb3-3" title="3"><span class="at">execa</span>(<span class="st">&#39;echo&#39;</span><span class="op">,</span> [<span class="st">&#39;unicorns&#39;</span>]).<span class="va">stdout</span>.<span class="at">pipe</span>(<span class="va">process</span>.<span class="at">stdout</span>)<span class="op">;</span></a></code></pre></div>
<h3 id="handling-errors">Handling Errors</h3>
<div class="sourceCode" id="cb4"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1"><span class="kw">const</span> execa <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;execa&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-2" title="2"></a>
<a class="sourceLine" id="cb4-3" title="3">(<span class="kw">async</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb4-4" title="4">    <span class="co">// Catching an error</span></a>
<a class="sourceLine" id="cb4-5" title="5">    <span class="cf">try</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb4-6" title="6">        <span class="cf">await</span> <span class="at">execa</span>(<span class="st">&#39;unknown&#39;</span><span class="op">,</span> [<span class="st">&#39;command&#39;</span>])<span class="op">;</span></a>
<a class="sourceLine" id="cb4-7" title="7">    <span class="op">}</span> <span class="cf">catch</span> (error) <span class="op">{</span></a>
<a class="sourceLine" id="cb4-8" title="8">        <span class="va">console</span>.<span class="at">log</span>(error)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-9" title="9">        <span class="co">/*</span></a>
<a class="sourceLine" id="cb4-10" title="10"><span class="co">        {</span></a>
<a class="sourceLine" id="cb4-11" title="11"><span class="co">            message: &#39;Command failed with ENOENT: unknown command spawn unknown ENOENT&#39;,</span></a>
<a class="sourceLine" id="cb4-12" title="12"><span class="co">            errno: -2,</span></a>
<a class="sourceLine" id="cb4-13" title="13"><span class="co">            code: &#39;ENOENT&#39;,</span></a>
<a class="sourceLine" id="cb4-14" title="14"><span class="co">            syscall: &#39;spawn unknown&#39;,</span></a>
<a class="sourceLine" id="cb4-15" title="15"><span class="co">            path: &#39;unknown&#39;,</span></a>
<a class="sourceLine" id="cb4-16" title="16"><span class="co">            spawnargs: [&#39;command&#39;],</span></a>
<a class="sourceLine" id="cb4-17" title="17"><span class="co">            originalMessage: &#39;spawn unknown ENOENT&#39;,</span></a>
<a class="sourceLine" id="cb4-18" title="18"><span class="co">            shortMessage: &#39;Command failed with ENOENT: unknown command spawn unknown ENOENT&#39;,</span></a>
<a class="sourceLine" id="cb4-19" title="19"><span class="co">            command: &#39;unknown command&#39;,</span></a>
<a class="sourceLine" id="cb4-20" title="20"><span class="co">            stdout: &#39;&#39;,</span></a>
<a class="sourceLine" id="cb4-21" title="21"><span class="co">            stderr: &#39;&#39;,</span></a>
<a class="sourceLine" id="cb4-22" title="22"><span class="co">            all: &#39;&#39;,</span></a>
<a class="sourceLine" id="cb4-23" title="23"><span class="co">            failed: true,</span></a>
<a class="sourceLine" id="cb4-24" title="24"><span class="co">            timedOut: false,</span></a>
<a class="sourceLine" id="cb4-25" title="25"><span class="co">            isCanceled: false,</span></a>
<a class="sourceLine" id="cb4-26" title="26"><span class="co">            killed: false</span></a>
<a class="sourceLine" id="cb4-27" title="27"><span class="co">        }</span></a>
<a class="sourceLine" id="cb4-28" title="28"><span class="co">        */</span></a>
<a class="sourceLine" id="cb4-29" title="29">    <span class="op">}</span></a>
<a class="sourceLine" id="cb4-30" title="30"></a>
<a class="sourceLine" id="cb4-31" title="31"><span class="op">}</span>)()<span class="op">;</span></a></code></pre></div>
<h3 id="cancelling-a-spawned-process">Cancelling a spawned process</h3>
<div class="sourceCode" id="cb5"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb5-1" title="1"><span class="kw">const</span> execa <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;execa&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb5-2" title="2"></a>
<a class="sourceLine" id="cb5-3" title="3">(<span class="kw">async</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb5-4" title="4">    <span class="kw">const</span> subprocess <span class="op">=</span> <span class="at">execa</span>(<span class="st">&#39;node&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb5-5" title="5"></a>
<a class="sourceLine" id="cb5-6" title="6">    <span class="at">setTimeout</span>(() <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb5-7" title="7">        <span class="va">subprocess</span>.<span class="at">cancel</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb5-8" title="8">    <span class="op">},</span> <span class="dv">1000</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb5-9" title="9"></a>
<a class="sourceLine" id="cb5-10" title="10">    <span class="cf">try</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb5-11" title="11">        <span class="cf">await</span> subprocess<span class="op">;</span></a>
<a class="sourceLine" id="cb5-12" title="12">    <span class="op">}</span> <span class="cf">catch</span> (error) <span class="op">{</span></a>
<a class="sourceLine" id="cb5-13" title="13">        <span class="va">console</span>.<span class="at">log</span>(<span class="va">subprocess</span>.<span class="at">killed</span>)<span class="op">;</span> <span class="co">// true</span></a>
<a class="sourceLine" id="cb5-14" title="14">        <span class="va">console</span>.<span class="at">log</span>(<span class="va">error</span>.<span class="at">isCanceled</span>)<span class="op">;</span> <span class="co">// true</span></a>
<a class="sourceLine" id="cb5-15" title="15">    <span class="op">}</span></a>
<a class="sourceLine" id="cb5-16" title="16"><span class="op">}</span>)()</a></code></pre></div>
<h3 id="catching-an-error-with-the-sync-method">Catching an error with the sync method</h3>
<div class="sourceCode" id="cb6"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb6-1" title="1"><span class="cf">try</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb6-2" title="2">    <span class="va">execa</span>.<span class="at">sync</span>(<span class="st">&#39;unknown&#39;</span><span class="op">,</span> [<span class="st">&#39;command&#39;</span>])<span class="op">;</span></a>
<a class="sourceLine" id="cb6-3" title="3"><span class="op">}</span> <span class="cf">catch</span> (error) <span class="op">{</span></a>
<a class="sourceLine" id="cb6-4" title="4">    <span class="va">console</span>.<span class="at">log</span>(error)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-5" title="5">    <span class="co">/*</span></a>
<a class="sourceLine" id="cb6-6" title="6"><span class="co">    {</span></a>
<a class="sourceLine" id="cb6-7" title="7"><span class="co">        message: &#39;Command failed with ENOENT: unknown command spawnSync unknown ENOENT&#39;,</span></a>
<a class="sourceLine" id="cb6-8" title="8"><span class="co">        errno: -2,</span></a>
<a class="sourceLine" id="cb6-9" title="9"><span class="co">        code: &#39;ENOENT&#39;,</span></a>
<a class="sourceLine" id="cb6-10" title="10"><span class="co">        syscall: &#39;spawnSync unknown&#39;,</span></a>
<a class="sourceLine" id="cb6-11" title="11"><span class="co">        path: &#39;unknown&#39;,</span></a>
<a class="sourceLine" id="cb6-12" title="12"><span class="co">        spawnargs: [&#39;command&#39;],</span></a>
<a class="sourceLine" id="cb6-13" title="13"><span class="co">        originalMessage: &#39;spawnSync unknown ENOENT&#39;,</span></a>
<a class="sourceLine" id="cb6-14" title="14"><span class="co">        shortMessage: &#39;Command failed with ENOENT: unknown command spawnSync unknown ENOENT&#39;,</span></a>
<a class="sourceLine" id="cb6-15" title="15"><span class="co">        command: &#39;unknown command&#39;,</span></a>
<a class="sourceLine" id="cb6-16" title="16"><span class="co">        stdout: &#39;&#39;,</span></a>
<a class="sourceLine" id="cb6-17" title="17"><span class="co">        stderr: &#39;&#39;,</span></a>
<a class="sourceLine" id="cb6-18" title="18"><span class="co">        all: &#39;&#39;,</span></a>
<a class="sourceLine" id="cb6-19" title="19"><span class="co">        failed: true,</span></a>
<a class="sourceLine" id="cb6-20" title="20"><span class="co">        timedOut: false,</span></a>
<a class="sourceLine" id="cb6-21" title="21"><span class="co">        isCanceled: false,</span></a>
<a class="sourceLine" id="cb6-22" title="22"><span class="co">        killed: false</span></a>
<a class="sourceLine" id="cb6-23" title="23"><span class="co">    }</span></a>
<a class="sourceLine" id="cb6-24" title="24"><span class="co">    */</span></a>
<a class="sourceLine" id="cb6-25" title="25"><span class="op">}</span></a></code></pre></div>
<h3 id="kill-a-process">Kill a process</h3>
<p>Using SIGTERM, and after 2 seconds, kill it with SIGKILL.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb7-1" title="1"><span class="kw">const</span> subprocess <span class="op">=</span> <span class="at">execa</span>(<span class="st">&#39;node&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-2" title="2"></a>
<a class="sourceLine" id="cb7-3" title="3"><span class="at">setTimeout</span>(() <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb7-4" title="4">    <span class="va">subprocess</span>.<span class="at">kill</span>(<span class="st">&#39;SIGTERM&#39;</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb7-5" title="5">        <span class="dt">forceKillAfterTimeout</span><span class="op">:</span> <span class="dv">2000</span></a>
<a class="sourceLine" id="cb7-6" title="6">    <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-7" title="7"><span class="op">},</span> <span class="dv">1000</span>)<span class="op">;</span></a></code></pre></div>
<h2 id="api">API</h2>
<h3 id="execafile-arguments-options">execa(file, arguments, options?)</h3>
<p>Execute a file. Think of this as a mix of <a href="https://nodejs.org/api/child_process.html#child_process_child_process_execfile_file_args_options_callback"><code>child_process.execFile()</code></a> and <a href="https://nodejs.org/api/child_process.html#child_process_child_process_spawn_command_args_options"><code>child_process.spawn()</code></a>.</p>
<p>No escaping/quoting is needed.</p>
<p>Unless the <a href="#shell"><code>shell</code></a> option is used, no shell interpreter (Bash, <code>cmd.exe</code>, etc.) is used, so shell features such as variables substitution (<code>echo $PATH</code>) are not allowed.</p>
<p>Returns a <a href="https://nodejs.org/api/child_process.html#child_process_class_childprocess"><code>child_process</code> instance</a> which: - is also a <code>Promise</code> resolving or rejecting with a <a href="#childProcessResult"><code>childProcessResult</code></a>. - exposes the following additional methods and properties.</p>
<h4 id="killsignal-options">kill(signal?, options?)</h4>
<p>Same as the original <a href="https://nodejs.org/api/child_process.html#child_process_subprocess_kill_signal"><code>child_process#kill()</code></a> except: if <code>signal</code> is <code>SIGTERM</code> (the default value) and the child process is not terminated after 5 seconds, force it by sending <code>SIGKILL</code>.</p>
<h5 id="options.forcekillaftertimeout">options.forceKillAfterTimeout</h5>
<p>Type: <code>number | false</code><br />
Default: <code>5000</code></p>
<p>Milliseconds to wait for the child process to terminate before sending <code>SIGKILL</code>.</p>
<p>Can be disabled with <code>false</code>.</p>
<h4 id="cancel">cancel()</h4>
<p>Similar to <a href="https://nodejs.org/api/child_process.html#child_process_subprocess_kill_signal"><code>childProcess.kill()</code></a>. This is preferred when cancelling the child process execution as the error is more descriptive and <a href="#iscanceled"><code>childProcessResult.isCanceled</code></a> is set to <code>true</code>.</p>
<h4 id="all">all</h4>
<p>Type: <code>ReadableStream | undefined</code></p>
<p>Stream combining/interleaving <a href="https://nodejs.org/api/child_process.html#child_process_subprocess_stdout"><code>stdout</code></a> and <a href="https://nodejs.org/api/child_process.html#child_process_subprocess_stderr"><code>stderr</code></a>.</p>
<p>This is <code>undefined</code> if either: - the <a href="#all-2"><code>all</code> option</a> is <code>false</code> (the default value) - both <a href="#stdout-1"><code>stdout</code></a> and <a href="#stderr-1"><code>stderr</code></a> options are set to <a href="https://nodejs.org/dist/latest-v6.x/docs/api/child_process.html#child_process_options_stdio"><code>'inherit'</code>, <code>'ipc'</code>, <code>Stream</code> or <code>integer</code></a></p>
<h3 id="execa.syncfile-arguments-options">execa.sync(file, arguments?, options?)</h3>
<p>Execute a file synchronously.</p>
<p>Returns or throws a <a href="#childProcessResult"><code>childProcessResult</code></a>.</p>
<h3 id="execa.commandcommand-options">execa.command(command, options?)</h3>
<p>Same as <a href="#execafile-arguments-options"><code>execa()</code></a> except both file and arguments are specified in a single <code>command</code> string. For example, <code>execa('echo', ['unicorns'])</code> is the same as <code>execa.command('echo unicorns')</code>.</p>
<p>If the file or an argument contains spaces, they must be escaped with backslashes. This matters especially if <code>command</code> is not a constant but a variable, for example with <code>__dirname</code> or <code>process.cwd()</code>. Except for spaces, no escaping/quoting is needed.</p>
<p>The <a href="#shell"><code>shell</code> option</a> must be used if the <code>command</code> uses shell-specific features, as opposed to being a simple <code>file</code> followed by its <code>arguments</code>.</p>
<h3 id="execa.commandsynccommand-options">execa.commandSync(command, options?)</h3>
<p>Same as <a href="#execacommand-command-options"><code>execa.command()</code></a> but synchronous.</p>
<p>Returns or throws a <a href="#childProcessResult"><code>childProcessResult</code></a>.</p>
<h3 id="execa.nodescriptpath-arguments-options">execa.node(scriptPath, arguments?, options?)</h3>
<p>Execute a Node.js script as a child process.</p>
<p>Same as <code>execa('node', [scriptPath, ...arguments], options)</code> except (like <a href="https://nodejs.org/api/child_process.html#child_process_child_process_fork_modulepath_args_options"><code>child_process#fork()</code></a>): - the current Node version and options are used. This can be overridden using the <a href="#nodepath-for-node-only"><code>nodePath</code></a> and <a href="#nodeoptions-for-node-only"><code>nodeOptions</code></a> options. - the <a href="#shell"><code>shell</code></a> option cannot be used - an extra channel <a href="https://nodejs.org/api/child_process.html#child_process_options_stdio"><code>ipc</code></a> is passed to <a href="#stdio"><code>stdio</code></a></p>
<h3 id="childprocessresult">childProcessResult</h3>
<p>Type: <code>object</code></p>
<p>Result of a child process execution. On success this is a plain object. On failure this is also an <code>Error</code> instance.</p>
<p>The child process <a href="#failed">fails</a> when: - its <a href="#exitcode">exit code</a> is not <code>0</code> - it was <a href="#killed">killed</a> with a <a href="#signal">signal</a> - <a href="#timedout">timing out</a> - <a href="#iscanceled">being canceled</a> - thereâ€™s not enough memory or there are already too many child processes</p>
<h4 id="command">command</h4>
<p>Type: <code>string</code></p>
<p>The file and arguments that were run.</p>
<h4 id="exitcode">exitCode</h4>
<p>Type: <code>number</code></p>
<p>The numeric exit code of the process that was run.</p>
<h4 id="stdout">stdout</h4>
<p>Type: <code>string | Buffer</code></p>
<p>The output of the process on stdout.</p>
<h4 id="stderr">stderr</h4>
<p>Type: <code>string | Buffer</code></p>
<p>The output of the process on stderr.</p>
<h4 id="all-1">all</h4>
<p>Type: <code>string | Buffer | undefined</code></p>
<p>The output of the process with <code>stdout</code> and <code>stderr</code> interleaved.</p>
<p>This is <code>undefined</code> if either: - the <a href="#all-2"><code>all</code> option</a> is <code>false</code> (the default value) - <code>execa.sync()</code> was used</p>
<h4 id="failed">failed</h4>
<p>Type: <code>boolean</code></p>
<p>Whether the process failed to run.</p>
<h4 id="timedout">timedOut</h4>
<p>Type: <code>boolean</code></p>
<p>Whether the process timed out.</p>
<h4 id="iscanceled">isCanceled</h4>
<p>Type: <code>boolean</code></p>
<p>Whether the process was canceled.</p>
<h4 id="killed">killed</h4>
<p>Type: <code>boolean</code></p>
<p>Whether the process was killed.</p>
<h4 id="signal">signal</h4>
<p>Type: <code>string | undefined</code></p>
<p>The name of the signal that was used to terminate the process. For example, <code>SIGFPE</code>.</p>
<p>If a signal terminated the process, this property is defined and included in the error message. Otherwise it is <code>undefined</code>.</p>
<h4 id="signaldescription">signalDescription</h4>
<p>Type: <code>string | undefined</code></p>
<p>A human-friendly description of the signal that was used to terminate the process. For example, <code>Floating point arithmetic error</code>.</p>
<p>If a signal terminated the process, this property is defined and included in the error message. Otherwise it is <code>undefined</code>. It is also <code>undefined</code> when the signal is very uncommon which should seldomly happen.</p>
<h4 id="message">message</h4>
<p>Type: <code>string</code></p>
<p>Error message when the child process failed to run. In addition to the <a href="#originalMessage">underlying error message</a>, it also contains some information related to why the child process errored.</p>
<p>The child process <a href="#stderr">stderr</a> then <a href="#stdout">stdout</a> are appended to the end, separated with newlines and not interleaved.</p>
<h4 id="shortmessage">shortMessage</h4>
<p>Type: <code>string</code></p>
<p>This is the same as the <a href="#message"><code>message</code> property</a> except it does not include the child process stdout/stderr.</p>
<h4 id="originalmessage">originalMessage</h4>
<p>Type: <code>string | undefined</code></p>
<p>Original error message. This is the same as the <code>message</code> property except it includes neither the child process stdout/stderr nor some additional information added by Execa.</p>
<p>This is <code>undefined</code> unless the child process exited due to an <code>error</code> event or a timeout.</p>
<h3 id="options">options</h3>
<p>Type: <code>object</code></p>
<h4 id="cleanup">cleanup</h4>
<p>Type: <code>boolean</code><br />
Default: <code>true</code></p>
<p>Kill the spawned process when the parent process exits unless either: - the spawned process is <a href="https://nodejs.org/api/child_process.html#child_process_options_detached"><code>detached</code></a> - the parent process is terminated abruptly, for example, with <code>SIGKILL</code> as opposed to <code>SIGTERM</code> or a normal exit</p>
<h4 id="preferlocal">preferLocal</h4>
<p>Type: <code>boolean</code><br />
Default: <code>false</code></p>
<p>Prefer locally installed binaries when looking for a binary to execute.<br />
If you <code>$ npm install foo</code>, you can then <code>execa('foo')</code>.</p>
<h4 id="localdir">localDir</h4>
<p>Type: <code>string</code><br />
Default: <code>process.cwd()</code></p>
<p>Preferred path to find locally installed binaries in (use with <code>preferLocal</code>).</p>
<h4 id="execpath">execPath</h4>
<p>Type: <code>string</code><br />
Default: <code>process.execPath</code> (Current Node.js executable)</p>
<p>Path to the Node.js executable to use in child processes.</p>
<p>This can be either an absolute path or a path relative to the <a href="#cwd"><code>cwd</code> option</a>.</p>
<p>Requires <a href="#preferlocal"><code>preferLocal</code></a> to be <code>true</code>.</p>
<p>For example, this can be used together with <a href="https://github.com/ehmicky/get-node"><code>get-node</code></a> to run a specific Node.js version in a child process.</p>
<h4 id="buffer">buffer</h4>
<p>Type: <code>boolean</code><br />
Default: <code>true</code></p>
<p>Buffer the output from the spawned process. When set to <code>false</code>, you must read the output of <a href="#stdout-1"><code>stdout</code></a> and <a href="#stderr-1"><code>stderr</code></a> (or <a href="#all"><code>all</code></a> if the <a href="#all-2"><code>all</code></a> option is <code>true</code>). Otherwise the returned promise will not be resolved/rejected.</p>
<p>If the spawned process fails, <a href="#stdout"><code>error.stdout</code></a>, <a href="#stderr"><code>error.stderr</code></a>, and <a href="#all"><code>error.all</code></a> will contain the buffered data.</p>
<h4 id="input">input</h4>
<p>Type: <code>string | Buffer | stream.Readable</code></p>
<p>Write some input to the <code>stdin</code> of your binary.<br />
Streams are not allowed when using the synchronous methods.</p>
<h4 id="stdin">stdin</h4>
<p>Type: <code>string | number | Stream | undefined</code><br />
Default: <code>pipe</code></p>
<p>Same options as <a href="https://nodejs.org/dist/latest-v6.x/docs/api/child_process.html#child_process_options_stdio"><code>stdio</code></a>.</p>
<h4 id="stdout-1">stdout</h4>
<p>Type: <code>string | number | Stream | undefined</code><br />
Default: <code>pipe</code></p>
<p>Same options as <a href="https://nodejs.org/dist/latest-v6.x/docs/api/child_process.html#child_process_options_stdio"><code>stdio</code></a>.</p>
<h4 id="stderr-1">stderr</h4>
<p>Type: <code>string | number | Stream | undefined</code><br />
Default: <code>pipe</code></p>
<p>Same options as <a href="https://nodejs.org/dist/latest-v6.x/docs/api/child_process.html#child_process_options_stdio"><code>stdio</code></a>.</p>
<h4 id="all-2">all</h4>
<p>Type: <code>boolean</code><br />
Default: <code>false</code></p>
<p>Add an <code>.all</code> property on the <a href="#all">promise</a> and the <a href="#all-1">resolved value</a>. The property contains the output of the process with <code>stdout</code> and <code>stderr</code> interleaved.</p>
<h4 id="reject">reject</h4>
<p>Type: <code>boolean</code><br />
Default: <code>true</code></p>
<p>Setting this to <code>false</code> resolves the promise with the error instead of rejecting it.</p>
<h4 id="stripfinalnewline">stripFinalNewline</h4>
<p>Type: <code>boolean</code><br />
Default: <code>true</code></p>
<p>Strip the final <a href="https://en.wikipedia.org/wiki/Newline">newline character</a> from the output.</p>
<h4 id="extendenv">extendEnv</h4>
<p>Type: <code>boolean</code><br />
Default: <code>true</code></p>
<p>Set to <code>false</code> if you donâ€™t want to extend the environment variables when providing the <code>env</code> property.</p>
<hr />
<p>Execa also accepts the below options which are the same as the options for <a href="https://nodejs.org/api/child_process.html#child_process_child_process_spawn_command_args_options"><code>child_process#spawn()</code></a>/<a href="https://nodejs.org/api/child_process.html#child_process_child_process_exec_command_options_callback"><code>child_process#exec()</code></a></p>
<h4 id="cwd">cwd</h4>
<p>Type: <code>string</code><br />
Default: <code>process.cwd()</code></p>
<p>Current working directory of the child process.</p>
<h4 id="env">env</h4>
<p>Type: <code>object</code><br />
Default: <code>process.env</code></p>
<p>Environment key-value pairs. Extends automatically from <code>process.env</code>. Set <a href="#extendenv"><code>extendEnv</code></a> to <code>false</code> if you donâ€™t want this.</p>
<h4 id="argv0">argv0</h4>
<p>Type: <code>string</code></p>
<p>Explicitly set the value of <code>argv[0]</code> sent to the child process. This will be set to <code>file</code> if not specified.</p>
<h4 id="stdio">stdio</h4>
<p>Type: <code>string | string[]</code><br />
Default: <code>pipe</code></p>
<p>Childâ€™s <a href="https://nodejs.org/api/child_process.html#child_process_options_stdio">stdio</a> configuration.</p>
<h4 id="serialization">serialization</h4>
<p>Type: <code>string</code><br />
Default: <code>'json'</code></p>
<p>Specify the kind of serialization used for sending messages between processes when using the <a href="#stdio"><code>stdio: 'ipc'</code></a> option or <a href="#execanodescriptpath-arguments-options"><code>execa.node()</code></a>: - <code>json</code>: Uses <code>JSON.stringify()</code> and <code>JSON.parse()</code>. - <code>advanced</code>: Uses <a href="https://nodejs.org/api/v8.html#v8_v8_serialize_value"><code>v8.serialize()</code></a></p>
<p>Requires Node.js <code>13.2.0</code> or later.</p>
<p><a href="https://nodejs.org/api/child_process.html#child_process_advanced_serialization">More info.</a></p>
<h4 id="detached">detached</h4>
<p>Type: <code>boolean</code></p>
<p>Prepare child to run independently of its parent process. Specific behavior <a href="https://nodejs.org/api/child_process.html#child_process_options_detached">depends on the platform</a>.</p>
<h4 id="uid">uid</h4>
<p>Type: <code>number</code></p>
<p>Sets the user identity of the process.</p>
<h4 id="gid">gid</h4>
<p>Type: <code>number</code></p>
<p>Sets the group identity of the process.</p>
<h4 id="shell">shell</h4>
<p>Type: <code>boolean | string</code><br />
Default: <code>false</code></p>
<p>If <code>true</code>, runs <code>file</code> inside of a shell. Uses <code>/bin/sh</code> on UNIX and <code>cmd.exe</code> on Windows. A different shell can be specified as a string. The shell should understand the <code>-c</code> switch on UNIX or <code>/d /s /c</code> on Windows.</p>
<p>We recommend against using this option since it is: - not cross-platform, encouraging shell-specific syntax. - slower, because of the additional shell interpretation. - unsafe, potentially allowing command injection.</p>
<h4 id="encoding">encoding</h4>
<p>Type: <code>string | null</code><br />
Default: <code>utf8</code></p>
<p>Specify the character encoding used to decode the <code>stdout</code> and <code>stderr</code> output. If set to <code>null</code>, then <code>stdout</code> and <code>stderr</code> will be a <code>Buffer</code> instead of a string.</p>
<h4 id="timeout">timeout</h4>
<p>Type: <code>number</code><br />
Default: <code>0</code></p>
<p>If timeout is greater than <code>0</code>, the parent will send the signal identified by the <code>killSignal</code> property (the default is <code>SIGTERM</code>) if the child runs longer than timeout milliseconds.</p>
<h4 id="maxbuffer">maxBuffer</h4>
<p>Type: <code>number</code><br />
Default: <code>100_000_000</code> (100 MB)</p>
<p>Largest amount of data in bytes allowed on <code>stdout</code> or <code>stderr</code>.</p>
<h4 id="killsignal">killSignal</h4>
<p>Type: <code>string | number</code><br />
Default: <code>SIGTERM</code></p>
<p>Signal value to be used when the spawned process will be killed.</p>
<h4 id="windowsverbatimarguments">windowsVerbatimArguments</h4>
<p>Type: <code>boolean</code><br />
Default: <code>false</code></p>
<p>If <code>true</code>, no quoting or escaping of arguments is done on Windows. Ignored on other platforms. This is set to <code>true</code> automatically when the <code>shell</code> option is <code>true</code>.</p>
<h4 id="windowshide">windowsHide</h4>
<p>Type: <code>boolean</code><br />
Default: <code>true</code></p>
<p>On Windows, do not create a new console window. Please note this also prevents <code>CTRL-C</code> <a href="https://github.com/nodejs/node/issues/29837">from working</a> on Windows.</p>
<h4 id="nodepath-for-.node-only">nodePath <em>(For <code>.node()</code> only)</em></h4>
<p>Type: <code>string</code><br />
Default: <a href="https://nodejs.org/api/process.html#process_process_execpath"><code>process.execPath</code></a></p>
<p>Node.js executable used to create the child process.</p>
<h4 id="nodeoptions-for-.node-only">nodeOptions <em>(For <code>.node()</code> only)</em></h4>
<p>Type: <code>string[]</code><br />
Default: <a href="https://nodejs.org/api/process.html#process_process_execargv"><code>process.execArgv</code></a></p>
<p>List of <a href="https://nodejs.org/api/cli.html#cli_options">CLI options</a> passed to the Node.js executable.</p>
<h2 id="tips">Tips</h2>
<h3 id="retry-on-error">Retry on error</h3>
<p>Gracefully handle failures by using automatic retries and exponential backoff with the <a href="https://github.com/sindresorhus/p-retry"><code>p-retry</code></a> package:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb8-1" title="1"><span class="kw">const</span> pRetry <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;p-retry&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-2" title="2"></a>
<a class="sourceLine" id="cb8-3" title="3"><span class="kw">const</span> run <span class="op">=</span> <span class="kw">async</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb8-4" title="4">    <span class="kw">const</span> results <span class="op">=</span> <span class="cf">await</span> <span class="at">execa</span>(<span class="st">&#39;curl&#39;</span><span class="op">,</span> [<span class="st">&#39;-sSL&#39;</span><span class="op">,</span> <span class="st">&#39;https://sindresorhus.com/unicorn&#39;</span>])<span class="op">;</span></a>
<a class="sourceLine" id="cb8-5" title="5">    <span class="cf">return</span> results<span class="op">;</span></a>
<a class="sourceLine" id="cb8-6" title="6"><span class="op">};</span></a>
<a class="sourceLine" id="cb8-7" title="7"></a>
<a class="sourceLine" id="cb8-8" title="8">(<span class="kw">async</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb8-9" title="9">    <span class="va">console</span>.<span class="at">log</span>(<span class="cf">await</span> <span class="at">pRetry</span>(run<span class="op">,</span> <span class="op">{</span><span class="dt">retries</span><span class="op">:</span> <span class="dv">5</span><span class="op">}</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb8-10" title="10"><span class="op">}</span>)()<span class="op">;</span></a></code></pre></div>
<h3 id="save-and-pipe-output-from-a-child-process">Save and pipe output from a child process</h3>
<p>Letâ€™s say you want to show the output of a child process in real-time while also saving it to a variable.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb9-1" title="1"><span class="kw">const</span> execa <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;execa&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb9-2" title="2"></a>
<a class="sourceLine" id="cb9-3" title="3"><span class="kw">const</span> subprocess <span class="op">=</span> <span class="at">execa</span>(<span class="st">&#39;echo&#39;</span><span class="op">,</span> [<span class="st">&#39;foo&#39;</span>])<span class="op">;</span></a>
<a class="sourceLine" id="cb9-4" title="4"><span class="va">subprocess</span>.<span class="va">stdout</span>.<span class="at">pipe</span>(<span class="va">process</span>.<span class="at">stdout</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb9-5" title="5"></a>
<a class="sourceLine" id="cb9-6" title="6">(<span class="kw">async</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb9-7" title="7">    <span class="kw">const</span> <span class="op">{</span>stdout<span class="op">}</span> <span class="op">=</span> <span class="cf">await</span> subprocess<span class="op">;</span></a>
<a class="sourceLine" id="cb9-8" title="8">    <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;child output:&#39;</span><span class="op">,</span> stdout)<span class="op">;</span></a>
<a class="sourceLine" id="cb9-9" title="9"><span class="op">}</span>)()<span class="op">;</span></a></code></pre></div>
<h3 id="redirect-output-to-a-file">Redirect output to a file</h3>
<div class="sourceCode" id="cb10"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb10-1" title="1"><span class="kw">const</span> execa <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;execa&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb10-2" title="2"></a>
<a class="sourceLine" id="cb10-3" title="3"><span class="kw">const</span> subprocess <span class="op">=</span> <span class="at">execa</span>(<span class="st">&#39;echo&#39;</span><span class="op">,</span> [<span class="st">&#39;foo&#39;</span>])</a>
<a class="sourceLine" id="cb10-4" title="4"><span class="va">subprocess</span>.<span class="va">stdout</span>.<span class="at">pipe</span>(<span class="va">fs</span>.<span class="at">createWriteStream</span>(<span class="st">&#39;stdout.txt&#39;</span>))</a></code></pre></div>
<h3 id="redirect-input-from-a-file">Redirect input from a file</h3>
<div class="sourceCode" id="cb11"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb11-1" title="1"><span class="kw">const</span> execa <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;execa&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb11-2" title="2"></a>
<a class="sourceLine" id="cb11-3" title="3"><span class="kw">const</span> subprocess <span class="op">=</span> <span class="at">execa</span>(<span class="st">&#39;cat&#39;</span>)</a>
<a class="sourceLine" id="cb11-4" title="4"><span class="va">fs</span>.<span class="at">createReadStream</span>(<span class="st">&#39;stdin.txt&#39;</span>).<span class="at">pipe</span>(<span class="va">subprocess</span>.<span class="at">stdin</span>)</a></code></pre></div>
<h3 id="execute-the-current-packages-binary">Execute the current packageâ€™s binary</h3>
<div class="sourceCode" id="cb12"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb12-1" title="1"><span class="kw">const</span> <span class="op">{</span>getBinPathSync<span class="op">}</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;get-bin-path&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb12-2" title="2"></a>
<a class="sourceLine" id="cb12-3" title="3"><span class="kw">const</span> binPath <span class="op">=</span> <span class="at">getBinPathSync</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb12-4" title="4"><span class="kw">const</span> subprocess <span class="op">=</span> <span class="at">execa</span>(binPath)<span class="op">;</span></a></code></pre></div>
<p><code>execa</code> can be combined with <a href="https://github.com/ehmicky/get-bin-path"><code>get-bin-path</code></a> to test the current packageâ€™s binary. As opposed to hard-coding the path to the binary, this validates that the <code>package.json</code> <code>bin</code> field is correctly set up.</p>
<h2 id="related">Related</h2>
<ul>
<li><a href="https://github.com/ehmicky/gulp-execa">gulp-execa</a> - Gulp plugin for <code>execa</code></li>
<li><a href="https://github.com/ehmicky/nvexeca">nvexeca</a> - Run <code>execa</code> using any Node.js version</li>
<li><a href="https://github.com/jorangreef/sudo-prompt">sudo-prompt</a> - Run commands with elevated privileges.</li>
</ul>
<h2 id="maintainers">Maintainers</h2>
<ul>
<li><a href="https://github.com/sindresorhus">Sindre Sorhus</a></li>
<li><span class="citation" data-cites="ehmicky">[@ehmicky]</span>(https://github.com/ehmicky)</li>
</ul>
<hr />
<div data-align="center">
<pre><code>&lt;b&gt;
    &lt;a href=&quot;https://tidelift.com/subscription/pkg/npm-execa?utm_source=npm-execa&amp;utm_medium=referral&amp;utm_campaign=readme&quot;&gt;Get professional support for this package with a Tidelift subscription&lt;/a&gt;
&lt;/b&gt;
&lt;br&gt;
&lt;sub&gt;
    Tidelift helps make open source sustainable for maintainers while giving companies&lt;br&gt;assurances about security, maintenance, and licensing for their dependencies.
&lt;/sub&gt;</code></pre>
</div>
</body>
</html>
