hast-to-hyperscript
===================

[![Build](https://img.shields.io/travis/syntax-tree/hast-to-hyperscript.svg)](https://travis-ci.org/syntax-tree/hast-to-hyperscript) [![Coverage](https://img.shields.io/codecov/c/github/syntax-tree/hast-to-hyperscript.svg)](https://codecov.io/github/syntax-tree/hast-to-hyperscript) [![Downloads](https://img.shields.io/npm/dm/hast-to-hyperscript.svg)](https://www.npmjs.com/package/hast-to-hyperscript) [![Size](https://img.shields.io/bundlephobia/minzip/hast-to-hyperscript.svg)](https://bundlephobia.com/result?p=hast-to-hyperscript) [![Sponsors](https://opencollective.com/unified/sponsors/badge.svg)](https://opencollective.com/unified) [![Backers](https://opencollective.com/unified/backers/badge.svg)](https://opencollective.com/unified) [![Chat](https://img.shields.io/badge/chat-discussions-success.svg)](https://github.com/syntax-tree/unist/discussions)

[**hast**](https://github.com/syntax-tree/hast) utility to transform a [*tree*](https://github.com/syntax-tree/unist#tree) to something else through a [hyperscript](https://github.com/hyperhype/hyperscript) interface.

Install
-------

[npm](https://docs.npmjs.com/cli/install):

    npm install hast-to-hyperscript

Use
---

    var toH = require('hast-to-hyperscript')
    var h = require('hyperscript')

    var tree = {
      type: 'element',
      tagName: 'p',
      properties: {id: 'alpha', className: ['bravo']},
      children: [
        {type: 'text', value: 'charlie '},
        {
          type: 'element',
          tagName: 'strong',
          properties: {style: 'color: red;'},
          children: [{type: 'text', value: 'delta'}]
        },
        {type: 'text', value: ' echo.'}
      ]
    }

    // Transform (`hyperscript` needs `outerHTML` to serialize):
    var doc = toH(h, tree).outerHTML

    console.log(doc)

Yields:

    <p class="bravo" id="alpha">charlie <strong>delta</strong> echo.</p>

API
---

### `toH(h, tree[, options|prefix])`

Transform a [**hast**](https://github.com/syntax-tree/hast) [*tree*](https://github.com/syntax-tree/unist#tree) to something else through a [hyperscript](https://github.com/hyperhype/hyperscript) interface.

###### Parameters

-   `h` ([`Function`](#function-hname-attrs-children)) — Hyperscript function
-   `tree` ([`Node`](https://github.com/syntax-tree/hast#nodes)) — [*Tree*](https://github.com/syntax-tree/unist#tree) to transform
-   `prefix` — Treated as `{prefix: prefix}`
-   `options.prefix` (`string` or `boolean`, optional) — Prefix to use as a prefix for keys passed in `attrs` to `h()`, this behavior is turned off by passing `false`, turned on by passing a `string`. By default, `h-` is used as a prefix if the given `h` is detected as being `virtual-dom/h` or `React.createElement`
-   `options.space` (enum, `'svg'` or `'html'`, default: `'html'`) — Whether `node` is in the `'html'` or `'svg'` space. If an `svg` element is found when inside the HTML space, `toH` automatically switches to the SVG space when entering the element, and switches back when exiting

###### Returns

`*` — Anything returned by invoking `h()`.

### `function h(name, attrs, children)`

Create an [*element*](https://github.com/syntax-tree/hast#element) from the given values.

###### Content

`h` is called with the node that is currently compiled as the context object (`this`).

###### Parameters

-   `name` (`string`) — Tag-name of element to create
-   `attrs` (`Object.<string>`) — Attributes to set
-   `children` (`Array.<* | string>`) — List of children (results of previously invoking `h()`)

###### Returns

`*` — Anything.

##### Caveats

###### Nodes

Most hyperscript implementations only support [*elements*](https://github.com/syntax-tree/hast#element) and [*texts*](https://github.com/syntax-tree/hast#text). [**hast**](https://github.com/syntax-tree/hast) supports [*doctype*](https://github.com/syntax-tree/hast#doctype), [*comment*](https://github.com/syntax-tree/hast#comment), and [*root*](https://github.com/syntax-tree/hast#root) as well.

-   If anything other than an `element` or `root` node is given, `toH` throws
-   If a [*root*](https://github.com/syntax-tree/hast#root) is given with no [*children*](https://github.com/syntax-tree/unist#child), an empty `div` [*element*](https://github.com/syntax-tree/hast#element) is returned
-   If a [*root*](https://github.com/syntax-tree/hast#root) is given with one [*element*](https://github.com/syntax-tree/hast#element) [*child*](https://github.com/syntax-tree/unist#child), that element is transformed
-   Otherwise, the children are wrapped in a `div` [*element*](https://github.com/syntax-tree/hast#element)

If unknown nodes (a node with a [*type*](https://github.com/syntax-tree/unist#type) not defined by [**hast**](https://github.com/syntax-tree/hast)) are found as [*descendants*](https://github.com/syntax-tree/unist#descendant) of the given [*tree*](https://github.com/syntax-tree/unist#tree), they are ignored: only [*text*](https://github.com/syntax-tree/hast#text) and [*element*](https://github.com/syntax-tree/hast#element) are transformed.

###### Support

Although there are lots of libraries mentioning support for a hyperscript-like interface, there are significant differences between them. For example, [`hyperscript`](https://github.com/hyperhype/hyperscript) doesn’t support classes in `attrs` and [`virtual-dom/h`](https://github.com/Matt-Esch/virtual-dom/tree/HEAD/virtual-hyperscript) needs an `attributes` object inside `attrs` most of the time. `toH` works around these differences for:

-   [`React.createElement`](https://reactjs.org/docs/glossary.html#react-elements)
-   Vue’s [`createElement`](https://vuejs.org/v2/guide/render-function.html#createElement-Arguments)
-   [`virtual-dom/h`](https://github.com/Matt-Esch/virtual-dom/tree/HEAD/virtual-hyperscript)
-   [`hyperscript`](https://github.com/hyperhype/hyperscript)

Security
--------

Use of `hast-to-hyperscript` can open you up to a [cross-site scripting (XSS)](https://en.wikipedia.org/wiki/Cross-site_scripting) attack if the hast tree is unsafe. Use [`hast-util-sanitize`](https://github.com/syntax-tree/hast-util-sanitize) to make the hast tree safe.

Related
-------

-   [`hastscript`](https://github.com/syntax-tree/hastscript) — Hyperscript compatible interface for creating nodes
-   [`hast-util-sanitize`](https://github.com/syntax-tree/hast-util-sanitize) — Sanitize nodes
-   [`hast-util-from-dom`](https://github.com/syntax-tree/hast-util-from-dom) — Transform a DOM tree to hast
-   [`unist-builder`](https://github.com/syntax-tree/unist-builder) — Create any unist tree
-   [`xastscript`](https://github.com/syntax-tree/xastscript) — Create a xast tree

Contribute
----------

See [`contributing.md` in `syntax-tree/.github`](https://github.com/syntax-tree/.github/blob/HEAD/contributing.md) for ways to get started. See [`support.md`](https://github.com/syntax-tree/.github/blob/HEAD/support.md) for ways to get help.

This project has a [code of conduct](https://github.com/syntax-tree/.github/blob/HEAD/code-of-conduct.md). By interacting with this repository, organization, or community you agree to abide by its terms.

License
-------

[MIT](license) © [Titus Wormer](https://wooorm.com)
