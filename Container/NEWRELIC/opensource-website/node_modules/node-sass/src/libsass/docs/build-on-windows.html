<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>build-on-windows</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<p>We support builds via MingGW and via Visual Studio Community 2013. Both should be considered experimental (MinGW was better tested)!</p>
<h2 id="building-via-minggw-makefiles">Building via MingGW (makefiles)</h2>
<p>First grab the latest <a href="http://sourceforge.net/projects/mingw/files/latest/download?source=files">MinGW for windows</a> installer. Once it is installed, you can click on continue or open the Installation Manager via <code>bin\mingw-get.exe</code>.</p>
<p>You need to have the following components installed: <img src="https://cloud.githubusercontent.com/assets/282293/5525466/947bf396-89e6-11e4-841d-4aa916f14de1.png" alt="Visualization of components installed in the interface" /></p>
<p>Next we need to install <a href="https://msysgit.github.io/">git for windows</a>. You probably want to check the option to add it to the global path, but you do not need to install the unix tools.</p>
<p>If you want to run the spec test-suite you also need <a href="http://rubyinstaller.org/">ruby</a> and a few gems available. Grab the <a href="http://rubyinstaller.org/">latest installer</a> and make sure to add it the global path. Then install the missing gems:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb1-1" title="1"><span class="ex">gem</span> install minitest</a></code></pre></div>
<h3 id="mount-the-mingw-root-directory">Mount the mingw root directory</h3>
<p>As mentioned in the <a href="http://www.mingw.org/wiki/Getting_Started#toc5">MinGW Getting Started</a> guide, you should edit <code>C:\MinGW\msys\1.0\etc\fstab</code> to contain the following line:</p>
<pre><code>C:\MinGW   /mingw</code></pre>
<h3 id="starting-a-minggw-console">Starting a “MingGW” console</h3>
<p>Create a batch file with this content:</p>
<pre class="bat"><code>@echo off
set PATH=C:\MinGW\bin;%PATH%
REM only needed if not already available
set PATH=%PROGRAMFILES%\git\bin;%PATH%
REM C:\MinGW\msys\1.0\msys.bat
cmd</code></pre>
<p>Execute it and make sure these commands can be called: <code>git</code>, <code>mingw32-make</code>, <code>rm</code> and <code>gcc</code>! Once this is all set, you should be ready to compile <code>libsass</code>!</p>
<h3 id="get-the-sources">Get the sources</h3>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb4-1" title="1"><span class="co"># using git is preferred</span></a>
<a class="sourceLine" id="cb4-2" title="2"><span class="fu">git</span> clone https://github.com/sass/libsass.git</a>
<a class="sourceLine" id="cb4-3" title="3"><span class="co"># only needed for sassc and/or testsuite</span></a>
<a class="sourceLine" id="cb4-4" title="4"><span class="fu">git</span> clone https://github.com/sass/sassc.git libsass/sassc</a>
<a class="sourceLine" id="cb4-5" title="5"><span class="fu">git</span> clone https://github.com/sass/sass-spec.git libsass/sass-spec</a></code></pre></div>
<h3 id="decide-for-static-or-shared-library">Decide for static or shared library</h3>
<p><code>libsass</code> can be built and linked as a <code>static</code> or as a <code>shared</code> library. The default is <code>static</code>. To change it you can set the <code>BUILD</code> environment variable:</p>
<pre class="bat"><code>set BUILD=&quot;shared&quot;</code></pre>
<h3 id="compile-the-library">Compile the library</h3>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb6-1" title="1"><span class="ex">mingw32-make</span> -C libsass</a></code></pre></div>
<h3 id="results-can-be-found-in">Results can be found in</h3>
<div class="sourceCode" id="cb7"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb7-1" title="1">$ <span class="fu">ls</span> libsass/lib</a>
<a class="sourceLine" id="cb7-2" title="2"><span class="ex">libsass.a</span>  libsass.dll  libsass.so</a></code></pre></div>
<h3 id="run-the-spec-test-suite">Run the spec test-suite</h3>
<div class="sourceCode" id="cb8"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb8-1" title="1"><span class="ex">mingw32-make</span> -C libsass test_build</a></code></pre></div>
<h2 id="building-via-minggw-64bit-makefiles">Building via MingGW 64bit (makefiles)</h2>
<p>Building libass to dll on window 64bit.</p>
<ul>
<li><p>downloads <a href="http://sourceforge.net/projects/mingw-w64/files/Toolchains%20targetting%20Win64/Personal%20Builds/mingw-builds/4.9.2/threads-win32/seh/x86_64-4.9.2-release-win32-seh-rt_v3-rev0.7z/download">MinGW64 for windows7 64bit</a> , and unzip to “C:64”.</p></li>
<li><p>Create a batch file with this content:</p></li>
</ul>
<pre class="bat"><code>@echo off
set PATH=C:\mingw64\bin;%PATH%
set CC=gcc
REM only needed if not already available
set PATH=%PROGRAMFILES%\Git\bin;%PATH%
REM C:\MinGW\msys\1.0\msys.bat
cmd</code></pre>
<ul>
<li>By default , mingw64 dll will depends on “​m​i​n​g​w​m​1​0​.​d​l​l​、​ ​l​i​b​g​c​c​<em>​s​</em>​d​w​2​-​1​.​d​l​l​” , we can modify Makefile to fix this:(add “-static”)</li>
</ul>
<div class="sourceCode" id="cb10"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb10-1" title="1"><span class="ex">lib</span>/libsass.dll: <span class="va">$(</span><span class="ex">COBJECTS</span><span class="va">)</span> <span class="va">$(</span><span class="ex">OBJECTS</span><span class="va">)</span> <span class="va">$(</span><span class="ex">RCOBJECTS</span><span class="va">)</span></a>
<a class="sourceLine" id="cb10-2" title="2">    <span class="va">$(</span><span class="ex">MKDIR</span><span class="va">)</span> <span class="ex">lib</span></a>
<a class="sourceLine" id="cb10-3" title="3">    <span class="va">$(</span><span class="ex">CXX</span><span class="va">)</span> <span class="ex">-shared</span> <span class="va">$(</span><span class="ex">LDFLAGS</span><span class="va">)</span> -o <span class="va">$@</span> <span class="va">$(</span><span class="ex">COBJECTS</span><span class="va">)</span> <span class="va">$(</span><span class="ex">OBJECTS</span><span class="va">)</span> <span class="va">$(</span><span class="ex">RCOBJECTS</span><span class="va">)</span> <span class="va">$(</span><span class="ex">LDLIBS</span><span class="va">)</span> -s -static -Wl,--subsystem,windows,--out-implib,lib/libsass.a</a></code></pre></div>
<ul>
<li>Compile the library</li>
</ul>
<div class="sourceCode" id="cb11"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb11-1" title="1"><span class="ex">mingw32-make</span> -C libsass</a></code></pre></div>
<p>By the way , if you are using java jna , <a href="http://jnaerator.googlecode.com/">JNAerator</a> is a good tool.</p>
<h2 id="building-via-visual-studio-community-2013">Building via Visual Studio Community 2013</h2>
<p>Open a Visual Studio 2013 command prompt: - <code>VS2013 x86 Native Tools Command Prompt</code></p>
<p>Note: When I installed the community edition, I only got the 2012 command prompts. I copied them from the Startmenu to the Desktop and adjusted the paths from <code>Visual Studio 11.0</code> to <code>Visual Studio 12.0</code>. Since <code>libsass</code> uses some <code>C++11</code> features, you need at least a MSVC 2013 compiler (v120).</p>
<h3 id="get-the-source">Get the source</h3>
<div class="sourceCode" id="cb12"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb12-1" title="1"><span class="co"># using git is preferred</span></a>
<a class="sourceLine" id="cb12-2" title="2"><span class="fu">git</span> clone https://github.com/sass/libsass.git</a>
<a class="sourceLine" id="cb12-3" title="3"><span class="fu">git</span> clone https://github.com/sass/sassc.git libsass/sassc</a>
<a class="sourceLine" id="cb12-4" title="4"><span class="co"># only needed if you want to run the testsuite</span></a>
<a class="sourceLine" id="cb12-5" title="5"><span class="fu">git</span> clone https://github.com/sass/sass-spec.git libsass/sass-spec</a></code></pre></div>
<h3 id="compile-sassc">Compile sassc</h3>
<p>Sometimes <code>msbuild</code> seems not available from the command prompt. Just search for it and add it to the global path. It seems to be included in the .net folders too.</p>
<pre class="bat"><code>cd libsass
REM set PATH=%PATH%;%PROGRAMFILES%\MSBuild\12.0\Bin
msbuild /m:4 /p:Configuration=Release win\libsass.sln
REM running the spec test-suite manually (needs ruby and minitest gem)
ruby sass-spec\sass-spec.rb -V 3.5 -c win\bin\sassc.exe -s --impl libsass sass-spec/spec
cd ..</code></pre>
</body>
</html>
