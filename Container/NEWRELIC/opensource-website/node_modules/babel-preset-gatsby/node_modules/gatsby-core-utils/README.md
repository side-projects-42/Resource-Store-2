`gatsby-core-utils`
===================

A list of utilities used in multiple gatsby packages.

Usage
-----

    npm install gatsby-core-utils

### createContentDigest

Encrypts an input using md5 hash of hexadecimal digest.

    const { createContentDigest } = require("gatsby-core-utils")

    const options = {
      key: "value",
      foo: "bar",
    }

    const digest = createContentDigest(options)
    // ...

### cpuCoreCount

Calculate the number of CPU cores on the current machine

This function can be controlled by an env variable `GATSBY_CPU_COUNT` setting the first argument to true.

<table><thead><tr class="header"><th>value</th><th>description</th></tr></thead><tbody><tr class="odd"><td></td><td>Counts amount of real cores by running a shell command</td></tr><tr class="even"><td>logical-cores</td><td><code>require("os").cpus()</code> to count all virtual cores</td></tr><tr class="odd"><td>any number</td><td>Sets cpu count to that specific number</td></tr></tbody></table>

    const { cpuCoreCount } = require("gatsby-core-utils")

    const coreCount = cpuCoreCount(false)
    // ...

    const { cpuCoreCount } = require("gatsby-core-utils")
    process.env.GATSBY_CPU_COUNT = "logical-cores"

    const coreCount = cpuCoreCount()
    // ...

### joinPath

A utility that joins paths with a `/` on windows and unix-type platforms. This can also be used for URL concatenation.

    const { joinPath } = require("gatsby-core-utils")

    const BASEPATH = "/mybase/"
    const pathname = "./gatsby/is/awesome"
    const url = joinPath(BASEPATH, pathname)
    // ...

### isCI

A utility that enhances `isCI` from ’ci-info\` with support for Vercel and Heroku detection

    const { isCI } = require("gatsby-core-utils")

    if (isCI()) {
      // execute CI-specific code
    }
    // ...

### getCIName

A utility that returns the name of the current CI environment if available, `null` otherwise

    const { getCIName } = require("gatsby-core-utils")

    const CI_NAME = getCIName()
    console.log({ CI_NAME })
    // {CI_NAME: null}, or
    // {CI_NAME: "Vercel"}
    // ...

### createRequireFromPath

A cross-version polyfill for Node’s [`Module.createRequire`](https://nodejs.org/api/modules.html#modules_module_createrequire_filename).

    const { createRequireFromPath } = require("gatsby-core-utils")

    const requireUtil = createRequireFromPath("../src/utils/")

    // Require `../src/utils/some-tool`
    requireUtil("./some-tool")
    // ...
