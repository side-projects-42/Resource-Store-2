<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>README</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<p><a href="#installation">Installation</a> | <a href="#overview">Overview</a> | <a href="#tokenization">Tokenization</a> | <a href="#stemming">Stemming</a> | <a href="#stop-words">Stop Words</a> | <a href="#configuring-the-search-index">Search Index</a> | <a href="#configuring-the-index-strategy">Index Strategy</a></p>
<h1 id="js-search-client-side-search-library">Js Search: client-side search library</h1>
<p>Js Search enables efficient client-side searches of JavaScript and JSON objects. It is ES5 compatible and does not require jQuery or any other third-party libraries.</p>
<p>Js Search began as a lightweight implementation of <a href="http://lunrjs.com/">Lunr JS</a>, offering runtime performance improvements and a smaller file size. It has since expanded to include a rich feature set- supporting stemming, stop-words, and TF-IDF ranking.</p>
<p>Here are some JS Perf benchmarks comparing the two search libraries. (Thanks to <a href="https://github.com/olivernn">olivernn</a> for tweaking the Lunr side for a better comparison!)</p>
<ul>
<li><a href="http://jsperf.com/js-search-vs-lunr-js-build-search-index/5">Initial building of search index</a></li>
<li><a href="http://jsperf.com/js-search-vs-lunr-js-running-searches/5">Running a search</a></li>
</ul>
<p>If you’re looking for a simpler, web-worker optimized JS search utility check out <a href="https://github.com/bvaughn/js-worker-search">js-worker-search</a>.</p>
<h3 id="installation">Installation</h3>
<p>You can install using either <a href="http://bower.io/">Bower</a> or <a href="https://www.npmjs.com/">NPM</a> like so:</p>
<pre class="shell"><code>npm install js-search
bower install js-search</code></pre>
<h3 id="overview">Overview</h3>
<p>At a high level you configure Js Search by telling it which fields it should index for searching and then add the objects to be searched.</p>
<p>For example, a simple use of JS Search would be as follows:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1"><span class="im">import</span> <span class="op">*</span> <span class="im">as</span> JsSearch <span class="im">from</span> <span class="st">&#39;js-search&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-2" title="2"></a>
<a class="sourceLine" id="cb2-3" title="3"><span class="kw">var</span> theGreatGatsby <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb2-4" title="4">  <span class="dt">isbn</span><span class="op">:</span> <span class="st">&#39;9781597226769&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-5" title="5">  <span class="dt">title</span><span class="op">:</span> <span class="st">&#39;The Great Gatsby&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-6" title="6">  <span class="dt">author</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb2-7" title="7">    <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;F. Scott Fitzgerald&#39;</span></a>
<a class="sourceLine" id="cb2-8" title="8">  <span class="op">},</span></a>
<a class="sourceLine" id="cb2-9" title="9">  <span class="dt">tags</span><span class="op">:</span> [<span class="st">&#39;book&#39;</span><span class="op">,</span> <span class="st">&#39;inspirational&#39;</span>]</a>
<a class="sourceLine" id="cb2-10" title="10"><span class="op">};</span></a>
<a class="sourceLine" id="cb2-11" title="11"><span class="kw">var</span> theDaVinciCode <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb2-12" title="12">  <span class="dt">isbn</span><span class="op">:</span> <span class="st">&#39;0307474275&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-13" title="13">  <span class="dt">title</span><span class="op">:</span> <span class="st">&#39;The DaVinci Code&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-14" title="14">  <span class="dt">author</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb2-15" title="15">    <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;Dan Brown&#39;</span></a>
<a class="sourceLine" id="cb2-16" title="16">  <span class="op">},</span></a>
<a class="sourceLine" id="cb2-17" title="17">  <span class="dt">tags</span><span class="op">:</span> [<span class="st">&#39;book&#39;</span><span class="op">,</span> <span class="st">&#39;mystery&#39;</span>]</a>
<a class="sourceLine" id="cb2-18" title="18"><span class="op">};</span></a>
<a class="sourceLine" id="cb2-19" title="19"><span class="kw">var</span> angelsAndDemons <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb2-20" title="20">  <span class="dt">isbn</span><span class="op">:</span> <span class="st">&#39;074349346X&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-21" title="21">  <span class="dt">title</span><span class="op">:</span> <span class="st">&#39;Angels &amp; Demons&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-22" title="22">  <span class="dt">author</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb2-23" title="23">    <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;Dan Brown&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-24" title="24">  <span class="op">},</span></a>
<a class="sourceLine" id="cb2-25" title="25">  <span class="dt">tags</span><span class="op">:</span> [<span class="st">&#39;book&#39;</span><span class="op">,</span> <span class="st">&#39;mystery&#39;</span>]</a>
<a class="sourceLine" id="cb2-26" title="26"><span class="op">};</span></a>
<a class="sourceLine" id="cb2-27" title="27"></a>
<a class="sourceLine" id="cb2-28" title="28"><span class="kw">var</span> search <span class="op">=</span> <span class="kw">new</span> <span class="va">JsSearch</span>.<span class="at">Search</span>(<span class="st">&#39;isbn&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-29" title="29"><span class="va">search</span>.<span class="at">addIndex</span>(<span class="st">&#39;title&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-30" title="30"><span class="va">search</span>.<span class="at">addIndex</span>([<span class="st">&#39;author&#39;</span><span class="op">,</span> <span class="st">&#39;name&#39;</span>])<span class="op">;</span></a>
<a class="sourceLine" id="cb2-31" title="31"><span class="va">search</span>.<span class="at">addIndex</span>(<span class="st">&#39;tags&#39;</span>)</a>
<a class="sourceLine" id="cb2-32" title="32"></a>
<a class="sourceLine" id="cb2-33" title="33"><span class="va">search</span>.<span class="at">addDocuments</span>([theGreatGatsby<span class="op">,</span> theDaVinciCode<span class="op">,</span> angelsAndDemons])<span class="op">;</span></a>
<a class="sourceLine" id="cb2-34" title="34"></a>
<a class="sourceLine" id="cb2-35" title="35"><span class="va">search</span>.<span class="at">search</span>(<span class="st">&#39;The&#39;</span>)<span class="op">;</span>    <span class="co">// [theGreatGatsby, theDaVinciCode]</span></a>
<a class="sourceLine" id="cb2-36" title="36"><span class="va">search</span>.<span class="at">search</span>(<span class="st">&#39;scott&#39;</span>)<span class="op">;</span>  <span class="co">// [theGreatGatsby]</span></a>
<a class="sourceLine" id="cb2-37" title="37"><span class="va">search</span>.<span class="at">search</span>(<span class="st">&#39;dan&#39;</span>)<span class="op">;</span>    <span class="co">// [angelsAndDemons, theDaVinciCode]</span></a>
<a class="sourceLine" id="cb2-38" title="38"><span class="va">search</span>.<span class="at">search</span>(<span class="st">&#39;mystery&#39;</span>) <span class="co">// [angelsAndDemons, theDaVinciCode]</span></a></code></pre></div>
<h3 id="tokenization">Tokenization</h3>
<p>Tokenization is the process of breaking text (e.g. sentences) into smaller, searchable tokens (e.g. words or parts of words). Js Search provides a basic tokenizer that should work well for English but you can provide your own like so:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="va">search</span>.<span class="at">tokenizer</span> <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb3-2" title="2">  <span class="at">tokenize</span>( text <span class="co">/* string */</span> ) <span class="op">{</span></a>
<a class="sourceLine" id="cb3-3" title="3">    <span class="co">// Convert text to an Array of strings and return the Array</span></a>
<a class="sourceLine" id="cb3-4" title="4">  <span class="op">}</span></a>
<a class="sourceLine" id="cb3-5" title="5"><span class="op">};</span></a></code></pre></div>
<h3 id="stemming">Stemming</h3>
<p>Stemming is the process of reducing search tokens to their root (or “stem”) so that searches for different forms of a word will still yield results. For example “search”, “searching” and “searched” can all be reduced to the stem “search”.</p>
<p>Js Search does not implement its own stemming library but it does support stemming through the use of third-party libraries.</p>
<p>To enable stemming, use the <code>StemmingTokenizer</code> like so:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1"><span class="kw">var</span> stemmer <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;porter-stemmer&#39;</span>).<span class="at">stemmer</span><span class="op">;</span></a>
<a class="sourceLine" id="cb4-2" title="2"></a>
<a class="sourceLine" id="cb4-3" title="3"><span class="va">search</span>.<span class="at">tokenizer</span> <span class="op">=</span></a>
<a class="sourceLine" id="cb4-4" title="4">    <span class="kw">new</span> <span class="va">JsSearch</span>.<span class="at">StemmingTokenizer</span>(</a>
<a class="sourceLine" id="cb4-5" title="5">        stemmer<span class="op">,</span> <span class="co">// Function should accept a string param and return a string</span></a>
<a class="sourceLine" id="cb4-6" title="6">        <span class="kw">new</span> <span class="va">JsSearch</span>.<span class="at">SimpleTokenizer</span>())<span class="op">;</span></a></code></pre></div>
<h3 id="stop-words">Stop Words</h3>
<p>Stop words are very common (e.g. a, an, and, the, of) and are often not semantically meaningful. By default Js Search does not filter these words, but filtering can be enabled by using the <code>StopWordsTokenizer</code> like so:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb5-1" title="1"><span class="va">search</span>.<span class="at">tokenizer</span> <span class="op">=</span></a>
<a class="sourceLine" id="cb5-2" title="2">    <span class="kw">new</span> <span class="va">JsSearch</span>.<span class="at">StopWordsTokenizer</span>(</a>
<a class="sourceLine" id="cb5-3" title="3">        <span class="kw">new</span> <span class="va">JsSearch</span>.<span class="at">SimpleTokenizer</span>())<span class="op">;</span></a></code></pre></div>
<p>By default Js Search uses a slightly modified version of the Google History stop words listed on <a href="http://www.ranks.nl/stopwords">www.ranks.nl/stopwords</a>. You can modify this list of stop words by adding or removing values from the <code>JsSearch.StopWordsMap</code> object like so:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb6-1" title="1"><span class="va">JsSearch</span>.<span class="va">StopWordsMap</span>.<span class="at">the</span> <span class="op">=</span> <span class="kw">false</span><span class="op">;</span> <span class="co">// Do not treat &quot;the&quot; as a stop word</span></a>
<a class="sourceLine" id="cb6-2" title="2"><span class="va">JsSearch</span>.<span class="va">StopWordsMap</span>.<span class="at">bob</span> <span class="op">=</span> <span class="kw">true</span><span class="op">;</span>  <span class="co">// Treat &quot;bob&quot; as a stop word</span></a></code></pre></div>
<p>Note that stop words are lower case and so using a case-sensitive sanitizer may prevent some stop words from being removed.</p>
<h3 id="configuring-the-search-index">Configuring the search index</h3>
<p>There are two search indices packaged with <code>js-search</code>.</p>
<p>Term frequency–inverse document frequency (or TF-IDF) is a numeric statistic intended to reflect how important a word (or words) are to a document within a corpus. The TF-IDF value increases proportionally to the number of times a word appears in the document but is offset by the frequency of the word in the corpus. This helps to adjust for the fact that some words (e.g. and, or, the) appear more frequently than others.</p>
<p>By default Js Search supports TF-IDF ranking but this can be disabled for performance reasons if it is not required. You can specify an alternate <a href="https://github.com/bvaughn/js-search/blob/master/source/SearchIndex/SearchIndex.js"><code>ISearchIndex</code></a> implementation in order to disable TF-IDF, like so:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb7-1" title="1"><span class="co">// default</span></a>
<a class="sourceLine" id="cb7-2" title="2"><span class="va">search</span>.<span class="at">searchIndex</span> <span class="op">=</span> <span class="kw">new</span> <span class="va">JsSearch</span>.<span class="at">TfIdfSearchIndex</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb7-3" title="3"></a>
<a class="sourceLine" id="cb7-4" title="4"><span class="co">// Search index capable of returning results matching a set of tokens</span></a>
<a class="sourceLine" id="cb7-5" title="5"><span class="co">// but without any meaningful rank or order.</span></a>
<a class="sourceLine" id="cb7-6" title="6"><span class="va">search</span>.<span class="at">searchIndex</span> <span class="op">=</span> <span class="kw">new</span> <span class="va">JsSearch</span>.<span class="at">UnorderedSearchIndex</span>()<span class="op">;</span></a></code></pre></div>
<h3 id="configuring-the-index-strategy">Configuring the index strategy</h3>
<p>There are three index strategies packaged with <code>js-search</code>.</p>
<p><code>PrefixIndexStrategy</code> indexes for prefix searches. (e.g. the term “cat” is indexed as “c”, “ca”, and “cat” allowing prefix search lookups).</p>
<p><code>AllSubstringsIndexStrategy</code> indexes for all substrings. In other word “c”, “ca”, “cat”, “a”, “at”, and “t” all match “cat”.</p>
<p><code>ExactWordIndexStrategy</code> indexes for exact word matches. For example “bob” will match “bob jones” (but “bo” will not).</p>
<p>By default Js Search supports prefix indexing but this is configurable. You can specify an alternate <a href="https://github.com/bvaughn/js-search/blob/master/source/IndexStrategy/IndexStrategy.js"><code>IIndexStrategy</code></a> implementation in order to disable prefix indexing, like so:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb8-1" title="1"><span class="co">// default</span></a>
<a class="sourceLine" id="cb8-2" title="2"><span class="va">search</span>.<span class="at">indexStrategy</span> <span class="op">=</span> <span class="kw">new</span> <span class="va">JsSearch</span>.<span class="at">PrefixIndexStrategy</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb8-3" title="3"></a>
<a class="sourceLine" id="cb8-4" title="4"><span class="co">// this index strategy is built for all substrings matches.</span></a>
<a class="sourceLine" id="cb8-5" title="5"><span class="va">search</span>.<span class="at">indexStrategy</span> <span class="op">=</span> <span class="kw">new</span> <span class="va">JsSearch</span>.<span class="at">AllSubstringsIndexStrategy</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb8-6" title="6"></a>
<a class="sourceLine" id="cb8-7" title="7"><span class="co">// this index strategy is built for exact word matches.</span></a>
<a class="sourceLine" id="cb8-8" title="8"><span class="va">search</span>.<span class="at">indexStrategy</span> <span class="op">=</span> <span class="kw">new</span> <span class="va">JsSearch</span>.<span class="at">ExactWordIndexStrategy</span>()<span class="op">;</span></a></code></pre></div>
</body>
</html>
