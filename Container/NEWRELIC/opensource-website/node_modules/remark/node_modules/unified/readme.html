<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>readme</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<h1 id="unifiedlogo"><a href="https://unified.js.org/"><img src="https://raw.githubusercontent.com/unifiedjs/unified/39917ea/logo.svg?sanitize=true" alt="unified" /></a></h1>
<p><a href="https://travis-ci.org/unifiedjs/unified"><img src="https://img.shields.io/travis/unifiedjs/unified/master.svg" alt="Travis" /></a> <a href="https://codecov.io/github/unifiedjs/unified"><img src="https://img.shields.io/codecov/c/github/unifiedjs/unified.svg" alt="Coverage" /></a> <a href="https://www.npmjs.com/package/unified"><img src="https://img.shields.io/npm/dm/unified.svg" alt="Downloads" /></a> <a href="https://bundlephobia.com/result?p=unified"><img src="https://img.shields.io/bundlephobia/minzip/unified.svg" alt="Size" /></a> <a href="https://spectrum.chat/unified"><img src="https://img.shields.io/badge/join%20the%20community-on%20spectrum-7b16ff.svg" alt="Chat" /></a></p>
<p><strong>unified</strong> is an interface for processing text using syntax trees. It’s what powers <a href="https://github.com/remarkjs/remark"><strong>remark</strong></a>, <a href="https://github.com/retextjs/retext"><strong>retext</strong></a>, and <a href="https://github.com/rehypejs/rehype"><strong>rehype</strong></a>, but it also allows for processing between multiple syntaxes.</p>
<p><strong>unified</strong> enabled new exciting projects like <a href="https://www.gatsbyjs.org">Gatsby</a> to pull in markdown, <a href="https://mdxjs.com">MDX</a> to embed <a href="https://reactjs.org/docs/jsx-in-depth.html">JSX</a>, and <a href="https://prettier.io">Prettier</a> to format it. It’s used to check code for <a href="https://storybook.js.org">Storybook</a>, <a href="https://github.com/devtools-html/debugger.html">debugger.html</a> (<a href="https://www.mozilla.org">Mozilla</a>), and <a href="https://opensource.guide">opensource.guide</a> (<a href="https://github.com">GitHub</a>).</p>
<ul>
<li>To read about what we’re up to, follow us on <a href="https://medium.com/unifiedjs">Medium</a> and <a href="https://twitter.com/unifiedjs">Twitter</a></li>
<li>For a less technical and more practical introduction to unified, visit <a href="https://unified.js.org"><code>unified.js.org</code></a> and try its introductory <a href="https://unified.js.org/#guides">Guides</a></li>
<li>To help us out, see <a href="contributing.md"><code>contributing.md</code></a>, or become a backer or sponsor on <a href="https://opencollective.com/unified">Open Collective</a></li>
</ul>
<hr />
<!--lint ignore no-html-->
<p><strong>Announcing the unified collective! 🎉 <a href="https://medium.com/unifiedjs">Read more about it on Medium »</a></strong></p>
<h2 id="sponsors">Sponsors</h2>
<!--lint ignore no-html maximum-line-length-->
<table>
<tr valign="top">
<td width="20%" align="center">
<a href="https://zeit.co"><img src="https://avatars1.githubusercontent.com/u/14985020?s=400&v=4"></a> <br><br>🥇 <a href="https://zeit.co">ZEIT</a>
</td>
<td width="20%" align="center">
<a href="https://www.gatsbyjs.org"><img src="https://avatars1.githubusercontent.com/u/12551863?s=400&v=4"></a> <br><br>🥇 <a href="https://www.gatsbyjs.org">Gatsby</a>
</td>
<td width="20%" align="center">
<a href="https://compositor.io"><img src="https://avatars1.githubusercontent.com/u/19245838?s=400&v=4"></a> <br><br>🥉 <a href="https://compositor.io">Compositor</a>
</td>
<td width="20%" align="center">
<a href="https://www.holloway.com"><img src="https://avatars1.githubusercontent.com/u/35904294?s=400&v=4"></a> <br><br> <a href="https://www.holloway.com">Holloway</a>
</td>
<td width="20%" align="center">
<br><br><br><br> <a href="https://opencollective.com/unified"><strong>You?</strong>
</td>
</tr>
</table>
<h2 id="installation">Installation</h2>
<p><a href="https://docs.npmjs.com/cli/install">npm</a>:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb1-1" title="1"><span class="ex">npm</span> install unified</a></code></pre></div>
<h2 id="usage">Usage</h2>
<div class="sourceCode" id="cb2"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1"><span class="kw">var</span> unified <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;unified&#39;</span>)</a>
<a class="sourceLine" id="cb2-2" title="2"><span class="kw">var</span> markdown <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;remark-parse&#39;</span>)</a>
<a class="sourceLine" id="cb2-3" title="3"><span class="kw">var</span> remark2rehype <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;remark-rehype&#39;</span>)</a>
<a class="sourceLine" id="cb2-4" title="4"><span class="kw">var</span> doc <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;rehype-document&#39;</span>)</a>
<a class="sourceLine" id="cb2-5" title="5"><span class="kw">var</span> format <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;rehype-format&#39;</span>)</a>
<a class="sourceLine" id="cb2-6" title="6"><span class="kw">var</span> html <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;rehype-stringify&#39;</span>)</a>
<a class="sourceLine" id="cb2-7" title="7"><span class="kw">var</span> report <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;vfile-reporter&#39;</span>)</a>
<a class="sourceLine" id="cb2-8" title="8"></a>
<a class="sourceLine" id="cb2-9" title="9"><span class="at">unified</span>()</a>
<a class="sourceLine" id="cb2-10" title="10">  .<span class="at">use</span>(markdown)</a>
<a class="sourceLine" id="cb2-11" title="11">  .<span class="at">use</span>(remark2rehype)</a>
<a class="sourceLine" id="cb2-12" title="12">  .<span class="at">use</span>(doc)</a>
<a class="sourceLine" id="cb2-13" title="13">  .<span class="at">use</span>(format)</a>
<a class="sourceLine" id="cb2-14" title="14">  .<span class="at">use</span>(html)</a>
<a class="sourceLine" id="cb2-15" title="15">  .<span class="at">process</span>(<span class="st">&#39;# Hello world!&#39;</span><span class="op">,</span> <span class="kw">function</span>(err<span class="op">,</span> file) <span class="op">{</span></a>
<a class="sourceLine" id="cb2-16" title="16">    <span class="va">console</span>.<span class="at">error</span>(<span class="at">report</span>(err <span class="op">||</span> file))</a>
<a class="sourceLine" id="cb2-17" title="17">    <span class="va">console</span>.<span class="at">log</span>(<span class="at">String</span>(file))</a>
<a class="sourceLine" id="cb2-18" title="18">  <span class="op">}</span>)</a></code></pre></div>
<p>Yields:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb3-1" title="1">no issues found</a>
<a class="sourceLine" id="cb3-2" title="2"><span class="dt">&lt;!doctype </span>html<span class="dt">&gt;</span></a>
<a class="sourceLine" id="cb3-3" title="3"><span class="kw">&lt;html</span><span class="ot"> lang=</span><span class="st">&quot;en&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb3-4" title="4">  <span class="kw">&lt;head&gt;</span></a>
<a class="sourceLine" id="cb3-5" title="5">    <span class="kw">&lt;meta</span><span class="ot"> charset=</span><span class="st">&quot;utf-8&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb3-6" title="6">    <span class="kw">&lt;meta</span><span class="ot"> name=</span><span class="st">&quot;viewport&quot;</span><span class="ot"> content=</span><span class="st">&quot;width=device-width, initial-scale=1&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb3-7" title="7">  <span class="kw">&lt;/head&gt;</span></a>
<a class="sourceLine" id="cb3-8" title="8">  <span class="kw">&lt;body&gt;</span></a>
<a class="sourceLine" id="cb3-9" title="9">    <span class="kw">&lt;h1&gt;</span>Hello world!<span class="kw">&lt;/h1&gt;</span></a>
<a class="sourceLine" id="cb3-10" title="10">  <span class="kw">&lt;/body&gt;</span></a>
<a class="sourceLine" id="cb3-11" title="11"><span class="kw">&lt;/html&gt;</span></a></code></pre></div>
<h2 id="table-of-contents">Table of Contents</h2>
<ul>
<li><a href="#description">Description</a></li>
<li><a href="#api">API</a>
<ul>
<li><a href="#processor">processor()</a></li>
<li><a href="#processoruseplugin-options">processor.use(plugin[, options])</a></li>
<li><a href="#processorparsefilevalue">processor.parse(file|value)</a></li>
<li><a href="#processorstringifynode-file">processor.stringify(node[, file])</a></li>
<li><a href="#processorrunnode-file-done">processor.run(node[, file][, done])</a></li>
<li><a href="#processorrunsyncnode-file">processor.runSync(node[, file])</a></li>
<li><a href="#processorprocessfilevalue-done">processor.process(file|value[, done])</a></li>
<li><a href="#processorprocesssyncfilevalue">processor.processSync(file|value)</a></li>
<li><a href="#processordatakey-value">processor.data([key[, value]])</a></li>
<li><a href="#processorfreeze">processor.freeze()</a></li>
</ul></li>
<li><a href="#plugin">Plugin</a>
<ul>
<li><a href="#function-attacheroptions">function attacher([options])</a></li>
<li><a href="#function-transformernode-file-next">function transformer(node, file[, next])</a></li>
</ul></li>
<li><a href="#preset">Preset</a></li>
<li><a href="#contribute">Contribute</a></li>
<li><a href="#acknowledgments">Acknowledgments</a></li>
<li><a href="#license">License</a></li>
</ul>
<h2 id="description">Description</h2>
<p><strong>unified</strong> is an interface for processing text using syntax trees. Syntax trees are a representation understandable to programs. Those programs, called <a href="#plugin"><strong>plugin</strong></a>s, take these trees and modify them, amongst other things. To get to the syntax tree from input text there’s a <a href="#processorparser"><strong>parser</strong></a>. To get from that back to text there’s a <a href="#processorcompiler"><strong>compiler</strong></a>. This is the <a href="#processorprocessfilevalue-done"><strong>process</strong></a> of a <strong>processor</strong>.</p>
<pre class="ascii"><code>| ....................... process() ......................... |
| ......... parse() ..... | run() | ..... stringify() ....... |

          +--------+                     +----------+
Input -&gt;- | Parser | -&gt;- Syntax Tree -&gt;- | Compiler | -&gt;- Output
          +--------+          |          +----------+
                              X
                              |
                       +--------------+
                       | Transformers |
                       +--------------+</code></pre>
<h6 id="processors">Processors</h6>
<p>Every processor implements another processor. To create a new processor invoke another processor. This creates a processor that is configured to function the same as its ancestor. But when the descendant processor is configured in the future it does not affect the ancestral processor.</p>
<p>When processors are exposed from a module (for example, unified itself) they should not be configured directly, as that would change their behaviour for all module users. Those processors are <a href="#processorfreeze"><strong>frozen</strong></a> and they should be invoked to create a new processor before they are used.</p>
<h6 id="node">Node</h6>
<p>The syntax trees used in <strong>unified</strong> are <a href="https://github.com/syntax-tree/unist"><strong>Unist</strong></a> nodes: plain JavaScript objects with a <code>type</code> property. The semantics of those <code>type</code>s are defined by other projects.</p>
<p>There are several <a href="https://github.com/syntax-tree/unist#list-of-utilities">utilities</a> for working with these nodes.</p>
<h6 id="list-of-processors">List of Processors</h6>
<p>The following projects process different syntax trees. They parse text to their respective syntax tree and they compile their syntax trees back to text. These processors can be used as-is, or their parsers and compilers can be mixed and matched with <strong>unified</strong> and other plugins to process between different syntaxes.</p>
<ul>
<li><a href="https://github.com/rehypejs/rehype"><strong>rehype</strong></a> (<a href="https://github.com/syntax-tree/hast"><strong>hast</strong></a>) — HTML</li>
<li><a href="https://github.com/remarkjs/remark"><strong>remark</strong></a> (<a href="https://github.com/syntax-tree/mdast"><strong>mdast</strong></a>) — Markdown</li>
<li><a href="https://github.com/retextjs/retext"><strong>retext</strong></a> (<a href="https://github.com/syntax-tree/nlcst"><strong>nlcst</strong></a>) — Natural language</li>
</ul>
<h6 id="list-of-plugins">List of Plugins</h6>
<p>The below plugins work with <strong>unified</strong>, unrelated to what flavour the syntax tree is in:</p>
<ul>
<li><a href="https://github.com/unifiedjs/unified-diff"><code>unified-diff</code></a> — Ignore messages for unchanged lines in Travis</li>
</ul>
<p>See <a href="https://github.com/remarkjs/remark/blob/master/doc/plugins.md#list-of-plugins"><strong>remark</strong></a>, <a href="https://github.com/rehypejs/rehype/blob/master/doc/plugins.md#list-of-plugins"><strong>rehype</strong></a>, and <a href="https://github.com/retextjs/retext/blob/master/doc/plugins.md#list-of-plugins"><strong>retext</strong></a> for lists of their plugins.</p>
<h6 id="file">File</h6>
<p>When processing documents metadata is often gathered about that document. <a href="https://github.com/vfile/vfile"><strong>VFile</strong></a> is a virtual file format which stores data and handles metadata and messages for <strong>unified</strong> and its plugins.</p>
<p>There are several <a href="https://github.com/vfile/vfile#related-tools">utilities</a> for working with these files.</p>
<h6 id="configuration">Configuration</h6>
<p>To configure a processor invoke its <a href="#processoruseplugin-options"><code>use</code></a> method, supply it a <a href="#plugin"><strong>plugin</strong></a>, and optionally settings.</p>
<h6 id="integrations">Integrations</h6>
<p><strong>unified</strong> can integrate with the file-system through <a href="https://github.com/unifiedjs/unified-engine"><code>unified-engine</code></a>. On top of that, CLI apps can be created with <a href="https://github.com/unifiedjs/unified-args"><code>unified-args</code></a>, Gulp plugins with <a href="https://github.com/unifiedjs/unified-engine-gulp"><code>unified-engine-gulp</code></a>, and Atom Linters with <a href="https://github.com/unifiedjs/unified-engine-atom"><code>unified-engine-atom</code></a>.</p>
<p>A streaming interface is provided through <a href="https://github.com/unifiedjs/unified-stream"><code>unified-stream</code></a>.</p>
<h6 id="programming-interface">Programming interface</h6>
<p>The API gives access to processing metadata (such as lint messages) and supports multiple passed through files:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb5-1" title="1"><span class="kw">var</span> unified <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;unified&#39;</span>)</a>
<a class="sourceLine" id="cb5-2" title="2"><span class="kw">var</span> markdown <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;remark-parse&#39;</span>)</a>
<a class="sourceLine" id="cb5-3" title="3"><span class="kw">var</span> styleGuide <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;remark-preset-lint-markdown-style-guide&#39;</span>)</a>
<a class="sourceLine" id="cb5-4" title="4"><span class="kw">var</span> remark2retext <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;remark-retext&#39;</span>)</a>
<a class="sourceLine" id="cb5-5" title="5"><span class="kw">var</span> english <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;retext-english&#39;</span>)</a>
<a class="sourceLine" id="cb5-6" title="6"><span class="kw">var</span> equality <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;retext-equality&#39;</span>)</a>
<a class="sourceLine" id="cb5-7" title="7"><span class="kw">var</span> remark2rehype <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;remark-rehype&#39;</span>)</a>
<a class="sourceLine" id="cb5-8" title="8"><span class="kw">var</span> html <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;rehype-stringify&#39;</span>)</a>
<a class="sourceLine" id="cb5-9" title="9"><span class="kw">var</span> report <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;vfile-reporter&#39;</span>)</a>
<a class="sourceLine" id="cb5-10" title="10"></a>
<a class="sourceLine" id="cb5-11" title="11"><span class="at">unified</span>()</a>
<a class="sourceLine" id="cb5-12" title="12">  .<span class="at">use</span>(markdown)</a>
<a class="sourceLine" id="cb5-13" title="13">  .<span class="at">use</span>(styleGuide)</a>
<a class="sourceLine" id="cb5-14" title="14">  .<span class="at">use</span>(</a>
<a class="sourceLine" id="cb5-15" title="15">    remark2retext<span class="op">,</span></a>
<a class="sourceLine" id="cb5-16" title="16">    <span class="at">unified</span>()</a>
<a class="sourceLine" id="cb5-17" title="17">      .<span class="at">use</span>(english)</a>
<a class="sourceLine" id="cb5-18" title="18">      .<span class="at">use</span>(equality)</a>
<a class="sourceLine" id="cb5-19" title="19">  )</a>
<a class="sourceLine" id="cb5-20" title="20">  .<span class="at">use</span>(remark2rehype)</a>
<a class="sourceLine" id="cb5-21" title="21">  .<span class="at">use</span>(html)</a>
<a class="sourceLine" id="cb5-22" title="22">  .<span class="at">process</span>(<span class="st">&#39;*Emphasis* and _importance_, you guys!&#39;</span><span class="op">,</span> <span class="kw">function</span>(err<span class="op">,</span> file) <span class="op">{</span></a>
<a class="sourceLine" id="cb5-23" title="23">    <span class="va">console</span>.<span class="at">error</span>(<span class="at">report</span>(err <span class="op">||</span> file))</a>
<a class="sourceLine" id="cb5-24" title="24">    <span class="va">console</span>.<span class="at">log</span>(<span class="at">String</span>(file))</a>
<a class="sourceLine" id="cb5-25" title="25">  <span class="op">}</span>)</a></code></pre></div>
<p>Yields:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode txt"><code class="sourceCode default"><a class="sourceLine" id="cb6-1" title="1">  1:16-1:28  warning  Emphasis should use `*` as a marker                                  emphasis-marker  remark-lint</a>
<a class="sourceLine" id="cb6-2" title="2">  1:34-1:38  warning  `guys` may be insensitive, use `people`, `persons`, `folks` instead  gals-men         retext-equality</a>
<a class="sourceLine" id="cb6-3" title="3"></a>
<a class="sourceLine" id="cb6-4" title="4">⚠ 2 warnings</a>
<a class="sourceLine" id="cb6-5" title="5">&lt;p&gt;&lt;em&gt;Emphasis&lt;/em&gt; and &lt;em&gt;importance&lt;/em&gt;, you guys!&lt;/p&gt;</a></code></pre></div>
<h6 id="processing-between-syntaxes">Processing between syntaxes</h6>
<p>The processors can be combined in two modes.</p>
<p><strong>Bridge</strong> mode transforms the syntax tree from one flavour (the origin) to another (the destination). Then, transformations are applied on that tree. Finally, the origin processor continues transforming the original syntax tree.</p>
<p><strong>Mutate</strong> mode also transforms the syntax tree from one flavour to another. But then the origin processor continues transforming the destination syntax tree.</p>
<p>In the previous example (“Programming interface”), <code>remark-retext</code> is used in bridge mode: the origin syntax tree is kept after retext is done; whereas <code>remark-rehype</code> is used in mutate mode: it sets a new syntax tree and discards the original.</p>
<ul>
<li><a href="https://github.com/remarkjs/remark-retext"><code>remark-retext</code></a></li>
<li><a href="https://github.com/remarkjs/remark-rehype"><code>remark-rehype</code></a></li>
<li><a href="https://github.com/rehypejs/rehype-retext"><code>rehype-retext</code></a></li>
<li><a href="https://github.com/rehypejs/rehype-remark"><code>rehype-remark</code></a></li>
</ul>
<h2 id="api">API</h2>
<h3 id="processor"><code>processor()</code></h3>
<p>Object describing how to process text.</p>
<h6 id="returns">Returns</h6>
<p><code>Function</code> — New <a href="#processorfreeze"><strong>unfrozen</strong></a> processor which is configured to function the same as its ancestor. But when the descendant processor is configured in the future it does not affect the ancestral processor.</p>
<h6 id="example">Example</h6>
<p>The following example shows how a new processor can be created (from the remark processor) and linked to <strong>stdin</strong>(4) and <strong>stdout</strong>(4).</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb7-1" title="1"><span class="kw">var</span> remark <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;remark&#39;</span>)</a>
<a class="sourceLine" id="cb7-2" title="2"><span class="kw">var</span> concat <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;concat-stream&#39;</span>)</a>
<a class="sourceLine" id="cb7-3" title="3"></a>
<a class="sourceLine" id="cb7-4" title="4"><span class="va">process</span>.<span class="va">stdin</span>.<span class="at">pipe</span>(<span class="at">concat</span>(onconcat))</a>
<a class="sourceLine" id="cb7-5" title="5"></a>
<a class="sourceLine" id="cb7-6" title="6"><span class="kw">function</span> <span class="at">onconcat</span>(buf) <span class="op">{</span></a>
<a class="sourceLine" id="cb7-7" title="7">  <span class="kw">var</span> doc <span class="op">=</span> <span class="at">remark</span>()</a>
<a class="sourceLine" id="cb7-8" title="8">    .<span class="at">processSync</span>(buf)</a>
<a class="sourceLine" id="cb7-9" title="9">    .<span class="at">toString</span>()</a>
<a class="sourceLine" id="cb7-10" title="10"></a>
<a class="sourceLine" id="cb7-11" title="11">  <span class="va">process</span>.<span class="va">stdout</span>.<span class="at">write</span>(doc)</a>
<a class="sourceLine" id="cb7-12" title="12"><span class="op">}</span></a></code></pre></div>
<h3 id="processor.useplugin-options"><code>processor.use(plugin[, options])</code></h3>
<p>Configure the processor to use a <a href="#plugin"><strong>plugin</strong></a> and optionally configure that plugin with options.</p>
<h6 id="signatures">Signatures</h6>
<ul>
<li><code>processor.use(plugin[, options])</code></li>
<li><code>processor.use(preset)</code></li>
<li><code>processor.use(list)</code></li>
</ul>
<h6 id="parameters">Parameters</h6>
<ul>
<li><code>plugin</code> (<a href="#plugin"><code>Plugin</code></a>)</li>
<li><code>options</code> (<code>*</code>, optional) — Configuration for <code>plugin</code></li>
<li><code>preset</code> (<code>Object</code>) — Object with an optional <code>plugins</code> (set to <code>list</code>), and/or an optional <code>settings</code> object</li>
<li><code>list</code> (<code>Array</code>) — List of plugins, presets, and pairs (<code>plugin</code> and <code>options</code> in an array)</li>
</ul>
<h6 id="returns-1">Returns</h6>
<p><code>processor</code> — The processor on which <code>use</code> is invoked.</p>
<h6 id="note">Note</h6>
<p><code>use</code> cannot be called on <a href="#processorfreeze">frozen</a> processors. Invoke the processor first to create a new unfrozen processor.</p>
<h6 id="example-1">Example</h6>
<p>There are many ways to pass plugins to <code>.use()</code>. The below example gives an overview.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb8-1" title="1"><span class="kw">var</span> unified <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;unified&#39;</span>)</a>
<a class="sourceLine" id="cb8-2" title="2"></a>
<a class="sourceLine" id="cb8-3" title="3"><span class="at">unified</span>()</a>
<a class="sourceLine" id="cb8-4" title="4">  <span class="co">// Plugin with options:</span></a>
<a class="sourceLine" id="cb8-5" title="5">  .<span class="at">use</span>(plugin<span class="op">,</span> <span class="op">{}</span>)</a>
<a class="sourceLine" id="cb8-6" title="6">  <span class="co">// Plugins:</span></a>
<a class="sourceLine" id="cb8-7" title="7">  .<span class="at">use</span>([plugin<span class="op">,</span> pluginB])</a>
<a class="sourceLine" id="cb8-8" title="8">  <span class="co">// Two plugins, the second with options:</span></a>
<a class="sourceLine" id="cb8-9" title="9">  .<span class="at">use</span>([plugin<span class="op">,</span> [pluginB<span class="op">,</span> <span class="op">{}</span>]])</a>
<a class="sourceLine" id="cb8-10" title="10">  <span class="co">// Preset with plugins and settings:</span></a>
<a class="sourceLine" id="cb8-11" title="11">  .<span class="at">use</span>(<span class="op">{</span><span class="dt">plugins</span><span class="op">:</span> [plugin<span class="op">,</span> [pluginB<span class="op">,</span> <span class="op">{}</span>]]<span class="op">,</span> <span class="dt">settings</span><span class="op">:</span> <span class="op">{</span><span class="dt">position</span><span class="op">:</span> <span class="kw">false</span><span class="op">}}</span>)</a>
<a class="sourceLine" id="cb8-12" title="12">  <span class="co">// Settings only:</span></a>
<a class="sourceLine" id="cb8-13" title="13">  .<span class="at">use</span>(<span class="op">{</span><span class="dt">settings</span><span class="op">:</span> <span class="op">{</span><span class="dt">position</span><span class="op">:</span> <span class="kw">false</span><span class="op">}}</span>)</a>
<a class="sourceLine" id="cb8-14" title="14"></a>
<a class="sourceLine" id="cb8-15" title="15"><span class="kw">function</span> <span class="at">plugin</span>() <span class="op">{}</span></a>
<a class="sourceLine" id="cb8-16" title="16"><span class="kw">function</span> <span class="at">pluginB</span>() <span class="op">{}</span></a></code></pre></div>
<h3 id="processor.parsefilevalue"><code>processor.parse(file|value)</code></h3>
<p>Parse text to a syntax tree.</p>
<h6 id="parameters-1">Parameters</h6>
<ul>
<li><code>file</code> (<a href="#file"><code>VFile</code></a>) — Or anything which can be given to <code>vfile()</code></li>
</ul>
<h6 id="returns-2">Returns</h6>
<p><a href="#node"><code>Node</code></a> — Syntax tree representation of input.</p>
<h6 id="note-1">Note</h6>
<p><code>parse</code> <a href="#processorfreeze">freezes</a> the processor if not already frozen.</p>
<p><code>parse</code> does not apply <a href="#description">transformers from the run phase</a> to the <a href="#node">syntax tree</a>.</p>
<h6 id="example-2">Example</h6>
<p>The below example shows how the <code>parse</code> function can be used to create a <a href="#node">syntax tree</a> from a <a href="#file">file</a>.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb9-1" title="1"><span class="kw">var</span> unified <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;unified&#39;</span>)</a>
<a class="sourceLine" id="cb9-2" title="2"><span class="kw">var</span> markdown <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;remark-parse&#39;</span>)</a>
<a class="sourceLine" id="cb9-3" title="3"></a>
<a class="sourceLine" id="cb9-4" title="4"><span class="kw">var</span> tree <span class="op">=</span> <span class="at">unified</span>()</a>
<a class="sourceLine" id="cb9-5" title="5">  .<span class="at">use</span>(markdown)</a>
<a class="sourceLine" id="cb9-6" title="6">  .<span class="at">parse</span>(<span class="st">&#39;# Hello world!&#39;</span>)</a>
<a class="sourceLine" id="cb9-7" title="7"></a>
<a class="sourceLine" id="cb9-8" title="8"><span class="va">console</span>.<span class="at">log</span>(tree)</a></code></pre></div>
<p>Yields:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb10-1" title="1"><span class="op">{</span> <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;root&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb10-2" title="2">  <span class="dt">children</span><span class="op">:</span></a>
<a class="sourceLine" id="cb10-3" title="3">   [ <span class="op">{</span> <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;heading&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb10-4" title="4">       <span class="dt">depth</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span></a>
<a class="sourceLine" id="cb10-5" title="5">       <span class="dt">children</span><span class="op">:</span> [Array]<span class="op">,</span></a>
<a class="sourceLine" id="cb10-6" title="6">       <span class="dt">position</span><span class="op">:</span> [Position] <span class="op">}</span> ]<span class="op">,</span></a>
<a class="sourceLine" id="cb10-7" title="7">  <span class="dt">position</span><span class="op">:</span></a>
<a class="sourceLine" id="cb10-8" title="8">   <span class="op">{</span> <span class="dt">start</span><span class="op">:</span> <span class="op">{</span> <span class="dt">line</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">column</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">offset</span><span class="op">:</span> <span class="dv">0</span> <span class="op">},</span></a>
<a class="sourceLine" id="cb10-9" title="9">     <span class="dt">end</span><span class="op">:</span> <span class="op">{</span> <span class="dt">line</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">column</span><span class="op">:</span> <span class="dv">15</span><span class="op">,</span> <span class="dt">offset</span><span class="op">:</span> <span class="dv">14</span> <span class="op">}</span> <span class="op">}</span> <span class="op">}</span></a></code></pre></div>
<h4 id="processor.parser"><code>processor.Parser</code></h4>
<p>Function handling the parsing of text to a syntax tree. Used in the <a href="#processorparsefilevalue"><strong>parse</strong></a> phase in the process and invoked with a <code>string</code> and <a href="#file"><code>VFile</code></a> representation of the document to parse.</p>
<p><code>Parser</code> can be a normal function in which case it must return a <a href="#node"><code>Node</code></a>: the syntax tree representation of the given file.</p>
<p><code>Parser</code> can also be a constructor function (a function with keys in its <code>prototype</code>) in which case it’s invoked with <code>new</code>. Instances must have a <code>parse</code> method which is invoked without arguments and must return a <a href="#node"><code>Node</code></a>.</p>
<h3 id="processor.stringifynode-file"><code>processor.stringify(node[, file])</code></h3>
<p>Compile a syntax tree to text.</p>
<h6 id="parameters-2">Parameters</h6>
<ul>
<li><code>node</code> (<a href="#node"><code>Node</code></a>)</li>
<li><code>file</code> (<a href="#file"><code>VFile</code></a>, optional); — Or anything which can be given to <code>vfile()</code></li>
</ul>
<h6 id="returns-3">Returns</h6>
<p><code>string</code> — String representation of the syntax tree file.</p>
<h6 id="note-2">Note</h6>
<p><code>stringify</code> <a href="#processorfreeze">freezes</a> the processor if not already frozen.</p>
<p><code>stringify</code> does not apply <a href="#description">transformers from the run phase</a> to the <a href="#node">syntax tree</a>.</p>
<h6 id="example-3">Example</h6>
<p>The below example shows how the <code>stringify</code> function can be used to generate a <a href="#file">file</a> from a <a href="#node">syntax tree</a>.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb11-1" title="1"><span class="kw">var</span> unified <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;unified&#39;</span>)</a>
<a class="sourceLine" id="cb11-2" title="2"><span class="kw">var</span> html <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;rehype-stringify&#39;</span>)</a>
<a class="sourceLine" id="cb11-3" title="3"><span class="kw">var</span> h <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;hastscript&#39;</span>)</a>
<a class="sourceLine" id="cb11-4" title="4"></a>
<a class="sourceLine" id="cb11-5" title="5"><span class="kw">var</span> tree <span class="op">=</span> <span class="at">h</span>(<span class="st">&#39;h1&#39;</span><span class="op">,</span> <span class="st">&#39;Hello world!&#39;</span>)</a>
<a class="sourceLine" id="cb11-6" title="6"></a>
<a class="sourceLine" id="cb11-7" title="7"><span class="kw">var</span> doc <span class="op">=</span> <span class="at">unified</span>()</a>
<a class="sourceLine" id="cb11-8" title="8">  .<span class="at">use</span>(html)</a>
<a class="sourceLine" id="cb11-9" title="9">  .<span class="at">stringify</span>(tree)</a>
<a class="sourceLine" id="cb11-10" title="10"></a>
<a class="sourceLine" id="cb11-11" title="11"><span class="va">console</span>.<span class="at">log</span>(doc)</a></code></pre></div>
<p>Yields:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb12-1" title="1"><span class="kw">&lt;h1&gt;</span>Hello world!<span class="kw">&lt;/h1&gt;</span></a></code></pre></div>
<h4 id="processor.compiler"><code>processor.Compiler</code></h4>
<p>Function handling the compilation of syntax tree to a text. Used in the <a href="#processorstringifynode-file"><strong>stringify</strong></a> phase in the process and invoked with a <a href="#node"><code>Node</code></a> and <a href="#file"><code>VFile</code></a> representation of the document to stringify.</p>
<p><code>Compiler</code> can be a normal function in which case it must return a <code>string</code>: the text representation of the given syntax tree.</p>
<p><code>Compiler</code> can also be a constructor function (a function with keys in its <code>prototype</code>) in which case it’s invoked with <code>new</code>. Instances must have a <code>compile</code> method which is invoked without arguments and must return a <code>string</code>.</p>
<h3 id="processor.runnode-file-done"><code>processor.run(node[, file][, done])</code></h3>
<p>Transform a syntax tree by applying <a href="#plugin"><strong>plugin</strong></a>s to it.</p>
<h6 id="parameters-3">Parameters</h6>
<ul>
<li><code>node</code> (<a href="#node"><code>Node</code></a>)</li>
<li><code>file</code> (<a href="#file"><code>VFile</code></a>, optional) — Or anything which can be given to <code>vfile()</code></li>
<li><code>done</code> (<a href="#function-doneerr-node-file"><code>Function</code></a>, optional)</li>
</ul>
<h6 id="returns-4">Returns</h6>
<p><a href="https://developer.mozilla.org/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a> if <code>done</code> is not given. Rejected with an error, or resolved with the resulting syntax tree.</p>
<h6 id="note-3">Note</h6>
<p><code>run</code> <a href="#processorfreeze">freezes</a> the processor if not already frozen.</p>
<h4 id="function-doneerr-node-file"><code>function done(err[, node, file])</code></h4>
<p>Invoked when transformation is complete. Either invoked with an error or a syntax tree and a file.</p>
<h6 id="parameters-4">Parameters</h6>
<ul>
<li><code>err</code> (<code>Error</code>) — Fatal error</li>
<li><code>node</code> (<a href="#node"><code>Node</code></a>)</li>
<li><code>file</code> (<a href="#file"><code>VFile</code></a>)</li>
</ul>
<h6 id="example-4">Example</h6>
<p>The below example shows how the <code>run</code> function can be used to transform a <a href="#node">syntax tree</a>.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb13-1" title="1"><span class="kw">var</span> unified <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;unified&#39;</span>)</a>
<a class="sourceLine" id="cb13-2" title="2"><span class="kw">var</span> references <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;remark-reference-links&#39;</span>)</a>
<a class="sourceLine" id="cb13-3" title="3"><span class="kw">var</span> u <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;unist-builder&#39;</span>)</a>
<a class="sourceLine" id="cb13-4" title="4"></a>
<a class="sourceLine" id="cb13-5" title="5"><span class="kw">var</span> tree <span class="op">=</span> <span class="at">u</span>(<span class="st">&#39;root&#39;</span><span class="op">,</span> [</a>
<a class="sourceLine" id="cb13-6" title="6">  <span class="at">u</span>(<span class="st">&#39;paragraph&#39;</span><span class="op">,</span> [</a>
<a class="sourceLine" id="cb13-7" title="7">    <span class="at">u</span>(<span class="st">&#39;link&#39;</span><span class="op">,</span> <span class="op">{</span><span class="dt">href</span><span class="op">:</span> <span class="st">&#39;https://example.com&#39;</span><span class="op">},</span> [<span class="at">u</span>(<span class="st">&#39;text&#39;</span><span class="op">,</span> <span class="st">&#39;Example Domain&#39;</span>)])</a>
<a class="sourceLine" id="cb13-8" title="8">  ])</a>
<a class="sourceLine" id="cb13-9" title="9">])</a>
<a class="sourceLine" id="cb13-10" title="10"></a>
<a class="sourceLine" id="cb13-11" title="11"><span class="at">unified</span>()</a>
<a class="sourceLine" id="cb13-12" title="12">  .<span class="at">use</span>(references)</a>
<a class="sourceLine" id="cb13-13" title="13">  .<span class="at">run</span>(tree<span class="op">,</span> <span class="kw">function</span>(err<span class="op">,</span> tree) <span class="op">{</span></a>
<a class="sourceLine" id="cb13-14" title="14">    <span class="cf">if</span> (err) <span class="cf">throw</span> err</a>
<a class="sourceLine" id="cb13-15" title="15">    <span class="va">console</span>.<span class="at">log</span>(tree)</a>
<a class="sourceLine" id="cb13-16" title="16">  <span class="op">}</span>)</a></code></pre></div>
<p>Yields:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb14-1" title="1"><span class="op">{</span> <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;root&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb14-2" title="2">  <span class="dt">children</span><span class="op">:</span></a>
<a class="sourceLine" id="cb14-3" title="3">   [ <span class="op">{</span> <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;paragraph&#39;</span><span class="op">,</span> <span class="dt">children</span><span class="op">:</span> [Array] <span class="op">},</span></a>
<a class="sourceLine" id="cb14-4" title="4">     <span class="op">{</span> <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;definition&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb14-5" title="5">       <span class="dt">identifier</span><span class="op">:</span> <span class="st">&#39;1&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb14-6" title="6">       <span class="dt">title</span><span class="op">:</span> <span class="kw">undefined</span><span class="op">,</span></a>
<a class="sourceLine" id="cb14-7" title="7">       <span class="dt">url</span><span class="op">:</span> <span class="kw">undefined</span> <span class="op">}</span> ] <span class="op">}</span></a></code></pre></div>
<h3 id="processor.runsyncnode-file"><code>processor.runSync(node[, file])</code></h3>
<p>Transform a syntax tree by applying <a href="#plugin"><strong>plugin</strong></a>s to it.</p>
<p>If asynchronous <a href="#plugin"><strong>plugin</strong></a>s are configured an error is thrown.</p>
<h6 id="parameters-5">Parameters</h6>
<ul>
<li><code>node</code> (<a href="#node"><code>Node</code></a>)</li>
<li><code>file</code> (<a href="#file"><code>VFile</code></a>, optional) — Or anything which can be given to <code>vfile()</code></li>
</ul>
<h6 id="returns-5">Returns</h6>
<p><a href="#node"><code>Node</code></a> — The given syntax tree.</p>
<h6 id="note-4">Note</h6>
<p><code>runSync</code> <a href="#processorfreeze">freezes</a> the processor if not already frozen.</p>
<h3 id="processor.processfilevalue-done"><code>processor.process(file|value[, done])</code></h3>
<p>Process the given representation of a file as configured on the processor. The process invokes <code>parse</code>, <code>run</code>, and <code>stringify</code> internally.</p>
<h6 id="parameters-6">Parameters</h6>
<ul>
<li><code>file</code> (<a href="#file"><code>VFile</code></a>)</li>
<li><code>value</code> (<code>string</code>) — String representation of a file</li>
<li><code>done</code> (<a href="#function-doneerr-file"><code>Function</code></a>, optional)</li>
</ul>
<h6 id="returns-6">Returns</h6>
<p><a href="https://developer.mozilla.org/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a> if <code>done</code> is not given. Rejected with an error or resolved with the resulting file.</p>
<h6 id="note-5">Note</h6>
<p><code>process</code> <a href="#processorfreeze">freezes</a> the processor if not already frozen.</p>
<h6 id="example-5">Example</h6>
<p>The below example shows how the <code>process</code> function can be used to process a <a href="#file">file</a> whether plugins are asynchronous or not with Promises.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb15-1" title="1"><span class="kw">var</span> unified <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;unified&#39;</span>)</a>
<a class="sourceLine" id="cb15-2" title="2"><span class="kw">var</span> markdown <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;remark-parse&#39;</span>)</a>
<a class="sourceLine" id="cb15-3" title="3"><span class="kw">var</span> remark2rehype <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;remark-rehype&#39;</span>)</a>
<a class="sourceLine" id="cb15-4" title="4"><span class="kw">var</span> doc <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;rehype-document&#39;</span>)</a>
<a class="sourceLine" id="cb15-5" title="5"><span class="kw">var</span> format <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;rehype-format&#39;</span>)</a>
<a class="sourceLine" id="cb15-6" title="6"><span class="kw">var</span> html <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;rehype-stringify&#39;</span>)</a>
<a class="sourceLine" id="cb15-7" title="7"></a>
<a class="sourceLine" id="cb15-8" title="8"><span class="at">unified</span>()</a>
<a class="sourceLine" id="cb15-9" title="9">  .<span class="at">use</span>(markdown)</a>
<a class="sourceLine" id="cb15-10" title="10">  .<span class="at">use</span>(remark2rehype)</a>
<a class="sourceLine" id="cb15-11" title="11">  .<span class="at">use</span>(doc)</a>
<a class="sourceLine" id="cb15-12" title="12">  .<span class="at">use</span>(format)</a>
<a class="sourceLine" id="cb15-13" title="13">  .<span class="at">use</span>(html)</a>
<a class="sourceLine" id="cb15-14" title="14">  .<span class="at">process</span>(<span class="st">&#39;# Hello world!&#39;</span>)</a>
<a class="sourceLine" id="cb15-15" title="15">  .<span class="at">then</span>(</a>
<a class="sourceLine" id="cb15-16" title="16">    <span class="kw">function</span>(file) <span class="op">{</span></a>
<a class="sourceLine" id="cb15-17" title="17">      <span class="va">console</span>.<span class="at">log</span>(<span class="at">String</span>(file))</a>
<a class="sourceLine" id="cb15-18" title="18">    <span class="op">},</span></a>
<a class="sourceLine" id="cb15-19" title="19">    <span class="kw">function</span>(err) <span class="op">{</span></a>
<a class="sourceLine" id="cb15-20" title="20">      <span class="va">console</span>.<span class="at">error</span>(<span class="at">String</span>(err))</a>
<a class="sourceLine" id="cb15-21" title="21">    <span class="op">}</span></a>
<a class="sourceLine" id="cb15-22" title="22">  )</a></code></pre></div>
<p>Yields:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb16-1" title="1"><span class="dt">&lt;!doctype </span>html<span class="dt">&gt;</span></a>
<a class="sourceLine" id="cb16-2" title="2"><span class="kw">&lt;html</span><span class="ot"> lang=</span><span class="st">&quot;en&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb16-3" title="3">  <span class="kw">&lt;head&gt;</span></a>
<a class="sourceLine" id="cb16-4" title="4">    <span class="kw">&lt;meta</span><span class="ot"> charset=</span><span class="st">&quot;utf-8&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb16-5" title="5">    <span class="kw">&lt;meta</span><span class="ot"> name=</span><span class="st">&quot;viewport&quot;</span><span class="ot"> content=</span><span class="st">&quot;width=device-width, initial-scale=1&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb16-6" title="6">  <span class="kw">&lt;/head&gt;</span></a>
<a class="sourceLine" id="cb16-7" title="7">  <span class="kw">&lt;body&gt;</span></a>
<a class="sourceLine" id="cb16-8" title="8">    <span class="kw">&lt;h1&gt;</span>Hello world!<span class="kw">&lt;/h1&gt;</span></a>
<a class="sourceLine" id="cb16-9" title="9">  <span class="kw">&lt;/body&gt;</span></a>
<a class="sourceLine" id="cb16-10" title="10"><span class="kw">&lt;/html&gt;</span></a></code></pre></div>
<h4 id="function-doneerr-file"><code>function done(err, file)</code></h4>
<p>Invoked when the process is complete. Invoked with a fatal error, if any, and the <a href="#file"><code>VFile</code></a>.</p>
<h6 id="parameters-7">Parameters</h6>
<ul>
<li><code>err</code> (<code>Error</code>, optional) — Fatal error</li>
<li><code>file</code> (<a href="#file"><code>VFile</code></a>)</li>
</ul>
<h6 id="example-6">Example</h6>
<p>The below example shows how the <code>process</code> function can be used to process a <a href="#file">file</a> whether plugins are asynchronous or not with a callback.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb17-1" title="1"><span class="kw">var</span> unified <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;unified&#39;</span>)</a>
<a class="sourceLine" id="cb17-2" title="2"><span class="kw">var</span> parse <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;remark-parse&#39;</span>)</a>
<a class="sourceLine" id="cb17-3" title="3"><span class="kw">var</span> stringify <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;remark-stringify&#39;</span>)</a>
<a class="sourceLine" id="cb17-4" title="4"><span class="kw">var</span> github <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;remark-github&#39;</span>)</a>
<a class="sourceLine" id="cb17-5" title="5"><span class="kw">var</span> report <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;vfile-reporter&#39;</span>)</a>
<a class="sourceLine" id="cb17-6" title="6"></a>
<a class="sourceLine" id="cb17-7" title="7"><span class="at">unified</span>()</a>
<a class="sourceLine" id="cb17-8" title="8">  .<span class="at">use</span>(parse)</a>
<a class="sourceLine" id="cb17-9" title="9">  .<span class="at">use</span>(github)</a>
<a class="sourceLine" id="cb17-10" title="10">  .<span class="at">use</span>(stringify)</a>
<a class="sourceLine" id="cb17-11" title="11">  .<span class="at">process</span>(<span class="st">&#39;@mention&#39;</span><span class="op">,</span> <span class="kw">function</span>(err<span class="op">,</span> file) <span class="op">{</span></a>
<a class="sourceLine" id="cb17-12" title="12">    <span class="va">console</span>.<span class="at">error</span>(<span class="at">report</span>(err <span class="op">||</span> file))</a>
<a class="sourceLine" id="cb17-13" title="13">    <span class="va">console</span>.<span class="at">log</span>(<span class="at">String</span>(file))</a>
<a class="sourceLine" id="cb17-14" title="14">  <span class="op">}</span>)</a></code></pre></div>
<p>Yields:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode markdown"><code class="sourceCode markdown"><a class="sourceLine" id="cb18-1" title="1">no issues found</a>
<a class="sourceLine" id="cb18-2" title="2"><span class="ot">[**@mention**](https://github.com/blog/821)</span></a></code></pre></div>
<h3 id="processor.processsyncfilevalue"><code>processor.processSync(file|value)</code></h3>
<p>Process the given representation of a file as configured on the processor. The process invokes <code>parse</code>, <code>run</code>, and <code>stringify</code> internally.</p>
<p>If asynchronous <a href="#plugin"><strong>plugin</strong></a>s are configured an error is thrown.</p>
<h6 id="parameters-8">Parameters</h6>
<ul>
<li><code>file</code> (<a href="#file"><code>VFile</code></a>)</li>
<li><code>value</code> (<code>string</code>) — String representation of a file</li>
</ul>
<h6 id="returns-7">Returns</h6>
<p><a href="#file"><code>VFile</code></a> — Virtual file with modified <a href="https://github.com/vfile/vfile#vfilecontents"><code>contents</code></a>.</p>
<h6 id="note-6">Note</h6>
<p><code>processSync</code> <a href="#processorfreeze">freezes</a> the processor if not already frozen.</p>
<h6 id="example-7">Example</h6>
<p>The below example shows how the <code>processSync</code> function can be used to process a <a href="#file">file</a> if all plugins are known to be synchronous.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb19-1" title="1"><span class="kw">var</span> unified <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;unified&#39;</span>)</a>
<a class="sourceLine" id="cb19-2" title="2"><span class="kw">var</span> markdown <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;remark-parse&#39;</span>)</a>
<a class="sourceLine" id="cb19-3" title="3"><span class="kw">var</span> remark2rehype <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;remark-rehype&#39;</span>)</a>
<a class="sourceLine" id="cb19-4" title="4"><span class="kw">var</span> doc <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;rehype-document&#39;</span>)</a>
<a class="sourceLine" id="cb19-5" title="5"><span class="kw">var</span> format <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;rehype-format&#39;</span>)</a>
<a class="sourceLine" id="cb19-6" title="6"><span class="kw">var</span> html <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;rehype-stringify&#39;</span>)</a>
<a class="sourceLine" id="cb19-7" title="7"></a>
<a class="sourceLine" id="cb19-8" title="8"><span class="kw">var</span> processor <span class="op">=</span> <span class="at">unified</span>()</a>
<a class="sourceLine" id="cb19-9" title="9">  .<span class="at">use</span>(markdown)</a>
<a class="sourceLine" id="cb19-10" title="10">  .<span class="at">use</span>(remark2rehype)</a>
<a class="sourceLine" id="cb19-11" title="11">  .<span class="at">use</span>(doc)</a>
<a class="sourceLine" id="cb19-12" title="12">  .<span class="at">use</span>(format)</a>
<a class="sourceLine" id="cb19-13" title="13">  .<span class="at">use</span>(html)</a>
<a class="sourceLine" id="cb19-14" title="14"></a>
<a class="sourceLine" id="cb19-15" title="15"><span class="va">console</span>.<span class="at">log</span>(<span class="va">processor</span>.<span class="at">processSync</span>(<span class="st">&#39;# Hello world!&#39;</span>).<span class="at">toString</span>())</a></code></pre></div>
<p>Yields:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb20-1" title="1"><span class="dt">&lt;!doctype </span>html<span class="dt">&gt;</span></a>
<a class="sourceLine" id="cb20-2" title="2"><span class="kw">&lt;html</span><span class="ot"> lang=</span><span class="st">&quot;en&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb20-3" title="3">  <span class="kw">&lt;head&gt;</span></a>
<a class="sourceLine" id="cb20-4" title="4">    <span class="kw">&lt;meta</span><span class="ot"> charset=</span><span class="st">&quot;utf-8&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb20-5" title="5">    <span class="kw">&lt;meta</span><span class="ot"> name=</span><span class="st">&quot;viewport&quot;</span><span class="ot"> content=</span><span class="st">&quot;width=device-width, initial-scale=1&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb20-6" title="6">  <span class="kw">&lt;/head&gt;</span></a>
<a class="sourceLine" id="cb20-7" title="7">  <span class="kw">&lt;body&gt;</span></a>
<a class="sourceLine" id="cb20-8" title="8">    <span class="kw">&lt;h1&gt;</span>Hello world!<span class="kw">&lt;/h1&gt;</span></a>
<a class="sourceLine" id="cb20-9" title="9">  <span class="kw">&lt;/body&gt;</span></a>
<a class="sourceLine" id="cb20-10" title="10"><span class="kw">&lt;/html&gt;</span></a></code></pre></div>
<h3 id="processor.datakey-value"><code>processor.data([key[, value]])</code></h3>
<p>Get or set information in an in-memory key-value store accessible to all phases of the process. An example is a list of HTML elements which are self-closing, which is needed when parsing, transforming, and compiling HTML.</p>
<h6 id="parameters-9">Parameters</h6>
<ul>
<li><code>key</code> (<code>string</code>, optional) — Identifier</li>
<li><code>value</code> (<code>*</code>, optional) — Value to set. Omit if getting <code>key</code></li>
</ul>
<h6 id="returns-8">Returns</h6>
<ul>
<li><code>processor</code> — If setting, the processor on which <code>data</code> is invoked</li>
<li><code>*</code> — If getting, the value at <code>key</code></li>
<li><code>object</code> - Without arguments, the key-value store</li>
</ul>
<h6 id="note-7">Note</h6>
<p>Setting information with <code>data</code> cannot occur on <a href="#processorfreeze">frozen</a> processors. Invoke the processor first to create a new unfrozen processor.</p>
<h6 id="example-8">Example</h6>
<p>The following example show how to get and set information:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb21-1" title="1"><span class="kw">var</span> unified <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;unified&#39;</span>)</a>
<a class="sourceLine" id="cb21-2" title="2"></a>
<a class="sourceLine" id="cb21-3" title="3"><span class="kw">var</span> processor <span class="op">=</span> <span class="at">unified</span>()</a>
<a class="sourceLine" id="cb21-4" title="4">  .<span class="at">data</span>(<span class="st">&#39;alpha&#39;</span><span class="op">,</span> <span class="st">&#39;bravo&#39;</span>)</a>
<a class="sourceLine" id="cb21-5" title="5">  .<span class="at">data</span>(<span class="st">&#39;alpha&#39;</span>) <span class="co">// =&gt; &#39;bravo&#39;</span></a>
<a class="sourceLine" id="cb21-6" title="6"></a>
<a class="sourceLine" id="cb21-7" title="7"><span class="va">processor</span>.<span class="at">data</span>() <span class="co">// {alpha: &#39;bravo&#39;}</span></a></code></pre></div>
<h3 id="processor.freeze"><code>processor.freeze()</code></h3>
<p>Freeze a processor. Frozen processors are meant to be extended and not to be configured or processed directly.</p>
<p>Once a processor is frozen it cannot be unfrozen. New processors functioning just like it can be created by invoking the processor.</p>
<p>It’s possible to freeze processors explicitly, by calling <code>.freeze()</code>, but <a href="#processorparsefilevalue"><code>.parse()</code></a>, <a href="#processorrunnode-file-done"><code>.run()</code></a>, <a href="#processorstringifynode-file"><code>.stringify()</code></a>, and <a href="#processorprocessfilevalue-done"><code>.process()</code></a> call <code>.freeze()</code> to freeze a processor too.</p>
<h6 id="returns-9">Returns</h6>
<p><code>Processor</code> — The processor on which <code>freeze</code> is invoked.</p>
<h6 id="example-9">Example</h6>
<p>The following example, <code>index.js</code>, shows how <a href="https://github.com/rehypejs/rehype"><strong>rehype</strong></a> prevents extensions to itself:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb22-1" title="1"><span class="kw">var</span> unified <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;unified&#39;</span>)</a>
<a class="sourceLine" id="cb22-2" title="2"><span class="kw">var</span> parse <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;rehype-parse&#39;</span>)</a>
<a class="sourceLine" id="cb22-3" title="3"><span class="kw">var</span> stringify <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;rehype-stringify&#39;</span>)</a>
<a class="sourceLine" id="cb22-4" title="4"></a>
<a class="sourceLine" id="cb22-5" title="5"><span class="va">module</span>.<span class="at">exports</span> <span class="op">=</span> <span class="at">unified</span>()</a>
<a class="sourceLine" id="cb22-6" title="6">  .<span class="at">use</span>(parse)</a>
<a class="sourceLine" id="cb22-7" title="7">  .<span class="at">use</span>(stringify)</a>
<a class="sourceLine" id="cb22-8" title="8">  .<span class="at">freeze</span>()</a></code></pre></div>
<p>The below example, <code>a.js</code>, shows how that processor can be used and configured.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb23-1" title="1"><span class="kw">var</span> rehype <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;rehype&#39;</span>)</a>
<a class="sourceLine" id="cb23-2" title="2"><span class="kw">var</span> format <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;rehype-format&#39;</span>)</a>
<a class="sourceLine" id="cb23-3" title="3"><span class="co">// ...</span></a>
<a class="sourceLine" id="cb23-4" title="4"></a>
<a class="sourceLine" id="cb23-5" title="5"><span class="at">rehype</span>()</a>
<a class="sourceLine" id="cb23-6" title="6">  .<span class="at">use</span>(format)</a>
<a class="sourceLine" id="cb23-7" title="7">  <span class="co">// ...</span></a></code></pre></div>
<p>The below example, <code>b.js</code>, shows a similar looking example which operates on the frozen <a href="https://github.com/rehypejs/rehype"><strong>rehype</strong></a> interface. If this behaviour was allowed it would result in unexpected behaviour so an error is thrown. <strong>This is invalid</strong>:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb24-1" title="1"><span class="kw">var</span> rehype <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;rehype&#39;</span>)</a>
<a class="sourceLine" id="cb24-2" title="2"><span class="kw">var</span> format <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;rehype-format&#39;</span>)</a>
<a class="sourceLine" id="cb24-3" title="3"><span class="co">// ...</span></a>
<a class="sourceLine" id="cb24-4" title="4"></a>
<a class="sourceLine" id="cb24-5" title="5">rehype</a>
<a class="sourceLine" id="cb24-6" title="6">  .<span class="at">use</span>(format)</a>
<a class="sourceLine" id="cb24-7" title="7">  <span class="co">// ...</span></a></code></pre></div>
<p>Yields:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode txt"><code class="sourceCode default"><a class="sourceLine" id="cb25-1" title="1">~/node_modules/unified/index.js:440</a>
<a class="sourceLine" id="cb25-2" title="2">    throw new Error(</a>
<a class="sourceLine" id="cb25-3" title="3">    ^</a>
<a class="sourceLine" id="cb25-4" title="4"></a>
<a class="sourceLine" id="cb25-5" title="5">Error: Cannot invoke `use` on a frozen processor.</a>
<a class="sourceLine" id="cb25-6" title="6">Create a new processor first, by invoking it: use `processor()` instead of `processor`.</a>
<a class="sourceLine" id="cb25-7" title="7">    at assertUnfrozen (~/node_modules/unified/index.js:440:11)</a>
<a class="sourceLine" id="cb25-8" title="8">    at Function.use (~/node_modules/unified/index.js:172:5)</a>
<a class="sourceLine" id="cb25-9" title="9">    at Object.&lt;anonymous&gt; (~/b.js:6:4)</a></code></pre></div>
<h2 id="plugin"><code>Plugin</code></h2>
<p><strong>unified</strong> plugins change the way the applied-on processor works in the following ways:</p>
<ul>
<li>They modify the <a href="#processor"><strong>processor</strong></a>: such as changing the parser, the compiler, or linking it to other processors</li>
<li>They transform <a href="#node"><strong>syntax tree</strong></a> representation of files</li>
<li>They modify metadata of files</li>
</ul>
<p>Plugins are a concept. They materialise as <a href="#function-attacheroptions"><code>attacher</code></a>s.</p>
<h6 id="example-10">Example</h6>
<p><code>move.js</code>:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb26-1" title="1"><span class="va">module</span>.<span class="at">exports</span> <span class="op">=</span> move</a>
<a class="sourceLine" id="cb26-2" title="2"></a>
<a class="sourceLine" id="cb26-3" title="3"><span class="kw">function</span> <span class="at">move</span>(options) <span class="op">{</span></a>
<a class="sourceLine" id="cb26-4" title="4">  <span class="kw">var</span> expected <span class="op">=</span> (options <span class="op">||</span> <span class="op">{}</span>).<span class="at">extname</span></a>
<a class="sourceLine" id="cb26-5" title="5"></a>
<a class="sourceLine" id="cb26-6" title="6">  <span class="cf">if</span> (<span class="op">!</span>expected) <span class="op">{</span></a>
<a class="sourceLine" id="cb26-7" title="7">    <span class="cf">throw</span> <span class="kw">new</span> <span class="at">Error</span>(<span class="st">&#39;Missing `extname` in options&#39;</span>)</a>
<a class="sourceLine" id="cb26-8" title="8">  <span class="op">}</span></a>
<a class="sourceLine" id="cb26-9" title="9"></a>
<a class="sourceLine" id="cb26-10" title="10">  <span class="cf">return</span> transformer</a>
<a class="sourceLine" id="cb26-11" title="11"></a>
<a class="sourceLine" id="cb26-12" title="12">  <span class="kw">function</span> <span class="at">transformer</span>(tree<span class="op">,</span> file) <span class="op">{</span></a>
<a class="sourceLine" id="cb26-13" title="13">    <span class="cf">if</span> (<span class="va">file</span>.<span class="at">extname</span> <span class="op">&amp;&amp;</span> <span class="va">file</span>.<span class="at">extname</span> <span class="op">!==</span> expected) <span class="op">{</span></a>
<a class="sourceLine" id="cb26-14" title="14">      <span class="va">file</span>.<span class="at">extname</span> <span class="op">=</span> expected</a>
<a class="sourceLine" id="cb26-15" title="15">    <span class="op">}</span></a>
<a class="sourceLine" id="cb26-16" title="16">  <span class="op">}</span></a>
<a class="sourceLine" id="cb26-17" title="17"><span class="op">}</span></a></code></pre></div>
<p><code>index.js</code>:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb27-1" title="1"><span class="kw">var</span> unified <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;unified&#39;</span>)</a>
<a class="sourceLine" id="cb27-2" title="2"><span class="kw">var</span> parse <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;remark-parse&#39;</span>)</a>
<a class="sourceLine" id="cb27-3" title="3"><span class="kw">var</span> remark2rehype <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;remark-rehype&#39;</span>)</a>
<a class="sourceLine" id="cb27-4" title="4"><span class="kw">var</span> stringify <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;rehype-stringify&#39;</span>)</a>
<a class="sourceLine" id="cb27-5" title="5"><span class="kw">var</span> vfile <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;to-vfile&#39;</span>)</a>
<a class="sourceLine" id="cb27-6" title="6"><span class="kw">var</span> report <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;vfile-reporter&#39;</span>)</a>
<a class="sourceLine" id="cb27-7" title="7"><span class="kw">var</span> move <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;./move&#39;</span>)</a>
<a class="sourceLine" id="cb27-8" title="8"></a>
<a class="sourceLine" id="cb27-9" title="9"><span class="at">unified</span>()</a>
<a class="sourceLine" id="cb27-10" title="10">  .<span class="at">use</span>(parse)</a>
<a class="sourceLine" id="cb27-11" title="11">  .<span class="at">use</span>(remark2rehype)</a>
<a class="sourceLine" id="cb27-12" title="12">  .<span class="at">use</span>(move<span class="op">,</span> <span class="op">{</span><span class="dt">extname</span><span class="op">:</span> <span class="st">&#39;.html&#39;</span><span class="op">}</span>)</a>
<a class="sourceLine" id="cb27-13" title="13">  .<span class="at">use</span>(stringify)</a>
<a class="sourceLine" id="cb27-14" title="14">  .<span class="at">process</span>(<span class="va">vfile</span>.<span class="at">readSync</span>(<span class="st">&#39;index.md&#39;</span>)<span class="op">,</span> <span class="kw">function</span>(err<span class="op">,</span> file) <span class="op">{</span></a>
<a class="sourceLine" id="cb27-15" title="15">    <span class="va">console</span>.<span class="at">error</span>(<span class="at">report</span>(err <span class="op">||</span> file))</a>
<a class="sourceLine" id="cb27-16" title="16">    <span class="cf">if</span> (file) <span class="op">{</span></a>
<a class="sourceLine" id="cb27-17" title="17">      <span class="va">vfile</span>.<span class="at">writeSync</span>(file) <span class="co">// Written to `index.html`.</span></a>
<a class="sourceLine" id="cb27-18" title="18">    <span class="op">}</span></a>
<a class="sourceLine" id="cb27-19" title="19">  <span class="op">}</span>)</a></code></pre></div>
<h3 id="function-attacheroptions"><code>function attacher([options])</code></h3>
<p>An attacher is the thing passed to <a href="#processoruseplugin-options"><code>use</code></a>. It configures the processor and in turn can receive options.</p>
<p>Attachers can configure processors, such as by interacting with parsers and compilers, linking them to other processors, or by specifying how the syntax tree is handled.</p>
<h6 id="context">Context</h6>
<p>The context object is set to the invoked on <a href="#processor"><code>processor</code></a>.</p>
<h6 id="parameters-10">Parameters</h6>
<ul>
<li><code>options</code> (<code>*</code>, optional) — Configuration</li>
</ul>
<h6 id="returns-10">Returns</h6>
<p><a href="#function-transformernode-file-next"><code>transformer</code></a> — Optional.</p>
<h6 id="note-8">Note</h6>
<p>Attachers are invoked when the processor is <a href="#processorfreeze">frozen</a>: either when <code>.freeze()</code> is called explicitly, or when <a href="#processorparsefilevalue"><code>.parse()</code></a>, <a href="#processorrunnode-file-done"><code>.run()</code></a>, <a href="#processorstringifynode-file"><code>.stringify()</code></a>, or <a href="#processorprocessfilevalue-done"><code>.process()</code></a> is called for the first time.</p>
<h3 id="function-transformernode-file-next"><code>function transformer(node, file[, next])</code></h3>
<p>Transformers modify the syntax tree or metadata of a file. A transformer is a function which is invoked each time a file is passed through the transform phase. If an error occurs (either because it’s thrown, returned, rejected, or passed to <a href="#function-nexterr-tree-file"><code>next</code></a>), the process stops.</p>
<p>The transformation process in <strong>unified</strong> is handled by <a href="https://github.com/wooorm/trough#function-fninput-next"><code>trough</code></a>, see it’s documentation for the exact semantics of transformers.</p>
<h6 id="parameters-11">Parameters</h6>
<ul>
<li><code>node</code> (<a href="#node"><code>Node</code></a>)</li>
<li><code>file</code> (<a href="#file"><code>VFile</code></a>)</li>
<li><code>next</code> (<a href="#function-nexterr-tree-file"><code>Function</code></a>, optional)</li>
</ul>
<h6 id="returns-11">Returns</h6>
<ul>
<li><code>Error</code> — Can be returned to stop the process</li>
<li><a href="#node"><code>Node</code></a> — Can be returned and results in further transformations and <code>stringify</code>s to be performed on the new tree</li>
<li><code>Promise</code> — If a promise is returned, the function is asynchronous, and <strong>must</strong> be resolved (optionally with a <a href="#node"><code>Node</code></a>) or rejected (optionally with an <code>Error</code>)</li>
</ul>
<h4 id="function-nexterr-tree-file"><code>function next(err[, tree[, file]])</code></h4>
<p>If the signature of a transformer includes <code>next</code> (third argument), the function <strong>may</strong> finish asynchronous, and <strong>must</strong> invoke <code>next()</code>.</p>
<h6 id="parameters-12">Parameters</h6>
<ul>
<li><code>err</code> (<code>Error</code>, optional) — Stop the process</li>
<li><code>node</code> (<a href="#node"><code>Node</code></a>, optional) — New syntax tree</li>
<li><code>file</code> (<a href="#file"><code>VFile</code></a>, optional) — New virtual file</li>
</ul>
<h2 id="preset"><code>Preset</code></h2>
<p>Presets provide a potentially sharable way to configure processors. They can contain multiple plugins and optionally settings as well.</p>
<h6 id="example-11">Example</h6>
<p><code>preset.js</code>:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb28-1" title="1"><span class="va">exports</span>.<span class="at">settings</span> <span class="op">=</span> <span class="op">{</span><span class="dt">bullet</span><span class="op">:</span> <span class="st">&#39;*&#39;</span><span class="op">,</span> <span class="dt">fences</span><span class="op">:</span> <span class="kw">true</span><span class="op">}</span></a>
<a class="sourceLine" id="cb28-2" title="2"></a>
<a class="sourceLine" id="cb28-3" title="3"><span class="va">exports</span>.<span class="at">plugins</span> <span class="op">=</span> [</a>
<a class="sourceLine" id="cb28-4" title="4">  <span class="at">require</span>(<span class="st">&#39;remark-preset-lint-recommended&#39;</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb28-5" title="5">  <span class="at">require</span>(<span class="st">&#39;remark-comment-config&#39;</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb28-6" title="6">  <span class="at">require</span>(<span class="st">&#39;remark-preset-lint-markdown-style-guide&#39;</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb28-7" title="7">  [<span class="at">require</span>(<span class="st">&#39;remark-toc&#39;</span>)<span class="op">,</span> <span class="op">{</span><span class="dt">maxDepth</span><span class="op">:</span> <span class="dv">3</span><span class="op">,</span> <span class="dt">tight</span><span class="op">:</span> <span class="kw">true</span><span class="op">}</span>]<span class="op">,</span></a>
<a class="sourceLine" id="cb28-8" title="8">  <span class="at">require</span>(<span class="st">&#39;remark-github&#39;</span>)</a>
<a class="sourceLine" id="cb28-9" title="9">]</a></code></pre></div>
<p><code>index.js</code>:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb29-1" title="1"><span class="kw">var</span> remark <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;remark&#39;</span>)</a>
<a class="sourceLine" id="cb29-2" title="2"><span class="kw">var</span> vfile <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;to-vfile&#39;</span>)</a>
<a class="sourceLine" id="cb29-3" title="3"><span class="kw">var</span> report <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;vfile-reporter&#39;</span>)</a>
<a class="sourceLine" id="cb29-4" title="4"><span class="kw">var</span> preset <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;./preset&#39;</span>)</a>
<a class="sourceLine" id="cb29-5" title="5"></a>
<a class="sourceLine" id="cb29-6" title="6"><span class="at">remark</span>()</a>
<a class="sourceLine" id="cb29-7" title="7">  .<span class="at">use</span>(preset)</a>
<a class="sourceLine" id="cb29-8" title="8">  .<span class="at">process</span>(<span class="va">vfile</span>.<span class="at">readSync</span>(<span class="st">&#39;index.md&#39;</span>)<span class="op">,</span> <span class="kw">function</span>(err<span class="op">,</span> file) <span class="op">{</span></a>
<a class="sourceLine" id="cb29-9" title="9">    <span class="va">console</span>.<span class="at">error</span>(<span class="at">report</span>(err <span class="op">||</span> file))</a>
<a class="sourceLine" id="cb29-10" title="10"></a>
<a class="sourceLine" id="cb29-11" title="11">    <span class="cf">if</span> (file) <span class="op">{</span></a>
<a class="sourceLine" id="cb29-12" title="12">      <span class="va">vfile</span>.<span class="at">writeSync</span>(file)</a>
<a class="sourceLine" id="cb29-13" title="13">    <span class="op">}</span></a>
<a class="sourceLine" id="cb29-14" title="14">  <span class="op">}</span>)</a></code></pre></div>
<h2 id="contribute">Contribute</h2>
<p><strong>unified</strong> is built by people just like you! Check out <a href="contributing.md"><code>contributing.md</code></a> for ways to get started.</p>
<p>This project has a <a href="code-of-conduct.md">Code of Conduct</a>. By interacting with this repository, organisation, or community you agree to abide by its terms.</p>
<p>Want to chat with the community and contributors? Join us in <a href="https://spectrum.chat/unified">spectrum</a>!</p>
<p>Have an idea for a cool new utility or tool? That’s great! If you want feedback, help, or just to share it with the world you can do so by creating an issue in the <a href="https://github.com/unifiedjs/ideas"><code>unifiedjs/ideas</code></a> repository!</p>
<h2 id="acknowledgments">Acknowledgments</h2>
<p>Preliminary work for unified was done <a href="https://github.com/retextjs/retext/commit/8fcb1f#diff-168726dbe96b3ce427e7fedce31bb0bc">in 2014</a> for <a href="https://github.com/retextjs/retext"><strong>retext</strong></a> and inspired by <a href="https://github.com/segmentio/ware"><code>ware</code></a>. Further incubation happened in <a href="https://github.com/remarkjs/remark"><strong>remark</strong></a>. The project was finally <a href="https://github.com/remarkjs/remark/commit/9892ec#diff-168726dbe96b3ce427e7fedce31bb0bc">externalised</a> in 2015 and <a href="https://github.com/unifiedjs/unified/commit/2ba1cf">published</a> as <code>unified</code>. The project was authored by <a href="https://github.com/wooorm"><strong><span class="citation" data-cites="wooorm">@wooorm</span></strong></a>.</p>
<p>Although <code>unified</code> since moved it’s plugin architecture to <a href="https://github.com/wooorm/trough#function-fninput-next"><code>trough</code></a>, thanks to <a href="https://github.com/calvinfo"><strong><span class="citation" data-cites="calvinfo">@calvinfo</span></strong></a>, <a href="https://github.com/ianstormtaylor"><strong><span class="citation" data-cites="ianstormtaylor">@ianstormtaylor</span></strong></a>, and others for their work on <a href="https://github.com/segmentio/ware"><code>ware</code></a>, which was a huge initial inspiration.</p>
<h2 id="license">License</h2>
<p><a href="license">MIT</a> © <a href="https://wooorm.com">Titus Wormer</a></p>
<!-- Definitions -->
</body>
</html>
