<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>README</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<h1 id="file-system-simplified-file-system">file-system — Simplified file system</h1>
<p><a href="https://nodei.co/npm/file-system/"><img src="https://nodei.co/npm/file-system.png?downloads=true&amp;downloadRank=true&amp;stars=true" alt="NPM" /></a></p>
<p>This module make file opertaion apis simple, you don’t need to care the dir exits. and the api is same as node’s filesystem. This is no exists time cost for this plugin.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb1-1" title="1"><span class="kw">var</span> fs <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;file-system&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-2" title="2"></a>
<a class="sourceLine" id="cb1-3" title="3"><span class="va">fs</span>.<span class="at">mkdir</span>(<span class="st">&#39;1/2/3/4/5&#39;</span><span class="op">,</span> [mode]<span class="op">,</span> <span class="kw">function</span>(err) <span class="op">{}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-4" title="4"><span class="va">fs</span>.<span class="at">mkdirSync</span>(<span class="st">&#39;1/2/3/4/5&#39;</span><span class="op">,</span> [mode])<span class="op">;</span></a>
<a class="sourceLine" id="cb1-5" title="5"><span class="va">fs</span>.<span class="at">writeFile</span>(<span class="st">&#39;path/test.txt&#39;</span><span class="op">,</span> <span class="st">&#39;aaa&#39;</span><span class="op">,</span> <span class="kw">function</span>(err) <span class="op">{}</span>)</a></code></pre></div>
<h3 id="install">install</h3>
<pre><code>npm install file-system --save</code></pre>
<h2 id="api">API</h2>
<h3 id="fs">.fs</h3>
<p>file extend node fs origin methods, and overwrite some methods with next list chart</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="kw">var</span> file <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;file-system&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-2" title="2"><span class="kw">var</span> fs <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;fs&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-3" title="3"></a>
<a class="sourceLine" id="cb3-4" title="4"><span class="va">file</span>.<span class="at">readFile</span> <span class="op">===</span> <span class="va">fs</span>.<span class="at">readFile</span> <span class="co">// true</span></a></code></pre></div>
<h3 id="mkdir">.mkdir</h3>
<p>The api is same as node’s mkdir</p>
<h3 id="mkdirsync">.mkdirSync</h3>
<p>The api is same as node’s mkdir</p>
<h3 id="writefile">.writeFile</h3>
<p>The api is same as node’s writeFile</p>
<h3 id="writefilesync">.writeFileSync</h3>
<p>The api is same as node’s writeFile</p>
<h3 id="filematch">.fileMatch</h3>
<p>The api equal <a href="https://github.com/douzi8/file-match">file-match</a></p>
<h3 id="copyfilesrcpath-destpath-options">.copyFile(srcpath, destpath, options)</h3>
<p>Asynchronously copy a file into newpath * {string} <code>srcpath</code> required * {string} <code>destpath</code> required * {object} <code>options</code> * {string} <code>options.encoding</code> [options.encoding=utf8] * {function} <code>options.done(err)</code> * {function} <code>options.process(content)</code><br />
The process argument must return processed content</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1"><span class="va">fs</span>.<span class="at">copyFile</span>(<span class="st">&#39;deom.png&#39;</span><span class="op">,</span> <span class="st">&#39;dest/demo.png&#39;</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb4-2" title="2">  <span class="dt">done</span><span class="op">:</span> <span class="kw">function</span>(err) <span class="op">{</span></a>
<a class="sourceLine" id="cb4-3" title="3">    <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;done&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-4" title="4">  <span class="op">}</span></a>
<a class="sourceLine" id="cb4-5" title="5"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h3 id="copyfilesyncsrcpath-destpath-options">.copyFileSync(srcpath, destpath, options)</h3>
<p>The api same as copyFile, but it’s synchronous</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb5-1" title="1"><span class="va">fs</span>.<span class="at">copyFileSync</span>(<span class="st">&#39;demo.png&#39;</span><span class="op">,</span> <span class="st">&#39;dest/demo.png&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb5-2" title="2"><span class="va">fs</span>.<span class="at">copyFileSync</span>(<span class="st">&#39;demo.css&#39;</span><span class="op">,</span> <span class="st">&#39;dest/demo.css&#39;</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb5-3" title="3">  <span class="dt">process</span><span class="op">:</span> <span class="kw">function</span>(contents) <span class="op">{</span></a>
<a class="sourceLine" id="cb5-4" title="4">    <span class="cf">return</span> contents<span class="op">;</span></a>
<a class="sourceLine" id="cb5-5" title="5">  <span class="op">}</span></a>
<a class="sourceLine" id="cb5-6" title="6"><span class="op">}</span>)</a></code></pre></div>
<h3 id="recursedirpath-filter-callback">.recurse(dirpath, filter, callback)</h3>
<p>Recurse into a directory, executing callback for each file and folder. if the filename is undefiend, the callback is for folder, otherwise for file. * {string} <code>dirpath</code> required * {string|array|function} <code>filter</code><br />
If the filter is function, executing callback for all files and folder * {function} <code>callback(filepath, filename, relative)</code></p>
<div class="sourceCode" id="cb6"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb6-1" title="1"><span class="va">fs</span>.<span class="at">recurse</span>(<span class="st">&#39;path&#39;</span><span class="op">,</span> <span class="kw">function</span>(filepath<span class="op">,</span> relative<span class="op">,</span> filename) <span class="op">{</span> <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-2" title="2"></a>
<a class="sourceLine" id="cb6-3" title="3"><span class="va">fs</span>.<span class="at">recurse</span>(<span class="st">&#39;path&#39;</span><span class="op">,</span> [</a>
<a class="sourceLine" id="cb6-4" title="4">  <span class="st">&#39;*.css&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb6-5" title="5">  <span class="st">&#39;**/*.js&#39;</span><span class="op">,</span> </a>
<a class="sourceLine" id="cb6-6" title="6">  <span class="st">&#39;path/*.html&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb6-7" title="7">  <span class="st">&#39;!**/path/*.js&#39;</span></a>
<a class="sourceLine" id="cb6-8" title="8">]<span class="op">,</span> <span class="kw">function</span>(filepath<span class="op">,</span> relative<span class="op">,</span> filename) <span class="op">{</span>  </a>
<a class="sourceLine" id="cb6-9" title="9">  <span class="cf">if</span> (filename) <span class="op">{</span></a>
<a class="sourceLine" id="cb6-10" title="10">  <span class="co">// it&#39;s file</span></a>
<a class="sourceLine" id="cb6-11" title="11">  <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb6-12" title="12">  <span class="co">// it&#39;s folder</span></a>
<a class="sourceLine" id="cb6-13" title="13">  <span class="op">}</span></a>
<a class="sourceLine" id="cb6-14" title="14"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-15" title="15"></a>
<a class="sourceLine" id="cb6-16" title="16"><span class="co">//  Only using files</span></a>
<a class="sourceLine" id="cb6-17" title="17"><span class="va">fs</span>.<span class="at">recurse</span>(<span class="st">&#39;path&#39;</span><span class="op">,</span> <span class="kw">function</span>(filepath<span class="op">,</span> relative<span class="op">,</span> filename) <span class="op">{</span>  </a>
<a class="sourceLine" id="cb6-18" title="18">  <span class="cf">if</span> (<span class="op">!</span>filename) <span class="cf">return</span><span class="op">;</span></a>
<a class="sourceLine" id="cb6-19" title="19"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p><a href="https://github.com/douzi8/file-match#filter-description">filter params description</a></p>
<h3 id="recursesyncdirpath-filter-callback">.recurseSync(dirpath, filter, callback)</h3>
<p>The api is same as recurse, but it is synchronous</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb7-1" title="1"><span class="va">fs</span>.<span class="at">recurseSync</span>(<span class="st">&#39;path&#39;</span><span class="op">,</span> <span class="kw">function</span>(filepath<span class="op">,</span> relative<span class="op">,</span> filename) <span class="op">{</span></a>
<a class="sourceLine" id="cb7-2" title="2">  </a>
<a class="sourceLine" id="cb7-3" title="3"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-4" title="4"></a>
<a class="sourceLine" id="cb7-5" title="5"><span class="va">fs</span>.<span class="at">recurseSync</span>(<span class="st">&#39;path&#39;</span><span class="op">,</span> [<span class="st">&#39;**/*.js&#39;</span><span class="op">,</span> <span class="st">&#39;path/**/*.html&#39;</span>]<span class="op">,</span> <span class="kw">function</span>(filepath<span class="op">,</span> relative<span class="op">,</span> filename) <span class="op">{</span></a>
<a class="sourceLine" id="cb7-6" title="6">  </a>
<a class="sourceLine" id="cb7-7" title="7"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h3 id="rmdirsyncdirpath">.rmdirSync(dirpath)</h3>
<p>Recurse into a directory, remove all of the files and folder in this directory.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb8-1" title="1"><span class="va">fs</span>.<span class="at">rmdirSync</span>(<span class="st">&#39;path&#39;</span>)<span class="op">;</span></a></code></pre></div>
<h3 id="copysyncdirpath-destpath-options">.copySync(dirpath, destpath, options)</h3>
<p>Recurse into a directory, copy all files into dest. * {string} <code>dirpath</code> required * {string} <code>destpath</code> required * {object} <code>options</code> * {string|array} <code>options.filter</code> * {function} <code>options.process(contents, filepath, relative)</code><br />
If custom the destpath, return object, otherwise return content * {string|array} <code>options.noProcess</code></p>
<div class="sourceCode" id="cb9"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb9-1" title="1"><span class="va">fs</span>.<span class="at">copySync</span>(<span class="st">&#39;path&#39;</span><span class="op">,</span> <span class="st">&#39;dest&#39;</span><span class="op">,</span> <span class="op">{</span> <span class="dt">clear</span><span class="op">:</span> <span class="kw">true</span> <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb9-2" title="2"></a>
<a class="sourceLine" id="cb9-3" title="3"><span class="va">fs</span>.<span class="at">copySync</span>(<span class="st">&#39;src&#39;</span><span class="op">,</span> <span class="st">&#39;dest/src&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb9-4" title="4"></a>
<a class="sourceLine" id="cb9-5" title="5"><span class="va">fs</span>.<span class="at">copySync</span>(<span class="st">&#39;src&#39;</span><span class="op">,</span> <span class="st">&#39;dest/src&#39;</span><span class="op">,</span> <span class="op">{</span> <span class="dt">filter</span><span class="op">:</span> [<span class="st">&#39;*.js&#39;</span><span class="op">,</span> <span class="st">&#39;path/**/*.css&#39;</span>] <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb9-6" title="6"></a>
<a class="sourceLine" id="cb9-7" title="7"><span class="va">fs</span>.<span class="at">copySync</span>(<span class="st">&#39;path&#39;</span><span class="op">,</span> <span class="st">&#39;dest&#39;</span><span class="op">,</span> <span class="op">{</span> </a>
<a class="sourceLine" id="cb9-8" title="8">  <span class="dt">noProcess</span><span class="op">:</span> <span class="st">&#39;**/*.{jpg, png}&#39;</span><span class="op">,</span>            <span class="co">// Don&#39;t process images</span></a>
<a class="sourceLine" id="cb9-9" title="9">  <span class="dt">process</span><span class="op">:</span> <span class="kw">function</span>(contents<span class="op">,</span> filepath<span class="op">,</span> relative) <span class="op">{</span></a>
<a class="sourceLine" id="cb9-10" title="10">    <span class="co">// only process file content</span></a>
<a class="sourceLine" id="cb9-11" title="11">    <span class="cf">return</span> contents<span class="op">;</span></a>
<a class="sourceLine" id="cb9-12" title="12">    <span class="co">// or custom destpath</span></a>
<a class="sourceLine" id="cb9-13" title="13">    <span class="cf">return</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb9-14" title="14">      <span class="dt">contents</span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb9-15" title="15">      <span class="dt">filepath</span><span class="op">:</span> <span class="st">&#39;&#39;</span></a>
<a class="sourceLine" id="cb9-16" title="16">    <span class="op">};</span></a>
<a class="sourceLine" id="cb9-17" title="17">  <span class="op">}</span> </a>
<a class="sourceLine" id="cb9-18" title="18"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb9-19" title="19"></a>
<a class="sourceLine" id="cb9-20" title="20"><span class="co">//Handler self files</span></a>
<a class="sourceLine" id="cb9-21" title="21"><span class="va">fs</span>.<span class="at">copySync</span>(<span class="st">&#39;path&#39;</span><span class="op">,</span> <span class="st">&#39;path&#39;</span><span class="op">,</span> <span class="op">{</span> <span class="dt">filter</span><span class="op">:</span> [<span class="st">&#39;*.html.js&#39;</span>]<span class="op">,</span> <span class="dt">process</span><span class="op">:</span> <span class="kw">function</span>(contents<span class="op">,</span> filepath) <span class="op">{}</span> <span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h3 id="base64">.base64</h3>
<p>Deprecated, move to <a href="https://github.com/douzi8/base64-img#base64filename-callback">base64</a> ### .base64Sync Deprecated, move to <a href="https://github.com/douzi8/base64-img#base64syncfilename">base64Sync</a></p>
</body>
</html>
