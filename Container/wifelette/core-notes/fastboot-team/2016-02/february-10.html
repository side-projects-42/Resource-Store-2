<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>february-10</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
</head>
<body>
<h1 id="fastboot-meeting-notes-2016-02-10">FastBoot Meeting Notes 2016-02-10</h1>
<h2 id="attendees">Attendees</h2>
<p>Tom Dale, Ed Faulkner, Krati Ahuja, Robert Jackson, Ron White, Miguel Cambda</p>
<h2 id="agenda">Agenda</h2>
<ul>
<li>[x] <code>head</code> tag support (<span class="citation" data-cites="ronco">@ronco</span>)</li>
<li>[x] Fingerprinted assets (<span class="citation" data-cites="tomdale">@tomdale</span>)</li>
<li>[x] Cookies &amp; auth (<span class="citation" data-cites="tomdale">@tomdale</span>)</li>
<li>[x] Dynamic index.html (<span class="citation" data-cites="ef4">@ef4</span>)</li>
<li>[x] Bringing testing to the masses (<span class="citation" data-cites="cibernox">@cibernox</span>)</li>
</ul>
<h2 id="minutes">Minutes</h2>
<p>RW: Got everything working using <code>ember-cli-head</code> addon. Gives you a <code>head.hbs</code> template. There’s a service that behaves like the model for that template. I’ve tested this with FastBoot and it’s working.</p>
<p>RW: There are two open PRs that are required to unlock the functionality. One two FastBoot addon and one to the FastBoot server. One thing I’m not sure about is how to test it.</p>
<p>TD: I would take the same approach as we do in Ember FastBoot using <code>ember-cli-addon-tests</code>.</p>
<p>RW: Once that’s done I think it’s ready to merge.</p>
<p>RJ: It seems like we can remove support for <code>title</code> once this lands, since <code>title</code> exists inside the <code>head</code>?</p>
<p>RW: I took this approach of supporting both because I didn’t want to break <code>ember-cli-document-title</code>.</p>
<p>TD: <code>FastBoot.request</code></p>
<p>RJ: We should underscore or somehow make it clear that this is experimental and/or private…</p>
<p>TD: I will make it <code>FastBoot._request</code> so we don’t make the entire Express API surface area our public API</p>
<p>EF: I also wanted to mention that switching from a browser app to a server app, the best practice is to use cookies and not tokens. But we have to use cookies in lieue of <code>localStorage</code> because it’s no longer available. In this case, we’re going to have a FastBoot cookie that can be used to exchange for headers that the app uses to talk to other services.</p>
<p>EF: Dynamic index.html. One nice thing that falls out of the architecture of FastBoot is that you can imagine it as a proxy layer between your normal Ember app and the user. It will consume the assets and render them and serve them to the user. It would be nice if you could fetch the index.html from the server and serve it. This is counter to the current architecture that we have now where there’s a specific FastBoot build with its own index.html.</p>
<p>EF: There are cases where you’re doing a progressive upgrade and you want the index.html to be generated by PHP or Ruby or something. This lets people who need a server-rendered page still take advantage of FastBoot.</p>
<p>MC: I pasted a link to what I spiked for ember-power-select: https://github.com/cibernox/ember-power-select/blob/master/fastboot-tests/power-select-test.js</p>
<p>MC: I just read the testing RFC from <span class="citation" data-cites="rwjblue">@rwjblue</span> and now I think the API will be much nicer if we use <code>async</code>/<code>await</code>.</p>
<p>RJ: If we use <code>async</code>/<code>await</code> keep in mind that we will need to transpile for Node. Currently all of the Node-land stuff is not transpiled. It’s totally possible and solvable, but we will need to add infrastructure.</p>
<p>EF: It’s a yak we need to shave, but it’s something we want and need anyway.</p>
<p>MC: It’s probably a matter of customizing the Brocfile to ingest the new files.</p>
<p>RJ: If you had one shot—one opportunity—would you take it? Or let it slip?</p>
<p>RJ: One thing that I made sure of is that we don’t return jQuery objects. That should make it possible to use things like <code>find()</code> and simple-dom to use the same selectors/assertions in both environments.</p>
<p>TD: I’m concerned about perf of fake DOM for production but have fewer reservations with bringing heavier-weight dependencies for testing.</p>
<p>RJ: We can do what testem does and actually use a real browser to do tests, because it’s serving nothing but HTML.</p>
<p>RJ: I have been rethinking Ember testing holistically. I don’t want to block that effort on this, but I want to make sure we at least think through it so there aren’t any obvious conflicts.</p>
<p>MC: I also want to make testem run the scripts I created. So you run <code>ember test</code> and testem takes care fo these as a separate process.</p>
<p>KA: Do we plan to make the sandbox swappable? We have a different sandbox and don’t want to have to maintain parity.</p>
<p>TD: Yes, there was a PR from James Murphy but I think it needs updating.</p>
<h2 id="action-items">Action Items</h2>
<ul>
<li>[ ] <span class="citation" data-cites="tomdale">@tomdale</span> to expose <code>_request</code> on FastBoot</li>
<li>[ ] <span class="citation" data-cites="ef4">@ef4</span> to design API for “session” service that uses cookies to sync stateful info across browser and FastBoot server</li>
<li>[ ] <span class="citation" data-cites="ronco">@ronco</span> to add automated testing for <code>ember-cli-head</code></li>
<li>[ ] <span class="citation" data-cites="cibernox">@cibernox</span> will try to create generic harness for FastBoot extracted from ember-power-select</li>
<li>[ ] <span class="citation" data-cites="krati">@krati</span> to update sandbox adapter PR</li>
</ul>
</body>
</html>
