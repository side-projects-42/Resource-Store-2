# FastBoot Meeting Notes 2016-02-10

## Attendees

Tom Dale, Ed Faulkner, Krati Ahuja, Robert Jackson, Ron White, Miguel
Cambda

## Agenda

- [x]  `head` tag support (@ronco)
- [x] Fingerprinted assets (@tomdale)
- [x] Cookies & auth (@tomdale)
- [x] Dynamic index.html (@ef4)
- [x] Bringing testing to the masses (@cibernox)

## Minutes

RW: Got everything working using `ember-cli-head` addon. Gives you a
`head.hbs` template. There's a service that behaves like the model for
that template. I've tested this with FastBoot and it's working.

RW: There are two open PRs that are required to unlock the
functionality. One two FastBoot addon and one to the FastBoot server.
One thing I'm not sure about is how to test it.

TD: I would take the same approach as we do in Ember FastBoot using
`ember-cli-addon-tests`.

RW: Once that's done I think it's ready to merge.

RJ: It seems like we can remove support for `title` once this lands,
since `title` exists inside the `head`?

RW: I took this approach of supporting both because I didn't want to
break `ember-cli-document-title`.

TD: `FastBoot.request`

RJ: We should underscore or somehow make it clear that this is
experimental and/or private...

TD: I will make it `FastBoot._request` so we don't make the entire
Express API surface area our public API

EF: I also wanted to mention that switching from a browser app to a
server app, the best practice is to use cookies and not tokens. But we
have to use cookies in lieue of `localStorage` because it's no longer
available. In this case, we're going to have a FastBoot cookie that can
be used to exchange for headers that the app uses to talk to other
services.

EF: Dynamic index.html. One nice thing that falls out of the
architecture of FastBoot is that you can imagine it as a proxy layer
between your normal Ember app and the user. It will consume the assets
and render them and serve them to the user. It would be nice if you
could fetch the index.html from the server and serve it. This is counter
to the current architecture that we have now where there's a specific
FastBoot build with its own index.html.

EF: There are cases where you're doing a progressive upgrade and you
want the index.html to be generated by PHP or Ruby or something. This
lets people who need a server-rendered page still take advantage of
FastBoot.

MC: I pasted a link to what I spiked for ember-power-select:
https://github.com/cibernox/ember-power-select/blob/master/fastboot-tests/power-select-test.js

MC: I just read the testing RFC from @rwjblue and now I think the API
will be much nicer if we use `async`/`await`.

RJ: If we use `async`/`await` keep in mind that we will need to
transpile for Node. Currently all of the Node-land stuff is not
transpiled. It's totally possible and solvable, but we will need to add
infrastructure.

EF: It's a yak we need to shave, but it's something we want and need
anyway.

MC: It's probably a matter of customizing the Brocfile to ingest the new
files.

RJ: If you had one shot—one opportunity—would you take it? Or let it
slip?

RJ: One thing that I made sure of is that we don't return jQuery
objects. That should make it possible to use things like `find()` and
simple-dom to use the same selectors/assertions in both environments.

TD: I'm concerned about perf of fake DOM for production but have fewer
reservations with bringing heavier-weight dependencies for testing.

RJ: We can do what testem does and actually use a real browser to do
tests, because it's serving nothing but HTML.

RJ: I have been rethinking Ember testing holistically. I don't want to
block that effort on this, but I want to make sure we at least think
through it so there aren't any obvious conflicts.

MC: I also want to make testem run the scripts I created. So you run
`ember test` and testem takes care fo these as a separate process.

KA: Do we plan to make the sandbox swappable? We have a different
sandbox and don't want to have to maintain parity.

TD: Yes, there was a PR from James Murphy but I think it needs updating.

## Action Items

- [ ] @tomdale to expose `_request` on FastBoot
- [ ] @ef4 to design API for "session" service that uses cookies to sync
  stateful info across browser and FastBoot server
- [ ] @ronco to add automated testing for `ember-cli-head`
- [ ] @cibernox will try to create generic harness for FastBoot
  extracted from ember-power-select
- [ ] @krati to update sandbox adapter PR
