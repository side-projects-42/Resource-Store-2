YUI.add("gallery-bitly",function(A){var C=function(B){C.superclass.constructor.call(this,B);};C.NAME="bitly";C.ATTRS={username:{value:""},key:{value:""}};A.extend(C,A.Base,{api:"http:/"+"/api.bit.ly/",initializer:function(){if(!this.get("key")||!this.get("username")){A.error("You must give a username and an API key. If you do not have an apiKey, sign up for a bitly account and go to your Account page to get your apiKey. (http:/"+"/bit.ly/)");}},destructor:function(){},_buildURL:function(B,D){return this.api+B+"?version=2.0.1&login="+this.get("username")+"&apiKey="+this.get("key")+"&"+D;},_handleAPI:function(E,D,B){var F=A.guid().replace(/-/g,"_");YUI[F]=A.bind(function(G){if(G.results){if(E=="stats"){this.fire(E,G.results);if(B){B=A.bind(B,this);B(G.results);}}else{A.each(G.results,function(H){this.fire(E,H);if(B){B=A.bind(B,this);B(H);}},this);}}delete YUI[F];},this);A.Get.script(D+"&callback=YUI."+F);},shorten:function(D,B){var E=this._buildURL("shorten","longUrl="+encodeURIComponent(D));this._handleAPI("shorten",E,B);},expand:function(F,B){var E=((F.url)?"shortUrl="+encodeURIComponent(F.url):"hash="+F.hash),D=this._buildURL("expand",E);this._handleAPI("expand",D,B);},expandByURL:function(D,B){return this.expand({url:D},B);},expandByHash:function(D,B){return this.expand({hash:D},B);},info:function(F,B){var E=((F.url)?"shortUrl="+encodeURIComponent(F.url):"hash="+F.hash),D=this._buildURL("info",E);this._handleAPI("info",D,B);},infoByURL:function(D,B){return this.info({url:D},B);},infoByHash:function(D,B){return this.info({hash:D},B);},stats:function(F,B){var E=((F.url)?"shortUrl="+encodeURIComponent(F.url):"hash="+F.hash),D=this._buildURL("stats",E);this._handleAPI("stats",D,B);},statsByURL:function(D,B){return this.stats({url:D},B);},statsByHash:function(D,B){return this.stats({hash:D},B);}});A.bitly=C;},"gallery-2009.11.09-19",{requires:["base","get"]});