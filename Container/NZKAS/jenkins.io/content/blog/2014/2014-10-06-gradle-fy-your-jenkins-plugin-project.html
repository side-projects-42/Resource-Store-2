<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <meta charset="utf-8" />
    <meta name="generator" content="pandoc" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=yes"
    />
    <title>2014-10-06-gradle-fy-your-jenkins-plugin-project</title>
    <style type="text/css">
      code {
        white-space: pre-wrap;
      }
      span.smallcaps {
        font-variant: small-caps;
      }
      span.underline {
        text-decoration: underline;
      }
      div.column {
        display: inline-block;
        vertical-align: top;
        width: 50%;
      }
    </style>
  </head>
  <body>
    <p>
      (This is a guest post from
      <a href="http://www.daniel-spilker.com/">Daniel Spilker</a>)
    </p>
    <p>
      Jenkins supports building plugins using
      <a href="http://www.gradle.org/">Gradle</a> for a while now. Last week a
      new version of the
      <a href="https://wiki.jenkins-ci.org/display/JENKINS/Gradle+JPI+Plugin"
        >Gradle JPI plugin</a
      >
      has been released to iron out some
      <a
        href="https://github.com/jenkinsci/gradle-jpi-plugin/blob/0.6.0/CHANGELOG.md"
        >issues</a
      >.
    </p>
    <p>
      The Gradle JPI plugin enables a 100% groovy plugin development environment
      with Groovy as primary programming language,
      <a href="https://code.google.com/p/spock/">Spock</a> for writing tests and
      Gradle as build system. Have a look at the
      <a href="https://github.com/jenkinsci/job-dsl-plugin">Job DSL plugin</a>
      for an example.
    </p>
    <p>
      An existing Maven build can be converted to Gradle by using the
      build.gradle template from the Gradle JPI plugin’s
      <a
        href="https://github.com/jenkinsci/gradle-jpi-plugin/blob/master/README.md"
        >README</a
      >. For instance, the
      <a
        href="https://github.com/jenkinsci/gradle-plugin/blob/763256601be20c30d238179c1ed3965011d6dfd5/pom.xml"
        >POM</a
      >
      from the
      <a href="https://wiki.jenkins-ci.org/display/JENKINS/Gradle+Plugin"
        >Gradle plugin</a
      >
      translates to this build.gradle file:
    </p>
    <pre><code>buildscript {
    repositories {
        mavenCentral()
        maven {
            url &#39;http://repo.jenkins-ci.org/releases/&#39;
        }
    }
    dependencies {
        classpath &#39;org.jenkins-ci.tools:gradle-jpi-plugin:0.6.0&#39;
    }
}

apply plugin: &#39;jpi&#39;

group = &#39;org.jenkins-ci.plugins&#39;
version = &#39;1.25-SNAPSHOT&#39;

jenkinsPlugin {
    coreVersion = &#39;1.480&#39;
    displayName = &#39;Jenkins Gradle plugin&#39;
    url = &#39;https://wiki.jenkins-ci.org/display/JENKINS/Gradle+Plugin&#39;
    gitHubUrl = &#39;https://github.com/jenkinsci/gradle-plugin&#39;

    developers {
        developer {
            id &#39;gbois&#39;
            name &#39;Gregory Boissinot&#39;
            timezone &#39;+1&#39;
        }
    }
}

dependencies {
    compile &#39;org.jenkins-ci.lib:dry-run-lib:0.1&#39;
}</code></pre>
    <p>
      Usage of the Gradle JPI plugin is similar to working with the Maven HPI
      plugin. Use <code>gradle jpi</code> to build the plugin file.
      <code>gradle check</code> runs the tests,
      <code>gradle install</code> copies the plugin into the local Maven
      repository, <code>gradle uploadArchives</code> deploys the plugin to the
      Jenkins Maven repository and <code>gradle server</code> starts a Jenkins
      development server with the plugin installed.
    </p>
    <p>
      It is recommended to use Gradle 1.8 because that is the version used to
      build and test the Gradle JPI plugin.
    </p>
    <p>
      For the next release it is planned to do some maintenance like fixing code
      style issues and adding tests. After that more issues need to be addressed
      to bring the plugin on par with the Maven HPI plugin, most notably fixing
      the test dependencies (<a
        href="https://issues.jenkins-ci.org/browse/JENKINS-17129"
        >JENKINS-17129</a
      >) and publishing the plugin’s JAR (<a
        href="https://issues.jenkins-ci.org/browse/JENKINS-25007"
        >JENKINS-25007</a
      >). Updating Gradle to 2.x and getting the plugin on the
      <a href="http://plugins.gradle.org/">Gradle plugin portal</a> is also on
      the wishlist.
    </p>
  </body>
</html>
