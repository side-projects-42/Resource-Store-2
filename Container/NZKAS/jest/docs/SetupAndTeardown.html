<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <meta charset="utf-8" />
    <meta name="generator" content="pandoc" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=yes"
    />
    <title>Setup and Teardown</title>
    <style type="text/css">
      code {
        white-space: pre-wrap;
      }
      span.smallcaps {
        font-variant: small-caps;
      }
      span.underline {
        text-decoration: underline;
      }
      div.column {
        display: inline-block;
        vertical-align: top;
        width: 50%;
      }
    </style>
    <style type="text/css">
      a.sourceLine {
        display: inline-block;
        line-height: 1.25;
      }
      a.sourceLine {
        pointer-events: none;
        color: inherit;
        text-decoration: inherit;
      }
      a.sourceLine:empty {
        height: 1.2em;
      }
      .sourceCode {
        overflow: visible;
      }
      code.sourceCode {
        white-space: pre;
        position: relative;
      }
      div.sourceCode {
        margin: 1em 0;
      }
      pre.sourceCode {
        margin: 0;
      }
      @media screen {
        div.sourceCode {
          overflow: auto;
        }
      }
      @media print {
        code.sourceCode {
          white-space: pre-wrap;
        }
        a.sourceLine {
          text-indent: -1em;
          padding-left: 1em;
        }
      }
      pre.numberSource a.sourceLine {
        position: relative;
        left: -4em;
      }
      pre.numberSource a.sourceLine::before {
        content: attr(title);
        position: relative;
        left: -1em;
        text-align: right;
        vertical-align: baseline;
        border: none;
        pointer-events: all;
        display: inline-block;
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        padding: 0 4px;
        width: 4em;
        color: #aaaaaa;
      }
      pre.numberSource {
        margin-left: 3em;
        border-left: 1px solid #aaaaaa;
        padding-left: 4px;
      }
      div.sourceCode {
      }
      @media screen {
        a.sourceLine::before {
          text-decoration: underline;
        }
      }
      code span.al {
        color: #ff0000;
        font-weight: bold;
      } /* Alert */
      code span.an {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* Annotation */
      code span.at {
        color: #7d9029;
      } /* Attribute */
      code span.bn {
        color: #40a070;
      } /* BaseN */
      code span.bu {
      } /* BuiltIn */
      code span.cf {
        color: #007020;
        font-weight: bold;
      } /* ControlFlow */
      code span.ch {
        color: #4070a0;
      } /* Char */
      code span.cn {
        color: #880000;
      } /* Constant */
      code span.co {
        color: #60a0b0;
        font-style: italic;
      } /* Comment */
      code span.cv {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* CommentVar */
      code span.do {
        color: #ba2121;
        font-style: italic;
      } /* Documentation */
      code span.dt {
        color: #902000;
      } /* DataType */
      code span.dv {
        color: #40a070;
      } /* DecVal */
      code span.er {
        color: #ff0000;
        font-weight: bold;
      } /* Error */
      code span.ex {
      } /* Extension */
      code span.fl {
        color: #40a070;
      } /* Float */
      code span.fu {
        color: #06287e;
      } /* Function */
      code span.im {
      } /* Import */
      code span.in {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* Information */
      code span.kw {
        color: #007020;
        font-weight: bold;
      } /* Keyword */
      code span.op {
        color: #666666;
      } /* Operator */
      code span.ot {
        color: #007020;
      } /* Other */
      code span.pp {
        color: #bc7a00;
      } /* Preprocessor */
      code span.sc {
        color: #4070a0;
      } /* SpecialChar */
      code span.ss {
        color: #bb6688;
      } /* SpecialString */
      code span.st {
        color: #4070a0;
      } /* String */
      code span.va {
        color: #19177c;
      } /* Variable */
      code span.vs {
        color: #4070a0;
      } /* VerbatimString */
      code span.wa {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* Warning */
    </style>
  </head>
  <body>
    <header id="title-block-header">
      <h1 class="title">Setup and Teardown</h1>
    </header>
    <p>
      Often while writing tests you have some setup work that needs to happen
      before tests run, and you have some finishing work that needs to happen
      after tests run. Jest provides helper functions to handle this.
    </p>
    <h2 id="repeating-setup-for-many-tests">Repeating Setup For Many Tests</h2>
    <p>
      If you have some work you need to do repeatedly for many tests, you can
      use <code>beforeEach</code> and <code>afterEach</code>.
    </p>
    <p>
      For example, let’s say that several tests interact with a database of
      cities. You have a method <code>initializeCityDatabase()</code> that must
      be called before each of these tests, and a method
      <code>clearCityDatabase()</code> that must be called after each of these
      tests. You can do this with:
    </p>
    <div class="sourceCode" id="cb1">
      <pre
        class="sourceCode js"
      ><code class="sourceCode javascript"><a class="sourceLine" id="cb1-1" title="1"><span class="at">beforeEach</span>(() <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb1-2" title="2">  <span class="at">initializeCityDatabase</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb1-3" title="3"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-4" title="4"></a>
<a class="sourceLine" id="cb1-5" title="5"><span class="at">afterEach</span>(() <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb1-6" title="6">  <span class="at">clearCityDatabase</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb1-7" title="7"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-8" title="8"></a>
<a class="sourceLine" id="cb1-9" title="9"><span class="at">test</span>(<span class="st">&#39;city database has Vienna&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb1-10" title="10">  <span class="at">expect</span>(<span class="at">isCity</span>(<span class="st">&#39;Vienna&#39;</span>)).<span class="at">toBeTruthy</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb1-11" title="11"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-12" title="12"></a>
<a class="sourceLine" id="cb1-13" title="13"><span class="at">test</span>(<span class="st">&#39;city database has San Juan&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb1-14" title="14">  <span class="at">expect</span>(<span class="at">isCity</span>(<span class="st">&#39;San Juan&#39;</span>)).<span class="at">toBeTruthy</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb1-15" title="15"><span class="op">}</span>)<span class="op">;</span></a></code></pre>
    </div>
    <p>
      <code>beforeEach</code> and <code>afterEach</code> can handle asynchronous
      code in the same ways that
      <a href="TestingAsyncCode.md">tests can handle asynchronous code</a> -
      they can either take a <code>done</code> parameter or return a promise.
      For example, if <code>initializeCityDatabase()</code> returned a promise
      that resolved when the database was initialized, we would want to return
      that promise:
    </p>
    <div class="sourceCode" id="cb2">
      <pre
        class="sourceCode js"
      ><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1"><span class="at">beforeEach</span>(() <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb2-2" title="2">  <span class="cf">return</span> <span class="at">initializeCityDatabase</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb2-3" title="3"><span class="op">}</span>)<span class="op">;</span></a></code></pre>
    </div>
    <h2 id="one-time-setup">One-Time Setup</h2>
    <p>
      In some cases, you only need to do setup once, at the beginning of a file.
      This can be especially bothersome when the setup is asynchronous, so you
      can’t just do it inline. Jest provides <code>beforeAll</code> and
      <code>afterAll</code> to handle this situation.
    </p>
    <p>
      For example, if both <code>initializeCityDatabase</code> and
      <code>clearCityDatabase</code> returned promises, and the city database
      could be reused between tests, we could change our test code to:
    </p>
    <div class="sourceCode" id="cb3">
      <pre
        class="sourceCode js"
      ><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="at">beforeAll</span>(() <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb3-2" title="2">  <span class="cf">return</span> <span class="at">initializeCityDatabase</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb3-3" title="3"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-4" title="4"></a>
<a class="sourceLine" id="cb3-5" title="5"><span class="at">afterAll</span>(() <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb3-6" title="6">  <span class="cf">return</span> <span class="at">clearCityDatabase</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb3-7" title="7"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-8" title="8"></a>
<a class="sourceLine" id="cb3-9" title="9"><span class="at">test</span>(<span class="st">&#39;city database has Vienna&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb3-10" title="10">  <span class="at">expect</span>(<span class="at">isCity</span>(<span class="st">&#39;Vienna&#39;</span>)).<span class="at">toBeTruthy</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb3-11" title="11"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-12" title="12"></a>
<a class="sourceLine" id="cb3-13" title="13"><span class="at">test</span>(<span class="st">&#39;city database has San Juan&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb3-14" title="14">  <span class="at">expect</span>(<span class="at">isCity</span>(<span class="st">&#39;San Juan&#39;</span>)).<span class="at">toBeTruthy</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb3-15" title="15"><span class="op">}</span>)<span class="op">;</span></a></code></pre>
    </div>
    <h2 id="scoping">Scoping</h2>
    <p>
      By default, the <code>before</code> and <code>after</code> blocks apply to
      every test in a file. You can also group tests together using a
      <code>describe</code> block. When they are inside a
      <code>describe</code> block, the <code>before</code> and
      <code>after</code> blocks only apply to the tests within that
      <code>describe</code> block.
    </p>
    <p>
      For example, let’s say we had not just a city database, but also a food
      database. We could do different setup for different tests:
    </p>
    <div class="sourceCode" id="cb4">
      <pre
        class="sourceCode js"
      ><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1"><span class="co">// Applies to all tests in this file</span></a>
<a class="sourceLine" id="cb4-2" title="2"><span class="at">beforeEach</span>(() <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb4-3" title="3">  <span class="cf">return</span> <span class="at">initializeCityDatabase</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb4-4" title="4"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-5" title="5"></a>
<a class="sourceLine" id="cb4-6" title="6"><span class="at">test</span>(<span class="st">&#39;city database has Vienna&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb4-7" title="7">  <span class="at">expect</span>(<span class="at">isCity</span>(<span class="st">&#39;Vienna&#39;</span>)).<span class="at">toBeTruthy</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb4-8" title="8"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-9" title="9"></a>
<a class="sourceLine" id="cb4-10" title="10"><span class="at">test</span>(<span class="st">&#39;city database has San Juan&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb4-11" title="11">  <span class="at">expect</span>(<span class="at">isCity</span>(<span class="st">&#39;San Juan&#39;</span>)).<span class="at">toBeTruthy</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb4-12" title="12"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-13" title="13"></a>
<a class="sourceLine" id="cb4-14" title="14"><span class="at">describe</span>(<span class="st">&#39;matching cities to foods&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb4-15" title="15">  <span class="co">// Applies only to tests in this describe block</span></a>
<a class="sourceLine" id="cb4-16" title="16">  <span class="at">beforeEach</span>(() <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb4-17" title="17">    <span class="cf">return</span> <span class="at">initializeFoodDatabase</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb4-18" title="18">  <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-19" title="19"></a>
<a class="sourceLine" id="cb4-20" title="20">  <span class="at">test</span>(<span class="st">&#39;Vienna &lt;3 sausage&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb4-21" title="21">    <span class="at">expect</span>(<span class="at">isValidCityFoodPair</span>(<span class="st">&#39;Vienna&#39;</span><span class="op">,</span> <span class="st">&#39;Wiener Schnitzel&#39;</span>)).<span class="at">toBe</span>(<span class="kw">true</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-22" title="22">  <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-23" title="23"></a>
<a class="sourceLine" id="cb4-24" title="24">  <span class="at">test</span>(<span class="st">&#39;San Juan &lt;3 plantains&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb4-25" title="25">    <span class="at">expect</span>(<span class="at">isValidCityFoodPair</span>(<span class="st">&#39;San Juan&#39;</span><span class="op">,</span> <span class="st">&#39;Mofongo&#39;</span>)).<span class="at">toBe</span>(<span class="kw">true</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-26" title="26">  <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-27" title="27"><span class="op">}</span>)<span class="op">;</span></a></code></pre>
    </div>
    <p>
      Note that the top-level <code>beforeEach</code> is executed before the
      <code>beforeEach</code> inside the <code>describe</code> block. It may
      help to illustrate the order of execution of all hooks.
    </p>
    <div class="sourceCode" id="cb5">
      <pre
        class="sourceCode js"
      ><code class="sourceCode javascript"><a class="sourceLine" id="cb5-1" title="1"><span class="at">beforeAll</span>(() <span class="kw">=&gt;</span> <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;1 - beforeAll&#39;</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb5-2" title="2"><span class="at">afterAll</span>(() <span class="kw">=&gt;</span> <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;1 - afterAll&#39;</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb5-3" title="3"><span class="at">beforeEach</span>(() <span class="kw">=&gt;</span> <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;1 - beforeEach&#39;</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb5-4" title="4"><span class="at">afterEach</span>(() <span class="kw">=&gt;</span> <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;1 - afterEach&#39;</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb5-5" title="5"><span class="at">test</span>(<span class="st">&#39;&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;1 - test&#39;</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb5-6" title="6"><span class="at">describe</span>(<span class="st">&#39;Scoped / Nested block&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb5-7" title="7">  <span class="at">beforeAll</span>(() <span class="kw">=&gt;</span> <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;2 - beforeAll&#39;</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb5-8" title="8">  <span class="at">afterAll</span>(() <span class="kw">=&gt;</span> <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;2 - afterAll&#39;</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb5-9" title="9">  <span class="at">beforeEach</span>(() <span class="kw">=&gt;</span> <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;2 - beforeEach&#39;</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb5-10" title="10">  <span class="at">afterEach</span>(() <span class="kw">=&gt;</span> <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;2 - afterEach&#39;</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb5-11" title="11">  <span class="at">test</span>(<span class="st">&#39;&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;2 - test&#39;</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb5-12" title="12"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb5-13" title="13"></a>
<a class="sourceLine" id="cb5-14" title="14"><span class="co">// 1 - beforeAll</span></a>
<a class="sourceLine" id="cb5-15" title="15"><span class="co">// 1 - beforeEach</span></a>
<a class="sourceLine" id="cb5-16" title="16"><span class="co">// 1 - test</span></a>
<a class="sourceLine" id="cb5-17" title="17"><span class="co">// 1 - afterEach</span></a>
<a class="sourceLine" id="cb5-18" title="18"><span class="co">// 2 - beforeAll</span></a>
<a class="sourceLine" id="cb5-19" title="19"><span class="co">// 1 - beforeEach</span></a>
<a class="sourceLine" id="cb5-20" title="20"><span class="co">// 2 - beforeEach</span></a>
<a class="sourceLine" id="cb5-21" title="21"><span class="co">// 2 - test</span></a>
<a class="sourceLine" id="cb5-22" title="22"><span class="co">// 2 - afterEach</span></a>
<a class="sourceLine" id="cb5-23" title="23"><span class="co">// 1 - afterEach</span></a>
<a class="sourceLine" id="cb5-24" title="24"><span class="co">// 2 - afterAll</span></a>
<a class="sourceLine" id="cb5-25" title="25"><span class="co">// 1 - afterAll</span></a></code></pre>
    </div>
    <h2 id="order-of-execution-of-describe-and-test-blocks">
      Order of execution of describe and test blocks
    </h2>
    <p>
      Jest executes all describe handlers in a test file <em>before</em> it
      executes any of the actual tests. This is another reason to do setup and
      teardown inside <code>before*</code> and <code>after*</code> handlers
      rather than inside the describe blocks. Once the describe blocks are
      complete, by default Jest runs all the tests serially in the order they
      were encountered in the collection phase, waiting for each to finish and
      be tidied up before moving on.
    </p>
    <p>Consider the following illustrative test file and output:</p>
    <div class="sourceCode" id="cb6">
      <pre
        class="sourceCode js"
      ><code class="sourceCode javascript"><a class="sourceLine" id="cb6-1" title="1"><span class="at">describe</span>(<span class="st">&#39;outer&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb6-2" title="2">  <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;describe outer-a&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-3" title="3"></a>
<a class="sourceLine" id="cb6-4" title="4">  <span class="at">describe</span>(<span class="st">&#39;describe inner 1&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb6-5" title="5">    <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;describe inner 1&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-6" title="6">    <span class="at">test</span>(<span class="st">&#39;test 1&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb6-7" title="7">      <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;test for describe inner 1&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-8" title="8">      <span class="at">expect</span>(<span class="kw">true</span>).<span class="at">toEqual</span>(<span class="kw">true</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-9" title="9">    <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-10" title="10">  <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-11" title="11"></a>
<a class="sourceLine" id="cb6-12" title="12">  <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;describe outer-b&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-13" title="13"></a>
<a class="sourceLine" id="cb6-14" title="14">  <span class="at">test</span>(<span class="st">&#39;test 1&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb6-15" title="15">    <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;test for describe outer&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-16" title="16">    <span class="at">expect</span>(<span class="kw">true</span>).<span class="at">toEqual</span>(<span class="kw">true</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-17" title="17">  <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-18" title="18"></a>
<a class="sourceLine" id="cb6-19" title="19">  <span class="at">describe</span>(<span class="st">&#39;describe inner 2&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb6-20" title="20">    <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;describe inner 2&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-21" title="21">    <span class="at">test</span>(<span class="st">&#39;test for describe inner 2&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb6-22" title="22">      <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;test for describe inner 2&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-23" title="23">      <span class="at">expect</span>(<span class="kw">false</span>).<span class="at">toEqual</span>(<span class="kw">false</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-24" title="24">    <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-25" title="25">  <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-26" title="26"></a>
<a class="sourceLine" id="cb6-27" title="27">  <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;describe outer-c&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-28" title="28"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-29" title="29"></a>
<a class="sourceLine" id="cb6-30" title="30"><span class="co">// describe outer-a</span></a>
<a class="sourceLine" id="cb6-31" title="31"><span class="co">// describe inner 1</span></a>
<a class="sourceLine" id="cb6-32" title="32"><span class="co">// describe outer-b</span></a>
<a class="sourceLine" id="cb6-33" title="33"><span class="co">// describe inner 2</span></a>
<a class="sourceLine" id="cb6-34" title="34"><span class="co">// describe outer-c</span></a>
<a class="sourceLine" id="cb6-35" title="35"><span class="co">// test for describe inner 1</span></a>
<a class="sourceLine" id="cb6-36" title="36"><span class="co">// test for describe outer</span></a>
<a class="sourceLine" id="cb6-37" title="37"><span class="co">// test for describe inner 2</span></a></code></pre>
    </div>
    <h2 id="general-advice">General Advice</h2>
    <p>
      If a test is failing, one of the first things to check should be whether
      the test is failing when it’s the only test that runs. In Jest it’s simple
      to run only one test - just temporarily change that
      <code>test</code> command to a <code>test.only</code>:
    </p>
    <div class="sourceCode" id="cb7">
      <pre
        class="sourceCode js"
      ><code class="sourceCode javascript"><a class="sourceLine" id="cb7-1" title="1"><span class="va">test</span>.<span class="at">only</span>(<span class="st">&#39;this will be the only test that runs&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb7-2" title="2">  <span class="at">expect</span>(<span class="kw">true</span>).<span class="at">toBe</span>(<span class="kw">false</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-3" title="3"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-4" title="4"></a>
<a class="sourceLine" id="cb7-5" title="5"><span class="at">test</span>(<span class="st">&#39;this test will not run&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb7-6" title="6">  <span class="at">expect</span>(<span class="st">&#39;A&#39;</span>).<span class="at">toBe</span>(<span class="st">&#39;A&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-7" title="7"><span class="op">}</span>)<span class="op">;</span></a></code></pre>
    </div>
    <p>
      If you have a test that often fails when it’s run as part of a larger
      suite, but doesn’t fail when you run it alone, it’s a good bet that
      something from a different test is interfering with this one. You can
      often fix this by clearing some shared state with <code>beforeEach</code>.
      If you’re not sure whether some shared state is being modified, you can
      also try a <code>beforeEach</code> that just logs data.
    </p>
  </body>
</html>
