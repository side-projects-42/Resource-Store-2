<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <meta charset="utf-8" />
    <meta name="generator" content="pandoc" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=yes"
    />
    <title>2016-06-22-jest-13</title>
    <style type="text/css">
      code {
        white-space: pre-wrap;
      }
      span.smallcaps {
        font-variant: small-caps;
      }
      span.underline {
        text-decoration: underline;
      }
      div.column {
        display: inline-block;
        vertical-align: top;
        width: 50%;
      }
    </style>
  </head>
  <body>
    <p>
      Today we are happy to announce the next major release of Jest. We have
      made major changes to Jest which are going to benefit you and all of
      Facebook’s JavaScript test infrastructure. Most importantly, we added
      static types to all of Jest’s code during a recent Jest hackathon at
      Facebook. Fifteen people worked for a day and night to add
      <a href="https://flowtype.org/">Flow</a> types to Jest and to add new
      features to Jest. The Flow types serve two purposes: First, we believe
      that code is written to be read. Most of the time, code is written only
      once but read by dozens of people over the course of years. Adding static
      types to the project helps document the code and helps explain some of the
      architecture in Jest. Second, adding static types makes maintenance easier
      and will allow us to more confidently refactor parts of Jest without fear
      of breakages.
    </p>
    <p>
      The Flow project has evolved a lot within Facebook and has been
      successfully adopted across many of our frameworks and almost all of our
      product code. Adoption can be parallelized incredibly well – it can be
      done file-by-file until enough of the codebase is well-typed. Then, Flow
      provides real value and helps guide through large changes. Through this,
      many small edge cases and bugs were found.
    </p>
    <!--truncate-->
    <p>
      With the help of <a href="https://github.com/lerna/lerna">lerna</a>, we
      continued to modularize the Jest project. With just a small
      <a href="https://github.com/lerna/lerna#lernajson"
        >update to the configuration</a
      >, Flow and lerna now get along well with each other. Splitting up Jest
      into packages helped us rethink module boundaries and enabled us to ship
      useful
      <a href="https://github.com/facebook/jest/tree/master/packages"
        >packages</a
      >
      standalone: The <code>jest-runtime</code> and <code>jest-repl</code> cli
      tools now allow you to run scripts in a sandboxed Jest environment,
      enabling you to run and debug your app from the command line. This is
      especially helpful for projects that use Facebook’s
      <code>@providesModule</code> module convention. To get started, just
      install <code>jest-repl</code> and run it in the same folder you normally
      run your tests in! We also published a
      <code>jest-changed-files</code> package that finds changed files in
      version control for either git or hg, a common thing in developer tools.
    </p>
    <h2 id="new-and-improved-features">New and improved features</h2>
    <ul>
      <li>
        Added a notification plugin that shows a test run notification when
        using <code>--notify</code>.
      </li>
      <li>
        Added a <code>browser</code> config option to properly resolve npm
        packages with a browser field in <code>package.json</code> if you are
        writing tests for client side apps.
      </li>
      <li>
        Improved “no tests found message” which will now report which tests were
        found and how they were filtered.
      </li>
      <li>
        Added <code>jest.isMockFunction(jest.fn())</code> to test for mock
        functions.
      </li>
      <li>
        Improved test reporter printing and added a test failure summary when
        running many tests.
      </li>
      <li>
        Added support for mocking virtual modules through
        <code>jest.mock('Module', implementation, {virtual: true})</code>.
      </li>
      <li>
        Removed the <code>.haste_cache</code> folder. Jest now uses the
        operating system’s preferred temporary file location.
      </li>
      <li>Added the duration of individual tests in verbose mode.</li>
      <li>
        Added the ability to record snapshots in Jest. We’ll be publishing a
        separate blog post about this feature soon.
      </li>
    </ul>
    <p>
      Finally, we have received a complete website redesign done by Matthew
      Johnston and added documentation for using
      <a href="https://jestjs.io/docs/tutorial-webpack.html#content"
        >Jest with Webpack</a
      >. Happy Jesting!
    </p>
  </body>
</html>
