<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <meta charset="utf-8" />
    <meta name="generator" content="pandoc" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=yes"
    />
    <title>Testing React Apps</title>
    <style type="text/css">
      code {
        white-space: pre-wrap;
      }
      span.smallcaps {
        font-variant: small-caps;
      }
      span.underline {
        text-decoration: underline;
      }
      div.column {
        display: inline-block;
        vertical-align: top;
        width: 50%;
      }
    </style>
    <style type="text/css">
      a.sourceLine {
        display: inline-block;
        line-height: 1.25;
      }
      a.sourceLine {
        pointer-events: none;
        color: inherit;
        text-decoration: inherit;
      }
      a.sourceLine:empty {
        height: 1.2em;
      }
      .sourceCode {
        overflow: visible;
      }
      code.sourceCode {
        white-space: pre;
        position: relative;
      }
      div.sourceCode {
        margin: 1em 0;
      }
      pre.sourceCode {
        margin: 0;
      }
      @media screen {
        div.sourceCode {
          overflow: auto;
        }
      }
      @media print {
        code.sourceCode {
          white-space: pre-wrap;
        }
        a.sourceLine {
          text-indent: -1em;
          padding-left: 1em;
        }
      }
      pre.numberSource a.sourceLine {
        position: relative;
        left: -4em;
      }
      pre.numberSource a.sourceLine::before {
        content: attr(title);
        position: relative;
        left: -1em;
        text-align: right;
        vertical-align: baseline;
        border: none;
        pointer-events: all;
        display: inline-block;
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        padding: 0 4px;
        width: 4em;
        color: #aaaaaa;
      }
      pre.numberSource {
        margin-left: 3em;
        border-left: 1px solid #aaaaaa;
        padding-left: 4px;
      }
      div.sourceCode {
      }
      @media screen {
        a.sourceLine::before {
          text-decoration: underline;
        }
      }
      code span.al {
        color: #ff0000;
        font-weight: bold;
      } /* Alert */
      code span.an {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* Annotation */
      code span.at {
        color: #7d9029;
      } /* Attribute */
      code span.bn {
        color: #40a070;
      } /* BaseN */
      code span.bu {
      } /* BuiltIn */
      code span.cf {
        color: #007020;
        font-weight: bold;
      } /* ControlFlow */
      code span.ch {
        color: #4070a0;
      } /* Char */
      code span.cn {
        color: #880000;
      } /* Constant */
      code span.co {
        color: #60a0b0;
        font-style: italic;
      } /* Comment */
      code span.cv {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* CommentVar */
      code span.do {
        color: #ba2121;
        font-style: italic;
      } /* Documentation */
      code span.dt {
        color: #902000;
      } /* DataType */
      code span.dv {
        color: #40a070;
      } /* DecVal */
      code span.er {
        color: #ff0000;
        font-weight: bold;
      } /* Error */
      code span.ex {
      } /* Extension */
      code span.fl {
        color: #40a070;
      } /* Float */
      code span.fu {
        color: #06287e;
      } /* Function */
      code span.im {
      } /* Import */
      code span.in {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* Information */
      code span.kw {
        color: #007020;
        font-weight: bold;
      } /* Keyword */
      code span.op {
        color: #666666;
      } /* Operator */
      code span.ot {
        color: #007020;
      } /* Other */
      code span.pp {
        color: #bc7a00;
      } /* Preprocessor */
      code span.sc {
        color: #4070a0;
      } /* SpecialChar */
      code span.ss {
        color: #bb6688;
      } /* SpecialString */
      code span.st {
        color: #4070a0;
      } /* String */
      code span.va {
        color: #19177c;
      } /* Variable */
      code span.vs {
        color: #4070a0;
      } /* VerbatimString */
      code span.wa {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* Warning */
    </style>
  </head>
  <body>
    <header id="title-block-header">
      <h1 class="title">Testing React Apps</h1>
    </header>
    <p>
      At Facebook, we use Jest to test
      <a href="http://facebook.github.io/react/">React</a> applications.
    </p>
    <h2 id="setup">Setup</h2>
    <h3 id="setup-with-create-react-app">Setup with Create React App</h3>
    <p>
      If you are just getting started with React, we recommend using
      <a href="https://github.com/facebookincubator/create-react-app"
        >Create React App</a
      >. It is ready to use and
      <a
        href="https://github.com/facebookincubator/create-react-app/blob/master/packages/react-scripts/template/README.md#running-tests"
        >ships with Jest</a
      >! You will only need to add <code>react-test-renderer</code> for
      rendering snapshots.
    </p>
    <p>Run</p>
    <div class="sourceCode" id="cb1">
      <pre
        class="sourceCode bash"
      ><code class="sourceCode bash"><a class="sourceLine" id="cb1-1" title="1"><span class="ex">yarn</span> add --dev react-test-renderer</a></code></pre>
    </div>
    <h3 id="setup-without-create-react-app">Setup without Create React App</h3>
    <p>
      If you have an existing application you’ll need to install a few packages
      to make everything work well together. We are using the
      <code>babel-jest</code> package and the <code>react</code> babel preset to
      transform our code inside of the test environment. Also see
      <a href="GettingStarted.md#using-babel">using babel</a>.
    </p>
    <p>Run</p>
    <div class="sourceCode" id="cb2">
      <pre
        class="sourceCode bash"
      ><code class="sourceCode bash"><a class="sourceLine" id="cb2-1" title="1"><span class="ex">yarn</span> add --dev jest babel-jest babel-preset-env babel-preset-react react-test-renderer</a></code></pre>
    </div>
    <p>
      Your <code>package.json</code> should look something like this (where
      <code>&lt;current-version&gt;</code> is the actual latest version number
      for the package). Please add the scripts and jest configuration entries:
    </p>
    <div class="sourceCode" id="cb3">
      <pre
        class="sourceCode json"
      ><code class="sourceCode json"><a class="sourceLine" id="cb3-1" title="1"><span class="er">//</span> <span class="er">package.json</span></a>
<a class="sourceLine" id="cb3-2" title="2">  <span class="er">&quot;dependencies&quot;:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb3-3" title="3">    <span class="dt">&quot;react&quot;</span><span class="fu">:</span> <span class="st">&quot;&lt;current-version&gt;&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb3-4" title="4">    <span class="dt">&quot;react-dom&quot;</span><span class="fu">:</span> <span class="st">&quot;&lt;current-version&gt;&quot;</span></a>
<a class="sourceLine" id="cb3-5" title="5">  <span class="fu">}</span><span class="er">,</span></a>
<a class="sourceLine" id="cb3-6" title="6">  <span class="er">&quot;devDependencies&quot;:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb3-7" title="7">    <span class="dt">&quot;babel-jest&quot;</span><span class="fu">:</span> <span class="st">&quot;&lt;current-version&gt;&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb3-8" title="8">    <span class="dt">&quot;babel-preset-env&quot;</span><span class="fu">:</span> <span class="st">&quot;&lt;current-version&gt;&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb3-9" title="9">    <span class="dt">&quot;babel-preset-react&quot;</span><span class="fu">:</span> <span class="st">&quot;&lt;current-version&gt;&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb3-10" title="10">    <span class="dt">&quot;jest&quot;</span><span class="fu">:</span> <span class="st">&quot;&lt;current-version&gt;&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb3-11" title="11">    <span class="dt">&quot;react-test-renderer&quot;</span><span class="fu">:</span> <span class="st">&quot;&lt;current-version&gt;&quot;</span></a>
<a class="sourceLine" id="cb3-12" title="12">  <span class="fu">}</span><span class="er">,</span></a>
<a class="sourceLine" id="cb3-13" title="13">  <span class="er">&quot;scripts&quot;:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb3-14" title="14">    <span class="dt">&quot;test&quot;</span><span class="fu">:</span> <span class="st">&quot;jest&quot;</span></a>
<a class="sourceLine" id="cb3-15" title="15">  <span class="fu">}</span></a></code></pre>
    </div>
    <div class="sourceCode" id="cb4">
      <pre
        class="sourceCode json"
      ><code class="sourceCode json"><a class="sourceLine" id="cb4-1" title="1"><span class="er">//</span> <span class="er">.babelrc</span></a>
<a class="sourceLine" id="cb4-2" title="2"><span class="fu">{</span></a>
<a class="sourceLine" id="cb4-3" title="3">  <span class="dt">&quot;presets&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="st">&quot;env&quot;</span><span class="ot">,</span> <span class="st">&quot;react&quot;</span><span class="ot">]</span></a>
<a class="sourceLine" id="cb4-4" title="4"><span class="fu">}</span></a></code></pre>
    </div>
    <p><strong>And you’re good to go!</strong></p>
    <h3 id="snapshot-testing">Snapshot Testing</h3>
    <p>
      Let’s create a <a href="SnapshotTesting.md">snapshot test</a> for a Link
      component that renders hyperlinks:
    </p>
    <div class="sourceCode" id="cb5">
      <pre
        class="sourceCode javascript"
      ><code class="sourceCode javascript"><a class="sourceLine" id="cb5-1" title="1"><span class="co">// Link.react.js</span></a>
<a class="sourceLine" id="cb5-2" title="2"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb5-3" title="3"></a>
<a class="sourceLine" id="cb5-4" title="4"><span class="kw">const</span> STATUS <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb5-5" title="5">  <span class="dt">HOVERED</span><span class="op">:</span> <span class="st">&#39;hovered&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb5-6" title="6">  <span class="dt">NORMAL</span><span class="op">:</span> <span class="st">&#39;normal&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb5-7" title="7"><span class="op">};</span></a>
<a class="sourceLine" id="cb5-8" title="8"></a>
<a class="sourceLine" id="cb5-9" title="9"><span class="im">export</span> <span class="im">default</span> <span class="kw">class</span> Link <span class="kw">extends</span> <span class="va">React</span>.<span class="at">Component</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb5-10" title="10">  <span class="at">constructor</span>(props) <span class="op">{</span></a>
<a class="sourceLine" id="cb5-11" title="11">    <span class="kw">super</span>(props)<span class="op">;</span></a>
<a class="sourceLine" id="cb5-12" title="12"></a>
<a class="sourceLine" id="cb5-13" title="13">    <span class="kw">this</span>.<span class="at">_onMouseEnter</span> <span class="op">=</span> <span class="kw">this</span>.<span class="va">_onMouseEnter</span>.<span class="at">bind</span>(<span class="kw">this</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb5-14" title="14">    <span class="kw">this</span>.<span class="at">_onMouseLeave</span> <span class="op">=</span> <span class="kw">this</span>.<span class="va">_onMouseLeave</span>.<span class="at">bind</span>(<span class="kw">this</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb5-15" title="15"></a>
<a class="sourceLine" id="cb5-16" title="16">    <span class="kw">this</span>.<span class="at">state</span> <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb5-17" title="17">      <span class="dt">class</span><span class="op">:</span> <span class="va">STATUS</span>.<span class="at">NORMAL</span><span class="op">,</span></a>
<a class="sourceLine" id="cb5-18" title="18">    <span class="op">};</span></a>
<a class="sourceLine" id="cb5-19" title="19">  <span class="op">}</span></a>
<a class="sourceLine" id="cb5-20" title="20"></a>
<a class="sourceLine" id="cb5-21" title="21">  <span class="at">_onMouseEnter</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb5-22" title="22">    <span class="kw">this</span>.<span class="at">setState</span>(<span class="op">{</span><span class="dt">class</span><span class="op">:</span> <span class="va">STATUS</span>.<span class="at">HOVERED</span><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb5-23" title="23">  <span class="op">}</span></a>
<a class="sourceLine" id="cb5-24" title="24"></a>
<a class="sourceLine" id="cb5-25" title="25">  <span class="at">_onMouseLeave</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb5-26" title="26">    <span class="kw">this</span>.<span class="at">setState</span>(<span class="op">{</span><span class="dt">class</span><span class="op">:</span> <span class="va">STATUS</span>.<span class="at">NORMAL</span><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb5-27" title="27">  <span class="op">}</span></a>
<a class="sourceLine" id="cb5-28" title="28"></a>
<a class="sourceLine" id="cb5-29" title="29">  <span class="at">render</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb5-30" title="30">    <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb5-31" title="31">      <span class="op">&lt;</span>a</a>
<a class="sourceLine" id="cb5-32" title="32">        className<span class="op">={</span><span class="kw">this</span>.<span class="va">state</span>.<span class="at">class</span><span class="op">}</span></a>
<a class="sourceLine" id="cb5-33" title="33">        href<span class="op">={</span><span class="kw">this</span>.<span class="va">props</span>.<span class="at">page</span> <span class="op">||</span> <span class="st">&#39;#&#39;</span><span class="op">}</span></a>
<a class="sourceLine" id="cb5-34" title="34">        onMouseEnter<span class="op">={</span><span class="kw">this</span>.<span class="at">_onMouseEnter</span><span class="op">}</span></a>
<a class="sourceLine" id="cb5-35" title="35">        onMouseLeave<span class="op">={</span><span class="kw">this</span>.<span class="at">_onMouseLeave</span><span class="op">}</span></a>
<a class="sourceLine" id="cb5-36" title="36">      <span class="op">&gt;</span></a>
<a class="sourceLine" id="cb5-37" title="37">        <span class="op">{</span><span class="kw">this</span>.<span class="va">props</span>.<span class="at">children</span><span class="op">}</span></a>
<a class="sourceLine" id="cb5-38" title="38">      &lt;/a<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb5-39" title="39">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb5-40" title="40">  <span class="op">}</span></a>
<a class="sourceLine" id="cb5-41" title="41"><span class="op">}</span></a></code></pre>
    </div>
    <p>
      Now let’s use React’s test renderer and Jest’s snapshot feature to
      interact with the component and capture the rendered output and create a
      snapshot file:
    </p>
    <div class="sourceCode" id="cb6">
      <pre
        class="sourceCode javascript"
      ><code class="sourceCode javascript"><a class="sourceLine" id="cb6-1" title="1"><span class="co">// Link.react.test.js</span></a>
<a class="sourceLine" id="cb6-2" title="2"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb6-3" title="3"><span class="im">import</span> Link <span class="im">from</span> <span class="st">&#39;../Link.react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb6-4" title="4"><span class="im">import</span> renderer <span class="im">from</span> <span class="st">&#39;react-test-renderer&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb6-5" title="5"></a>
<a class="sourceLine" id="cb6-6" title="6"><span class="at">test</span>(<span class="st">&#39;Link changes the class when hovered&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb6-7" title="7">  <span class="kw">const</span> component <span class="op">=</span> <span class="va">renderer</span>.<span class="at">create</span>(</a>
<a class="sourceLine" id="cb6-8" title="8">    <span class="op">&lt;</span>Link page<span class="op">=</span><span class="st">&quot;http://www.facebook.com&quot;</span><span class="op">&gt;</span>Facebook&lt;/Link<span class="op">&gt;,</span></a>
<a class="sourceLine" id="cb6-9" title="9">  )<span class="op">;</span></a>
<a class="sourceLine" id="cb6-10" title="10">  <span class="kw">let</span> tree <span class="op">=</span> <span class="va">component</span>.<span class="at">toJSON</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb6-11" title="11">  <span class="at">expect</span>(tree).<span class="at">toMatchSnapshot</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb6-12" title="12"></a>
<a class="sourceLine" id="cb6-13" title="13">  <span class="co">// manually trigger the callback</span></a>
<a class="sourceLine" id="cb6-14" title="14">  <span class="va">tree</span>.<span class="va">props</span>.<span class="at">onMouseEnter</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb6-15" title="15">  <span class="co">// re-rendering</span></a>
<a class="sourceLine" id="cb6-16" title="16">  tree <span class="op">=</span> <span class="va">component</span>.<span class="at">toJSON</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb6-17" title="17">  <span class="at">expect</span>(tree).<span class="at">toMatchSnapshot</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb6-18" title="18"></a>
<a class="sourceLine" id="cb6-19" title="19">  <span class="co">// manually trigger the callback</span></a>
<a class="sourceLine" id="cb6-20" title="20">  <span class="va">tree</span>.<span class="va">props</span>.<span class="at">onMouseLeave</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb6-21" title="21">  <span class="co">// re-rendering</span></a>
<a class="sourceLine" id="cb6-22" title="22">  tree <span class="op">=</span> <span class="va">component</span>.<span class="at">toJSON</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb6-23" title="23">  <span class="at">expect</span>(tree).<span class="at">toMatchSnapshot</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb6-24" title="24"><span class="op">}</span>)<span class="op">;</span></a></code></pre>
    </div>
    <p>
      When you run <code>yarn test</code> or <code>jest</code>, this will
      produce an output file like this:
    </p>
    <div class="sourceCode" id="cb7">
      <pre
        class="sourceCode javascript"
      ><code class="sourceCode javascript"><a class="sourceLine" id="cb7-1" title="1"><span class="co">// __tests__/__snapshots__/Link.react.test.js.snap</span></a>
<a class="sourceLine" id="cb7-2" title="2">exports[<span class="vs">`Link changes the class when hovered 1`</span>] <span class="op">=</span> <span class="vs">`</span></a>
<a class="sourceLine" id="cb7-3" title="3"><span class="vs">&lt;a</span></a>
<a class="sourceLine" id="cb7-4" title="4"><span class="vs">  className=&quot;normal&quot;</span></a>
<a class="sourceLine" id="cb7-5" title="5"><span class="vs">  href=&quot;http://www.facebook.com&quot;</span></a>
<a class="sourceLine" id="cb7-6" title="6"><span class="vs">  onMouseEnter={[Function]}</span></a>
<a class="sourceLine" id="cb7-7" title="7"><span class="vs">  onMouseLeave={[Function]}&gt;</span></a>
<a class="sourceLine" id="cb7-8" title="8"><span class="vs">  Facebook</span></a>
<a class="sourceLine" id="cb7-9" title="9"><span class="vs">&lt;/a&gt;</span></a>
<a class="sourceLine" id="cb7-10" title="10"><span class="vs">`</span><span class="op">;</span></a>
<a class="sourceLine" id="cb7-11" title="11"></a>
<a class="sourceLine" id="cb7-12" title="12">exports[<span class="vs">`Link changes the class when hovered 2`</span>] <span class="op">=</span> <span class="vs">`</span></a>
<a class="sourceLine" id="cb7-13" title="13"><span class="vs">&lt;a</span></a>
<a class="sourceLine" id="cb7-14" title="14"><span class="vs">  className=&quot;hovered&quot;</span></a>
<a class="sourceLine" id="cb7-15" title="15"><span class="vs">  href=&quot;http://www.facebook.com&quot;</span></a>
<a class="sourceLine" id="cb7-16" title="16"><span class="vs">  onMouseEnter={[Function]}</span></a>
<a class="sourceLine" id="cb7-17" title="17"><span class="vs">  onMouseLeave={[Function]}&gt;</span></a>
<a class="sourceLine" id="cb7-18" title="18"><span class="vs">  Facebook</span></a>
<a class="sourceLine" id="cb7-19" title="19"><span class="vs">&lt;/a&gt;</span></a>
<a class="sourceLine" id="cb7-20" title="20"><span class="vs">`</span><span class="op">;</span></a>
<a class="sourceLine" id="cb7-21" title="21"></a>
<a class="sourceLine" id="cb7-22" title="22">exports[<span class="vs">`Link changes the class when hovered 3`</span>] <span class="op">=</span> <span class="vs">`</span></a>
<a class="sourceLine" id="cb7-23" title="23"><span class="vs">&lt;a</span></a>
<a class="sourceLine" id="cb7-24" title="24"><span class="vs">  className=&quot;normal&quot;</span></a>
<a class="sourceLine" id="cb7-25" title="25"><span class="vs">  href=&quot;http://www.facebook.com&quot;</span></a>
<a class="sourceLine" id="cb7-26" title="26"><span class="vs">  onMouseEnter={[Function]}</span></a>
<a class="sourceLine" id="cb7-27" title="27"><span class="vs">  onMouseLeave={[Function]}&gt;</span></a>
<a class="sourceLine" id="cb7-28" title="28"><span class="vs">  Facebook</span></a>
<a class="sourceLine" id="cb7-29" title="29"><span class="vs">&lt;/a&gt;</span></a>
<a class="sourceLine" id="cb7-30" title="30"><span class="vs">`</span><span class="op">;</span></a></code></pre>
    </div>
    <p>
      The next time you run the tests, the rendered output will be compared to
      the previously created snapshot. The snapshot should be committed along
      code changes. When a snapshot test fails, you need to inspect whether it
      is an intended or unintended change. If the change is expected you can
      invoke Jest with <code>jest -u</code> to overwrite the existing snapshot.
    </p>
    <p>
      The code for this example is available at
      <a href="https://github.com/facebook/jest/tree/master/examples/snapshot"
        >examples/snapshot</a
      >.
    </p>
    <h4 id="snapshot-testing-with-mocks-enzyme-and-react-16">
      Snapshot Testing with Mocks, Enzyme and React 16
    </h4>
    <p>
      There’s a caveat around snapshot testing when using Enzyme and React 16+.
      If you mock out a module using the following style:
    </p>
    <div class="sourceCode" id="cb8">
      <pre
        class="sourceCode js"
      ><code class="sourceCode javascript"><a class="sourceLine" id="cb8-1" title="1"><span class="va">jest</span>.<span class="at">mock</span>(<span class="st">&#39;../SomeDirectory/SomeComponent&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> <span class="st">&#39;SomeComponent&#39;</span>)<span class="op">;</span></a></code></pre>
    </div>
    <p>Then you will see warnings in the console:</p>
    <div class="sourceCode" id="cb9">
      <pre
        class="sourceCode bash"
      ><code class="sourceCode bash"><a class="sourceLine" id="cb9-1" title="1"><span class="ex">Warning</span>: <span class="op">&lt;</span>SomeComponent /<span class="op">&gt;</span> is using uppercase HTML. Always use lowercase HTML tags in React.</a>
<a class="sourceLine" id="cb9-2" title="2"></a>
<a class="sourceLine" id="cb9-3" title="3"><span class="co"># Or:</span></a>
<a class="sourceLine" id="cb9-4" title="4"><span class="ex">Warning</span>: The tag <span class="op">&lt;</span>SomeComponent<span class="op">&gt;</span> is unrecognized in this browser. If you meant to render a React component, start its name with an uppercase letter.</a></code></pre>
    </div>
    <p>
      React 16 triggers these warnings due to how it checks element types, and
      the mocked module fails these checks. Your options are:
    </p>
    <ol type="1">
      <li>
        <p>
          Render as text. This way you won’t see the props passed to the mock
          component in the snapshot, but it’s straightforward:
        </p>
        <div class="sourceCode" id="cb10">
          <pre
            class="sourceCode js"
          ><code class="sourceCode javascript"><a class="sourceLine" id="cb10-1" title="1"><span class="va">jest</span>.<span class="at">mock</span>(<span class="st">&#39;./SomeComponent&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> () <span class="kw">=&gt;</span> <span class="st">&#39;SomeComponent&#39;</span>)<span class="op">;</span></a></code></pre>
        </div>
      </li>
      <li>
        <p>
          Render as a custom element. DOM “custom elements” aren’t checked for
          anything and shouldn’t fire warnings. They are lowercase and have a
          dash in the name.
        </p>
        <div class="sourceCode" id="cb11">
          <pre
            class="sourceCode js"
          ><code class="sourceCode javascript"><a class="sourceLine" id="cb11-1" title="1"><span class="va">jest</span>.<span class="at">mock</span>(<span class="st">&#39;./Widget&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> <span class="st">&#39;mock-widget&#39;</span>)<span class="op">;</span></a></code></pre>
        </div>
      </li>
      <li>
        Use <code>react-test-renderer</code>. The test renderer doesn’t care
        about element types and will happily accept
        e.g. <code>SomeComponent</code>. You could check snapshots using the
        test renderer, and check component behavior separately using Enzyme.
      </li>
      <li>
        <p>
          Disable warnings all together (should be done in your jest setup
          file):
        </p>
        <div class="sourceCode" id="cb12">
          <pre
            class="sourceCode js"
          ><code class="sourceCode javascript"><a class="sourceLine" id="cb12-1" title="1"><span class="va">jest</span>.<span class="at">mock</span>(<span class="st">&#39;fbjs/lib/warning&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> <span class="at">require</span>(<span class="st">&#39;fbjs/lib/emptyFunction&#39;</span>))<span class="op">;</span></a></code></pre>
        </div>
        <p>
          This shouldn’t normally be your option of choice as useful warnings
          could be lost. However, in some cases, for example when testing
          react-native’s components we are rendering react-native tags into the
          DOM and many warnings are irrelevant. Another option is to swizzling
          console.warn and supress specific warnings.
        </p>
      </li>
    </ol>
    <h3 id="dom-testing">DOM Testing</h3>
    <p>
      If you’d like to assert, and manipulate your rendered components you can
      use <a href="http://airbnb.io/enzyme/">Enzyme</a> or React’s
      <a href="http://facebook.github.io/react/docs/test-utils.html"
        >TestUtils</a
      >. We use Enzyme for this example.
    </p>
    <p>
      You have to run <code>yarn add --dev enzyme</code> to use Enzyme. If you
      are using a React version below 15.5.0, you will also need to install
      <code>react-addons-test-utils</code>.
    </p>
    <p>Let’s implement a simple checkbox which swaps between two labels:</p>
    <div class="sourceCode" id="cb13">
      <pre
        class="sourceCode javascript"
      ><code class="sourceCode javascript"><a class="sourceLine" id="cb13-1" title="1"><span class="co">// CheckboxWithLabel.js</span></a>
<a class="sourceLine" id="cb13-2" title="2"></a>
<a class="sourceLine" id="cb13-3" title="3"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb13-4" title="4"></a>
<a class="sourceLine" id="cb13-5" title="5"><span class="im">export</span> <span class="im">default</span> <span class="kw">class</span> CheckboxWithLabel <span class="kw">extends</span> <span class="va">React</span>.<span class="at">Component</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb13-6" title="6">  <span class="at">constructor</span>(props) <span class="op">{</span></a>
<a class="sourceLine" id="cb13-7" title="7">    <span class="kw">super</span>(props)<span class="op">;</span></a>
<a class="sourceLine" id="cb13-8" title="8">    <span class="kw">this</span>.<span class="at">state</span> <span class="op">=</span> <span class="op">{</span><span class="dt">isChecked</span><span class="op">:</span> <span class="kw">false</span><span class="op">};</span></a>
<a class="sourceLine" id="cb13-9" title="9"></a>
<a class="sourceLine" id="cb13-10" title="10">    <span class="co">// bind manually because React class components don&#39;t auto-bind</span></a>
<a class="sourceLine" id="cb13-11" title="11">    <span class="co">// http://facebook.github.io/react/blog/2015/01/27/react-v0.13.0-beta-1.html#autobinding</span></a>
<a class="sourceLine" id="cb13-12" title="12">    <span class="kw">this</span>.<span class="at">onChange</span> <span class="op">=</span> <span class="kw">this</span>.<span class="va">onChange</span>.<span class="at">bind</span>(<span class="kw">this</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb13-13" title="13">  <span class="op">}</span></a>
<a class="sourceLine" id="cb13-14" title="14"></a>
<a class="sourceLine" id="cb13-15" title="15">  <span class="at">onChange</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb13-16" title="16">    <span class="kw">this</span>.<span class="at">setState</span>(<span class="op">{</span><span class="dt">isChecked</span><span class="op">:</span> <span class="op">!</span><span class="kw">this</span>.<span class="va">state</span>.<span class="at">isChecked</span><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb13-17" title="17">  <span class="op">}</span></a>
<a class="sourceLine" id="cb13-18" title="18"></a>
<a class="sourceLine" id="cb13-19" title="19">  <span class="at">render</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb13-20" title="20">    <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb13-21" title="21">      <span class="op">&lt;</span>label<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb13-22" title="22">        <span class="op">&lt;</span>input</a>
<a class="sourceLine" id="cb13-23" title="23">          type<span class="op">=</span><span class="st">&quot;checkbox&quot;</span></a>
<a class="sourceLine" id="cb13-24" title="24">          checked<span class="op">={</span><span class="kw">this</span>.<span class="va">state</span>.<span class="at">isChecked</span><span class="op">}</span></a>
<a class="sourceLine" id="cb13-25" title="25">          onChange<span class="op">={</span><span class="kw">this</span>.<span class="at">onChange</span><span class="op">}</span></a>
<a class="sourceLine" id="cb13-26" title="26">        /&gt;</a>
<a class="sourceLine" id="cb13-27" title="27">        <span class="op">{</span><span class="kw">this</span>.<span class="va">state</span>.<span class="at">isChecked</span> <span class="op">?</span> <span class="kw">this</span>.<span class="va">props</span>.<span class="at">labelOn</span> : <span class="kw">this</span>.<span class="va">props</span>.<span class="at">labelOff</span><span class="op">}</span></a>
<a class="sourceLine" id="cb13-28" title="28">      &lt;/label<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb13-29" title="29">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb13-30" title="30">  <span class="op">}</span></a>
<a class="sourceLine" id="cb13-31" title="31"><span class="op">}</span></a></code></pre>
    </div>
    <p>
      We use Enzyme’s
      <a href="http://airbnb.io/enzyme/docs/api/shallow.html"
        >shallow renderer</a
      >
      in this example.
    </p>
    <div class="sourceCode" id="cb14">
      <pre
        class="sourceCode javascript"
      ><code class="sourceCode javascript"><a class="sourceLine" id="cb14-1" title="1"><span class="co">// __tests__/CheckboxWithLabel-test.js</span></a>
<a class="sourceLine" id="cb14-2" title="2"></a>
<a class="sourceLine" id="cb14-3" title="3"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb14-4" title="4"><span class="im">import</span> <span class="op">{</span>shallow<span class="op">}</span> <span class="im">from</span> <span class="st">&#39;enzyme&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb14-5" title="5"><span class="im">import</span> CheckboxWithLabel <span class="im">from</span> <span class="st">&#39;../CheckboxWithLabel&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb14-6" title="6"></a>
<a class="sourceLine" id="cb14-7" title="7"><span class="at">test</span>(<span class="st">&#39;CheckboxWithLabel changes the text after click&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb14-8" title="8">  <span class="co">// Render a checkbox with label in the document</span></a>
<a class="sourceLine" id="cb14-9" title="9">  <span class="kw">const</span> checkbox <span class="op">=</span> <span class="at">shallow</span>(<span class="op">&lt;</span>CheckboxWithLabel labelOn<span class="op">=</span><span class="st">&quot;On&quot;</span> labelOff<span class="op">=</span><span class="st">&quot;Off&quot;</span> /&gt;)<span class="op">;</span></a>
<a class="sourceLine" id="cb14-10" title="10"></a>
<a class="sourceLine" id="cb14-11" title="11">  <span class="at">expect</span>(<span class="va">checkbox</span>.<span class="at">text</span>()).<span class="at">toEqual</span>(<span class="st">&#39;Off&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb14-12" title="12"></a>
<a class="sourceLine" id="cb14-13" title="13">  <span class="va">checkbox</span>.<span class="at">find</span>(<span class="st">&#39;input&#39;</span>).<span class="at">simulate</span>(<span class="st">&#39;change&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb14-14" title="14"></a>
<a class="sourceLine" id="cb14-15" title="15">  <span class="at">expect</span>(<span class="va">checkbox</span>.<span class="at">text</span>()).<span class="at">toEqual</span>(<span class="st">&#39;On&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb14-16" title="16"><span class="op">}</span>)<span class="op">;</span></a></code></pre>
    </div>
    <p>
      The code for this example is available at
      <a href="https://github.com/facebook/jest/tree/master/examples/enzyme"
        >examples/enzyme</a
      >.
    </p>
    <h3 id="custom-transformers">Custom transformers</h3>
    <p>
      If you need more advanced functionality, you can also build your own
      transformer. Instead of using babel-jest, here is an example of using
      babel:
    </p>
    <div class="sourceCode" id="cb15">
      <pre
        class="sourceCode javascript"
      ><code class="sourceCode javascript"><a class="sourceLine" id="cb15-1" title="1"><span class="co">// custom-transformer.js</span></a>
<a class="sourceLine" id="cb15-2" title="2"><span class="st">&#39;use strict&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb15-3" title="3"></a>
<a class="sourceLine" id="cb15-4" title="4"><span class="kw">const</span> babel <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;babel-core&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb15-5" title="5"><span class="kw">const</span> jestPreset <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;babel-preset-jest&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb15-6" title="6"></a>
<a class="sourceLine" id="cb15-7" title="7"><span class="va">module</span>.<span class="at">exports</span> <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb15-8" title="8">  <span class="at">process</span>(src<span class="op">,</span> filename) <span class="op">{</span></a>
<a class="sourceLine" id="cb15-9" title="9">    <span class="cf">if</span> (<span class="va">babel</span>.<span class="va">util</span>.<span class="at">canCompile</span>(filename)) <span class="op">{</span></a>
<a class="sourceLine" id="cb15-10" title="10">      <span class="cf">return</span> <span class="va">babel</span>.<span class="at">transform</span>(src<span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb15-11" title="11">        filename<span class="op">,</span></a>
<a class="sourceLine" id="cb15-12" title="12">        <span class="dt">presets</span><span class="op">:</span> [jestPreset]<span class="op">,</span></a>
<a class="sourceLine" id="cb15-13" title="13">      <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb15-14" title="14">    <span class="op">}</span></a>
<a class="sourceLine" id="cb15-15" title="15">    <span class="cf">return</span> src<span class="op">;</span></a>
<a class="sourceLine" id="cb15-16" title="16">  <span class="op">},</span></a>
<a class="sourceLine" id="cb15-17" title="17"><span class="op">};</span></a></code></pre>
    </div>
    <p>
      Don’t forget to install the <code>babel-core</code> and
      <code>babel-preset-jest</code> packages for this example to work.
    </p>
    <p>
      To make this work with Jest you need to update your Jest configuration
      with this:
      <code>"transform": {"\\.js$": "path/to/custom-transformer.js"}</code>.
    </p>
    <p>
      If you’d like to build a transformer with babel support, you can also use
      babel-jest to compose one and pass in your custom configuration options:
    </p>
    <div class="sourceCode" id="cb16">
      <pre
        class="sourceCode javascript"
      ><code class="sourceCode javascript"><a class="sourceLine" id="cb16-1" title="1"><span class="kw">const</span> babelJest <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;babel-jest&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb16-2" title="2"></a>
<a class="sourceLine" id="cb16-3" title="3"><span class="va">module</span>.<span class="at">exports</span> <span class="op">=</span> <span class="va">babelJest</span>.<span class="at">createTransformer</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb16-4" title="4">  <span class="dt">presets</span><span class="op">:</span> [<span class="st">&#39;my-custom-preset&#39;</span>]<span class="op">,</span></a>
<a class="sourceLine" id="cb16-5" title="5"><span class="op">}</span>)<span class="op">;</span></a></code></pre>
    </div>
  </body>
</html>
