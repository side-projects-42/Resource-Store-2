<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>README</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<h1 id="universal-language-selector-jquery-library">Universal Language Selector jQuery library</h1>
<p><a href="https://github.com/wikimedia/jquery.uls/actions/workflows/node-test.yml"><img src="https://github.com/wikimedia/jquery.uls/actions/workflows/node-test.yml/badge.svg" alt="Test status" /></a> <a href="https://github.com/wikimedia/jquery.uls/actions/workflows/node-lint.yml"><img src="https://github.com/wikimedia/jquery.uls/actions/workflows/node-lint.yml/badge.svg" alt="Lint status" /></a></p>
<p>This is a <a href="https://www.mediawiki.org/wiki/Project_Milkshake">Wikimedia Foundation project</a>.</p>
<figure>
<img src="https://upload.wikimedia.org/wikipedia/commons/a/a1/UniversalLanguageSelector-Compact.png" title="Universal Language Selector" alt="Universal Language Selector" /><figcaption>Universal Language Selector</figcaption>
</figure>
<h2 id="quick-start">Quick start</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb1-1" title="1"><span class="fu">git</span> clone https://github.com/wikimedia/jquery.uls.git</a></code></pre></div>
<h2 id="documentation">Documentation</h2>
<p>The quick and easy way to learn usage of jquery.uls is trying out the examples/index.html in webserver. Try it online at http://thottingal.in/projects/js/jquery.uls/examples/</p>
<p>The jquery.uls provides a jQuery extension <code>$.fn.uls</code> that can be attached to a trigger element. When you click on the trigger element, the language selector is shown.</p>
<p>The trigger can be a link, button or any valid jQuery element.</p>
<p>Example:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1"><span class="at">$</span>(<span class="st">&quot;.uls-trigger&quot;</span>).<span class="at">uls</span>()<span class="op">;</span></a></code></pre></div>
<p>To use the selected language, you need define a selection handler:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="at">$</span>(<span class="st">&quot;.uls-trigger&quot;</span>).<span class="at">uls</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb3-2" title="2">  <span class="dt">onSelect</span><span class="op">:</span> <span class="kw">function</span> (language) <span class="op">{</span></a>
<a class="sourceLine" id="cb3-3" title="3">    <span class="co">// language is a IETF language tag in lowercase, for example: en, fi, ku-latn</span></a>
<a class="sourceLine" id="cb3-4" title="4">    <span class="co">// Your selection handler code goes here.</span></a>
<a class="sourceLine" id="cb3-5" title="5">  <span class="op">},</span></a>
<a class="sourceLine" id="cb3-6" title="6"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>You can provide a quick list of likely useful languages, for example based on Geo IP or recently selected languages:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1"><span class="at">$</span>( <span class="st">&#39;.uls-trigger&#39;</span> ).<span class="at">uls</span>( <span class="op">{</span></a>
<a class="sourceLine" id="cb4-2" title="2">  <span class="dt">onSelect</span><span class="op">:</span> <span class="kw">function</span>( language ) <span class="op">{</span> ... <span class="op">},</span></a>
<a class="sourceLine" id="cb4-3" title="3">  <span class="dt">quickList</span><span class="op">:</span> [ <span class="st">&#39;en&#39;</span><span class="op">,</span> <span class="st">&#39;ml&#39;</span><span class="op">,</span> <span class="st">&#39;hi&#39;</span> ] <span class="co">// Can be a function returning an array too.</span></a>
<a class="sourceLine" id="cb4-4" title="4"><span class="op">}</span> )<span class="op">;</span></a></code></pre></div>
<p>jquery.uls knows about 500 languages. You can specify a subset of those languages:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb5-1" title="1"><span class="at">$</span>( <span class="st">&#39;.uls-trigger&#39;</span> ).<span class="at">uls</span>( <span class="op">{</span></a>
<a class="sourceLine" id="cb5-2" title="2">  <span class="dt">onSelect</span><span class="op">:</span> <span class="kw">function</span>( language ) <span class="op">{</span> ... <span class="op">},</span></a>
<a class="sourceLine" id="cb5-3" title="3">  <span class="dt">languages</span><span class="op">:</span> <span class="op">{</span> <span class="dt">languageCode1</span><span class="op">:</span> languageName<span class="op">,</span> <span class="dt">languageCode2</span><span class="op">:</span> languageName2<span class="op">,</span> .... <span class="op">},</span></a>
<a class="sourceLine" id="cb5-4" title="4"><span class="op">}</span> )<span class="op">;</span></a></code></pre></div>
<p><em>All options</em></p>
<table>
<colgroup>
<col style="width: 5%" />
<col style="width: 94%" />
</colgroup>
<thead>
<tr class="header">
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>left</td>
<td>DEPRECATED: use onPosition</td>
</tr>
<tr class="even">
<td>top</td>
<td>DEPRECATED: use onPosition</td>
</tr>
<tr class="odd">
<td>onSelect</td>
<td>Callback function when user selects a language.</td>
</tr>
<tr class="even">
<td>onCancel</td>
<td>Callback function when the dialog is closed without selecting a language.</td>
</tr>
<tr class="odd">
<td>onReady</td>
<td>Callback function when ULS has initialized.</td>
</tr>
<tr class="even">
<td>onVisible</td>
<td>Callback function when ULS dialog is shown.</td>
</tr>
<tr class="odd">
<td>onPosition</td>
<td>Callback for positioning the dialog. It should return an object with any of the keys <code>top</code>, <code>right</code>, <code>bottom</code> and <code>left</code>.</td>
</tr>
<tr class="even">
<td>languages</td>
<td>List of selectable languages. Defaults to all known languages.</td>
</tr>
<tr class="odd">
<td>menuWidth</td>
<td>Override the automatic choice of menu width. One of narrow, medium, wide (1, 2, 4 columns respectively).</td>
</tr>
<tr class="even">
<td>ulsPurpose</td>
<td>A string that will identify this instance of ULS. Itâ€™s useful if you have several instances of ULS in your web application and you want to have a unique identifier for each of them.</td>
</tr>
<tr class="odd">
<td>quicklist</td>
<td>List of suggested languages. Defaults to empty list.</td>
</tr>
<tr class="even">
<td>showRegions</td>
<td>Regions to be shown in the language selector. Defaults to [ WW, AM, EU, ME, AF, AS, PA ]</td>
</tr>
<tr class="odd">
<td>languageDecorator</td>
<td>Callback function to be called when a language link is prepared - for custom decoration. Arguments: (a) the $language - the language link jQuery object (b) languageCode. The function can do any styling, changing properties etc on the passed link. See examples/decorator.html for example usage.</td>
</tr>
<tr class="even">
<td>noResultsTemplate</td>
<td>A jQuery object or a function that returns a jQuery object. This will be used as the template to display when no results found from the search. The function will receive the current search query as argument</td>
</tr>
<tr class="odd">
<td>itemsPerColumn</td>
<td>Number of languages per column. Default is 8</td>
</tr>
<tr class="even">
<td>groupByRegion</td>
<td>Whether to group languages by the regions: true of false. Default value depends on the menu width.</td>
</tr>
<tr class="odd">
<td>searchAPI</td>
<td>API URL. Parameter query with the user query is appened to it.</td>
</tr>
</tbody>
</table>
<h2 id="features">Features</h2>
<p>jquery.uls has an elaborative language information collection and it is based on https://github.com/wikimedia/language-data.git. It knows about</p>
<ol type="1">
<li>The script in which a language is written.</li>
<li>The script code</li>
<li>The language code</li>
<li>The regions in which the language is spoken</li>
<li>The autonym - language name written in its own script</li>
<li>The directionality of the text</li>
</ol>
<p>With all these information the search becomes very effective. An advanced usage of jquery.uls can be tried out from Wikimedia sites. For example, see the language icon at the top of https://mediawiki.org or the cog icon near to the languages list in Wikipedia in any language.</p>
<h2 id="more-details">More details</h2>
<ul>
<li>Technical design - https://www.mediawiki.org/wiki/Universal_Language_Selector/Design</li>
<li>UX Design https://www.mediawiki.org/wiki/Universal_Language_Selector/Design</li>
</ul>
<h2 id="how-to-build-and-test-jquery.uls">How to build and test jquery.uls</h2>
<p>First, get a copy of the git repo by running:</p>
<pre class="shell"><code>git clone git://github.com/wikimedia/jquery.uls.git</code></pre>
<p>Make sure you have <code>grunt</code> installed by testing:</p>
<pre class="shell"><code>grunt -version</code></pre>
<p>If not, run:</p>
<pre class="shell"><code>npm install</code></pre>
<p>To run tests locally, run <code>grunt test</code>. This will run the tests in PhantomJS.</p>
<p>You can also run the tests in a browser by navigating to the <code>test/</code> directory, but first run <code>grunt</code> to install the submodules.</p>
<h2 id="updating-language-data">Updating language-data</h2>
<p>From the main repo directory, run:</p>
<pre class="shell"><code>./scripts/fetch-language-data.sh</code></pre>
<h2 id="coding-style">Coding style</h2>
<p>Please follow <a href="https://www.mediawiki.org/wiki/Manual:Coding_conventions/JavaScript">MediaWiki coding conventions</a></p>
</body>
</html>
