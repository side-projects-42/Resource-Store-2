<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>events</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<h1 id="events">Events</h1>
<p>This plugin currently supports the following label events:</p>
<table>
<thead>
<tr class="header">
<th><strong>Name</strong></th>
<th><strong>Chart events<sup>1</sup></strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>enter</code></td>
<td><code>mousemove</code></td>
<td>the mouse is moved over a label</td>
</tr>
<tr class="even">
<td><code>leave</code></td>
<td><code>mousemove</code></td>
<td>the mouse is moved out of a label</td>
</tr>
<tr class="odd">
<td><code>click</code></td>
<td><code>click</code></td>
<td>the mouse’s primary button is pressed and released on a label</td>
</tr>
</tbody>
</table>
<div class="tip">
<p><sup>1</sup> <a href="http://www.chartjs.org/docs/latest/general/interactions/events.html">Chart.js events</a> that need to be enabled in order to get the associated label event working. Note that by default Chart.js enables <code>"mousemove", "mouseout", "click", "touchstart", "touchmove", "touchend"</code>, meaning that label events work out-of-the-box.</p>
</div>
<h2 id="listeners">Listeners</h2>
<p>The <code>listeners</code> option allows to register callbacks to be notified when an event is detected on a specific label. This option is an object where each property represents an event, the key being the type of the event to listen and the value being a callback accepting a unique <code>context</code> argument.</p>
<p>The <code>context</code> contains the same information as for <a href="options.md#option-context">scriptable options</a>, can be modified (e.g. add new properties) and thus, <strong>if the callback explicitly returns <code>true</code></strong>, the label is updated with the new context and the chart re-rendered. This allows to implement visual interactions with labels such as highlight, selection, etc.</p>
<p>Listeners can be registered for any label (<code>options.plugin.datalabels.listener.*</code>) or for labels of a specific dataset (<code>dataset.datalabels.listeners.*</code>).</p>
<div class="tip">
<p>If no listener is registered, incoming events are immediately ignored, preventing extra computation such as intersecting label bounding box. That means there should be no performance penalty for configurations that don’t use events.</p>
</div>
<h2 id="example">Example</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb1-1" title="1"><span class="op">{</span></a>
<a class="sourceLine" id="cb1-2" title="2">  <span class="dt">data</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb1-3" title="3">    <span class="dt">datasets</span><span class="op">:</span> [<span class="op">{</span></a>
<a class="sourceLine" id="cb1-4" title="4">      <span class="dt">datalabels</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb1-5" title="5">        <span class="dt">listeners</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb1-6" title="6">          <span class="dt">click</span><span class="op">:</span> <span class="kw">function</span>(context) <span class="op">{</span></a>
<a class="sourceLine" id="cb1-7" title="7">            <span class="co">// Receives `click` events only for labels of the first dataset.</span></a>
<a class="sourceLine" id="cb1-8" title="8">            <span class="co">// The clicked label index is available in `context.dataIndex`.</span></a>
<a class="sourceLine" id="cb1-9" title="9">            <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;label &#39;</span> <span class="op">+</span> <span class="va">context</span>.<span class="at">dataIndex</span> <span class="op">+</span> <span class="st">&#39; has been clicked!&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-10" title="10">          <span class="op">}</span></a>
<a class="sourceLine" id="cb1-11" title="11">        <span class="op">}</span></a>
<a class="sourceLine" id="cb1-12" title="12">      <span class="op">}</span></a>
<a class="sourceLine" id="cb1-13" title="13">    <span class="op">},</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb1-14" title="14">        <span class="co">//...</span></a>
<a class="sourceLine" id="cb1-15" title="15">    <span class="op">}</span>]</a>
<a class="sourceLine" id="cb1-16" title="16">  <span class="op">},</span></a>
<a class="sourceLine" id="cb1-17" title="17">  <span class="dt">options</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb1-18" title="18">    <span class="dt">plugins</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb1-19" title="19">      <span class="dt">datalabels</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb1-20" title="20">        <span class="dt">listeners</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb1-21" title="21">          <span class="dt">enter</span><span class="op">:</span> <span class="kw">function</span>(context) <span class="op">{</span></a>
<a class="sourceLine" id="cb1-22" title="22">            <span class="co">// Receives `enter` events for any labels of any dataset. Indices of the</span></a>
<a class="sourceLine" id="cb1-23" title="23">            <span class="co">// clicked label are: `context.datasetIndex` and `context.dataIndex`.</span></a>
<a class="sourceLine" id="cb1-24" title="24">            <span class="co">// For example, we can modify keep track of the hovered state and</span></a>
<a class="sourceLine" id="cb1-25" title="25">            <span class="co">// return `true` to update the label and re-render the chart.</span></a>
<a class="sourceLine" id="cb1-26" title="26">            <span class="va">context</span>.<span class="at">hovered</span> <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></a>
<a class="sourceLine" id="cb1-27" title="27">            <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></a>
<a class="sourceLine" id="cb1-28" title="28">          <span class="op">},</span></a>
<a class="sourceLine" id="cb1-29" title="29">          <span class="dt">leave</span><span class="op">:</span> <span class="kw">function</span>(context) <span class="op">{</span></a>
<a class="sourceLine" id="cb1-30" title="30">            <span class="co">// Receives `leave` events for any labels of any dataset.</span></a>
<a class="sourceLine" id="cb1-31" title="31">            <span class="va">context</span>.<span class="at">hovered</span> <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></a>
<a class="sourceLine" id="cb1-32" title="32">            <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></a>
<a class="sourceLine" id="cb1-33" title="33">          <span class="op">}</span></a>
<a class="sourceLine" id="cb1-34" title="34">        <span class="op">},</span></a>
<a class="sourceLine" id="cb1-35" title="35">        <span class="dt">color</span><span class="op">:</span> <span class="kw">function</span>(context) <span class="op">{</span></a>
<a class="sourceLine" id="cb1-36" title="36">          <span class="co">// Change the label text color based on our new `hovered` context value.</span></a>
<a class="sourceLine" id="cb1-37" title="37">          <span class="cf">return</span> <span class="va">context</span>.<span class="at">hovered</span> <span class="op">?</span> <span class="st">&quot;blue&quot;</span> : <span class="st">&quot;gray&quot;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb1-38" title="38">        <span class="op">}</span></a>
<a class="sourceLine" id="cb1-39" title="39">      <span class="op">}</span></a>
<a class="sourceLine" id="cb1-40" title="40">    <span class="op">}</span></a>
<a class="sourceLine" id="cb1-41" title="41">  <span class="op">}</span></a>
<a class="sourceLine" id="cb1-42" title="42"><span class="op">}</span></a></code></pre></div>
</body>
</html>
